"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9033],{7013:(e,t,a)=>{a.d(t,{JW:()=>d,M$:()=>m,Ok:()=>u});var n=a(19749),i=a(7675),s=a(74889),l=a(35349),r=a(46278),o=a(29724),c=a(69554);function d(){let e,t,a=(0,n.c)(4),c=(0,r.jE)(),d=(0,o.Xr)(l.Q);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s.S.SETTINGS.GettingStarted.key],a[0]=e):e=a[0],a[1]!==c||a[2]!==d?(t={endpoint:s.S.SETTINGS.GettingStarted.endpoint,method:s.S.SETTINGS.GettingStarted.methods[0],mutationKey:e,onSuccess:async()=>{await c.invalidateQueries({queryKey:[s.S.SETTINGS.GetSettings.key]}),await c.invalidateQueries({queryKey:[s.S.STATUS.GetStatus.key]}),d(!0)}},a[1]=c,a[2]=d,a[3]=t):t=a[3],(0,i.qk)(t)}function u(){let e,t,a=(0,n.c)(3),l=(0,r.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s.S.SETTINGS.SaveSettings.key],a[0]=e):e=a[0],a[1]!==l?(t={endpoint:s.S.SETTINGS.SaveSettings.endpoint,method:s.S.SETTINGS.SaveSettings.methods[0],mutationKey:e,onSuccess:async()=>{await l.invalidateQueries({queryKey:[s.S.SETTINGS.GetSettings.key]}),await l.invalidateQueries({queryKey:[s.S.STATUS.GetStatus.key]}),c.oR.success("Settings saved")}},a[1]=l,a[2]=t):t=a[2],(0,i.qk)(t)}function m(){let e,t,a=(0,n.c)(3),l=(0,r.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s.S.SETTINGS.SaveAutoDownloaderSettings.key],a[0]=e):e=a[0],a[1]!==l?(t={endpoint:s.S.SETTINGS.SaveAutoDownloaderSettings.endpoint,method:s.S.SETTINGS.SaveAutoDownloaderSettings.methods[0],mutationKey:e,onSuccess:async()=>{await l.invalidateQueries({queryKey:[s.S.SETTINGS.GetSettings.key]}),await l.invalidateQueries({queryKey:[s.S.STATUS.GetStatus.key]}),c.oR.success("Settings saved")}},a[1]=l,a[2]=t):t=a[2],(0,i.qk)(t)}},15044:(e,t,a)=>{a.d(t,{Gd:()=>r,Gm:()=>c,H2:()=>o});var n=a(19749),i=a(7675),s=a(74889),l=a(46278);function r(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:s.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.endpoint,method:s.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.methods[0],queryKey:[s.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key],enabled:!0},t[0]=e):e=t[0],(0,i.fl)(e)}function o(){let e,t,a=(0,n.c)(3),r=(0,l.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s.S.LIBRARY_EXPLORER.RefreshLibraryExplorerFileTree.key],a[0]=e):e=a[0],a[1]!==r?(t={endpoint:s.S.LIBRARY_EXPLORER.RefreshLibraryExplorerFileTree.endpoint,method:s.S.LIBRARY_EXPLORER.RefreshLibraryExplorerFileTree.methods[0],mutationKey:e,onSuccess:async()=>{r.invalidateQueries({queryKey:[s.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key]})}},a[1]=r,a[2]=t):t=a[2],(0,i.qk)(t)}function c(){let e,t,a=(0,n.c)(3),r=(0,l.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s.S.LOCALFILES.SuperUpdateLocalFiles.key],a[0]=e):e=a[0],a[1]!==r?(t={endpoint:s.S.LOCALFILES.SuperUpdateLocalFiles.endpoint,method:s.S.LOCALFILES.SuperUpdateLocalFiles.methods[0],mutationKey:e,onSuccess:async()=>{r.invalidateQueries({queryKey:[s.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key]})}},a[1]=r,a[2]=t):t=a[2],(0,i.qk)(t)}},29648:(e,t,a)=>{a.d(t,{U6:()=>E,gw:()=>w,ho:()=>N});var n=a(95155),i=a(19749),s=a(7675),l=a(74889),r=a(15044),o=a(46278),c=a(69554),d=a(48555),u=a(83563),m=a(96826),h=a(24038),p=a(244),f=a(84127),g=a(76049),x=a(57073),y=a(60695),S=a(73832),v=a(42500),b=a(29724),j=a(12115),k=a(75780);let N=(0,v.eU)(!1),w=(0,v.eU)(!1);function E(){var e,t,a,v,E;let T,R,_,A,G,F,K,O,q,P,U,D,Q,$,B,V,X,z,M,Y,Z,W,H,J,ee,et=(0,i.c)(65),ea=(0,m.v1)(),[en,ei]=(0,b.fp)(N),[,es]=(0,b.fp)(w),[el]=(0,b.fp)(d.Qy),er=(0,S.C)(!0),eo=(0,S.C)(!0),ec=(0,S.C)(!0);et[0]!==ei?(T=()=>{ei(!1)},et[0]=ei,et[1]=T):T=et[1];let{mutate:ed,isPending:eu}=function(e){let t,a,n=(0,i.c)(5),d=(0,o.jE)(),{mutate:u}=(0,r.H2)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=[l.S.SCAN.ScanLocalFiles.key],n[0]=t):t=n[0],n[1]!==e||n[2]!==d||n[3]!==u?(a={endpoint:l.S.SCAN.ScanLocalFiles.endpoint,method:l.S.SCAN.ScanLocalFiles.methods[0],mutationKey:t,onSuccess:async()=>{await d.invalidateQueries({queryKey:[l.S.ANIME_COLLECTION.GetLibraryCollection.key]}),c.oR.success("Library scanned"),u(),await d.invalidateQueries({queryKey:[l.S.ANIME_ENTRIES.GetMissingEpisodes.key]}),await d.invalidateQueries({queryKey:[l.S.AUTO_DOWNLOADER.GetAutoDownloaderItems.key]}),await d.invalidateQueries({queryKey:[l.S.ANIME_ENTRIES.GetAnimeEntry.key]}),null==e||e()}},n[1]=e,n[2]=d,n[3]=u,n[4]=a):a=n[4],(0,s.qk)(a)}(T);et[2]!==er||et[3]!==(null==el?void 0:el.length)?(R=()=>{(null==el?void 0:el.length)?er.on():er.off()},et[2]=er,et[3]=null==el?void 0:el.length,et[4]=R):R=et[4],et[5]!==el?(_=[el],et[5]=el,et[6]=_):_=et[6],j.useEffect(R,_),et[7]!==eu||et[8]!==es?(A=()=>{es(eu)},et[7]=eu,et[8]=es,et[9]=A):A=et[9],et[10]!==eu?(G=[eu],et[10]=eu,et[11]=G):G=et[11],j.useEffect(A,G),et[12]!==er.active||et[13]!==ed||et[14]!==ei||et[15]!==ec.active||et[16]!==eo.active?(F=function(){ed({enhanced:!er.active,skipLockedFiles:eo.active,skipIgnoredFiles:ec.active}),ei(!1)},et[12]=er.active,et[13]=ed,et[14]=ei,et[15]=ec.active,et[16]=eo.active,et[17]=F):F=et[17];let em=F,{inject:eh,remove:ep}=(0,u.H)();et[18]!==em||et[19]!==eh||et[20]!==ep?(K=()=>(eh("scanner-controls",{priority:1,items:[{id:"refresh",value:"refresh",heading:"Library",render:L,onSelect:e=>{let{ctx:t}=e;t.close(),setTimeout(()=>{em()},500)},showBasedOnInput:"startsWith"}],filter:C,shouldShow:I,showBasedOnInput:"startsWith"}),()=>ep("scanner-controls")),et[18]=em,et[19]=eh,et[20]=ep,et[21]=K):K=et[21],et[22]===Symbol.for("react.memo_cache_sentinel")?(O=[],et[22]=O):O=et[22],j.useEffect(K,O),et[23]!==ei?(q=e=>{ei(e)},et[23]=ei,et[24]=q):q=et[24],et[25]===Symbol.for("react.memo_cache_sentinel")?(P=(0,n.jsx)(h.Z,{spread:50,glow:!0,disabled:!1,proximity:100,inactiveZone:.01,className:"!mt-0 opacity-30"}),et[25]=P):P=et[25],et[26]!==(null==ea||null==(e=ea.user)?void 0:e.isSimulated)?(U=(null==ea||null==(v=ea.user)?void 0:v.isSimulated)&&(0,n.jsx)("div",{className:"border border-dashed rounded-md py-2 px-4 !mt-5",children:"Using this feature without an AniList account is not recommended if you have a large library, as it may lead to rate limits and slower scanning. Please consider using an account for a better experience."}),et[26]=null==ea||null==(E=ea.user)?void 0:E.isSimulated,et[27]=U):U=et[27],et[28]===Symbol.for("react.memo_cache_sentinel")?(D=(0,n.jsx)("h5",{className:"text-[--muted]",children:"Local files"}),et[28]=D):D=et[28],et[29]!==eo?(Q=e=>eo.set(e),et[29]=eo,et[30]=Q):Q=et[30],et[31]!==eo.active||et[32]!==Q?($=(0,n.jsx)(y.d,{side:"right",label:"Skip locked files",value:eo.active,onValueChange:Q}),et[31]=eo.active,et[32]=Q,et[33]=$):$=et[33],et[34]!==ec?(B=e=>ec.set(e),et[34]=ec,et[35]=B):B=et[35],et[36]!==ec.active||et[37]!==B?(V=(0,n.jsx)(y.d,{side:"right",label:"Skip ignored files",value:ec.active,onValueChange:B}),et[36]=ec.active,et[37]=B,et[38]=V):V=et[38],et[39]===Symbol.for("react.memo_cache_sentinel")?(X=(0,n.jsx)(x.w,{}),et[39]=X):X=et[39],et[40]===Symbol.for("react.memo_cache_sentinel")?(z=(0,n.jsx)("h5",{className:"text-[--muted]",children:"Matching data"}),et[40]=z):z=et[40],et[41]!==er?(M=e=>er.set(e),et[41]=er,et[42]=M):M=et[42],et[43]!==er.active?(Y=er.active?"":(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"text-[--orange]",children:"Slower for large libraries"}),". For faster scanning, add the anime entries present in your library to your lists and re-enable this before scanning."]}),et[43]=er.active,et[44]=Y):Y=et[44];let ef=!(null==el?void 0:el.length);et[45]!==er.active||et[46]!==M||et[47]!==Y||et[48]!==ef?(Z=(0,n.jsxs)(p.KZ,{className:"space-y-2",children:[z,(0,n.jsx)(y.d,{side:"right",label:"Use my AniList lists only",moreHelp:"Disabling this will cause Seanime to send more API requests which may lead to rate limits and slower scanning",value:er.active,onValueChange:M,help:Y,disabled:ef})]}),et[45]=er.active,et[46]=M,et[47]=Y,et[48]=ef,et[49]=Z):Z=et[49],et[50]!==$||et[51]!==V||et[52]!==Z?(W=(0,n.jsx)("div",{className:"space-y-4","data-scanner-modal-content":!0,children:(0,n.jsxs)(p.KZ,{className:"space-y-2",children:[D,$,V,X,Z]})}),et[50]=$,et[51]=V,et[52]=Z,et[53]=W):W=et[53],et[54]===Symbol.for("react.memo_cache_sentinel")?(H=(0,n.jsx)(k.CKj,{}),et[54]=H):H=et[54];let eg=!(null==ea||null==(a=ea.settings)||null==(t=a.library)?void 0:t.libraryPath);return et[55]!==em||et[56]!==eu||et[57]!==eg?(J=(0,n.jsx)(f.$n,{onClick:em,intent:"primary",leftIcon:H,loading:eu,className:"w-full",disabled:eg,children:"Scan"}),et[55]=em,et[56]=eu,et[57]=eg,et[58]=J):J=et[58],et[59]!==en||et[60]!==U||et[61]!==W||et[62]!==J||et[63]!==q?(ee=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.a,{"data-scanner-modal":!0,open:en,onOpenChange:q,title:"Library Scanner",titleClass:"text-center",contentClass:"space-y-4 max-w-2xl bg-gray-950 bg-opacity-70 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none rounded-xl",overlayClass:"bg-gray-950/70 backdrop-blur-sm",children:[P,U,W,J]})}),et[59]=en,et[60]=U,et[61]=W,et[62]=J,et[63]=q,et[64]=ee):ee=et[64],ee}function I(e){let{ctx:t}=e;return"/"===t.router.pathname}function C(e){let{item:t,input:a}=e;return!a||t.value.toLowerCase().includes(a.toLowerCase())}function L(){return(0,n.jsx)("p",{children:"Refresh library"})}},92952:(e,t,a)=>{a.d(t,{d:()=>L,r:()=>C});var n=a(95155),i=a(2159),s=a(58092),l=a(9478),r=a(81845),o=a(92224),c=a(14680),d=a(5249),u=a(244),m=a(84127),h=a(63352),p=a(91360),f=a(15388),g=a(2091),x=a(76136),y=a(52885),S=a(12556),v=a(42500),b=a(29724),j=a(12115),k=a(3692),N=a(28718),w=a(75780),E=a(80893),I=a(69554);let C=(0,v.eU)(!1);function L(e){var t,a;let{unmatchedGroups:v}=e,[L,T]=(0,b.fp)(C),[R,_]=j.useState(0),A=v.length-1,[G,F]=j.useState(null==v?void 0:v[0]),[K,O]=j.useState([]),[q,P]=j.useState(0),{mutate:U}=(0,s.E)(),{data:D,mutate:Q,isPending:$,reset:B}=(0,i.XD)(),{mutate:V,isPending:X}=(0,l.bU)(),{mutate:z,isPending:M}=(0,i.Zx)(),Y=X||M,[Z,W]=j.useState(0),H=j.useCallback(e=>{e&&!isNaN(Number(e))&&(P(Number(e)),W(e=>e+1))},[]);j.useLayoutEffect(()=>{var e,t;O(null!=(t=null==G||null==(e=G.localFiles)?void 0:e.map(e=>e.path))?t:[])},[G]),j.useEffect(()=>{_(0),F(v[0])},[L,v]),j.useEffect(()=>{F(v[R]),P(0),B()},[R,v]);let J=j.useCallback(()=>(0,n.jsx)(x.Q,{value:q,onValueChange:e=>P(e),formatOptions:{useGrouping:!1}}),[null==G?void 0:G.dir,Z]);function ee(){0===R&&1===v.length&&T(!1),P(0),B(),_(0),F(v[0])}let et=j.useCallback(()=>{Q({dir:G.dir},{onSuccess:e=>{setTimeout(()=>{(null==e?void 0:e.length)||I.oR.warning("No suggestions found, try searching manually")},500)}})},[null==G?void 0:G.dir,Q]);j.useEffect(()=>{G||T(!1)},[G]);let{setSeaCommandInput:ea,setSeaCommandOpen:en}=(0,r.W)(),{searchAndSelectMedia:ei,selectedAnime:es,onAcknowledgeSelection:el}=(0,o.U)();return(j.useEffect(()=>{es&&(P(es.id),W(e=>e+1),el(),en(!1))},[es]),G)?(0,n.jsx)(f._s,{"data-unmatched-file-manager-drawer":!0,open:L,onOpenChange:()=>T(!1),size:"xl",title:"Unmatched files",children:(0,n.jsxs)(u.KZ,{className:"mt-4",children:[(0,n.jsxs)("div",{className:(0,p.cn)("flex w-full justify-between",{hidden:v.length<=1}),children:[(0,n.jsx)(m.$n,{intent:"gray-subtle",leftIcon:(0,n.jsx)(k.QVr,{}),disabled:0===R,onClick:()=>{_(e=>e-1)},className:(0,p.cn)("transition-opacity",{"opacity-0":0===R}),children:"Previous"}),(0,n.jsxs)("p",{children:[R+1," / ",A+1]}),(0,n.jsx)(m.$n,{intent:"gray-subtle",rightIcon:(0,n.jsx)(k.Z0P,{}),disabled:R>=A,onClick:()=>{_(e=>e+1)},className:(0,p.cn)("transition-opacity",{"opacity-0":R>=A}),children:"Next"})]}),(0,n.jsxs)("div",{className:"bg-gray-900 border text-sm tracking-wide p-2 px-4 rounded-[--radius-md] line-clamp-1 flex gap-2 items-center cursor-pointer transition hover:bg-opacity-80",onClick:()=>U({path:G.dir}),children:[(0,n.jsx)(N.WNP,{className:"text-2xl"}),G.dir]}),(0,n.jsx)("div",{className:"flex items-center flex-wrap gap-2",children:(0,n.jsxs)("div",{className:"flex gap-2 items-center w-full",children:[(0,n.jsx)("p",{className:"flex-none text-lg mr-2 font-semibold",children:"Anilist ID"}),(0,n.jsx)(J,{}),(0,n.jsx)(m.$n,{intent:"white",onClick:function(){G&&q>0&&K.length>0&&z({paths:K,mediaId:q},{onSuccess:()=>{ee()}})},disabled:Y,children:"Match selection"})]})}),(0,n.jsxs)("div",{className:"bg-gray-950 border p-2 px-2 divide-y divide-[--border] rounded-[--radius-md] max-h-[50vh] max-w-full overflow-x-auto overflow-y-auto text-sm",children:[(0,n.jsx)("div",{className:"p-2",children:(0,n.jsx)(h.Sc,{label:"Select all files",value:K.length===(null==G||null==(t=G.localFiles)?void 0:t.length)||0!==K.length&&"indeterminate",onValueChange:e=>{"boolean"==typeof e&&O(e=>{var t,a,n;return e.length===(null==G||null==(t=G.localFiles)?void 0:t.length)?[]:null!=(n=null==G||null==(a=G.localFiles)?void 0:a.map(e=>e.path))?n:[]})},fieldClass:"w-[fit-content]"})}),null==(a=G.localFiles)?void 0:a.sort((e,t)=>{var a,n,i,s;return Number(null!=(i=null==(a=e.parsedInfo)?void 0:a.episode)?i:0)-Number(null!=(s=null==(n=t.parsedInfo)?void 0:n.episode)?s:0)}).map((e,t)=>(0,n.jsx)("div",{className:"p-2 ",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(h.Sc,{label:"".concat(S.V.basename(e.path)),value:K.includes(e.path),onValueChange:t=>{"boolean"==typeof t&&O(a=>t?[...a,e.path]:a.filter(t=>t!==e.path))},labelClass:"text-sm tracking-wide data-[checked=false]:opacity-50",fieldClass:"w-[fit-content]"})})},"".concat(e.path,"-").concat(t)))]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[(0,n.jsx)(m.$n,{leftIcon:(0,n.jsx)(w.CKj,{}),intent:"white-link",onClick:et,children:"Fetch suggestions"}),(0,n.jsx)(m.$n,{intent:"white-subtle",onClick:function(){ei("anime"),en(!0),setTimeout(()=>{var e,t,a,n;ea("/search "+((null==G||null==(n=G.localFiles)||null==(a=n[0])||null==(t=a.parsedFolderInfo)||null==(e=t[0])?void 0:e.title)||""))},200)},children:"Search on AniList"}),(0,n.jsx)("div",{className:"flex flex-1"}),(0,n.jsx)(m.$n,{leftIcon:(0,n.jsx)(E.dxg,{className:"text-lg"}),intent:"warning-subtle",size:"sm",rounded:!0,disabled:Y,onClick:function(){K.length>0&&V({paths:K,action:"ignore"},{onSuccess:()=>{ee(),I.oR.success("Files ignored")}})},children:"Ignore selection"})]}),$&&(0,n.jsx)(g.kt,{}),!$&&!!(null==D?void 0:D.length)&&(0,n.jsx)(y.z,{defaultValue:"1",fieldClass:"w-full",fieldLabelClass:"text-md",label:"Select Anime",value:String(q),onValueChange:H,options:null==D?void 0:D.map(e=>{var t,a,i,s,l,r,o;return{label:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-base md:text-md font-medium !-mt-1.5 line-clamp-1",children:(null==(t=e.title)?void 0:t.userPreferred)||(null==(a=e.title)?void 0:a.english)||(null==(i=e.title)?void 0:i.romaji)||"N/A"}),(0,n.jsxs)("div",{className:"mt-2 flex w-full gap-4",children:[(null==(s=e.coverImage)?void 0:s.medium)&&(0,n.jsx)("div",{className:"h-28 w-28 flex-none rounded-[--radius-md] object-cover object-center relative overflow-hidden",children:(0,n.jsx)(c.r,{src:e.coverImage.medium,alt:"",fill:!0,quality:100,priority:!0,sizes:"10rem",className:"object-cover object-center"})}),(0,n.jsxs)("div",{className:"text-[--muted]",children:[(0,n.jsxs)("p",{children:["Type: ",(0,n.jsx)("span",{className:"text-gray-200 font-semibold",children:e.format})]}),(0,n.jsxs)("p",{children:["Aired: ",(null==(l=e.startDate)?void 0:l.year)?new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(new Date((null==(r=e.startDate)?void 0:r.year)||0,(null==(o=e.startDate)?void 0:o.month)||0)):"-"]}),(0,n.jsxs)("p",{children:["Status: ",e.status]}),(0,n.jsx)(d.i,{href:"https://anilist.co/anime/".concat(e.id),target:"_blank",children:(0,n.jsx)(m.$n,{intent:"primary-link",size:"sm",className:"px-0",children:"Open on AniList"})})]})]})]}),value:String(e.id)||""}}),stackClass:"grid grid-cols-1 md:grid-cols-2 gap-2 space-y-0",itemContainerClass:(0,p.cn)("items-start cursor-pointer transition border-transparent rounded-[--radius] p-4 w-full","bg-gray-50 hover:bg-[--subtle] dark:bg-gray-900","data-[state=checked]:bg-white dark:data-[state=checked]:bg-gray-950","focus:ring-2 ring-brand-100 dark:ring-brand-900 ring-offset-1 ring-offset-[--background] focus-within:ring-2 transition","border border-transparent data-[state=checked]:border-[--brand] data-[state=checked]:ring-offset-0"),itemClass:(0,p.cn)("border-transparent absolute top-2 right-2 bg-transparent dark:bg-transparent dark:data-[state=unchecked]:bg-transparent","data-[state=unchecked]:bg-transparent data-[state=unchecked]:hover:bg-transparent dark:data-[state=unchecked]:hover:bg-transparent","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent"),itemIndicatorClass:"hidden",itemLabelClass:"font-medium flex flex-col items-center data-[state=checked]:text-[--brand] cursor-pointer"})]})}):null}},97447:(e,t,a)=>{a.d(t,{$:()=>x,U:()=>y});var n=a(95155),i=a(68205),s=a(2159),l=a(32754),r=a(244),o=a(84127),c=a(15388),d=a(42500),u=a(29724),m=a(12115),h=a(70376),p=a(43994),f=a(80893),g=a(69554);let x=(0,d.eU)(!1);function y(e){let{unknownGroups:t,onActionComplete:a}=e,[d,y]=(0,u.fp)(x),{mutate:S,isPending:v}=(0,i.v5)(),{mutate:b,isPending:j}=(0,s.qt)(),k=(0,m.useCallback)(()=>{S({mediaIds:t.map(e=>e.mediaId)},{onSuccess:()=>{null==a||a()}})},[t]);m.useEffect(()=>{0===t.length&&y(!1)},[t]);let N=(0,m.useCallback)(e=>{b({mediaId:e,action:"unmatch"},{onSuccess:()=>{g.oR.success("Media unmatched"),null==a||a()}})},[]),{setPreviewModalMediaId:w}=(0,l.D)();return 0===t.length?null:(0,n.jsx)(c._s,{"data-unknown-media-manager-drawer":!0,open:d,onOpenChange:e=>{v||y(e)},size:"xl",title:"Resolve hidden media",children:(0,n.jsxs)(r.KZ,{className:"mt-4",children:[(0,n.jsxs)("p",{className:"",children:["Seanime matched ",t.length," group",1===t.length?"":"s"," to ",1===t.length?"a ":"","series that ",1===t.length?"is":"are"," absent from your AniList collection.",(0,n.jsx)("br",{}),"Add the media to be able to see entries in your library or unmatch them if incorrect."]}),(0,n.jsx)(o.$n,{leftIcon:(0,n.jsx)(f.Gn0,{}),onClick:k,loading:v,disabled:j,children:"Add all to AniList"}),(0,n.jsx)("div",{className:"divide divide-y divide-[--border] space-y-4",children:t.map(e=>{var t;return(0,n.jsxs)("div",{className:"pt-4 space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center w-full justify-between",children:[(0,n.jsxs)("h4",{className:"font-semibold flex gap-2 items-center",children:[(0,n.jsxs)("span",{children:["Anilist ID:"," "]}),(0,n.jsxs)("p",{className:"underline cursor-pointer text-brand-200 flex gap-1.5 items-center",onClick:()=>{w(e.mediaId,"anime")},children:[e.mediaId," ",(0,n.jsx)(p.GOD,{})]})]}),(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)(o.$n,{size:"sm",intent:"primary-subtle",disabled:v,onClick:()=>{S({mediaIds:[e.mediaId]},{onSuccess:()=>{null==a||a()}})},leftIcon:(0,n.jsx)(h.Ca6,{}),children:"Add to AniList"}),(0,n.jsx)(o.$n,{size:"sm",intent:"warning-subtle",disabled:j,onClick:()=>N(e.mediaId),children:"Unmatch"})]})]}),(0,n.jsx)("div",{className:"bg-gray-900 border p-2 px-2 rounded-[--radius-md] space-y-1 max-h-40 max-w-full overflow-x-auto overflow-y-auto text-sm",children:null==(t=e.localFiles)?void 0:t.sort((e,t)=>{var a,n,i,s;return Number(null!=(i=null==(a=e.parsedInfo)?void 0:a.episode)?i:0)-Number(null!=(s=null==(n=t.parsedInfo)?void 0:n.episode)?s:0)}).map(e=>{var t;return(0,n.jsx)("p",{className:"text-[--muted] line-clamp-1 tracking-wide",children:(null==(t=e.parsedInfo)?void 0:t.original)||e.path},e.path)})})]},e.mediaId)})})]})})}}}]);