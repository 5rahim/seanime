"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{7214:function(e,t,i){i.d(t,{k:function(){return AnimeListItem}});var l=i(57437),s=i(2265),a=i(54487),n=i(16691),r=i.n(n),o=i(6469),d=i(1022),c=i(37376),u=i(23130),m=i(5790),x=i(54771),v=i(61396),g=i.n(v),h=i(97622),f=i(50795),j=i(67701),b=i(45197),p=i(42475),y=i(45652),N=i.n(y),D=i(35794),w=i.n(D),E=i(59346),z=i(34479),C=i(24285),L=i(10137),k=i(95518),I=i(24033),A=i(23890);let AnimeListItem=e=>{var t,i,n,v,h,f,j,y,D,z,C,L,T,U,R,P,B,F,_;let{media:M,listData:O,libraryData:K}=e,[q,V]=(0,s.useState)(O),[W,Z]=(0,s.useState)(K),[G,X]=(0,A.KO)(k.uN),Y=!!W&&!!e.showLibraryBadge,H=!!(null==q?void 0:q.progress)&&(null==M?void 0:M.episodes)&&(null==q?void 0:q.status)!=="COMPLETED";(0,s.useEffect)(()=>{if(!O||!K){let e=X(M.id);O||V(null==e?void 0:e.listData),K||Z(null==e?void 0:e.libraryData)}},[X]);let J=(0,I.usePathname)();return((0,s.useEffect)(()=>{if("/"!==J){let e=X(M.id);O||V(null==e?void 0:e.listData),K||Z(null==e?void 0:e.libraryData)}},[J,G]),(0,s.useLayoutEffect)(()=>{V(O)},[O]),(0,s.useLayoutEffect)(()=>{Z(K)},[K]),M)?(0,l.jsxs)("div",{className:(0,a.cn)("h-full col-span-1 group/anime-list-item relative flex flex-col place-content-stretch focus-visible:outline-0 flex-none",e.containerClassName),children:[(0,l.jsx)("div",{className:(0,a.cn)("absolute z-20 bg-gray-900 opacity-0 scale-70 border border-[--border]","group-hover/anime-list-item:opacity-100 group-hover/anime-list-item:scale-100","group-focus-visible/anime-list-item:opacity-100 group-focus-visible/anime-list-item:scale-100","focus-visible:opacity-100 focus-visible:scale-100","h-[105%] w-[100%] -top-[5%] rounded-md transition ease-in-out","focus-visible:ring-2 ring-brand-400 focus-visible:outline-0 "),tabIndex:0,children:(0,l.jsxs)("div",{className:"p-2 h-full w-full flex flex-col justify-between",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"aspect-[4/2] relative rounded-md overflow-hidden mb-2",children:M.bannerImage||(null===(t=M.coverImage)||void 0===t?void 0:t.large)?(0,l.jsx)(r(),{src:M.bannerImage||(null===(i=M.coverImage)||void 0===i?void 0:i.large)||"",alt:"",fill:!0,placeholder:(0,E.t)(700,475),quality:100,sizes:"20rem",className:"object-cover object-center transition"}):(0,l.jsx)("div",{className:"h-full block absolute w-full bg-gradient-to-t from-gray-800 to-transparent"})}),(0,l.jsx)("div",{children:(0,l.jsx)(g(),{href:"/entry?id=".concat(M.id),className:"text-center font-medium text-sm lg:text-lg min-[2000px]:text-lg px-4 line-clamp-2",children:null===(n=M.title)||void 0===n?void 0:n.userPreferred})}),!!(null===(v=M.startDate)||void 0===v?void 0:v.year)&&(0,l.jsx)("div",{children:(0,l.jsxs)("p",{className:"justify-center text-sm text-[--muted] flex w-full gap-1 items-center",children:[w()(M.format||"")," - ",(0,l.jsx)(d.V,{})," ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short"}).format(new Date((null===(h=M.startDate)||void 0===h?void 0:h.year)||0,(null===(f=M.startDate)||void 0===f?void 0:f.month)||0))," - ",N()(null!==(B=M.season)&&void 0!==B?B:"")]})}),!!M.nextAiringEpisode&&(0,l.jsxs)("div",{className:"flex gap-1 items-center justify-center",children:[(0,l.jsx)("p",{className:"text-xs min-[2000px]:text-md",children:"Next episode:"}),(0,l.jsx)(o.u,{tooltipClassName:"bg-gray-200 text-gray-800 font-semibold mb-1",trigger:(0,l.jsx)("p",{className:"text-justify font-normal text-xs min-[2000px]:text-md",children:(0,l.jsx)(c.C,{size:"sm",children:null===(j=M.nextAiringEpisode)||void 0===j?void 0:j.episode})}),children:(0,m.Z)((0,u.Z)(new Date,null===(y=M.nextAiringEpisode)||void 0===y?void 0:y.timeUntilAiring),{addSuffix:!0})})]}),(0,l.jsx)(MainActionButton,{media:M,listData:q}),(null==q?void 0:q.status)&&void 0===e.showLibraryBadge&&(0,l.jsx)("p",{className:"text-center",children:(null==q?void 0:q.status)==="CURRENT"?"Watching":N()(null!==(F=null==q?void 0:q.status)&&void 0!==F?F:"")})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[!!W&&(0,l.jsx)(S,{mediaId:M.id,allFilesLocked:W.allFilesLocked}),(0,l.jsx)(p.X,{listData:q,media:M})]})]})}),(0,l.jsxs)("div",{className:"aspect-[6/7] flex-none rounded-md border border-[--border] object-cover object-center relative overflow-hidden",children:[(0,l.jsx)("div",{className:"z-[5] absolute bottom-0 w-full h-[50%] bg-gradient-to-t from-black to-transparent"}),H&&(0,l.jsx)("div",{className:"absolute top-0 w-full h-1 z-[2] bg-gray-700 left-0",children:(0,l.jsx)("div",{className:(0,a.cn)("h-1 absolute z-[2] left-0 bg-gray-200 transition-all",{"bg-brand-400":(null==q?void 0:q.status)==="CURRENT","bg-gray-400":(null==q?void 0:q.status)!=="CURRENT"}),style:{width:"".concat(String(Math.ceil(q.progress/M.episodes*100)),"%")}})}),Y&&(0,l.jsx)("div",{className:"absolute z-[1] left-0 top-0",children:(0,l.jsx)(c.C,{size:"xl",intent:"warning-solid",className:"rounded-md rounded-bl-none rounded-tr-none text-orange-900",children:(0,l.jsx)(b.z,{})})}),"RELEASING"===M.status&&(0,l.jsx)("div",{className:"absolute z-10 right-1 top-2",children:(0,l.jsx)(o.u,{trigger:(0,l.jsx)(c.C,{intent:"primary-solid",size:"lg",children:(0,l.jsx)(x.d,{})}),children:"Airing"})}),"NOT_YET_RELEASED"===M.status&&(0,l.jsx)("div",{className:"absolute z-10 right-1 top-1",children:(0,l.jsx)(o.u,{trigger:(0,l.jsx)(c.C,{intent:"gray-solid",size:"lg",children:(0,l.jsx)(x.d,{})}),children:(null===(D=M.startDate)||void 0===D?void 0:D.year)?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(M.startDate.year,(null===(z=M.startDate)||void 0===z?void 0:z.month)||0,(null===(C=M.startDate)||void 0===C?void 0:C.day)||0)):"-"})}),(0,l.jsx)(ProgressBadge,{media:M,listData:q}),(0,l.jsx)(ScoreBadge,{listData:q}),(0,l.jsx)(r(),{src:(null===(L=M.coverImage)||void 0===L?void 0:L.extraLarge)||"",alt:"",fill:!0,placeholder:(0,E.t)(700,475),quality:100,priority:!0,sizes:"20rem",className:"object-cover object-center group-hover/anime-list-item:scale-125 transition"})]}),(0,l.jsxs)("div",{className:"pt-2 space-y-2 flex flex-col justify-between h-full",children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"text-center font-semibold text-sm lg:text-md min-[2000px]:text-lg line-clamp-3",children:null===(T=M.title)||void 0===T?void 0:T.userPreferred})}),(0,l.jsx)("div",{children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{className:"text-sm text-[--muted] inline-flex gap-1 items-center",children:[(0,l.jsx)(d.V,{}),N()(null!==(_=M.season)&&void 0!==_?_:"")," ",(null===(U=M.startDate)||void 0===U?void 0:U.year)?new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(new Date((null===(R=M.startDate)||void 0===R?void 0:R.year)||0,(null===(P=M.startDate)||void 0===P?void 0:P.month)||0)):"-"]})})})]})]}):null},MainActionButton=e=>{var t,i;let s=null===(t=e.listData)||void 0===t?void 0:t.progress,a=null===(i=e.listData)||void 0===i?void 0:i.status;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"py-1",children:(0,l.jsx)(g(),{href:"/entry?id=".concat(e.media.id).concat(s&&"COMPLETED"!==a?"&playNext=true":""),children:(0,l.jsx)(h.zx,{leftIcon:(0,l.jsx)(f.P,{}),intent:"white",size:"md",className:"w-full text-md",children:s&&("CURRENT"===a||"PAUSED"===a)?"Continue watching":"Watch"})})})})})},S=(0,s.memo)(e=>{let{mediaId:t,allFilesLocked:i}=e,{toggleLock:s,isPending:a}=(0,L.Kg)();return(0,l.jsx)(o.u,{trigger:(0,l.jsx)(h.hU,{icon:i?(0,l.jsx)(z.K,{}):(0,l.jsx)(C.k,{}),intent:i?"success":"warning-subtle",size:"sm",className:"hover:opacity-60",isLoading:a,onClick:()=>s(t)}),children:i?"Unlock all files":"Lock all files"})}),ScoreBadge=e=>{var t;let i=null===(t=e.listData)||void 0===t?void 0:t.score;return e.listData&&i?(0,l.jsx)("div",{className:"absolute z-10 right-1 bottom-1",children:(0,l.jsxs)("div",{className:(0,a.cn)("backdrop-blur-lg inline-flex items-center justify-center gap-1 w-12 h-7 rounded-full font-bold bg-opacity-70 drop-shadow-sm shadow-lg",i?i<5?"bg-red-500":i<7?"bg-orange-500":i<9?"bg-green-500":"bg-brand-500 text-white bg-opacity-80":""),children:[(0,l.jsx)(j.s,{})," ",0===i?"-":i]})}):null},ProgressBadge=e=>{var t;let i=null===(t=e.listData)||void 0===t?void 0:t.progress,s=e.media.episodes;return e.listData&&i?(0,l.jsx)("div",{className:"absolute z-10 left-1 bottom-1",children:(0,l.jsxs)(c.C,{size:"lg",children:[i,"/",null!=s?s:"-"]})}):null}}}]);