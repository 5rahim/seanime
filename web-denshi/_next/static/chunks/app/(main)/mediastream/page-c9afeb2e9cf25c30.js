(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9124],{25667:()=>{},41275:(e,n,l)=>{"use strict";l.d(n,{p:()=>u});var i=l(95155),a=l(19749),t=l(99639),o=l(14680),r=l(91360),d=l(91332),s=l(94077);function u(e){let n,l,u,c,v,m,p=(0,a.c)(12),{bannerImage:f}=e,M=(0,d.Ky)(),y=(M.hideTopNavbar||s.X)&&"h-[27rem]",E=!M.disableSidebarTransparency&&t.j;return p[0]!==y||p[1]!==E?(n=(0,r.cn)("h-[30rem] w-full flex-none object-cover object-center absolute -top-[5rem] overflow-hidden bg-[--background]",y,E),p[0]=y,p[1]=E,p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("div",{"data-media-entry-page-small-banner-gradient":!0,className:"w-full absolute z-[2] top-0 h-[8rem] opacity-40 bg-gradient-to-b from-[--background] to-transparent via"}),p[3]=l):l=p[3],p[4]!==f?(u=!!f&&(0,i.jsx)(o.r,{"data-media-entry-page-small-banner-image":!0,src:f||"",alt:"banner image",fill:!0,quality:100,priority:!0,sizes:"100vw",className:"object-cover object-center z-[1]"}),p[4]=f,p[5]=u):u=p[5],p[6]!==u?(c=(0,i.jsx)("div",{"data-media-entry-page-small-banner-image-container":!0,className:"absolute w-full h-full",children:u}),p[6]=u,p[7]=c):c=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(v=(0,i.jsx)("div",{"data-media-entry-page-small-banner-bottom-gradient":!0,className:"w-full z-[3] absolute bottom-0 h-[32rem] bg-gradient-to-t from-[--background] via-[--background] via-50% to-transparent"}),p[8]=v):v=p[8],p[9]!==n||p[10]!==c?(m=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{"data-media-entry-page-small-banner":!0,className:n,children:[l,c,v]})}),p[9]=n,p[10]=c,p[11]=m):m=p[11],m}l(12115)},44304:(e,n,l)=>{"use strict";l.d(n,{O4:()=>u,kA:()=>s,lC:()=>d,nP:()=>c});var i=l(19749),a=l(7675),t=l(74889),o=l(46278),r=l(69554);function d(e){let n,l,o=(0,i.c)(3);return o[0]===Symbol.for("react.memo_cache_sentinel")?(n=[t.S.MEDIASTREAM.GetMediastreamSettings.key],o[0]=n):n=o[0],o[1]!==e?(l={endpoint:t.S.MEDIASTREAM.GetMediastreamSettings.endpoint,method:t.S.MEDIASTREAM.GetMediastreamSettings.methods[0],queryKey:n,enabled:e},o[1]=e,o[2]=l):l=o[2],(0,a.fl)(l)}function s(){let e,n,l=(0,i.c)(3),d=(0,o.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[t.S.MEDIASTREAM.SaveMediastreamSettings.key],l[0]=e):e=l[0],l[1]!==d?(n={endpoint:t.S.MEDIASTREAM.SaveMediastreamSettings.endpoint,method:t.S.MEDIASTREAM.SaveMediastreamSettings.methods[0],mutationKey:e,onSuccess:async()=>{await d.invalidateQueries({queryKey:[t.S.MEDIASTREAM.GetMediastreamSettings.key]}),await d.invalidateQueries({queryKey:[t.S.STATUS.GetStatus.key]}),r.oR.success("Settings saved")}},l[1]=d,l[2]=n):n=l[2],(0,a.qk)(n)}function u(e,n){let l,o,r=(0,i.c)(7),d=null==e?void 0:e.path,s=null==e?void 0:e.streamType;r[0]!==d||r[1]!==s?(l=[t.S.MEDIASTREAM.RequestMediastreamMediaContainer.key,d,s],r[0]=d,r[1]=s,r[2]=l):l=r[2];let u=!!e.path&&!!e.streamType&&n;return r[3]!==l||r[4]!==e||r[5]!==u?(o={endpoint:t.S.MEDIASTREAM.RequestMediastreamMediaContainer.endpoint,method:t.S.MEDIASTREAM.RequestMediastreamMediaContainer.methods[0],queryKey:l,data:e,enabled:u},r[3]=l,r[4]=e,r[5]=u,r[6]=o):o=r[6],(0,a.fl)(o)}function c(){let e,n=(0,i.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:t.S.MEDIASTREAM.MediastreamShutdownTranscodeStream.endpoint,method:t.S.MEDIASTREAM.MediastreamShutdownTranscodeStream.methods[0],mutationKey:[t.S.MEDIASTREAM.MediastreamShutdownTranscodeStream.key],onSuccess:v},n[0]=e):e=n[0],(0,a.qk)(e)}async function v(){}},55226:(e,n,l)=>{"use strict";function i(e){return(navigator.userAgent||"").includes(e)}function a(){return navigator.vendor.includes("Apple")&&!function(){return i("Tizen")}()}l.d(n,{Fr:()=>t,f8:()=>a});function t(){let e="";return navigator.userAgent&&(e=navigator.userAgent),!!/iPhone|iPad|iPod|Android/.test(e)||a()&&navigator.maxTouchPoints>1}},67126:(e,n,l)=>{Promise.resolve().then(l.bind(l,79847))},79847:(e,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>K});var i=l(95155),a=l(2159),t=l(26589),o=l(41275),r=l(77166),d=l(2126),s=l(812),u=l(96826),c=l(45886),v=l(83394),m=l(44304),p=l(37614),f=l(55226),M=l(14490),y=l(71689),E=l(26603),g=l(93715),A=l(90711),S=l(23862),h=l(83846),T=l(85594),b=l(92430),R=l(29724),I=l(6066),x=l(12115),D=l(69554);function j(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}j();let w=()=>{let e={default:{maxTimeToFirstByteMs:Number.POSITIVE_INFINITY,maxLoadTimeMs:3e5,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:0,maxRetryDelayMs:0}}};return{autoStartLoad:!0,abrEwmaDefaultEstimate:35e6,abrEwmaDefaultEstimateMax:5e7,startLevel:0,lowLatencyMode:!1,initialLiveManifestSize:0,fragLoadPolicy:{default:{maxTimeToFirstByteMs:Number.POSITIVE_INFINITY,maxLoadTimeMs:6e4,timeoutRetry:{maxNumRetry:5,retryDelayMs:100,maxRetryDelayMs:0},errorRetry:{maxNumRetry:15,retryDelayMs:100,maxRetryDelayMs:100}}},keyLoadPolicy:e,certLoadPolicy:e,playlistLoadPolicy:e,manifestLoadPolicy:e,steeringManifestLoadPolicy:e}};var P=l(50558),N=l(244),F=l(84127),k=l(63352),C=l(76049),L=l(57073),U=l(77717);l(76182),l(73015);var _=l(62477),O=l.n(_);l(25667);var q=l(70376),H=l(10653),z=l(9693);function K(){var e,n,_,K,G,B,W,J,V,$,Q,X,Y,Z,ee,en,el,ei,ea,et,eo;(0,u.v1)();let er=(0,I.useRouter)(),ed=(0,I.useSearchParams)().get("id"),{data:es,isLoading:eu}=(0,a._8)(ed),ec=x.useRef(null),{filePath:ev}=(0,y.ju)(),em=x.useMemo(()=>{var e,n;return null!=(n=null==es||null==(e=es.episodes)?void 0:e.filter(e=>"main"===e.type))?n:[]},[null==es?void 0:es.episodes]),ep=x.useMemo(()=>{var e,n;return null!=(n=null==es||null==(e=es.episodes)?void 0:e.filter(e=>"special"===e.type))?n:[]},[null==es?void 0:es.episodes]),ef=x.useMemo(()=>{var e,n;return null!=(n=null==es||null==(e=es.episodes)?void 0:e.filter(e=>"nc"===e.type))?n:[]},[null==es?void 0:es.episodes]),eM=x.useMemo(()=>[...em,...ep,...ef],[em,ep,ef]),{url:ey,isError:eE,isMediaContainerLoading:eg,mediaContainer:eA,subtitles:eS,subtitleEndpointUri:eh,onProviderChange:eT,onProviderSetup:eb,onCanPlay:eR,playNextEpisode:eI,playPreviousEpisode:ex,hasPreviousEpisode:eD,hasNextEpisode:ej,onPlayFile:ew,isCodecSupported:eP,setStreamType:eN,disabledAutoSwitchToDirectPlay:eF,handleUpdateWatchHistory:ek,episode:eC,duration:eL}=function(e){var n,i;let{playerRef:a,episodes:t,mediaId:o}=e;(0,I.useRouter)();let{filePath:r,setFilePath:d}=(0,y.ju)(),{data:s,isFetching:u}=(0,m.lC)(!0),P=x.useRef(void 0),N=x.useRef(void 0),[F,k]=x.useState(void 0),[C,L]=x.useState("transcode"),U=x.useRef(0);x.useRef(!1);let _=(0,R.md)(E.O1),{waitForWatchHistory:O}=(0,v.vy)(o),{data:q,isError:H,isPending:z,isFetching:K,refetch:G}=(0,m.O4)({path:r,streamType:C,clientId:null!=_?_:j()},!!s&&!u&&!O),B=x.useMemo(()=>z||K?void 0:q,[q,z,K]),[W,J]=x.useState(!1),[V,$]=x.useState(0);x.useEffect(()=>{z&&((0,g.v)("MEDIASTREAM").info("Loading media container"),ee(void 0),(0,g.v)("MEDIASTREAM").info("Setting URL to undefined"))},[z]);let{mutate:Q}=(0,m.nP)(),X=!!B&&!F,{isCodecSupported:Y}={isCodecSupported:e=>{var n;return!(0,f.Fr)()&&(-1===navigator.userAgent.search("Firefox")&&(e=e.replace("video/x-matroska","video/mp4")),"probably"===(null!=(n=document.getElementsByTagName("video").item(0))?n:document.createElement("video")).canPlayType(e))}};x.useEffect(()=>{var e,n,l,i,a,t;(0,g.v)("MEDIASTREAM").info("Media container changed, running effect",B);let o=Y(null!=(n=null==B||null==(e=B.mediaInfo)?void 0:e.mimeCodec)?n:"");if((0,g.v)("MEDIASTREAM").info("Is codec supported",o),(null==B?void 0:B.streamType)==="transcode"){if((0,g.v)("MEDIASTREAM").info("Stream type is transcode"),!o&&(null==s?void 0:s.directPlayOnly)){(0,g.v)("MEDIASTREAM").warning("Codec not supported for direct play",null==B||null==(l=B.mediaInfo)?void 0:l.mimeCodec),(0,g.v)("MEDIASTREAM").warning("Stopping playback"),D.oR.warning("Codec not supported for direct play"),ee(void 0),(0,g.v)("MEDIASTREAM").info("Setting URL to undefined");return}if(o&&(!(null==s?void 0:s.disableAutoSwitchToDirectPlay)||(null==s?void 0:s.directPlayOnly))){(0,g.v)("MEDIASTREAM").info("Codec supported",null==B||null==(i=B.mediaInfo)?void 0:i.mimeCodec),(0,g.v)("MEDIASTREAM").warning("Switching to direct play"),L("direct"),ee(void 0),(0,g.v)("MEDIASTREAM").info("Setting URL to undefined");return}(0,g.v)("MEDIASTREAM").info("Codec not supported for direct play",null==B||null==(a=B.mediaInfo)?void 0:a.mimeCodec)}if((null==B?void 0:B.streamType)==="direct"&&!o){(0,g.v)("MEDIASTREAM").warning("Codec not supported for direct play",null==B||null==(t=B.mediaInfo)?void 0:t.mimeCodec),(0,g.v)("MEDIASTREAM").warning("Switching to transcode"),L("transcode"),ee(void 0),(0,g.v)("MEDIASTREAM").info("Setting URL to undefined");return}if(null==B?void 0:B.streamUrl){(0,g.v)("MEDIASTREAM").info("Stream URL available",B.streamUrl);let e="".concat((0,c.M)()).concat(B.streamUrl);(0,g.v)("MEDIASTREAM").info("Changing URL",e,"streamType:",B.streamType),ee(e)}else ee(void 0),(0,g.v)("MEDIASTREAM").info("Setting URL to undefined")},[null==B?void 0:B.streamUrl,null==s?void 0:s.disableAutoSwitchToDirectPlay]);let{jassubOffscreenRender:Z}=(0,y.bx)();function ee(e){(0,g.v)("MEDIASTREAM").info("[changeUrl] called,","request url:",e),P.current!==e&&((0,g.v)("MEDIASTREAM").info("Resetting playback error status"),J(!1)),k(n=>n===e?((0,g.v)("MEDIASTREAM").info("[changeUrl] URL has not changed"),n):(P.current=n,(0,g.v)("MEDIASTREAM").info("[changeUrl] URL updated"),e)),e&&(N.current=e)}x.useEffect(()=>{var e,n,i,t,o,r,d;if(a.current&&(null==B||null==(n=B.mediaInfo)||null==(e=n.fonts)?void 0:e.length)){(0,g.v)("MEDIASTREAM").info("Adding JASSUB renderer to player",null==B||null==(t=B.mediaInfo)||null==(i=t.fonts)?void 0:i.length,"fonts");let e=(0,A.yU)("/jassub/jassub-worker.wasm.js");(0,g.v)("MEDIASTREAM").info("Loading JASSUB renderer");let n=(null==B||null==(r=B.mediaInfo)||null==(o=r.fonts)?void 0:o.map(e=>"".concat((0,c.M)(),"/api/v1/mediastream/att/").concat(e)))||[],s={},u="";if(null==n?void 0:n.length)for(let e of n){let n=null==(d=e.split("/").pop())?void 0:d.split(".")[0];n&&(u||(u=n.toLowerCase()),s[n.toLowerCase()]=e)}u||(u="liberation sans"),0===Object.keys(s).length&&(s={"liberation sans":(0,c.M)()+"/jassub/default.woff2"}),(0,g.v)("MEDIASTREAM").info("Available fonts:",s),(0,g.v)("MEDIASTREAM").info("Fallback font:",u);let v=new h.Fm7(()=>l.e(9242).then(l.bind(l,9242)),{wasmUrl:"/jassub/jassub-worker.wasm",workerUrl:"/jassub/jassub-worker.js",legacyWasmUrl:e,offscreenRender:Z,prescaleFactor:.8,onDemandRender:!1,fonts:n,availableFonts:s,fallbackFont:u});return a.current.textRenderers.add(v),(0,g.v)("MEDIASTREAM").info("JASSUB renderer added to player"),()=>{a.current.textRenderers.remove(v)}}},[a.current,null==B?void 0:B.streamUrl,null==B||null==(n=B.mediaInfo)?void 0:n.fonts,Z]);let en=x.useMemo(()=>t.find(e=>{var n,l;return!!(null==(n=e.localFile)?void 0:n.path)&&(null==(l=e.localFile)?void 0:l.path)===r}),[t,r]),{handleUpdateWatchHistory:el}=(0,v.FE)(a,null==en?void 0:en.episodeNumber,o),ei=x.useRef(void 0),{currentPlaylist:ea,playEpisode:et,nextPlaylistEpisode:eo,prevPlaylistEpisode:er}=(0,p.n)(),ed=t.findIndex(e=>{var n,l;return!!(null==(n=e.localFile)?void 0:n.path)&&(null==(l=e.localFile)?void 0:l.path)===r}),es=-1===ed||null==t?void 0:t[ed+1],eu=-1===ed||null==t?void 0:t[ed-1],ec=!!es||ea&&!!eo,ev=!!eu||ea&&!!er,em=e=>{var n,l;(0,g.v)("MEDIASTREAM").info("Playing file",e),null==(l=a.current)||null==(n=l.destroy)||n.call(l),U.current=0,d(e)};(0,M.oA)({type:S.c.MEDIASTREAM_SHUTDOWN_STREAM,onMessage:e=>{e&&D.oR.error(e),(0,g.v)("MEDIASTREAM").warning("Shutdown stream event received"),ee(void 0)}});let ep=x.useMemo(()=>(null==B?void 0:B.streamUrl)&&(null==B?void 0:B.streamType)?"".concat((0,c.M)(),"/api/v1/mediastream/subs"):"",[null==B?void 0:B.streamUrl,null==B?void 0:B.streamType]);return{url:F,streamType:C,subtitles:null==B||null==(i=B.mediaInfo)?void 0:i.subtitles,isMediaContainerLoading:z,isError:H||X,subtitleEndpointUri:ep,mediaContainer:q,onPlayFile:em,filePath:r,episode:en,duration:V,disabledAutoSwitchToDirectPlay:null==s?void 0:s.disableAutoSwitchToDirectPlay,setStreamType:e=>{var n,l;(0,g.v)("MEDIASTREAM").info("[setStreamType] Setting stream type",e),L(e),null==(l=a.current)||null==(n=l.destroy)||n.call(l),ee(void 0)},onCanPlay:e=>{(0,g.v)("MEDIASTREAM").info("[onCanPlay] called",e),ei.current=void 0,$(e.duration)},playNextEpisode:()=>{if((0,g.v)("MEDIASTREAM").info("[playNextEpisode] called"),ea)return void et("next",!0);if(es){var e;(null==es||null==(e=es.localFile)?void 0:e.path)&&em(es.localFile.path)}},playPreviousEpisode:()=>{if((0,g.v)("MEDIASTREAM").info("[playPreviousEpisode] called"),ea)return void et("previous",!1);if(eu){var e;(null==eu||null==(e=eu.localFile)?void 0:e.path)&&em(eu.localFile.path)}},hasPreviousEpisode:ev,hasNextEpisode:ec,onProviderChange:function(e,n){(0,T.ar)(e)&&(null==B?void 0:B.streamType)==="transcode"?((0,g.v)("MEDIASTREAM").info("[onProviderChange] Provider changed to HLS"),e.library=b.Ay,e.config={...w()}):(0,g.v)("MEDIASTREAM").info("[onProviderChange] Provider changed to native")},onProviderSetup:function(e,n){if((0,T.ar)(e))if(F)if(b.Ay.isSupported()&&F.endsWith(".m3u8")){var l,i,t,o,r;(0,g.v)("MEDIASTREAM").info("[onProviderSetup] HLS Provider setup"),(0,g.v)("MEDIASTREAM").info("[onProviderSetup] Loading source",F),null==(l=e.instance)||l.on(b.Ay.Events.MANIFEST_PARSED,function(e,n){(0,g.v)("MEDIASTREAM").info("onManifestParsed",n),n.levels.forEach(e=>{var n;(0,g.v)("MEDIASTREAM").info("Level ".concat(e.id," is live:"),null==(n=e.details)?void 0:n.live)})}),null==(i=e.instance)||i.on(b.Ay.Events.MEDIA_ATTACHED,e=>{(0,g.v)("MEDIASTREAM").info("onMediaAttached")}),null==(t=e.instance)||t.on(b.Ay.Events.MEDIA_DETACHED,e=>{(0,g.v)("MEDIASTREAM").warning("onMediaDetached"),W||(null==B||B.streamType,ee(void 0))}),null==(o=e.instance)||o.on(b.Ay.Events.FRAG_LOADED,(e,n)=>{var l,i;U.current=null!=(i=null==(l=a.current)?void 0:l.currentTime)?i:0}),null==(r=e.instance)||r.on(b.Ay.Events.ERROR,(e,n)=>{if(null==n?void 0:n.fatal){var l,i;U.current=null!=(i=null==(l=a.current)?void 0:l.currentTime)?i:0,(0,g.v)("MEDIASTREAM").error("handleFatalError",n),(null==B?void 0:B.streamType)==="transcode"&&Q(),J(!0),ee(void 0),D.oR.error("Playback error"),G()}})}else!b.Ay.isSupported()&&F.endsWith(".m3u8")&&e.video.canPlayType("application/vnd.apple.mpegurl"),(0,g.v)("MEDIASTREAM").info("HLS not supported, using native HLS"),e.video.src=F;else(0,g.v)("MEDIASTREAM").error("[onProviderSetup] Provider setup - no URL");else(0,g.v)("MEDIASTREAM").info("[onProviderSetup] Provider setup - not HLS")},isCodecSupported:Y,handleUpdateWatchHistory:el}}({playerRef:ec,episodes:eM,mediaId:ed}),{jassubOffscreenRender:eU,setJassubOffscreenRender:e_}=(0,y.bx)(),eO=x.useMemo(()=>{var e;return(null==(e=eM.find(e=>{var n,l;return!!(null==(n=e.localFile)?void 0:n.path)&&(null==(l=e.localFile)?void 0:l.path)===ev}))?void 0:e.episodeNumber)||-1},[eM,ev]),eq=x.useMemo(()=>{var e;return null==(e=eM.find(e=>{var n,l;return!!(null==(n=e.localFile)?void 0:n.path)&&(null==(l=e.localFile)?void 0:l.path)===ev}))?void 0:e.episodeTitle},[eM,ev]),eH=null==es||null==(e=es.listData)?void 0:e.progress;return(x.useEffect(()=>{ed&&(eu||es)&&(eu||!es||ev)||er.push("/")},[ed,es,eu,ev]),!eu&&(null==es?void 0:es.media))?(0,i.jsxs)(z.Ky,{media:null==es?void 0:es.media,progress:{currentProgress:null!=eH?eH:0,currentEpisodeNumber:-1===eO?null:eO,currentEpisodeTitle:eq||null},children:[(0,i.jsx)(N.KZ,{className:"p-4 lg:p-8 z-[5]",children:(0,i.jsx)(s.t,{mediaId:ed?Number(ed):void 0,title:null==es||null==(_=es.media)||null==(n=_.title)?void 0:n.userPreferred,episodes:eM,rightHeaderActions:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"",children:(0,i.jsx)(C.a,{title:"Playback",trigger:(0,i.jsx)(F.$n,{leftIcon:(0,i.jsx)(q.wfp,{}),className:"rounded-full",intent:"gray-basic",size:"sm",children:"Playback info"}),contentClass:"sm:rounded-3xl",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("p",{className:"tracking-wide text-sm text-[--muted] break-all",children:null==eA||null==(K=eA.mediaInfo)?void 0:K.path}),eP((null==eA||null==(G=eA.mediaInfo)?void 0:G.mimeCodec)||"")?(0,i.jsx)(P.F,{intent:"success",description:"File video and audio codecs are compatible with this client. Direct play is recommended."}):(0,i.jsx)(P.F,{intent:"warning",description:"File video and audio codecs are not compatible with this client. Transcoding is needed."}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-bold",children:"Video codec: "}),(0,i.jsx)("span",{children:null==eA||null==(W=eA.mediaInfo)||null==(B=W.video)?void 0:B.mimeCodec})]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:"font-bold",children:"Audio codec: "}),(0,i.jsx)("span",{children:O()(null==eA||null==(V=eA.mediaInfo)||null==(J=V.audios)?void 0:J.map(e=>e.mimeCodec)).join(", ")})]}),(0,i.jsx)(C.a,{title:"Playback",trigger:(0,i.jsx)(F.$n,{size:"sm",className:"rounded-full",intent:"gray-outline",children:"More data"}),contentClass:"max-w-3xl",children:(0,i.jsx)("pre",{className:"overflow-x-auto overflow-y-auto max-h-[calc(100dvh-300px)] whitespace-pre-wrap p-2 rounded-[--radius-md] bg-gray-900",children:JSON.stringify(eA,null,2)})}),(0,i.jsx)(L.w,{}),(0,i.jsx)("p",{className:"font-semibold text-lg",children:"Jassub"}),(0,i.jsx)(k.Sc,{label:"Offscreen rendering",value:eU,onValueChange:e=>e_(e),help:"Enable this if you are experiencing performance issues"}),(0,i.jsx)(L.w,{}),(null==eA?void 0:eA.streamType)==="direct"&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(F.$n,{intent:"primary-subtle",onClick:()=>eN("transcode"),disabled:!eF,children:"Switch to transcoding"}),!eF&&(0,i.jsx)("p",{className:"text-[--muted] text-sm italic opacity-50",children:"Enable 'prefer transcoding' in the media streaming settings if you want to switch to transcoding"})]}),(null==eA?void 0:eA.streamType)==="transcode"&&eP((null==eA||null==($=eA.mediaInfo)?void 0:$.mimeCodec)||"")&&(0,i.jsx)(F.$n,{intent:"success-subtle",onClick:()=>eN("direct"),children:"Switch to direct play"})]})})})}),mediaPlayer:(0,i.jsx)(d.F,{url:(null==eA?void 0:eA.streamType)==="direct"?{src:ey||"",type:(null==eA||null==(Q=eA.mediaInfo)?void 0:Q.extension)==="mp4"?"video/mp4":(null==eA||null==(X=eA.mediaInfo)?void 0:X.extension)==="avi"?"video/x-msvideo":"video/webm"}:ey,isPlaybackError:eE?"Playback error":void 0,isLoading:eg,playerRef:ec,poster:(null==eM||null==(Z=eM.find(e=>{var n;return(null==(n=e.localFile)?void 0:n.path)===(null==eA?void 0:eA.filePath)}))||null==(Y=Z.episodeMetadata)?void 0:Y.image)||(null==es||null==(ee=es.media)?void 0:ee.bannerImage)||(null==es||null==(el=es.media)||null==(en=el.coverImage)?void 0:en.extraLarge),onProviderChange:eT,onProviderSetup:eb,onCanPlay:eR,onGoToNextEpisode:ej?eI:void 0,onGoToPreviousEpisode:eD?ex:void 0,tracks:null==eS?void 0:eS.map(e=>{var n,l;return{src:eh+e.link,label:e.title||e.language,lang:e.language,type:(null==(n=e.extension)?void 0:n.replace(".",""))||"ass",kind:"subtitles",default:e.isDefault||!eS.some(e=>e.isDefault)&&(null==(l=e.language)?void 0:l.startsWith("en"))}}),mediaInfoDuration:null==eA||null==(ei=eA.mediaInfo)?void 0:ei.duration,loadingText:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:"Extracting video metadata..."}),(0,i.jsx)("p",{children:"This might take a while."})]})}),episodeList:eM.map(e=>{var n,l,a,o,d,s,u,c,v,m,p,f,M,y,E,g,A,S,h,T;return(0,i.jsx)(t.X,{id:"episode-".concat(String(e.episodeNumber)),media:null==e?void 0:e.baseAnime,title:(null==e?void 0:e.displayTitle)||(null==e||null==(l=e.baseAnime)||null==(n=l.title)?void 0:n.userPreferred)||"",image:(null==e||null==(a=e.episodeMetadata)?void 0:a.image)||(null==e||null==(d=e.baseAnime)||null==(o=d.coverImage)?void 0:o.large),episodeTitle:null==e?void 0:e.episodeTitle,fileName:null==e||null==(u=e.localFile)||null==(s=u.parsedInfo)?void 0:s.original,onClick:()=>{var n,l;(null==(n=e.localFile)?void 0:n.path)&&ew((null==(l=e.localFile)?void 0:l.path)||"")},description:(null==e||null==(c=e.episodeMetadata)?void 0:c.summary)||(null==e||null==(v=e.episodeMetadata)?void 0:v.overview),isWatched:!!eH&&eH>=(null==e?void 0:e.progressNumber),isFiller:null==(m=e.episodeMetadata)?void 0:m.isFiller,isSelected:(null==(p=e.localFile)?void 0:p.path)===ev,length:null==(f=e.episodeMetadata)?void 0:f.length,className:"flex-none w-full",episodeNumber:e.episodeNumber,progressNumber:e.progressNumber,action:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.H,{title:e.displayTitle,image:null==(M=e.episodeMetadata)?void 0:M.image,episodeTitle:e.episodeTitle,airDate:null==(y=e.episodeMetadata)?void 0:y.airDate,length:null==(E=e.episodeMetadata)?void 0:E.length,summary:(null==(g=e.episodeMetadata)?void 0:g.summary)||(null==(A=e.episodeMetadata)?void 0:A.overview),isInvalid:e.isInvalid,filename:null==(h=e.localFile)||null==(S=h.parsedInfo)?void 0:S.original}),(0,i.jsx)(H.bv,{isDropdownMenu:!0,type:"mediastream",episode:e})]})},(null==(T=e.localFile)?void 0:T.path)||"")})})}),(0,i.jsx)(o.p,{bannerImage:(null==es||null==(ea=es.media)?void 0:ea.bannerImage)||(null==es||null==(eo=es.media)||null==(et=eo.coverImage)?void 0:et.extraLarge)})]}):(0,i.jsxs)("div",{className:"px-4 lg:px-8 space-y-4",children:[(0,i.jsx)("div",{className:"flex gap-4 items-center relative",children:(0,i.jsx)(U.E,{className:"h-12"})}),(0,i.jsxs)("div",{className:"grid 2xl:grid-cols-[1fr,450px] gap-4 xl:gap-4",children:[(0,i.jsx)("div",{className:"w-full min-h-[70dvh] relative",children:(0,i.jsx)(U.E,{className:"h-full w-full absolute"})}),(0,i.jsx)(U.E,{className:"hidden 2xl:block relative h-[78dvh] overflow-y-auto pr-4 pt-0"})]})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[7518,3922,3873,5271,3380,844,9204,6446,2150,6711,585,5479,4506,5897,8087,5760,3603,7753,7949,2362,4613,512,9910,8429,8481,2202,7825,1805,5290,4762,4218,4791,7228,6905,9986,1597,7528,5045,4809,9690,9325,9360,8154,1298,5340,4101,1029,1078,1683,5334,6862,4033,9484,9832,5565,2975,7363,8441,6891,7358],()=>n(67126)),_N_E=e.O()}]);