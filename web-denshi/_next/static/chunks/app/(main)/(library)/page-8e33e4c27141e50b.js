(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9981],{1211:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>ny,dynamic:()=>ng});var a=n(95155),i=n(19749),t=n(42094),s=n(68205),r=n(38900),o=n(86726),c=n(64629),d=n(9478),u=n(83563),m=n(75733),h=n(244),p=n(84127),g=n(76049),y=n(42500),x=n(29724),b=n(12115),v=n(70376),f=n(69554);let j=(0,y.eU)(!1);function S(){let e,l,n,t,s,r,o,c,y,S,L,_,E,I,A,P,T,R=(0,i.c)(46),[D,F]=(0,x.fp)(j),{mutate:O,isPending:M}=(0,d.pZ)();R[0]!==O||R[1]!==F?(e=function(){O({action:"lock"},{onSuccess:()=>{F(!1),f.oR.success("Files locked")}})},R[0]=O,R[1]=F,R[2]=e):e=R[2];let G=e;R[3]!==O||R[4]!==F?(l=function(){O({action:"unlock"},{onSuccess:()=>{F(!1),f.oR.success("Files unlocked")}})},R[3]=O,R[4]=F,R[5]=l):l=R[5];let B=l,{mutate:U,isPending:V}=(0,d.uO)();R[6]!==U||R[7]!==F?(n=function(){U(void 0,{onSuccess:()=>{F(!1)}})},R[6]=U,R[7]=F,R[8]=n):n=R[8];let z=n;R[9]!==z?(t={title:"Remove empty directories",description:"This action will remove all empty directories in the library. Are you sure you want to continue?",onConfirm:()=>{z()}},R[9]=z,R[10]=t):t=R[10];let K=(0,m.J)(t),{inject:H,remove:W}=(0,u.H)();R[11]!==G||R[12]!==B||R[13]!==H||R[14]!==W?(s=()=>(H("anime-library-bulk-actions",{priority:1,items:[{id:"lock-files",value:"lock",heading:"Library",render:k,onSelect:e=>{G()}},{id:"unlock-files",value:"unlock",heading:"Library",render:w,onSelect:e=>{B()}}],filter:C,shouldShow:N,showBasedOnInput:"startsWith"}),()=>W("anime-library-bulk-actions")),R[11]=G,R[12]=B,R[13]=H,R[14]=W,R[15]=s):s=R[15],R[16]===Symbol.for("react.memo_cache_sentinel")?(r=[],R[16]=r):r=R[16],b.useEffect(s,r),R[17]!==F?(o=()=>F(!1),R[17]=F,R[18]=o):o=R[18],R[19]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(v.E2M,{className:"text-2xl"}),R[19]=c):c=R[19];let q=M||V;R[20]!==G||R[21]!==q?(y=(0,a.jsx)(p.$n,{leftIcon:c,intent:"gray-outline",className:"w-full",disabled:q,onClick:G,children:"Lock all files"}),R[20]=G,R[21]=q,R[22]=y):y=R[22],R[23]===Symbol.for("react.memo_cache_sentinel")?(S=(0,a.jsx)(v.iXN,{className:"text-2xl"}),R[23]=S):S=R[23];let X=M||V;return R[24]!==B||R[25]!==X?(L=(0,a.jsx)(p.$n,{leftIcon:S,intent:"gray-outline",className:"w-full",disabled:X,onClick:B,children:"Unlock all files"}),R[24]=B,R[25]=X,R[26]=L):L=R[26],R[27]!==L||R[28]!==y?(_=(0,a.jsxs)("div",{className:"flex gap-2 flex-col md:flex-row",children:[y,L]}),R[27]=L,R[28]=y,R[29]=_):_=R[29],R[30]!==K?(E=()=>K.open(),R[30]=K,R[31]=E):E=R[31],R[32]!==M||R[33]!==V||R[34]!==E?(I=(0,a.jsx)(p.$n,{intent:"gray-outline",className:"w-full",disabled:M,loading:V,onClick:E,children:"Remove empty directories"}),R[32]=M,R[33]=V,R[34]=E,R[35]=I):I=R[35],R[36]!==_||R[37]!==I?(A=(0,a.jsxs)(h.KZ,{spacing:"sm",children:[_,I]}),R[36]=_,R[37]=I,R[38]=A):A=R[38],R[39]!==K?(P=(0,a.jsx)(m.K,{...K}),R[39]=K,R[40]=P):P=R[40],R[41]!==D||R[42]!==A||R[43]!==P||R[44]!==o?(T=(0,a.jsxs)(g.a,{open:D,onOpenChange:o,title:"Bulk actions",contentClass:"space-y-4",children:[A,P]}),R[41]=D,R[42]=A,R[43]=P,R[44]=o,R[45]=T):T=R[45],T}function N(e){let{ctx:l}=e;return"/"===l.router.pathname}function C(e){let{item:l,input:n}=e;return!n||l.value.toLowerCase().includes(n.toLowerCase())}function w(){return(0,a.jsx)("p",{children:"Unlock all files"})}function k(){return(0,a.jsx)("p",{children:"Lock all files"})}var L=n(86531),_=n(1382),E=n(58092),I=n(78106),A=n(63352),P=n(15388),T=n(12556),R=n(80893);let D=(0,y.eU)(!1);function F(e){let l,n,t,s,r,o,c,u,m,g,y=(0,i.c)(26),{files:v}=e,[f,j]=(0,x.fp)(D);(0,E.E)();let{mutate:S,isPending:N}=(0,d.bU)();y[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],y[0]=l):l=y[0];let[C,w]=b.useState(l);y[1]!==v?(n=()=>{var e;w(null!=(e=null==v?void 0:v.map(G))?e:[])},t=[v],y[1]=v,y[2]=n,y[3]=t):(n=y[2],t=y[3]),b.useLayoutEffect(n,t),y[4]!==C||y[5]!==S?(s=function(){C.length>0&&S({paths:C,action:"unignore"},{onSuccess:M})},y[4]=C,y[5]=S,y[6]=s):s=y[6];let k=s;return y[7]!==j?(r=()=>j(!1),y[7]=j,y[8]=r):r=y[8],y[9]!==v.length||y[10]!==k||y[11]!==N?(o=v.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("div",{className:"flex flex-1"}),(0,a.jsx)(p.$n,{leftIcon:(0,a.jsx)(R.dxg,{className:"text-lg"}),intent:"white",size:"sm",rounded:!0,loading:N,onClick:k,children:"Un-ignore selection"})]}),y[9]=v.length,y[10]=k,y[11]=N,y[12]=o):o=y[12],y[13]!==v.length?(c=0===v.length&&(0,a.jsx)(I.D,{title:null,children:"No ignored files"}),y[13]=v.length,y[14]=c):c=y[14],y[15]!==v||y[16]!==C?(u=v.length>0&&(0,a.jsxs)("div",{className:"bg-gray-950 border p-2 px-2 divide-y divide-[--border] rounded-[--radius-md] max-h-[85vh] max-w-full overflow-x-auto overflow-y-auto text-sm",children:[(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(A.Sc,{label:"Select all files",value:C.length===(null==v?void 0:v.length)||0!==C.length&&"indeterminate",onValueChange:e=>{"boolean"==typeof e&&w(e=>{var l;return e.length===(null==v?void 0:v.length)?[]:null!=(l=null==v?void 0:v.map(O))?l:[]})},fieldClass:"w-[fit-content]"})}),v.map((e,l)=>(0,a.jsx)("div",{className:"p-2 ",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(A.Sc,{label:"".concat(T.V.basename(e.path)),value:C.includes(e.path),onValueChange:l=>{"boolean"==typeof l&&w(n=>l?[...n,e.path]:n.filter(l=>l!==e.path))},fieldClass:"w-[fit-content]"})})},"".concat(e.path,"-").concat(l)))]}),y[15]=v,y[16]=C,y[17]=u):u=y[17],y[18]!==o||y[19]!==c||y[20]!==u?(m=(0,a.jsxs)(h.KZ,{className:"mt-4",children:[o,c,u]}),y[18]=o,y[19]=c,y[20]=u,y[21]=m):m=y[21],y[22]!==f||y[23]!==r||y[24]!==m?(g=(0,a.jsx)(P._s,{open:f,onOpenChange:r,size:"xl",title:"Ignored files",children:m}),y[22]=f,y[23]=r,y[24]=m,y[25]=g):g=y[25],g}function O(e){return e.path}function M(){f.oR.success("Files un-ignored")}function G(e){return e.path}var B=n(29648),U=n(2159),V=n(32754),z=n(43994);let K=(0,y.eU)(!1);function H(e){let{unknownGroups:l}=e,[n,i]=(0,x.fp)(K),{mutate:t,isPending:r}=(0,s.v5)(),{mutate:o,isPending:c}=(0,U.qt)(),d=(0,b.useCallback)(()=>{t({mediaIds:l.map(e=>e.mediaId)})},[l]);b.useEffect(()=>{0===l.length&&i(!1)},[l]);let u=(0,b.useCallback)(e=>{o({mediaId:e,action:"unmatch"},{onSuccess:()=>{f.oR.success("Media unmatched")}})},[]),{setPreviewModalMediaId:m}=(0,V.D)();return 0===l.length?null:(0,a.jsx)(P._s,{"data-unknown-media-manager-drawer":!0,open:n,onOpenChange:e=>{r||i(e)},size:"xl",title:"Resolve hidden media",children:(0,a.jsxs)(h.KZ,{className:"mt-4",children:[(0,a.jsxs)("p",{className:"",children:["Seanime matched ",l.length," group",1===l.length?"":"s"," to ",1===l.length?"a ":"","series that ",1===l.length?"is":"are"," absent from your AniList collection.",(0,a.jsx)("br",{}),"Add the media to be able to see entries in your library or unmatch them if incorrect."]}),(0,a.jsx)(p.$n,{leftIcon:(0,a.jsx)(R.Gn0,{}),onClick:d,loading:r,disabled:c,children:"Add all to AniList"}),(0,a.jsx)("div",{className:"divide divide-y divide-[--border] space-y-4",children:l.map(e=>{var l;return(0,a.jsxs)("div",{className:"pt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center w-full justify-between",children:[(0,a.jsxs)("h4",{className:"font-semibold flex gap-2 items-center",children:[(0,a.jsxs)("span",{children:["Anilist ID:"," "]}),(0,a.jsxs)("p",{className:"underline cursor-pointer text-brand-200 flex gap-1.5 items-center",onClick:()=>{m(e.mediaId,"anime")},children:[e.mediaId," ",(0,a.jsx)(z.GOD,{})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(p.$n,{size:"sm",intent:"primary-subtle",disabled:r,onClick:()=>t({mediaIds:[e.mediaId]}),leftIcon:(0,a.jsx)(v.Ca6,{}),children:"Add to AniList"}),(0,a.jsx)(p.$n,{size:"sm",intent:"warning-subtle",disabled:c,onClick:()=>u(e.mediaId),children:"Unmatch"})]})]}),(0,a.jsx)("div",{className:"bg-gray-900 border p-2 px-2 rounded-[--radius-md] space-y-1 max-h-40 max-w-full overflow-x-auto overflow-y-auto text-sm",children:null==(l=e.localFiles)?void 0:l.sort((e,l)=>{var n,a,i,t;return Number(null!=(i=null==(n=e.parsedInfo)?void 0:n.episode)?i:0)-Number(null!=(t=null==(a=l.parsedInfo)?void 0:a.episode)?t:0)}).map(e=>{var l;return(0,a.jsx)("p",{className:"text-[--muted] line-clamp-1 tracking-wide",children:(null==(l=e.parsedInfo)?void 0:l.original)||e.path},e.path)})})]},e.mediaId)})})]})})}var W=n(92952),q=n(62394);let X=[{id:"anime-continue-watching",type:"anime-continue-watching",schemaVersion:1},{id:"anime-library",type:"anime-library",schemaVersion:1,options:{statuses:["CURRENT","PAUSED","PLANNING","COMPLETED","DROPPED"],layout:"grid"}}],$=[{label:"Name",type:"text",name:"name"},{label:"Sorting",type:"select",name:"sorting",options:[{label:"Popular",value:"POPULARITY_DESC"},{label:"Trending",value:"TRENDING_DESC"},{label:"Romaji Title (A-Z)",value:"TITLE_ROMAJI_ASC"},{label:"Romaji Title (Z-A)",value:"TITLE_ROMAJI_DESC"},{label:"English title (A-Z)",value:"TITLE_ENGLISH_ASC"},{label:"English title (Z-A)",value:"TITLE_ENGLISH_DESC"},{label:"Score (0-10)",value:"SCORE"},{label:"Score (10-0)",value:"SCORE_DESC"}]},{label:"Status",type:"multi-select",name:"status",options:[{label:"Releasing",value:"RELEASING"},{label:"Finished",value:"FINISHED"},{label:"Not yet released",value:"NOT_YET_RELEASED"}]},{label:"Format",type:"select",name:"format",options:[{label:"TV",value:"TV"},{label:"Movie",value:"MOVIE"},{label:"OVA",value:"OVA"},{label:"ONA",value:"ONA"},{label:"Special",value:"SPECIAL"}]},{label:"Genres",type:"multi-select",options:q.mY.map(e=>({value:e,label:e})),name:"genres"},{label:"Season",type:"select",name:"season",options:[{value:"WINTER",label:"Winter"},{value:"SPRING",label:"Spring"},{value:"SUMMER",label:"Summer"},{value:"FALL",label:"Fall"}]},{label:"Year",type:"number",name:"year",min:0,max:2100},{label:"Country of Origin",type:"select",name:"countryOfOrigin",options:q.Mm}],Q={"anime-continue-watching":{name:"Continue Watching",kind:["row","header"],schemaVersion:1,description:"Display a list of episodes you are currently watching."},"anime-continue-watching-header":{name:"Continue Watching Header",kind:["header"],schemaVersion:1,description:"Display a header with a carousel of anime you are currently watching."},"anime-library":{name:"Anime Library",kind:["row"],schemaVersion:2,description:"Display anime you have in your library by status.",options:[{label:"Statuses",name:"statuses",type:"multi-select",options:[{value:"CURRENT",label:"Currently Watching"},{value:"PAUSED",label:"Paused"},{value:"PLANNING",label:"Planning"},{value:"COMPLETED",label:"Completed"},{value:"DROPPED",label:"Dropped"}]},{label:"Layout",name:"layout",type:"select",options:[{label:"Grid",value:"grid"},{label:"Carousel",value:"carousel"}]}]},"local-anime-library":{name:"Local Anime Library",kind:["row"],schemaVersion:2,description:"Display a complete grid of anime you have in your local library.",options:[{label:"Layout",name:"layout",type:"select",options:[{label:"Grid",value:"grid"},{label:"Carousel",value:"carousel"}]}]},"library-upcoming-episodes":{name:"Upcoming Library Episodes",kind:["row"],schemaVersion:1,description:"Display a carousel of upcoming episodes from anime you have in your library."},"aired-recently":{name:"Aired Recently (Global)",kind:["row"],schemaVersion:1,description:"Display a carousel of anime episodes that aired recently."},"anime-schedule-calendar":{name:"Anime Schedule Calendar",kind:["row"],schemaVersion:1,description:"Display a calendar of anime episodes based on their airing schedule."},"local-anime-library-stats":{name:"Local Anime Library Stats",kind:["row"],schemaVersion:1,description:"Display the stats for your local anime library."},"discover-header":{name:"Discover Header",kind:["header"],schemaVersion:1,description:"Display a header with a carousel of anime that are trending."},"anime-carousel":{name:"Anime Carousel",kind:["row"],schemaVersion:3,options:$,description:"Display a carousel of anime based on the selected options."},"manga-carousel":{name:"Manga Carousel",kind:["row"],schemaVersion:1,description:"Display a carousel of manga based on the selected options.",options:$.map(e=>"format"===e.name?{...e,options:[{label:"Manga",value:"MANGA"},{label:"One Shot",value:"ONE_SHOT"}]}:e)},"manga-library":{name:"Manga Library",kind:["row","header"],schemaVersion:2,description:"Display a list of manga you have in your library by status.",options:[{label:"Statuses",name:"statuses",type:"multi-select",options:[{value:"CURRENT",label:"Currently Reading"},{value:"PAUSED",label:"Paused"}]},{label:"Layout",name:"layout",type:"select",options:[{label:"Grid",value:"grid"},{label:"Carousel",value:"carousel"}]}]}},Z=Object.keys(Q);var Y=n(74889),J=n(98802),ee=n(7013),el=n(55014),en=n(96826),ea=n(26603),ei=n(74907),et=n(24038),es=n(91360),er=n(2091),eo=n(76136),ec=n(52885),ed=n(30033),eu=n(53712),em=n(1925),eh=n(98317),ep=n(76445),eg=n(63981),ey=n(46278),ex=n(38628),eb=n(41452);let ev=(0,y.eU)(!1),ef={"anime-continue-watching":z.Ubi,"anime-continue-watching-header":z.Ubi,"anime-library":eb.wHW,"local-anime-library":ex.yPD,"library-upcoming-episodes":z.wr3,"aired-recently":z.CZu,"anime-schedule-calendar":z.IdP,"local-anime-library-stats":v.veA,"discover-header":z.Gd$,"anime-carousel":R.XL_,"manga-carousel":R.XL_,"manga-continue-reading":z.Z5q,"manga-library":z.Z5q};function ej(e){var l,n,i,t;let{emptyLibrary:s,isNakamaLibrary:r}=e,c=(0,en.v1)(),[d,u]=(0,x.fp)(ev),[m,h]=b.useState(null),{data:p,isLoading:y}=(0,o.bN)(),{mutate:j,isPending:S}=(0,o.sA)(),[N,C]=b.useState(p||X),w=Z.filter(e=>"anime-carousel"===e||"manga-carousel"===e||!N.some(l=>l.type===e)),k=b.useRef(null);b.useEffect(()=>{let e=p||X;return C(e),k.current&&(clearTimeout(k.current),k.current=null),k.current=setTimeout(()=>{let l=_(N);l.length!==e.length&&(C(l),j({items:l},{onSuccess:()=>{console.log("Home items updated")}}))},500),()=>{k.current&&(clearTimeout(k.current),k.current=null)}},[p]);let L=b.useCallback(e=>{let{active:l,over:n}=e;if(l.id!==(null==n?void 0:n.id)){let e=N.findIndex(e=>e.id===l.id),a=N.findIndex(e=>e.id===(null==n?void 0:n.id)),i=_((0,ep.be)(N,e,a));C(i),j({items:i},{onSuccess:()=>{}})}},[N,j]);function _(e){let l=e.filter(e=>!!Q[e.type]);return l.map(e=>({...e,schemaVersion:Q[e.type].schemaVersion}))}let E=e=>{let l=_([...N,{id:(0,ea.gZ)(),type:e,schemaVersion:Q[e].schemaVersion}]);C(l),j({items:l},{onSuccess:()=>{f.oR.success("Home item added")}})},I=e=>{let l=_(N.filter(l=>l.id!==e));C(l),j({items:l},{onSuccess:()=>{f.oR.success("Home item removed")}})},A=(null==c||null==(l=c.torrentstreamSettings)?void 0:l.includeInLibrary)||(null==c||null==(n=c.debridSettings)?void 0:n.includeDebridStreamInLibrary)||(null==c||null==(t=c.settings)||null==(i=t.library)?void 0:i.includeOnlineStreamingInLibrary)?"stream":"local",{mutateAsync:P,isPending:T}=(0,ee.Ok)(),{mutateAsync:R,isPending:D}=(0,el.c3)(),{mutateAsync:F,isPending:O}=(0,J.wO)(),M=(0,ey.jE)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(g.a,{open:d,onOpenChange:u,title:(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full justify-center",children:[(0,a.jsx)(ex.M14,{className:"size-5"}),"Home ",(0,a.jsx)(ei.q,{className:"ml-0 mt-0.5"})]}),contentClass:"max-w-5xl bg-gray-950 bg-opacity-80 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none sm:rounded-3xl",overlayClass:"bg-gray-950/70 backdrop-blur-sm",children:[(0,a.jsx)(et.Z,{variant:"classic",spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01,className:"opacity-50 !mt-0"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(z.Ubi,{className:"size-5"}),(0,a.jsx)("h4",{className:"text-lg font-semibold",children:"Anime Library"})]}),(0,a.jsx)(ec.z,{value:A,onValueChange:e=>{(async()=>{var l;await Promise.all([P({...null==c?void 0:c.settings,library:{...null==c||null==(l=c.settings)?void 0:l.library,includeOnlineStreamingInLibrary:"stream"===e}}),R({settings:{...null==c?void 0:c.torrentstreamSettings,includeInLibrary:"stream"===e}}),F({settings:{...null==c?void 0:c.debridSettings,includeDebridStreamInLibrary:"stream"===e}})]),await M.invalidateQueries({queryKey:[Y.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await M.invalidateQueries({queryKey:[Y.S.ANIME_ENTRIES.GetMissingEpisodes.key]})})()},disabled:T||D||O,options:[{label:"Local anime only",value:"local"},{label:"Local anime + Streaming",value:"stream"}],itemClass:(0,es.cn)("border-transparent absolute top-2 right-2 bg-transparent dark:bg-transparent dark:data-[state=unchecked]:bg-transparent","data-[state=unchecked]:bg-transparent data-[state=unchecked]:hover:bg-transparent dark:data-[state=unchecked]:hover:bg-transparent","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent"),stackClass:"space-y-0 flex flex-row gap-2",itemIndicatorClass:"hidden",itemLabelClass:"font-normal tracking-wide line-clamp-1 truncate flex flex-col items-center data-[state=checked]:text-[--gray] cursor-pointer",itemContainerClass:(0,es.cn)("items-start cursor-pointer transition border-transparent rounded-[--radius] py-1.5 px-3 w-full","hover:bg-[--subtle] dark:bg-gray-900","data-[state=checked]:bg-white dark:data-[state=unchecked]:hover:bg-gray-800 dark:data-[state=checked]:bg-gray-900","focus:ring-2 ring-transparent dark:ring-transparent outline-none ring-offset-1 ring-offset-[--background] focus-within:ring-2 transition","border border-transparent data-[state=checked]:border-gray-500 data-[state=checked]:ring-offset-0")}),(0,a.jsx)("p",{className:"text-sm text-[--muted] pt-4",children:"local"===A?"Only anime in your local library will be displayed":"All anime in your currently watching list will be included in the library"})]}),(0,a.jsxs)("div",{className:(0,es.cn)(r&&"pointer-events-none opacity-30"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(z.hXO,{className:"size-5"}),(0,a.jsx)("h4",{className:"text-lg font-semibold",children:"Home Layout"})]}),y?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(er.kt,{})}):(0,a.jsx)(em.Mp,{modifiers:[eh.FN],onDragEnd:L,children:(0,a.jsx)(ep.gB,{items:N.map(e=>e.id),strategy:ep._G,children:(0,a.jsx)("div",{className:"space-y-2 bg-gray-900/30 rounded-xl p-4 border border-gray-800",children:0===N.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No items added yet. Add some items below to customize your home screen."}):N.map((e,l)=>(0,a.jsx)(eS,{item:e,index:l,onRemove:I,onEditOptions:h,isUpdating:S},e.id))})})})]}),(0,a.jsxs)("div",{className:(0,es.cn)(r&&"pointer-events-none opacity-30"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(v.Ca6,{className:"size-5"}),(0,a.jsx)("h4",{className:"text-lg font-semibold",children:"Available Items"})]}),0===w.length?(0,a.jsx)("div",{className:"text-center py-6 text-gray-400",children:"All available items have been added to your home screen."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:w.toSorted((e,l)=>Q[e].name.localeCompare(Q[l].name)).map(e=>(0,a.jsx)(eL,{id:e,type:e,onAdd:E,isUpdating:S},e))})]})]})]}),m&&(0,a.jsx)(eE,{id:m,item:N.find(e=>e.id===m),isOpen:!!m,onClose:()=>h(null),onSave:(e,l)=>{let n=_(N.map(n=>n.id===e?{...n,options:l}:n));C(n),j({items:n},{onSuccess:()=>{f.oR.success("Home layout updated"),h(null)}})},isUpdating:S})]})}function eS(e){var l,n,t,s,r,o,c,d;let u,m,h,g,y,x,b,f,j,S,N,C,w,k,L,_,E=(0,i.c)(49),{item:I,onRemove:A,onEditOptions:P,isUpdating:T,index:R}=e;E[0]!==I.id?(u={id:I.id},E[0]=I.id,E[1]=u):u=E[1];let{attributes:D,listeners:F,setNodeRef:O,transform:M,transition:G}=(0,ep.gl)(u);E[2]!==M?(m=eg.Ks.Transform.toString(M?{...M,scaleY:1}:null),E[2]=M,E[3]=m):m=E[3],E[4]!==m||E[5]!==G?(h={transform:m,transition:G},E[4]=m,E[5]=G,E[6]=h):h=E[6];let B=h,U=Q[I.type],V=ef[I.type]||ex.M14;if(!U)return null;let z=1===U.kind.length&&"header"===U.kind[0]&&0!==R&&"opacity-50";E[7]!==z?(g=(0,es.cn)("flex items-center gap-3 p-3 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-gray-600 transition-colors cursor-move",z),E[7]=z,E[8]=g):g=E[8],E[9]!==V?(y=(0,a.jsx)("div",{className:"p-2 bg-gray-700/50 rounded-lg",children:(0,a.jsx)(V,{className:"size-5 text-gray-300"})}),E[9]=V,E[10]=y):y=E[10];let K=!!(null==(l=I.options)?void 0:l.name)&&": ".concat(I.options.name);return E[11]!==U.name||E[12]!==K?(x=(0,a.jsxs)("div",{className:"font-medium text-white",children:[U.name,K]}),E[11]=U.name,E[12]=K,E[13]=x):x=E[13],E[14]!==U.description?(b=(0,a.jsx)("p",{className:"text-xs text-[--muted] line-clamp-1",children:U.description}),E[14]=U.description,E[15]=b):b=E[15],E[16]!==U.kind?(f=U.kind.map(ek).join(", "),E[16]=U.kind,E[17]=f):f=E[17],E[18]!==f?(j=(0,a.jsx)("div",{className:"text-sm text-gray-400",children:f}),E[18]=f,E[19]=j):j=E[19],E[20]!==j||E[21]!==x||E[22]!==b?(S=(0,a.jsxs)("div",{className:"flex-1",children:[x,b,j]}),E[20]=j,E[21]=x,E[22]=b,E[23]=S):S=E[23],E[24]!==U.options||E[25]!==T||E[26]!==I.id||E[27]!==(null==(t=I.options)||null==(n=t.name)?void 0:n.length)||E[28]!==P?(N=U.options&&(0,a.jsx)(p.K0,{intent:"gray-subtle",size:"sm",onClick:()=>P(I.id),disabled:T,className:(0,es.cn)("hover:bg-blue-500/20 hover:text-blue-400",(null==(s=U.options)?void 0:s.find(ew))&&!(null==(o=I.options)||null==(r=o.name)?void 0:r.length)&&"bg-fuchsia-600 animate-bounce"),icon:(0,a.jsx)(v.nMM,{className:"size-4"}),onPointerDown:eC}),E[24]=U.options,E[25]=T,E[26]=I.id,E[27]=null==(d=I.options)||null==(c=d.name)?void 0:c.length,E[28]=P,E[29]=N):N=E[29],E[30]!==I.id||E[31]!==A?(C=()=>A(I.id),E[30]=I.id,E[31]=A,E[32]=C):C=E[32],E[33]===Symbol.for("react.memo_cache_sentinel")?(w=(0,a.jsx)(v.id1,{className:"size-4"}),E[33]=w):w=E[33],E[34]!==T||E[35]!==C?(k=(0,a.jsx)(p.K0,{intent:"gray-subtle",size:"sm",onClick:C,disabled:T,className:"hover:bg-red-500/20 hover:text-red-400",icon:w,onPointerDown:eN}),E[34]=T,E[35]=C,E[36]=k):k=E[36],E[37]!==N||E[38]!==k?(L=(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[N,k]}),E[37]=N,E[38]=k,E[39]=L):L=E[39],E[40]!==D||E[41]!==F||E[42]!==O||E[43]!==B||E[44]!==S||E[45]!==L||E[46]!==g||E[47]!==y?(_=(0,a.jsxs)("div",{ref:O,style:B,...D,...F,className:g,children:[y,S,L]}),E[40]=D,E[41]=F,E[42]=O,E[43]=B,E[44]=S,E[45]=L,E[46]=g,E[47]=y,E[48]=_):_=E[48],_}function eN(e){return e.stopPropagation()}function eC(e){return e.stopPropagation()}function ew(e){return"name"===e.name}function ek(e){return e.charAt(0).toUpperCase()+e.slice(1)}function eL(e){let l,n,t,s,r,o,c,d,u,m,h=(0,i.c)(25),{type:g,onAdd:y,isUpdating:x}=e,b=Q[g],f=ef[g]||ex.M14;return b?(h[0]!==f?(l=(0,a.jsx)("div",{className:"p-2 bg-gray-800/50 rounded-lg group-hover:bg-gray-700/50 transition-colors",children:(0,a.jsx)(f,{className:"size-5 text-gray-400 group-hover:text-gray-300 transition-colors"})}),h[0]=f,h[1]=l):l=h[1],h[2]!==b.name?(n=(0,a.jsx)("div",{className:"font-medium text-white",children:b.name}),h[2]=b.name,h[3]=n):n=h[3],h[4]!==b.description?(t=(0,a.jsx)("p",{className:"text-xs text-[--muted]",children:b.description}),h[4]=b.description,h[5]=t):t=h[5],h[6]!==b.kind?(s=b.kind.map(e_).join(", "),h[6]=b.kind,h[7]=s):s=h[7],h[8]!==s?(r=(0,a.jsx)("div",{className:"text-sm text-gray-400",children:s}),h[8]=s,h[9]=r):r=h[9],h[10]!==n||h[11]!==t||h[12]!==r?(o=(0,a.jsxs)("div",{className:"flex-1",children:[n,t,r]}),h[10]=n,h[11]=t,h[12]=r,h[13]=o):o=h[13],h[14]!==y||h[15]!==g?(c=()=>y(g),h[14]=y,h[15]=g,h[16]=c):c=h[16],h[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(v.Ca6,{}),h[17]=d):d=h[17],h[18]!==x||h[19]!==c?(u=(0,a.jsx)(p.$n,{intent:"primary-subtle",size:"sm",onClick:c,disabled:x,leftIcon:d,children:"Add"}),h[18]=x,h[19]=c,h[20]=u):u=h[20],h[21]!==l||h[22]!==o||h[23]!==u?(m=(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-900/30 rounded-xl border border-gray-800 hover:border-gray-700 transition-colors group",children:[l,o,u]}),h[21]=l,h[22]=o,h[23]=u,h[24]=m):m=h[24],m):null}function e_(e){return e.charAt(0).toUpperCase()+e.slice(1)}function eE(e){let l,n,t,s,r,o,c,d,u,m,h,y=(0,i.c)(26),{id:x,item:f,isOpen:j,onClose:S,onSave:N,isUpdating:C}=e,w=Q[f.type];y[0]!==f.options?(l=f.options||{},y[0]=f.options,y[1]=l):l=y[1];let[k,L]=b.useState(l);if(b.useEffect(()=>{if(!w||w.schemaVersion!==f.schemaVersion)return void L({});L(f.options||{})},[f.options,w]),!(null==w?void 0:w.options))return null;y[2]===Symbol.for("react.memo_cache_sentinel")?(n=(e,l)=>{L(n=>({...n,[e]:l}))},y[2]=n):n=y[2];let _=n;y[3]!==k||y[4]!==x||y[5]!==N?(t=()=>{N(x,k)},y[3]=k,y[4]=x,y[5]=N,y[6]=t):t=y[6];let E=t;y[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(v.nMM,{className:"size-5"}),y[7]=s):s=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Customize the settings for this home item."}),y[8]=r):r=y[8],y[9]!==k?(o=e=>(0,a.jsx)(eI,{option:e,value:k[e.name],onChange:l=>_(e.name,l)},e.name),y[9]=k,y[10]=o):o=y[10];let I=(w.options||[]).map(o);return y[11]!==I?(c=(0,a.jsx)("div",{className:"space-y-4",children:I}),y[11]=I,y[12]=c):c=y[12],y[13]!==C||y[14]!==S?(d=(0,a.jsx)(p.$n,{intent:"gray-subtle",onClick:S,disabled:C,children:"Cancel"}),y[13]=C,y[14]=S,y[15]=d):d=y[15],y[16]!==E||y[17]!==C?(u=(0,a.jsx)(p.$n,{intent:"primary",onClick:E,loading:C,children:"Save Changes"}),y[16]=E,y[17]=C,y[18]=u):u=y[18],y[19]!==d||y[20]!==u?(m=(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800",children:[d,u]}),y[19]=d,y[20]=u,y[21]=m):m=y[21],y[22]!==c||y[23]!==m||y[24]!==r?(h=(0,a.jsxs)("div",{className:"space-y-6",children:[r,c,m]}),y[22]=c,y[23]=m,y[24]=r,y[25]=h):h=y[25],(0,a.jsx)(g.a,{open:j,onOpenChange:S,title:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s,"Configure ",w.name]}),contentClass:"max-w-2xl bg-gray-950 bg-opacity-60 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none sm:rounded-3xl",overlayClass:"bg-gray-950/70 backdrop-blur-sm",children:h})}function eI(e){let l,n=(0,i.c)(56),{option:t,value:s,onChange:r}=e,{label:o,type:c,options:d,min:u,max:m}=t;n[0]!==r||n[1]!==s?(l=e=>{let l=Array.isArray(s)?s:[];r(l.includes(e)?l.filter(l=>l!==e):[...l,e])},n[0]=r,n[1]=s,n[2]=l):l=n[2];let h=l;switch(c){case"text":{let e,l,i,t;n[3]!==o?(e=(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[3]=o,n[4]=e):e=n[4];let c=s||"";n[5]!==r?(l=e=>r(e.target.value),n[5]=r,n[6]=l):l=n[6];let d="Enter ".concat(o.toLowerCase());return n[7]!==c||n[8]!==l||n[9]!==d?(i=(0,a.jsx)(eu.k,{value:c,onChange:l,placeholder:d}),n[7]=c,n[8]=l,n[9]=d,n[10]=i):i=n[10],n[11]!==e||n[12]!==i?(t=(0,a.jsxs)("div",{className:"space-y-2",children:[e,i]}),n[11]=e,n[12]=i,n[13]=t):t=n[13],t}case"number":{let e,l,i,t;n[14]!==o?(e=(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[14]=o,n[15]=e):e=n[15];let c=s||u||0;return n[16]!==r?(l=e=>r(e),n[16]=r,n[17]=l):l=n[17],n[18]!==m||n[19]!==u||n[20]!==c||n[21]!==l?(i=(0,a.jsx)(eo.Q,{value:c,onValueChange:l,min:u,max:m}),n[18]=m,n[19]=u,n[20]=c,n[21]=l,n[22]=i):i=n[22],n[23]!==e||n[24]!==i?(t=(0,a.jsxs)("div",{className:"space-y-2",children:[e,i]}),n[23]=e,n[24]=i,n[25]=t):t=n[25],t}case"select":{let e,l,i,t;n[26]!==o?(e=(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[26]=o,n[27]=e):e=n[27];let c=s||"",u="Select ".concat(o.toLowerCase());return n[28]!==d?(l=[...d],n[28]=d,n[29]=l):l=n[29],n[30]!==r||n[31]!==c||n[32]!==u||n[33]!==l?(i=(0,a.jsx)(ed.l,{value:c,onValueChange:r,placeholder:u,options:l}),n[30]=r,n[31]=c,n[32]=u,n[33]=l,n[34]=i):i=n[34],n[35]!==e||n[36]!==i?(t=(0,a.jsxs)("div",{className:"space-y-2",children:[e,i]}),n[35]=e,n[36]=i,n[37]=t):t=n[37],t}case"multi-select":{let e,l,i,t,r;n[38]!==s?(e=Array.isArray(s)?s:[],n[38]=s,n[39]=e):e=n[39];let c=e;if(n[40]!==o?(l=(0,a.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[40]=o,n[41]=l):l=n[41],n[42]!==h||n[43]!==d||n[44]!==c){let e;n[46]!==h||n[47]!==c?(e=e=>(0,a.jsx)("button",{type:"button",onClick:()=>h(e.value),className:(0,es.cn)("p-2 text-sm rounded-md border transition-colors text-left",c.includes(e.value)?"bg-brand-500/20 border-brand-500 text-brand-300":"bg-gray-800/50 border-gray-700 text-gray-300 hover:border-gray-600"),children:e.label},e.value),n[46]=h,n[47]=c,n[48]=e):e=n[48],i=d.map(e),n[42]=h,n[43]=d,n[44]=c,n[45]=i}else i=n[45];return n[49]!==i?(t=(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-48 overflow-y-auto p-3 bg-gray-900/30 rounded-lg border border-gray-800",children:i}),n[49]=i,n[50]=t):t=n[50],n[51]!==l||n[52]!==t?(r=(0,a.jsxs)("div",{className:"space-y-2",children:[l,t]}),n[51]=l,n[52]=t,n[53]=r):r=n[53],r}default:{let e;return n[54]!==c?(e=(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:["Unsupported field type: ",c]}),n[54]=c,n[55]=e):e=n[55],e}}}var eA=n(10109),eP=n(17934),eT=n(2311);function eR(e){let l,n=(0,i.c)(1);return(0,eA.Lq)(),n[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(eP._2,{children:[(0,a.jsx)(eT.Lpt,{className:"text-2xl"}),(0,a.jsx)("span",{children:"Play random anime"})]})}),n[0]=l):l=n[0],l}var eD=n(97400),eF=n(21842);let eO=(0,eF.tG)("sea-v3-home-settings-toolbar-button-discovered",!1);function eM(e){let l=(0,i.c)(3),{type:n}=e;(0,x.fp)(eO);let[,t]=(0,x.fp)(ev);if("toolbar"===n){let e,n;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(z.ZB5,{className:"text-2xl"}),l[0]=e):e=l[0],l[1]!==t?(n=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eD.m_,{trigger:(0,a.jsx)(p.K0,{"data-library-toolbar-switch-view-button":!0,intent:"white-subtle",icon:e,onClick:()=>{t(!0)}}),children:"Home Settings"})}),l[1]=t,l[2]=n):n=l[2],n}}var eG=n(41611),eB=n(29694),eU=n(5249),eV=n(91332),ez=n(10653);function eK(e){var l,n,t,s,r,o;let c,d,u,m,h,g,y,b,f,S=(0,i.c)(41),{unmatchedLocalFiles:N,unknownGroups:C,hasEntries:w,isStreamingOnly:k,isNakamaLibrary:L,className:_}=e;(0,eV.Ky)();let I=(0,x.Xr)(j),A=(0,en.v1)(),P=(0,x.Xr)(B.ho),T=(0,x.Xr)(W.r),F=(0,x.Xr)(D),O=(0,x.Xr)(K),M=(0,x.Xr)(eG.qE),{setModalOpen:G}=(0,eB.e)(),[U,V]=(0,x.fp)(l3),{mutate:H}=(0,E.E)(),q=!!(null==A||null==(n=A.settings)||null==(l=n.library)?void 0:l.libraryPath);return S[0]!==_?(c=(0,es.cn)("flex flex-wrap w-full justify-end gap-1 p-4 relative z-[10]",_),S[0]=_,S[1]=c):c=S[1],S[2]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)("div",{className:"flex flex-1 pointer-events-none","data-library-toolbar-spacer":!0}),S[2]=d):d=S[2],S[3]!==w||S[4]!==q||S[5]!==U||S[6]!==L||S[7]!==k||S[8]!==V||S[9]!==M||S[10]!==G||S[11]!==N.length?(u=w&&(0,a.jsxs)(a.Fragment,{children:[!k&&!L&&(0,a.jsx)(eD.m_,{trigger:(0,a.jsx)(p.K0,{"data-library-toolbar-switch-view-button":!0,intent:"base"===U?"white-subtle":"white",icon:"base"===U?(0,a.jsx)(ex.yPD,{className:"text-2xl"}):(0,a.jsx)(ex.oKG,{className:"text-2xl"}),onClick:()=>V(eH)}),children:"base"===U?"Local Anime Library":"Home"}),!k&&!L&&q&&(0,a.jsx)(eD.m_,{trigger:(0,a.jsx)(p.K0,{"data-library-toolbar-switch-view-button":!0,intent:"white-subtle",icon:(0,a.jsx)(z.kWS,{className:"text-2xl"}),onClick:()=>{M(!0)},className:(0,es.cn)(N.length>0&&"animate-pulse")}),children:"Library Explorer"}),(0,a.jsx)(eD.m_,{trigger:(0,a.jsx)(p.K0,{"data-library-toolbar-playlists-button":!0,intent:"white-subtle",icon:(0,a.jsx)(eb.wHW,{className:"text-2xl"}),onClick:()=>G(!0)}),children:"Playlists"})]}),S[3]=w,S[4]=q,S[5]=U,S[6]=L,S[7]=k,S[8]=V,S[9]=M,S[10]=G,S[11]=N.length,S[12]=u):u=S[12],S[13]!==w||S[14]!==q||S[15]!==L||S[16]!==P?(m=!L&&q&&(0,a.jsx)(eD.m_,{trigger:(0,a.jsx)("div",{children:(0,a.jsx)(p.$n,{"data-library-toolbar-scan-button":!0,intent:w?"white-subtle":"primary",leftIcon:w?(0,a.jsx)(z.Z05,{className:"text-xl"}):(0,a.jsx)(z.OjV,{className:"text-xl"}),onClick:()=>P(!0),hideTextOnSmallScreen:!0,children:w?"Refresh":"Scan"})}),children:w?"Refresh Anime Library":"Scan Anime Library"}),S[13]=w,S[14]=q,S[15]=L,S[16]=P,S[17]=m):m=S[17],S[18]!==T||S[19]!==N.length?(h=N.length>0&&(0,a.jsxs)(p.$n,{"data-library-toolbar-unmatched-button":!0,intent:"alert",leftIcon:(0,a.jsx)(ex.Q9o,{}),className:"animate-bounce",onClick:()=>T(!0),children:["Resolve unmatched (",N.length,")"]}),S[18]=T,S[19]=N.length,S[20]=h):h=S[20],S[21]!==O||S[22]!==C.length?(g=C.length>0&&(0,a.jsxs)(p.$n,{"data-library-toolbar-unknown-button":!0,intent:"warning",leftIcon:(0,a.jsx)(ex.Q9o,{}),className:"animate-bounce",onClick:()=>O(!0),children:["Resolve hidden media (",C.length,")"]}),S[21]=O,S[22]=C.length,S[23]=g):g=S[23],S[24]===Symbol.for("react.memo_cache_sentinel")?(y=(0,a.jsx)(eM,{type:"toolbar"}),S[24]=y):y=S[24],S[25]!==w||S[26]!==q||S[27]!==L||S[28]!==k||S[29]!==H||S[30]!==I||S[31]!==F||S[32]!==(null==A||null==(s=A.settings)||null==(t=s.library)?void 0:t.libraryPath)?(b=!k&&!L&&q&&(0,a.jsxs)(eP.rI,{trigger:(0,a.jsx)(p.K0,{"data-library-toolbar-dropdown-menu-trigger":!0,icon:(0,a.jsx)(v.voe,{}),intent:"gray-basic"}),children:[(0,a.jsxs)(eP._2,{"data-library-toolbar-open-directory-button":!0,disabled:!q,className:(0,es.cn)("cursor-pointer",{"!text-[--muted]":!q}),onClick:()=>{var e,l,n;H({path:null!=(n=null==A||null==(l=A.settings)||null==(e=l.library)?void 0:e.libraryPath)?n:""})},children:[(0,a.jsx)(v.gNt,{}),(0,a.jsx)("span",{children:"Open directory"})]}),(0,a.jsxs)(eP._2,{"data-library-toolbar-bulk-actions-button":!0,onClick:()=>I(!0),disabled:!w,className:(0,es.cn)({"!text-[--muted]":!w}),children:[(0,a.jsx)(v.S6K,{}),(0,a.jsx)("span",{children:"Bulk actions"})]}),(0,a.jsxs)(eP._2,{"data-library-toolbar-ignored-files-button":!0,onClick:()=>F(!0),className:(0,es.cn)({"!text-[--muted]":!w}),children:[(0,a.jsx)(R.dxg,{}),(0,a.jsx)("span",{children:"Ignored files"})]}),(0,a.jsx)(eU.i,{href:"/scan-summaries",children:(0,a.jsxs)(eP._2,{"data-library-toolbar-scan-summaries-button":!0,children:[(0,a.jsx)(R.rlW,{}),(0,a.jsx)("span",{children:"Scan summaries"})]})}),!(k||L)&&(0,a.jsx)(eR,{}),(0,a.jsx)(ez.QV,{})]}),S[25]=w,S[26]=q,S[27]=L,S[28]=k,S[29]=H,S[30]=I,S[31]=F,S[32]=null==A||null==(o=A.settings)||null==(r=o.library)?void 0:r.libraryPath,S[33]=b):b=S[33],S[34]!==c||S[35]!==u||S[36]!==m||S[37]!==h||S[38]!==g||S[39]!==b?(f=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:c,"data-library-toolbar-container":!0,children:[d,u,m,h,g,y,b]})}),S[34]=c,S[35]=u,S[36]=m,S[37]=h,S[38]=g,S[39]=b,S[40]=f):f=S[40],f}function eH(e){return"detailed"===e?"base":"detailed"}var eW=n(90984),eq=n(83394),eX=n(14370),e$=n(85210),eQ=n(47555);let eZ={...e$.Bq,sorting:"TITLE"},eY=(0,eQ.E)(eZ),eJ=(0,eF.tG)("sea-detailed-library-selected-list","-"),e0=(0,eQ.E)("");var e1=n(36945),e2=n(61585),e3=n(37191),e4=n(81281),e5=n(45754),e6=n(6708),e7=n(60695),e8=n(23391),e9=n(80743),le=n(78711),ll=n(78453),ln=n(3692),la=n(75780),li=n(40568);function lt(e){var l,n,t;let r,o,c,d,u,m,h,g,y,v=(0,i.c)(38),{isLoading:f,hasEntries:j,streamingMediaIds:S,isNakamaLibrary:N,isHomeItem:C,type:w}=e,k=void 0===w?"grid":w;(0,eV.Ky)();let L=(0,x.Xr)(l3),_=(0,e4.zh)(),{stats:E,libraryCollectionList:I,libraryGenres:A,libraryEntries:P}=function(){var e,l,n,a,i,t,r,o,c,d,u,m;let{enabled:h=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!0},p=(0,en.v1)(),{animeLibraryCollectionDefaultSorting:g}=(0,eV.Ky)(),{data:y}=(0,eq.H_)(),{data:v,isLoading:f}=(0,s.lD)({enabled:h}),[j,S]=(0,x.fp)(eY),N=(0,eX.d)(j,500),C=(0,x.md)(e0);b.useLayoutEffect(()=>{let e={...j};e.sorting=g,S(e)},[v,g]);let w=b.useMemo(()=>{if(!v||!v.lists)return[];let e=v.lists.map(e=>{var l,n;if(!e)return e;let a=(0,e$.TI)(e.entries,j,null==p||null==(n=p.settings)||null==(l=n.anilist)?void 0:l.enableAdultContent,v.continueWatchingList,y);return{type:e.type,status:e.status,entries:a}});return[e.find(e=>"CURRENT"===e.type),e.find(e=>"PAUSED"===e.type),e.find(e=>"PLANNING"===e.type),e.find(e=>"COMPLETED"===e.type),e.find(e=>"DROPPED"===e.type)].filter(Boolean)},[v,N,null==p||null==(l=p.settings)||null==(e=l.anilist)?void 0:e.enableAdultContent,y]),k=b.useMemo(()=>w.map(e=>{if(!e)return e;let l=(0,e$.Qw)(e.entries,C);return{type:e.type,status:e.status,entries:l}}).filter(Boolean),[w,C]),L=b.useMemo(()=>{var e,l,n,a;if(!v||!v.lists)return[];let i=null!=(a=null==(e=v.lists)?void 0:e.flatMap(e=>e.entries).filter(Boolean))?a:[];return(0,e$.TI)(i,j,null==p||null==(n=p.settings)||null==(l=n.anilist)?void 0:l.enableAdultContent,v.continueWatchingList,y)},[v,N,null==p||null==(a=p.settings)||null==(n=a.anilist)?void 0:n.enableAdultContent,y]),_=b.useMemo(()=>(0,e$.Qw)(L,C),[L,C]),E=b.useMemo(()=>{var e,l,n,a;return(null==v?void 0:v.continueWatchingList)?!(null==p||null==(l=p.settings)||null==(e=l.anilist)?void 0:e.enableAdultContent)||(null==p||null==(a=p.settings)||null==(n=a.anilist)?void 0:n.blurAdultContent)?v.continueWatchingList.filter(e=>{var l;return(null==(l=e.baseAnime)?void 0:l.isAdult)===!1}):v.continueWatchingList:[]},[null==v?void 0:v.continueWatchingList,null==p||null==(t=p.settings)||null==(i=t.anilist)?void 0:i.enableAdultContent,null==p||null==(o=p.settings)||null==(r=o.anilist)?void 0:r.blurAdultContent]),I=b.useMemo(()=>{var e;return null==(e=[...new Set(null==k?void 0:k.flatMap(e=>{var l,n;return null!=(n=null==(l=e.entries)?void 0:l.flatMap(e=>{var l;return null==(l=e.media)?void 0:l.genres}))?n:[]}))].filter(Boolean))?void 0:e.sort((e,l)=>e.localeCompare(l))},[k]);return{isLoading:f,stats:null==v?void 0:v.stats,libraryCollectionList:k,libraryEntries:_,libraryGenres:I,continueWatchingList:E,unmatchedLocalFiles:null!=(c=null==v?void 0:v.unmatchedLocalFiles)?c:[],ignoredLocalFiles:null!=(d=null==v?void 0:v.ignoredLocalFiles)?d:[],unmatchedGroups:null!=(u=null==v?void 0:v.unmatchedGroups)?u:[],unknownGroups:null!=(m=null==v?void 0:v.unknownGroups)?m:[]}}(),[T,R]=(0,x.fp)(eJ);if(v[0]!==T||v[1]!==R?(r=()=>{"-"!==T&&"all"!==T&&R("-")},v[0]=T,v[1]=R,v[2]=r):r=v[2],v[3]===Symbol.for("react.memo_cache_sentinel")?(o=[],v[3]=o):o=v[3],b.useLayoutEffect(r,o),f){let e;return v[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(er.kt,{}),v[4]=e):e=v[4],e}return j?(v[5]!==C||v[6]!==N||v[7]!==(null==_||null==(l=_.hostConnectionStatus)?void 0:l.username)||v[8]!==L?(c=!C&&(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between","data-detailed-library-view-header-container":!0,children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center relative w-fit",children:[(0,a.jsx)(p.K0,{icon:(0,a.jsx)(ll.nXt,{}),rounded:!0,intent:"white-outline",size:"sm",onClick:()=>L("base")}),!N&&(0,a.jsx)("h3",{className:"text-ellipsis truncate",children:"Home"}),N&&(0,a.jsxs)("h3",{className:"text-ellipsis truncate",children:[(null==_||null==(n=_.hostConnectionStatus)?void 0:n.username)||"Host","'s Library"]})]}),(0,a.jsx)(lc,{})]}),v[5]=C,v[6]=N,v[7]=null==_||null==(t=_.hostConnectionStatus)?void 0:t.username,v[8]=L,v[9]=c):c=v[9],v[10]!==C||v[11]!==N||v[12]!==(null==E?void 0:E.totalEntries)||v[13]!==(null==E?void 0:E.totalFiles)||v[14]!==(null==E?void 0:E.totalMovies)||v[15]!==(null==E?void 0:E.totalShows)||v[16]!==(null==E?void 0:E.totalSize)||v[17]!==(null==E?void 0:E.totalSpecials)?(d=!C&&(0,a.jsxs)("div",{className:(0,es.cn)("grid grid-cols-3 lg:grid-cols-6 gap-4 [&>div]:text-center [&>div>p]:text-[--muted]",N&&"lg:grid-cols-5"),"data-detailed-library-view-stats-container":!0,children:[!N&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:null==E?void 0:E.totalSize}),(0,a.jsx)("p",{children:"Library"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:null==E?void 0:E.totalFiles}),(0,a.jsx)("p",{children:"Files"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:null==E?void 0:E.totalEntries}),(0,a.jsx)("p",{children:"Entries"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:null==E?void 0:E.totalShows}),(0,a.jsx)("p",{children:"TV Shows"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:null==E?void 0:E.totalMovies}),(0,a.jsx)("p",{children:"Movies"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:null==E?void 0:E.totalSpecials}),(0,a.jsx)("p",{children:"Specials"})]})]}),v[10]=C,v[11]=N,v[12]=null==E?void 0:E.totalEntries,v[13]=null==E?void 0:E.totalFiles,v[14]=null==E?void 0:E.totalMovies,v[15]=null==E?void 0:E.totalShows,v[16]=null==E?void 0:E.totalSize,v[17]=null==E?void 0:E.totalSpecials,v[18]=d):d=v[18],v[19]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)(ld,{}),v[19]=u):u=v[19],v[20]!==A?(m=(0,a.jsx)(lp,{genres:A}),v[20]=A,v[21]=m):m=v[21],v[22]!==I||v[23]!==T||v[24]!==S||v[25]!==k?(h="all"!==T&&I.map(e=>{var l;return(null==(l=e.entries)?void 0:l.length)?(0,a.jsx)(ls,{list:e,streamingMediaIds:S,type:k},e.type):null}),v[22]=I,v[23]=T,v[24]=S,v[25]=k,v[26]=h):h=v[26],v[27]!==P||v[28]!==T||v[29]!==S||v[30]!==k?(g="all"===T&&(0,a.jsx)(lr,{entries:P,streamingMediaIds:S,type:k}),v[27]=P,v[28]=T,v[29]=S,v[30]=k,v[31]=g):g=v[31],v[32]!==c||v[33]!==d||v[34]!==m||v[35]!==h||v[36]!==g?(y=(0,a.jsxs)(e5.f,{className:"px-4 space-y-8 relative z-[4]","data-detailed-library-view-container":!0,children:[c,d,u,m,h,g]}),v[32]=c,v[33]=d,v[34]=m,v[35]=h,v[36]=g,v[37]=y):y=v[37],y):null}let ls=b.memo(e=>{var l,n,t,s,r,o;let c,d,u,m,h,p,g=(0,i.c)(20),{list:y,streamingMediaIds:v,type:f}=e,[j]=(0,x.fp)(eJ);if("-"!==j&&j!==y.type)return null;let S=y.type;g[0]!==y.type?(c=(0,e9.me)(y.type),g[0]=y.type,g[1]=c):c=g[1];let N=null!=(n=null==y||null==(l=y.entries)?void 0:l.length)?n:0;return g[2]!==N?(d=(0,a.jsx)("span",{className:"text-[--muted] font-medium ml-3",children:N}),g[2]=N,g[3]=d):d=g[3],g[4]!==c||g[5]!==d?(u=(0,a.jsxs)("h2",{children:[c," ",d]}),g[4]=c,g[5]=d,g[6]=u):u=g[6],g[7]!==y.entries||g[8]!==v||g[9]!==f?(m="grid"===f&&(0,a.jsx)(e1.xt,{itemCount:(null==y||null==(t=y.entries)?void 0:t.length)||0,children:null==(s=y.entries)?void 0:s.map(e=>(0,a.jsx)(lo,{entry:e,streamingMediaIds:v,type:f},e.mediaId))}),g[7]=y.entries,g[8]=v,g[9]=f,g[10]=m):m=g[10],g[11]!==y.entries||g[12]!==v||g[13]!==f?(h="carousel"===f&&(0,a.jsxs)(e6.FN,{className:(0,es.cn)("w-full max-w-full !mt-0"),gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!1,children:[(0,a.jsx)(e6.h1,{className:"-top-2"}),(0,a.jsx)(e6.Wk,{className:"px-6",children:null==(o=y.entries)||null==(r=o.filter(Boolean))?void 0:r.map(e=>(0,a.jsx)(lo,{entry:e,streamingMediaIds:v,type:f},e.mediaId))})]}),g[11]=y.entries,g[12]=v,g[13]=f,g[14]=h):h=g[14],g[15]!==y.type||g[16]!==u||g[17]!==m||g[18]!==h?(p=(0,a.jsxs)(b.Fragment,{children:[u,m,h]},S),g[15]=y.type,g[16]=u,g[17]=m,g[18]=h,g[19]=p):p=g[19],p}),lr=b.memo(e=>{let l,n,t,s=(0,i.c)(11),{entries:r,streamingMediaIds:o,type:c}=e;if(s[0]!==r||s[1]!==o||s[2]!==c?(l="grid"===c&&(0,a.jsx)(e1.xt,{itemCount:(null==r?void 0:r.length)||0,children:null==r?void 0:r.map(e=>(0,a.jsx)(lo,{entry:e,streamingMediaIds:o,type:c},e.mediaId))}),s[0]=r,s[1]=o,s[2]=c,s[3]=l):l=s[3],s[4]!==r||s[5]!==o||s[6]!==c){var d;n="carousel"===c&&(0,a.jsxs)(e6.FN,{className:(0,es.cn)("w-full max-w-full !mt-0"),gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!1,children:[(0,a.jsx)(e6.h1,{className:"-top-2"}),(0,a.jsx)(e6.Wk,{className:"px-6",children:null==r||null==(d=r.filter(Boolean))?void 0:d.map(e=>(0,a.jsx)(lo,{entry:e,streamingMediaIds:o,type:c},e.mediaId))})]}),s[4]=r,s[5]=o,s[6]=c,s[7]=n}else n=s[7];return s[8]!==l||s[9]!==n?(t=(0,a.jsxs)(b.Fragment,{children:[l,n]}),s[8]=l,s[9]=n,s[10]=t):t=s[10],t}),lo=b.memo(e=>{let l,n=(0,i.c)(6),{entry:t,type:s}=e,r="carousel"===s?"basis-[200px] md:basis-[250px] mx-2 mt-8 mb-0":void 0;return n[0]!==t.libraryData||n[1]!==t.listData||n[2]!==t.media||n[3]!==t.nakamaLibraryData||n[4]!==r?(l=(0,a.jsx)(e2.V,{media:t.media,listData:t.listData,libraryData:t.libraryData,nakamaLibraryData:t.nakamaLibraryData,showListDataButton:!0,withAudienceScore:!1,type:"anime",containerClassName:r}),n[0]=t.libraryData,n[1]=t.listData,n[2]=t.media,n[3]=t.nakamaLibraryData,n[4]=r,n[5]=l):l=n[5],l}),lc=()=>{let e,l,n,t,s,r=(0,i.c)(9),[o,c]=b.useState(""),d=(0,x.Xr)(e0),u=(0,eX.d)(o,500);return r[0]!==o||r[1]!==d?(e=()=>{d(o)},r[0]=o,r[1]=d,r[2]=e):e=r[2],r[3]!==u?(l=[u],r[3]=u,r[4]=l):l=r[4],b.useEffect(e,l),r[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(la.CKj,{}),r[5]=n):n=r[5],r[6]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{c(e)},r[6]=t):t=r[6],r[7]!==o?(s=(0,a.jsx)("div",{className:"w-full md:w-[300px]",children:(0,a.jsx)(eu.k,{leftIcon:n,value:o,onValueChange:t,className:"rounded-full bg-gray-900/50"})}),r[7]=o,r[8]=s):s=r[8],s};function ld(){var e,l,n,t,s,r;let o,c,d,u,m,g,y,b,f,j,S,N,C,w,k,L,_,E,I,A,P,T,R,D,F,O,M,G,B,U,V,K,H,W,X,$,Q,Z,Y,J,ee,el,ea,ei=(0,i.c)(114),et=(0,en.v1)(),[er,eo]=(0,x.fp)(eY),[ec,eu]=(0,x.fp)(eJ),em="-"===ec;ei[0]!==eu?(o=()=>eu("-"),ei[0]=eu,ei[1]=o):o=ei[1],ei[2]!==em||ei[3]!==o?(c={name:"Lists",isCurrent:em,onClick:o},ei[2]=em,ei[3]=o,ei[4]=c):c=ei[4];let eh="all"===ec;ei[5]!==eu?(d=()=>eu("all"),ei[5]=eu,ei[6]=d):d=ei[6],ei[7]!==eh||ei[8]!==d?(u={name:"All",isCurrent:eh,onClick:d},ei[7]=eh,ei[8]=d,ei[9]=u):u=ei[9];let ep="CURRENT"===ec;ei[10]!==eu?(m=()=>eu("CURRENT"),ei[10]=eu,ei[11]=m):m=ei[11],ei[12]!==ep||ei[13]!==m?(g={name:"Watching",isCurrent:ep,onClick:m},ei[12]=ep,ei[13]=m,ei[14]=g):g=ei[14];let eg="PLANNING"===ec;ei[15]!==eu?(y=()=>eu("PLANNING"),ei[15]=eu,ei[16]=y):y=ei[16],ei[17]!==y||ei[18]!==eg?(b={name:"Planning",isCurrent:eg,onClick:y},ei[17]=y,ei[18]=eg,ei[19]=b):b=ei[19];let ey="PAUSED"===ec;ei[20]!==eu?(f=()=>eu("PAUSED"),ei[20]=eu,ei[21]=f):f=ei[21],ei[22]!==ey||ei[23]!==f?(j={name:"Paused",isCurrent:ey,onClick:f},ei[22]=ey,ei[23]=f,ei[24]=j):j=ei[24];let ex="COMPLETED"===ec;ei[25]!==eu?(S=()=>eu("COMPLETED"),ei[25]=eu,ei[26]=S):S=ei[26],ei[27]!==ex||ei[28]!==S?(N={name:"Completed",isCurrent:ex,onClick:S},ei[27]=ex,ei[28]=S,ei[29]=N):N=ei[29];let ev="DROPPED"===ec;ei[30]!==eu?(C=()=>eu("DROPPED"),ei[30]=eu,ei[31]=C):C=ei[31],ei[32]!==ev||ei[33]!==C?(w={name:"Dropped",isCurrent:ev,onClick:C},ei[32]=ev,ei[33]=C,ei[34]=w):w=ei[34],ei[35]!==b||ei[36]!==j||ei[37]!==N||ei[38]!==c||ei[39]!==w||ei[40]!==u||ei[41]!==g?(k=(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsx)(e8.tH,{className:"h-10 w-fit pb-6",triggerClass:"px-4 py-1",items:[c,u,g,b,j,N,w]})}),ei[35]=b,ei[36]=j,ei[37]=N,ei[38]=c,ei[39]=w,ei[40]=u,ei[41]=g,ei[42]=k):k=ei[42];let ef="TITLE"!==er.sorting&&"text-indigo-300 font-bold text-xl";ei[43]!==ef?(L=(0,es.cn)(ef),ei[43]=ef,ei[44]=L):L=ei[44],ei[45]!==L?(_=(0,a.jsx)(ln.EDF,{className:L}),ei[45]=L,ei[46]=_):_=ei[46];let ej=er.sorting||"TITLE";ei[47]!==eo?(E=e=>eo(l=>{l.sorting=e}),ei[47]=eo,ei[48]=E):E=ei[48],ei[49]!==_||ei[50]!==ej||ei[51]!==E?(I=(0,a.jsx)(ed.l,{label:"Sorting",leftAddon:_,className:"w-full",fieldClass:"flex items-center",inputContainerClass:"w-full",options:e$.wi,value:ej,onValueChange:E,fieldLabelClass:"hidden"}),ei[49]=_,ei[50]=ej,ei[51]=E,ei[52]=I):I=ei[52];let eS=null!==er.format&&""!==er.format&&"text-indigo-300 font-bold text-xl";ei[53]!==eS?(A=(0,es.cn)(eS),ei[53]=eS,ei[54]=A):A=ei[54],ei[55]!==A?(P=(0,a.jsx)(eb.xjJ,{className:A}),ei[55]=A,ei[56]=P):P=ei[56];let eN=er.format||"";ei[57]!==eo?(T=e=>eo(l=>{l.format=e}),ei[57]=eo,ei[58]=T):T=ei[58],ei[59]!==P||ei[60]!==eN||ei[61]!==T?(R=(0,a.jsx)(ed.l,{leftAddon:P,label:"Format",placeholder:"All formats",className:"w-full",fieldClass:"w-full",options:q.xh,value:eN,onValueChange:T,fieldLabelClass:"hidden"}),ei[59]=P,ei[60]=eN,ei[61]=T,ei[62]=R):R=ei[62];let eC=null!==er.status&&""!==er.status&&"text-indigo-300 font-bold text-xl";ei[63]!==eC?(D=(0,es.cn)(eC),ei[63]=eC,ei[64]=D):D=ei[64],ei[65]!==D?(F=(0,a.jsx)(li.PgI,{className:D}),ei[65]=D,ei[66]=F):F=ei[66],ei[67]===Symbol.for("react.memo_cache_sentinel")?(O=[...q._v],ei[67]=O):O=ei[67];let ew=er.status||"";ei[68]!==eo?(M=e=>eo(l=>{l.status=e}),ei[68]=eo,ei[69]=M):M=ei[69],ei[70]!==F||ei[71]!==ew||ei[72]!==M?(G=(0,a.jsx)(ed.l,{leftAddon:F,label:"Status",placeholder:"All statuses",className:"w-full",fieldClass:"w-full",options:O,value:ew,onValueChange:M,fieldLabelClass:"hidden"}),ei[70]=F,ei[71]=ew,ei[72]=M,ei[73]=G):G=ei[73];let ek=null!==er.season&&""!==er.season&&"text-indigo-300 font-bold text-xl";ei[74]!==ek?(B=(0,es.cn)(ek),ei[74]=ek,ei[75]=B):B=ei[75],ei[76]!==B?(U=(0,a.jsx)(z.Cfp,{className:B}),ei[76]=B,ei[77]=U):U=ei[77],ei[78]===Symbol.for("react.memo_cache_sentinel")?(V=q.lW.map(lh),ei[78]=V):V=ei[78];let eL=er.season||"";ei[79]!==eo?(K=e=>eo(l=>{l.season=e}),ei[79]=eo,ei[80]=K):K=ei[80],ei[81]!==U||ei[82]!==eL||ei[83]!==K?(H=(0,a.jsx)(ed.l,{leftAddon:U,label:"Season",placeholder:"All seasons",className:"w-full",fieldClass:"w-full flex items-center",inputContainerClass:"w-full",options:V,value:eL,onValueChange:K,fieldLabelClass:"hidden"}),ei[81]=U,ei[82]=eL,ei[83]=K,ei[84]=H):H=ei[84];let e_=null!==er.year&&""!==er.year&&"text-indigo-300 font-bold text-xl";ei[85]!==e_?(W=(0,es.cn)(e_),ei[85]=e_,ei[86]=W):W=ei[86],ei[87]!==W?(X=(0,a.jsx)(z.IdP,{className:W}),ei[87]=W,ei[88]=X):X=ei[88],ei[89]===Symbol.for("react.memo_cache_sentinel")?($=[...Array(70)].map(lm).map(lu),ei[89]=$):$=ei[89];let eE=er.year||"";return ei[90]!==eo?(Q=e=>eo(l=>{l.year=e}),ei[90]=eo,ei[91]=Q):Q=ei[91],ei[92]!==X||ei[93]!==eE||ei[94]!==Q?(Z=(0,a.jsx)(ed.l,{leftAddon:X,label:"Year",placeholder:"Timeless",className:"w-full",fieldClass:"w-full",options:$,value:eE,onValueChange:Q,fieldLabelClass:"hidden"}),ei[92]=X,ei[93]=eE,ei[94]=Q,ei[95]=Z):Z=ei[95],ei[96]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,a.jsx)(v.id1,{}),ei[96]=Y):Y=ei[96],ei[97]!==eo?(J=(0,a.jsx)("div",{className:"flex gap-4 items-center w-full",children:(0,a.jsx)(p.K0,{icon:Y,intent:"alert-subtle",className:"flex-none",onClick:()=>{eo(eZ)}})}),ei[97]=eo,ei[98]=J):J=ei[98],ei[99]!==er.isAdult||ei[100]!==(null==et||null==(l=et.settings)||null==(e=l.anilist)?void 0:e.enableAdultContent)||ei[101]!==eo?(ee=(null==et||null==(t=et.settings)||null==(n=t.anilist)?void 0:n.enableAdultContent)&&(0,a.jsx)("div",{className:"flex h-full items-center",children:(0,a.jsx)(e7.d,{label:"Adult",value:er.isAdult,onValueChange:e=>eo(l=>{l.isAdult=e}),fieldLabelClass:"hidden"})}),ei[99]=er.isAdult,ei[100]=null==et||null==(r=et.settings)||null==(s=r.anilist)?void 0:s.enableAdultContent,ei[101]=eo,ei[102]=ee):ee=ei[102],ei[103]!==I||ei[104]!==R||ei[105]!==G||ei[106]!==H||ei[107]!==Z||ei[108]!==J||ei[109]!==ee?(el=(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 2xl:grid-cols-[1fr_1fr_1fr_1fr_1fr_auto_auto] gap-4","data-detailed-library-view-search-options-grid":!0,children:[I,R,G,H,Z,J,ee]}),ei[103]=I,ei[104]=R,ei[105]=G,ei[106]=H,ei[107]=Z,ei[108]=J,ei[109]=ee,ei[110]=el):el=ei[110],ei[111]!==k||ei[112]!==el?(ea=(0,a.jsxs)(h.KZ,{className:"px-4 xl:px-0","data-detailed-library-view-search-options-container":!0,children:[k,el]}),ei[111]=k,ei[112]=el,ei[113]=ea):ea=ei[113],ea}function lu(e){return{value:String(e),label:String(e)}}function lm(e,l){return(0,le.C)(new Date)-l}function lh(e){return{value:e.toUpperCase(),label:e}}function lp(e){var l;let n,t,s,r=(0,i.c)(13),{genres:o}=e,[c,d]=(0,x.fp)(eY),u=!(null==(l=c.genre)?void 0:l.length);if(r[0]!==d?(n=()=>d(lg),r[0]=d,r[1]=n):n=r[1],r[2]!==u||r[3]!==n?(t={name:"All",isCurrent:u,onClick:n},r[2]=u,r[3]=n,r[4]=t):t=r[4],r[5]!==o||r[6]!==c.genre||r[7]!==d||r[8]!==t){let e;r[10]!==c.genre||r[11]!==d?(e=e=>{var l,n;return{name:e,isCurrent:null!=(n=null==(l=c.genre)?void 0:l.includes(e))&&n,onClick:()=>d(l=>{var n,a;(null==(n=l.genre)?void 0:n.includes(e))?l.genre=null==(a=l.genre)?void 0:a.filter(l=>l!==e):l.genre=[...l.genre||[],e]})}},r[10]=c.genre,r[11]=d,r[12]=e):e=r[12],s=(0,a.jsx)(e3.H,{items:[t,...o.map(e)]}),r[5]=o,r[6]=c.genre,r[7]=d,r[8]=t,r[9]=s}else s=r[9];return s}function lg(e){e.genre=[]}var ly=n(58443),lx=n(48555),lb=n(23335),lv=n(77717),lf=n(94077),lj=n(43826),lS=n(81274),lN=n(71559),lC=n(29260),lw=n(52116),lk=n(30420),lL=n(90124),l_=n(13),lE=n(67329),lI=n(32931),lA=n(79437),lP=n(70957),lT=n(8816),lR=n(72531),lD=n(78216),lF=n(13029),lO=n(99639),lM=n(25305),lG=n(35656),lB=n(14680),lU=n(42692),lV=n(22960),lz=n(90711),lK=n(84218),lH=n(6066);let lW=(0,y.eU)(!1),lq=(0,y.eU)(0),lX=(0,y.eU)(!1),l$=(0,y.eU)(null,(e,l,n)=>{e(lq)!==n&&(l(lX,!0),setTimeout(()=>{l(lq,n),l(lX,!1)},300))}),lQ=lK.P.create(lB.r);function lZ(e){let l,n,t,s,r=(0,i.c)(11),{totalEpisodes:o,currentIndex:c,onIndexChange:d,className:u}=e;if((0,eV.Ky)(),o<=1)return null;let m=Math.min(o,99);return r[0]!==u?(l=(0,es.cn)("hidden lg:flex items-center gap-2 z-[10] pl-8 max-w-[20rem] flex-wrap top-[4.5rem]",u),r[0]=u,r[1]=l):l=r[1],r[2]!==m?(n=Array.from({length:m}),r[2]=m,r[3]=n):n=r[3],r[4]!==c||r[5]!==d||r[6]!==n?(t=n.map((e,l)=>(0,a.jsx)("button",{className:(0,es.cn)("h-1.5 rounded-sm transition-all duration-300 cursor-pointer",l===c?"w-6 bg-[--muted]":"w-3 bg-[--subtle] hover:bg-gray-300"),onClick:()=>d(l),"aria-label":"Go to episode ".concat(l+1)},l)),r[4]=c,r[5]=d,r[6]=n,r[7]=t):t=r[7],r[8]!==l||r[9]!==t?(s=(0,a.jsx)("div",{className:l,children:t}),r[8]=l,r[9]=t,r[10]=s):s=r[10],s}function lY(e){var l,n,t,s,r,o,c,d;let u,m,h,g,y,v,f,j,S,N,C,w,k,L,_,E,I,A,P,T,R,D,F,O,M,G,B,U,z,K,H,W,q,X=(0,i.c)(76),{episode:$,episodes:Q,onHoverChange:Z}=e,Y=(0,eV.Ky)(),{setPreviewModalMediaId:J}=(0,V.D)(),ee=$.baseAnime,el=(0,x.md)(lq),en=(0,x.md)(lX),ea=(0,x.Xr)(l$),[ei]=(0,x.fp)(lW),et=Q[el]||null;if(Y.mediaPageBannerType===eV.px.BlurWhenUnavailable&&(null==et||null==(l=et.baseAnime)||l.bannerImage),X[0]!==el||X[1]!==Q.length||X[2]!==ei||X[3]!==ea?(u=()=>{if(Q.length<=1)return;let e=setInterval(()=>{ei||ea((el+1)%Q.length)},8e3);return()=>clearInterval(e)},m=[el,Q.length,ei,ea],X[0]=el,X[1]=Q.length,X[2]=ei,X[3]=ea,X[4]=u,X[5]=m):(u=X[4],m=X[5]),b.useEffect(u,m),!ee)return null;let er=Y.hideTopNavbar&&"top-[4rem]",eo=lf.X&&Y.mediaPageBannerSize===eV.kE.Small&&"top-[0rem]",ec=lf.X&&Y.mediaPageBannerSize!==eV.kE.Small&&"top-[2rem]";X[6]!==er||X[7]!==eo||X[8]!==ec?(h=(0,es.cn)("absolute left-2 w-fit h-[20rem] bg-gradient-to-t z-[3] hidden lg:block","top-[5rem]",er,eo,ec),X[6]=er,X[7]=eo,X[8]=ec,X[9]=h):h=X[9],X[10]!==Z?(g=()=>Z(!0),y=()=>Z(!1),X[10]=Z,X[11]=g,X[12]=y):(g=X[11],y=X[12]),X[13]===Symbol.for("react.memo_cache_sentinel")?(v={initial:{opacity:0,x:-40},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"spring",damping:20,stiffness:100}},X[13]=v):v=X[13],X[14]===Symbol.for("react.memo_cache_sentinel")?(f={opacity:0,scale:.7,skew:5},X[14]=f):f=X[14],X[15]===Symbol.for("react.memo_cache_sentinel")?(j={opacity:1,scale:1,skew:0},X[15]=j):j=X[15],X[16]===Symbol.for("react.memo_cache_sentinel")?(S={opacity:1,scale:1,skewY:1},N={duration:.5},X[16]=S,X[17]=N):(S=X[16],N=X[17]);let ed="/entry?id=".concat(ee.id);X[18]!==ee.coverImage||X[19]!==en?(C=(null==(s=ee.coverImage)?void 0:s.large)&&(0,a.jsx)("div",{className:"w-[180px] h-[280px] relative rounded-[--radius-md] overflow-hidden bg-[--background] shadow-md",children:(0,a.jsx)(lB.r,{src:ee.coverImage.large,alt:"cover image",fill:!0,priority:!0,placeholder:(0,lG.r)(700,475),className:(0,es.cn)("object-cover object-center transition-opacity duration-1000",en&&"opacity-30",!en&&"opacity-100")})}),X[18]=ee.coverImage,X[19]=en,X[20]=C):C=X[20],X[21]!==ed||X[22]!==C?(w=(0,a.jsx)(lK.P.div,{className:"flex-none",initial:f,animate:j,exit:S,transition:N,children:(0,a.jsx)(eU.i,{href:ed,children:C})}),X[21]=ed,X[22]=C,X[23]=w):w=X[23],X[24]===Symbol.for("react.memo_cache_sentinel")?(k={opacity:0,x:10},L={opacity:1,x:0},_={duration:.5,delay:.6},X[24]=k,X[25]=L,X[26]=_):(k=X[24],L=X[25],_=X[26]);let eu="/entry?id=".concat(ee.id),em=(null==(n=ee.title)?void 0:n.userPreferred)||"";return X[27]!==em?(E=(0,a.jsx)(lU.W,{className:"[text-shadow:_0_1px_10px_rgb(0_0_0_/_20%)] text-white leading-8 line-clamp-2 pb-1 max-w-md text-pretty text-3xl overflow-ellipsis",words:em}),X[27]=em,X[28]=E):E=X[28],X[29]!==eu||X[30]!==E?(I=(0,a.jsx)(eU.i,{href:eu,children:E}),X[29]=eu,X[30]=E,X[31]=I):I=X[31],X[32]!==ee.genres?(A=null==(r=ee.genres)?void 0:r.slice(0,3).map(lJ),X[32]=ee.genres,X[33]=A):A=X[33],X[34]!==A?(P=(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:A}),X[34]=A,X[35]=P):P=X[35],X[36]!==ee.meanScore?(T=ee.meanScore&&(0,a.jsx)("div",{className:"rounded-full w-fit inline-block",children:(0,a.jsx)(lM.H2,{meanScore:ee.meanScore})}),X[36]=ee.meanScore,X[37]=T):T=X[37],X[38]!==(null==(t=ee.nextAiringEpisode)?void 0:t.airingAt)?(R=(null==(o=ee.nextAiringEpisode)?void 0:o.airingAt)&&(0,a.jsxs)("p",{className:"text-base text-brand-200 inline-flex items-center gap-1.5",children:[(0,a.jsx)(li.PgI,{})," Releasing now"]}),X[38]=null==(c=ee.nextAiringEpisode)?void 0:c.airingAt,X[39]=R):R=X[39],X[40]!==T||X[41]!==R?(D=(0,a.jsxs)("div",{className:"flex items-center max-w-lg gap-4",children:[T,R]}),X[40]=T,X[41]=R,X[42]=D):D=X[42],X[43]===Symbol.for("react.memo_cache_sentinel")?(F={opacity:0,x:10},O={opacity:1,x:0},M={duration:.5,delay:.7},X[43]=F,X[44]=O,X[45]=M):(F=X[43],O=X[44],M=X[45]),X[46]!==ee.description?(G=null==(d=ee.description)?void 0:d.replace(/(<([^>]+)>)/ig,""),X[46]=ee.description,X[47]=G):G=X[47],X[48]!==G?(B=(0,a.jsx)(lV.F,{className:"max-w-lg leading-3 h-[77px] mb-4 p-0 text-sm",children:G}),X[48]=G,X[49]=B):B=X[49],X[50]!==ee.id||X[51]!==J?(U=(0,a.jsx)(p.$n,{size:"sm",intent:"gray-outline",className:"rounded-full",onClick:()=>J(ee.id,"anime"),children:"Preview"}),X[50]=ee.id,X[51]=J,X[52]=U):U=X[52],X[53]!==B||X[54]!==U?(z=(0,a.jsxs)(lK.P.div,{className:"pt-0 left-0",initial:F,animate:O,transition:M,children:[B,U]}),X[53]=B,X[54]=U,X[55]=z):z=X[55],X[56]!==I||X[57]!==P||X[58]!==D||X[59]!==z?(K=(0,a.jsxs)(lK.P.div,{className:"flex-auto space-y-2 z-[1]",initial:k,animate:L,transition:_,children:[I,P,D,z]}),X[56]=I,X[57]=P,X[58]=D,X[59]=z,X[60]=K):K=X[60],X[61]!==w||X[62]!==K||X[63]!==g||X[64]!==y?(H=(0,a.jsxs)(lK.P.div,{className:"flex items-center relative gap-6 p-6 pr-3 w-fit overflow-hidden",onMouseEnter:g,onMouseLeave:y,...v,children:[w,K]}),X[61]=w,X[62]=K,X[63]=g,X[64]=y,X[65]=H):H=X[65],X[66]!==el||X[67]!==Q.length||X[68]!==ea?(W=(0,a.jsx)(lZ,{totalEpisodes:Q.length,currentIndex:el,onIndexChange:ea}),X[66]=el,X[67]=Q.length,X[68]=ea,X[69]=W):W=X[69],X[70]!==ee.id||X[71]!==ee.idMal||X[72]!==H||X[73]!==W||X[74]!==h?(q=(0,a.jsxs)("div",{className:h,"data-media-id":ee.id,"data-media-mal-id":ee.idMal,children:[H,W]}),X[70]=ee.id,X[71]=ee.idMal,X[72]=H,X[73]=W,X[74]=h,X[75]=q):q=X[75],q}function lJ(e){return(0,a.jsx)("div",{className:"text-sm font-semibold px-1 text-gray-300",children:e},e)}function l0(e){var l,n,t,s,r,o,c,d,u,m,h,p,g,y,x,b,v;let f,j,S,N,C,w,k,L,_,E=(0,i.c)(39),{episode:I,isTransitioning:A}=e,P=(0,eV.Ky)(),T=(0,lH.useRouter)(),R=(0,en.v1)(),{setPlayNext:D}=(0,lD.p$)(),{data:F}=(0,eq.H_)();E[0]!==(null==(l=I.baseAnime)?void 0:l.id)||E[1]!==T||E[2]!==(null==R?void 0:R.isOffline)||E[3]!==D?(f=()=>{var e;D(null==(e=I.baseAnime)?void 0:e.id,()=>{var e,l;(null==R?void 0:R.isOffline)?T.push("/offline/entry/anime?id=".concat(null==(l=I.baseAnime)?void 0:l.id)):T.push("/entry?id=".concat(null==(e=I.baseAnime)?void 0:e.id))})},E[0]=null==(v=I.baseAnime)?void 0:v.id,E[1]=T,E[2]=null==R?void 0:R.isOffline,E[3]=D,E[4]=f):f=E[4];let O=f,M=P.hideTopNavbar&&"top-[4rem]",G=lf.X&&P.mediaPageBannerSize===eV.kE.Small&&"top-[1rem]",B=lf.X&&P.mediaPageBannerSize!==eV.kE.Small&&"top-[3rem]";E[5]!==M||E[6]!==G||E[7]!==B?(j=(0,es.cn)("absolute right-6 w-fit h-[25rem] z-[3] hidden lg:block overflow-hidden","top-[5rem]",M,G,B),E[5]=M,E[6]=G,E[7]=B,E[8]=j):j=E[8],E[9]===Symbol.for("react.memo_cache_sentinel")?(S={initial:{opacity:0,x:40},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{type:"spring",damping:20,stiffness:100}},E[9]=S):S=E[9];let U=(null==(n=I.episodeMetadata)?void 0:n.image)||(null==(t=I.baseAnime)?void 0:t.bannerImage)||(null==(r=I.baseAnime)||null==(s=r.coverImage)?void 0:s.extraLarge),V=I.episodeTitle||(null==I||null==(c=I.baseAnime)||null==(o=c.title)?void 0:o.userPreferred),z=I.displayTitle,K=I.isInvalid,H=null==(d=I.baseAnime)?void 0:d.episodes,W=I.progressNumber,q=I.episodeNumber,X=null==(u=I.episodeMetadata)?void 0:u.length,$=I.episodeNumber!==I.progressNumber,Q=(null==(m=I.baseAnime)?void 0:m.id)||0;E[10]!==I.episodeNumber||E[11]!==Q||E[12]!==F?(N=(0,eq.hH)(F,Q,I.episodeNumber),E[10]=I.episodeNumber,E[11]=Q,E[12]=F,E[13]=N):N=E[13];let Z=(null==(h=I.baseAnime)?void 0:h.id)||0;E[14]!==I.episodeNumber||E[15]!==Z||E[16]!==F?(C=(0,eq.pj)(F,Z,I.episodeNumber),E[14]=I.episodeNumber,E[15]=Z,E[16]=F,E[17]=C):C=E[17];let Y=(null==I||null==(p=I.baseAnime)?void 0:p.id)||0,J=null==I||null==(y=I.baseAnime)||null==(g=y.coverImage)?void 0:g.medium,ee=null==I||null==(b=I.baseAnime)||null==(x=b.title)?void 0:x.userPreferred;E[18]!==Y||E[19]!==J||E[20]!==ee?(w={id:Y,image:J,title:ee},E[18]=Y,E[19]=J,E[20]=ee,E[21]=w):w=E[21];let el=A&&"opacity-50";return E[22]!==el?(k=(0,es.cn)("transition-opacity duration-1000",el),E[22]=el,E[23]=k):k=E[23],E[24]!==I||E[25]!==O||E[26]!==H||E[27]!==X||E[28]!==$||E[29]!==N||E[30]!==C||E[31]!==w||E[32]!==k||E[33]!==U||E[34]!==V?(L=(0,a.jsx)("div",{className:"p-6 w-fit",children:(0,a.jsx)(lK.P.div,{...S,className:"2xl:w-[500px] xl:w-[400px] lg:w-[300px] rounded-xl overflow-hidden",children:(0,a.jsx)(lF.U,{episode:I,image:U,topTitle:V,title:z,isInvalid:K,progressTotal:H,progressNumber:W,episodeNumber:q,length:X,hasDiscrepancy:$,percentageComplete:N,minutesRemaining:C,anime:w,forceSingleContainer:!0,onClick:O,className:k})})}),E[24]=I,E[25]=O,E[26]=H,E[27]=X,E[28]=$,E[29]=N,E[30]=C,E[31]=w,E[32]=k,E[33]=U,E[34]=V,E[35]=L):L=E[35],E[36]!==L||E[37]!==j?(_=(0,a.jsx)(lK.P.div,{className:j,children:L}),E[36]=L,E[37]=j,E[38]=_):_=E[38],_}function l1(e){var l,n,t,s,r,o,c,d,u,m,h,p;let g,y,x,b,v,f,j,S,N,C,w,k,L,_,E=(0,i.c)(33),{episode:I,isTransitioning:A,shouldBlurBanner:P}=e,T=(0,eV.Ky)();E[0]!==(null==I||null==(l=I.baseAnime)?void 0:l.bannerImage)||E[1]!==(null==I||null==(t=I.baseAnime)||null==(n=t.coverImage)?void 0:n.extraLarge)||E[2]!==T.libraryScreenBannerType||E[3]!==T.libraryScreenCustomBannerImage?(g=T.libraryScreenCustomBannerImage&&T.libraryScreenBannerType===eV.H4.Custom?(0,lz.sU)(T.libraryScreenCustomBannerImage):(null==I||null==(r=I.baseAnime)?void 0:r.bannerImage)||(null==I||null==(c=I.baseAnime)||null==(o=c.coverImage)?void 0:o.extraLarge),E[0]=null==I||null==(d=I.baseAnime)?void 0:d.bannerImage,E[1]=null==I||null==(m=I.baseAnime)||null==(u=m.coverImage)?void 0:u.extraLarge,E[2]=T.libraryScreenBannerType,E[3]=T.libraryScreenCustomBannerImage,E[4]=g):g=E[4];let R=g,D=!T.disableSidebarTransparency&&lO.j,F=T.mediaPageBannerSize===eV.kE.Small&&"lg:h-[30rem]";E[5]!==D||E[6]!==F?(y=(0,es.cn)("lg:h-[35rem] w-full flex-none object-cover object-center absolute top-0 bg-[--background] overflow-hidden",D,lf.X&&"top-[-2rem]",F),E[5]=D,E[6]=F,E[7]=y):y=E[7],E[8]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)("div",{className:"w-full z-[2] absolute bottom-[-10rem] h-[10rem] bg-gradient-to-b from-[--background] via-transparent via-100% to-transparent"}),b=(0,a.jsx)("div",{className:"w-full absolute z-[2] top-0 h-[10rem] opacity-50 bg-gradient-to-b from-[--background] to-transparent"}),E[8]=x,E[9]=b):(x=E[8],b=E[9]);let O=A&&"opacity-70";return E[10]!==O?(v=(0,es.cn)("opacity-0 duration-1000 bg-[var(--background)] w-full h-full absolute z-[2]",O),E[10]=O,E[11]=v):v=E[11],E[12]!==v?(f=(0,a.jsx)("div",{className:v}),E[12]=v,E[13]=f):f=E[13],E[14]!==R||E[15]!==(null==I||null==(s=I.baseAnime)?void 0:s.bannerImage)||E[16]!==A?(j=R&&(0,a.jsx)(lQ,{src:R,alt:"banner image",fill:!0,quality:100,priority:!0,className:(0,es.cn)("object-cover object-center z-[1] transition-all duration-1000",A&&"scale-[1.01] -translate-x-0.5",!A&&"scale-100 translate-x-0",!(null==I||null==(h=I.baseAnime)?void 0:h.bannerImage)&&"opacity-35")}),E[14]=R,E[15]=null==I||null==(p=I.baseAnime)?void 0:p.bannerImage,E[16]=A,E[17]=j):j=E[17],E[18]!==j?(S=(0,a.jsx)(lj.N,{children:(0,a.jsx)("div",{className:"w-full h-full absolute z-[1] overflow-hidden",children:j})}),E[18]=j,E[19]=S):S=E[19],E[20]!==P?(N=P&&(0,a.jsx)("div",{className:"absolute top-0 w-full h-full backdrop-blur-2xl z-[2]"}),E[20]=P,E[21]=N):N=E[21],E[22]===Symbol.for("react.memo_cache_sentinel")?(C=(0,a.jsx)("div",{className:(0,es.cn)("hidden lg:block max-w-[80rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background] from-5% via-[--background] transition-opacity via-opacity-50 via-5% to-transparent","opacity-100 duration-500")}),w=(0,a.jsx)("div",{className:(0,es.cn)("hidden lg:block max-w-[60rem] w-full z-[2] h-full absolute -right-[10rem] &-right-[25rem] &-bottom-[10rem] bg-gradient-to-l from-[--background] &rotate-45 via-[--background] via-opacity-50 via-5% transition-opacity to-transparent","opacity-100 duration-500")}),E[22]=C,E[23]=w):(C=E[22],w=E[23]),E[24]!==T.disableSidebarTransparency?(k=!T.disableSidebarTransparency&&(0,a.jsx)("div",{className:(0,es.cn)("hidden lg:block max-w-[10rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background] via-[--background] transition-opacity via-opacity-50 via-5% to-transparent","opacity-70 duration-500")}),E[24]=T.disableSidebarTransparency,E[25]=k):k=E[25],E[26]===Symbol.for("react.memo_cache_sentinel")?(L=(0,a.jsx)("div",{className:"w-full z-[2] absolute bottom-0 h-[20rem] bg-gradient-to-t from-[--background] via-[--background] via-opacity-50 via-10% to-transparent"}),E[26]=L):L=E[26],E[27]!==S||E[28]!==N||E[29]!==k||E[30]!==y||E[31]!==f?(_=(0,a.jsxs)("div",{className:y,children:[x,b,f,S,N,C,w,k,L]}),E[27]=S,E[28]=N,E[29]=k,E[30]=y,E[31]=f,E[32]=_):_=E[32],_}function l2(e){var l;let n,t,s,r,o,c,d,u,m=(0,i.c)(27),{episodes:h,className:p}=e,g=(0,eV.Ky)(),y=(0,x.md)(lq),v=(0,x.md)(lX),f=(0,x.Xr)(l$),[j,S]=(0,x.fp)(lW),N=h[y]||null,C=g.mediaPageBannerType===eV.px.BlurWhenUnavailable&&!(null==N||null==(l=N.baseAnime)?void 0:l.bannerImage);if(m[0]!==y||m[1]!==h.length||m[2]!==j||m[3]!==f?(n=()=>{if(h.length<=1)return;let e=setInterval(()=>{j||f((y+1)%h.length)},8e3);return()=>clearInterval(e)},t=[y,h.length,j,f],m[0]=y,m[1]=h.length,m[2]=j,m[3]=f,m[4]=n,m[5]=t):(n=m[4],t=m[5]),b.useEffect(n,t),!h.length)return null;let w=g.hideTopNavbar&&"lg:h-[32rem]",k=g.mediaPageBannerSize===eV.kE.Small&&"lg:h-[24rem]",L=g.mediaPageBannerSize===eV.kE.Small&&g.hideTopNavbar&&"lg:h-[28rem]";return m[6]!==p||m[7]!==w||m[8]!==k||m[9]!==L?(s=(0,es.cn)("__header lg:h-[28rem] max-w-full overflow-hidden",w,k,L,p),m[6]=p,m[7]=w,m[8]=k,m[9]=L,m[10]=s):s=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(r={initial:{opacity:0},animate:{opacity:1},transition:{duration:1.2}},m[11]=r):r=m[11],m[12]!==N||m[13]!==v||m[14]!==C?(o=(0,a.jsx)(l1,{episode:N,isTransitioning:v,shouldBlurBanner:C}),m[12]=N,m[13]=v,m[14]=C,m[15]=o):o=m[15],m[16]!==N||m[17]!==h||m[18]!==v||m[19]!==S?(c=N&&!v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lY,{episode:N,episodes:h,onHoverChange:S}),(0,a.jsx)(l0,{episode:N,isTransitioning:v})]}),m[16]=N,m[17]=h,m[18]=v,m[19]=S,m[20]=c):c=m[20],m[21]!==c?(d=(0,a.jsx)(lj.N,{children:c}),m[21]=c,m[22]=d):d=m[22],m[23]!==d||m[24]!==s||m[25]!==o?(u=(0,a.jsxs)(lK.P.div,{className:s,...r,children:[o,d]}),m[23]=d,m[24]=s,m[25]=o,m[26]=u):u=m[26],u}let l3=(0,y.eU)("base"),l4=(0,eF.tG)("sea-home-discover-header-type","anime",void 0,{getOnInit:!0});function l5(){var e,l,n,t,s,r,d,u,m,h,g,y,v,f,j,N,C,w,k,L,E,I,A,P,T,R,D,O,M,G,U,V,K,q,$,Q,Z,Y,J,ee,el,ea,ei,et,er,eo,ec,ed,eu,em,eh;let ep,eg,ey,ex,eb,ef,eS,eN,eC,ew,ek,eL,e_,eE,eI,eA,eP,eR,eD,eF=(0,i.c)(140),eO=(0,en.v1)(),{data:eM,isLoading:eG}=(0,o.bN)(),eB=(0,x.md)(lx.Qy),ez=!(null==eB?void 0:eB.length),{libraryGenres:eH,libraryCollectionList:eq,filteredLibraryCollectionList:eX,isLoading:e$,continueWatchingList:eQ,unmatchedLocalFiles:eZ,ignoredLocalFiles:eY,unmatchedGroups:eJ,unknownGroups:e0,streamingMediaIds:e1,hasEntries:e2,isStreamingOnly:e3,isNakamaLibrary:e4}=(0,eW.VI)(),{mangaCollection:e6}=(0,lI.k)(),e7=(0,eV.Ky)(),e8=e4?X:(null==eM?void 0:eM.length)?eM:X,[e9]=(0,x.fp)(l3),[le]=(0,x.fp)(l4),[ll,ln]=(0,x.fp)(lE.G),li=(0,x.Xr)(ev);eF[0]!==ll||eF[1]!==ln?(ep=()=>{ln(ll)},eF[0]=ll,eF[1]=ln,eF[2]=ep):ep=eF[2],eF[3]!==ll?(eg=[ll],eF[3]=ll,eF[4]=eg):eg=eF[4],b.useEffect(ep,eg);let ls=(0,x.Xr)(B.ho),lr=(null==eO||null==(e=eO.torrentstreamSettings)?void 0:e.includeInLibrary)||(null==eO||null==(l=eO.debridSettings)?void 0:l.includeDebridStreamInLibrary)||(null==eO||null==(t=eO.settings)||null==(n=t.library)?void 0:n.includeOnlineStreamingInLibrary)?"stream":"local";if(e$||eG){let e;return eF[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(b.Fragment,{children:(0,a.jsxs)("div",{className:"p-4 space-y-4 relative z-[4]",children:[(0,a.jsx)(lv.E,{className:"h-12 w-full max-w-lg relative"}),(0,a.jsx)("div",{className:(0,es.cn)("grid h-[22rem] min-[2000px]:h-[24rem] grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-7 min-[2000px]:grid-cols-8 gap-4"),children:[1,2,3,4,5,6,7,8].map(ne)})]})}),eF[5]=e):e=eF[5],e}if(!e2&&function(e){if(!e)return!0;for(let l of e)if(!["anime-continue-watching","anime-library","anime-continue-watching-header","local-anime-library","local-anime-library-stats","library-upcoming-episodes"].includes(l.type))return!1;return!0}(e8)&&!e$){let e,l,n,i,t,s,r,o,c,d,u,m,h,g,y,x,_,B,K;eF[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(lk.In,{playTrailer:!lf.Ck}),eF[6]=e):e=eF[6],eF[7]!==le?(l="manga"===le&&(0,a.jsx)(l_.fG,{country:"JP",forDiscoverHeader:!0}),eF[7]=le,eF[8]=l):l=eF[8],eF[9]!==l?(n=(0,a.jsxs)(b.Fragment,{children:[e,(0,a.jsx)("div",{className:"h-0 visibility-hidden pointer-events-none opacity-0",children:l})]}),eF[9]=l,eF[10]=n):n=eF[10];let q=((null==(v=e8[0])?void 0:v.type)==="discover-header"||(null==(f=e8[0])?void 0:f.type)==="anime-continue-watching-header")&&"!mt-[-4rem] !mb-[-1rem]";return eF[11]!==q?(i=(0,es.cn)(q),eF[11]=q,eF[12]=i):i=eF[12],eF[13]!==e2||eF[14]!==eY||eF[15]!==e$||eF[16]!==e4||eF[17]!==e3||eF[18]!==eq||eF[19]!==i||eF[20]!==e0||eF[21]!==eZ?(t=(0,a.jsx)(eK,{collectionList:eq,unmatchedLocalFiles:eZ,ignoredLocalFiles:eY,unknownGroups:e0,isLoading:e$,hasEntries:e2,isStreamingOnly:e3,isNakamaLibrary:e4,className:i}),eF[13]=e2,eF[14]=eY,eF[15]=e$,eF[16]=e4,eF[17]=e3,eF[18]=eq,eF[19]=i,eF[20]=e0,eF[21]=eZ,eF[22]=t):t=eF[22],eF[23]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)("h2",{children:"Your home screen is empty"}),eF[23]=s):s=eF[23],eF[24]!==(null==eO||null==(N=eO.settings)||null==(j=N.library)?void 0:j.libraryPath)||eF[25]!==ls?(r=!!(null==eO||null==(I=eO.settings)||null==(E=I.library)?void 0:E.libraryPath)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.$n,{intent:"primary-glass",leftIcon:(0,a.jsx)(la.CKj,{}),size:"xl",rounded:!0,onClick:()=>ls(!0),children:"Scan your anime library"})}),eF[24]=null==eO||null==(P=eO.settings)||null==(A=P.library)?void 0:A.libraryPath,eF[25]=ls,eF[26]=r):r=eF[26],eF[27]!==ez||eF[28]!==(null==eO||null==(w=eO.settings)||null==(C=w.library)?void 0:C.libraryPath)?(o=!(null==eO||null==(R=eO.settings)||null==(T=R.library)?void 0:T.libraryPath)&&ez&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eU.i,{href:"/discover",className:"block",children:(0,a.jsx)(p.$n,{intent:"gray-glass",leftIcon:(0,a.jsx)(z._rf,{}),size:"lg",rounded:!0,children:"Add series to your collection"})})}),eF[27]=ez,eF[28]=null==eO||null==(O=eO.settings)||null==(D=O.library)?void 0:D.libraryPath,eF[29]=o):o=eF[29],eF[30]!==lr||eF[31]!==ez||eF[32]!==(null==eO||null==(L=eO.settings)||null==(k=L.library)?void 0:k.libraryPath)||eF[33]!==li?(c=!(null==eO||null==(G=eO.settings)||null==(M=G.library)?void 0:M.libraryPath)&&!ez&&(0,a.jsxs)(a.Fragment,{children:["local"===lr&&(0,a.jsx)(p.$n,{intent:"gray-glass",leftIcon:(0,a.jsx)(eT.xVK,{className:"text-2xl"}),size:"lg",rounded:!0,onClick:()=>{li(!0)},children:"Add currently watched series to the library"}),"stream"===lr&&(0,a.jsxs)("div",{className:"p-4 border w-fit mx-auto border-dashed rounded-xl",children:[(0,a.jsx)("p",{children:"No series are currently being watched"}),(0,a.jsx)("p",{className:"text-[--muted]",children:"Add series to your 'Currently watching' list to get started"})]})]}),eF[30]=lr,eF[31]=ez,eF[32]=null==eO||null==(V=eO.settings)||null==(U=V.library)?void 0:U.libraryPath,eF[33]=li,eF[34]=c):c=eF[34],eF[35]!==o||eF[36]!==c||eF[37]!==r?(d=(0,a.jsxs)("div",{className:"text-center space-y-6 py-10",children:[s,r,o,c]}),eF[35]=o,eF[36]=c,eF[37]=r,eF[38]=d):d=eF[38],eF[39]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)("h3",{children:"Trending Right Now"}),m=(0,a.jsx)(lL.tl,{}),h=(0,a.jsx)("div",{"data-home-screen-item-divider":!0,className:"h-8"}),eF[39]=u,eF[40]=m,eF[41]=h):(u=eF[39],m=eF[40],h=eF[41]),eF[42]!==e4?(g=(0,a.jsx)(ej,{emptyLibrary:!0,isNakamaLibrary:e4}),eF[42]=e4,eF[43]=g):g=eF[43],eF[44]!==eJ?(y=(0,a.jsx)(W.d,{unmatchedGroups:eJ}),eF[44]=eJ,eF[45]=y):y=eF[45],eF[46]!==e0?(x=(0,a.jsx)(H,{unknownGroups:e0}),eF[46]=e0,eF[47]=x):x=eF[47],eF[48]!==eY?(_=(0,a.jsx)(F,{files:eY}),eF[48]=eY,eF[49]=_):_=eF[49],eF[50]===Symbol.for("react.memo_cache_sentinel")?(B=(0,a.jsx)(S,{}),eF[50]=B):B=eF[50],eF[51]!==d||eF[52]!==g||eF[53]!==y||eF[54]!==x||eF[55]!==_||eF[56]!==n||eF[57]!==t?(K=(0,a.jsxs)("div",{"data-home-screen":"no-entries",className:"contents",children:[n,t,d,u,m,h,g,y,x,_,B]}),eF[51]=d,eF[52]=g,eF[53]=y,eF[54]=x,eF[55]=_,eF[56]=n,eF[57]=t,eF[58]=K):K=eF[58],K}eF[59]!==le||eF[60]!==(null==(s=e8[0])?void 0:s.type)?(ey=(null==(K=e8[0])?void 0:K.type)==="discover-header"&&(0,a.jsxs)(b.Fragment,{children:[(0,a.jsx)(lk.In,{}),(0,a.jsxs)("div",{className:"h-0 visibility-hidden pointer-events-none opacity-0",children:["anime"===le&&(0,a.jsx)(lL.tl,{}),"manga"===le&&(0,a.jsx)(l_.fG,{country:"JP",forDiscoverHeader:!0})]})]}),eF[59]=le,eF[60]=null==(q=e8[0])?void 0:q.type,eF[61]=ey):ey=eF[61],eF[62]!==eQ||eF[63]!==(null==(r=e8[0])?void 0:r.type)?(ex=(null==($=e8[0])?void 0:$.type)==="anime-continue-watching-header"&&(0,a.jsx)(b.Fragment,{children:(0,a.jsx)(l2,{episodes:eQ})}),eF[62]=eQ,eF[63]=null==(Q=e8[0])?void 0:Q.type,eF[64]=ex):ex=eF[64],eF[65]!==(null==(d=e8[0])?void 0:d.type)||eF[66]!==(null==e6?void 0:e6.lists)||eF[67]!==e7.libraryScreenBannerType?(eb=e7.libraryScreenBannerType===eV.H4.Dynamic&&(null==(Z=e8[0])?void 0:Z.type)==="manga-library"&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(lb.dx,{manga:(null==e6||null==(ee=e6.lists)||null==(J=ee.flatMap(l9))||null==(Y=J.flatMap(l8))?void 0:Y.filter(Boolean))||[]})}),eF[65]=null==(el=e8[0])?void 0:el.type,eF[66]=null==e6?void 0:e6.lists,eF[67]=e7.libraryScreenBannerType,eF[68]=eb):eb=eF[68],eF[69]===Symbol.for("react.memo_cache_sentinel")?(ef=(0,a.jsx)("div",{className:(0,es.cn)("h-12 lg:hidden"),"data-library-toolbar-top-padding":!0}),eF[69]=ef):ef=eF[69],eF[70]!==e2||eF[71]!==(null==(u=e8[0])?void 0:u.type)||eF[72]!==e7.hideTopNavbar||eF[73]!==e7.libraryScreenBannerType?(eS=e7.libraryScreenBannerType===eV.H4.Dynamic&&e2&&((null==(ea=e8[0])?void 0:ea.type)==="anime-continue-watching"||(null==(ei=e8[0])?void 0:ei.type)==="manga-library")&&(0,a.jsx)("div",{className:(0,es.cn)("h-28",e7.hideTopNavbar&&"h-40"),"data-library-toolbar-top-padding":!0}),eF[70]=e2,eF[71]=null==(et=e8[0])?void 0:et.type,eF[72]=e7.hideTopNavbar,eF[73]=e7.libraryScreenBannerType,eF[74]=eS):eS=eF[74];let lo=((null==(m=e8[0])?void 0:m.type)==="discover-header"||(null==(h=e8[0])?void 0:h.type)==="anime-continue-watching-header")&&"!mt-[-4rem] !mb-[-1rem]";return eF[75]!==lo?(eN=(0,es.cn)(lo),eF[75]=lo,eF[76]=eN):eN=eF[76],eF[77]!==e2||eF[78]!==eY||eF[79]!==e$||eF[80]!==e4||eF[81]!==e3||eF[82]!==eq||eF[83]!==eN||eF[84]!==e0||eF[85]!==eZ?(eC=(0,a.jsx)(eK,{collectionList:eq,unmatchedLocalFiles:eZ,ignoredLocalFiles:eY,unknownGroups:e0,isLoading:e$,hasEntries:e2,isStreamingOnly:e3,isNakamaLibrary:e4,className:eN}),eF[77]=e2,eF[78]=eY,eF[79]=e$,eF[80]=e4,eF[81]=e3,eF[82]=eq,eF[83]=eN,eF[84]=e0,eF[85]=eZ,eF[86]=eC):eC=eF[86],eF[87]!==(null==(g=e8[0])?void 0:g.type)||eF[88]!==e7.hideTopNavbar||eF[89]!==e7.libraryScreenBannerType||eF[90]!==e7.libraryScreenCustomBannerImage?(ew=!!e7.libraryScreenCustomBannerImage&&e7.libraryScreenBannerType===eV.H4.Custom&&(null==(er=e8[0])?void 0:er.type)!=="discover-header"&&(null==(eo=e8[0])?void 0:eo.type)!=="anime-continue-watching-header"&&(0,a.jsx)("div",{"data-custom-library-banner-top-spacer":!0,className:(0,es.cn)("py-20",e7.hideTopNavbar&&"py-28")}),eF[87]=null==(ec=e8[0])?void 0:ec.type,eF[88]=e7.hideTopNavbar,eF[89]=e7.libraryScreenBannerType,eF[90]=e7.libraryScreenCustomBannerImage,eF[91]=ew):ew=eF[91],eF[92]!==e2||eF[93]!==(null==(y=e8[0])?void 0:y.type)||eF[94]!==e7.libraryScreenBannerType?(ek=e2&&e7.libraryScreenBannerType===eV.H4.Custom&&(null==(ed=e8[0])?void 0:ed.type)!=="discover-header"&&(null==(eu=e8[0])?void 0:eu.type)!=="anime-continue-watching-header"&&(0,a.jsx)(_.z,{isLibraryScreen:!0,isHomeScreen:!0}),eF[92]=e2,eF[93]=null==(em=e8[0])?void 0:em.type,eF[94]=e7.libraryScreenBannerType,eF[95]=ek):ek=eF[95],eF[96]!==eQ||eF[97]!==e2||eF[98]!==e8||eF[99]!==e7.libraryScreenBannerType?(eL=e2&&-1!==e8.findIndex(l7)&&e7.libraryScreenBannerType===eV.H4.Dynamic&&(0,a.jsx)("div",{className:(0,es.cn)((null==(eh=e8[0])?void 0:eh.type)!=="anime-continue-watching"?"visibility-hidden pointer-events-none opacity-0 !mt-0":"contents !mt-0"),children:(0,a.jsx)(c.F,{list:eQ})}),eF[96]=eQ,eF[97]=e2,eF[98]=e8,eF[99]=e7.libraryScreenBannerType,eF[100]=eL):eL=eF[100],eF[101]!==eQ||eF[102]!==eX||eF[103]!==e2||eF[104]!==e8||eF[105]!==eY||eF[106]!==e$||eF[107]!==e4||eF[108]!==e3||eF[109]!==eq||eF[110]!==eH||eF[111]!==e1||eF[112]!==e0||eF[113]!==eJ||eF[114]!==eZ||eF[115]!==e9?(e_=!e$&&(0,a.jsxs)(lj.N,{mode:"wait",children:["base"===e9&&(0,a.jsxs)(e5.f,{className:"relative 2xl:order-first pb-10 pt-4",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.25},children:[e8.filter(l6).map((e,l)=>(0,a.jsxs)(b.Fragment,{children:[0!==l&&(null==e?void 0:e.type)!=="manga-library"&&(null==e?void 0:e.type)!=="anime-library"&&(null==e?void 0:e.type)!=="anime-continue-watching"&&"anime-library-stats"!==e.type&&(0,a.jsx)("div",{"data-home-screen-item-divider":!0,className:"h-8"}),(0,a.jsx)(nl,{item:e,index:e8.findIndex(l=>l.id===e.id),libraryCollectionProps:{libraryGenres:eH,libraryCollectionList:eq,filteredLibraryCollectionList:eX,isLoading:e$,continueWatchingList:eQ,unmatchedLocalFiles:eZ,ignoredLocalFiles:eY,unmatchedGroups:eJ,unknownGroups:e0,streamingMediaIds:e1,hasEntries:e2,isStreamingOnly:e3,isNakamaLibrary:e4}})]},e.id)),(0,a.jsx)("div",{"data-home-screen-item-divider":!0,className:"h-8"})]},"base"),"detailed"===e9&&(0,a.jsx)(e5.f,{className:"relative 2xl:order-first pb-10 pt-4",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.25},children:(0,a.jsx)(lt,{collectionList:eq,continueWatchingList:eQ,isLoading:e$,hasEntries:e2,streamingMediaIds:e1,isNakamaLibrary:e4})},"detailed")]}),eF[101]=eQ,eF[102]=eX,eF[103]=e2,eF[104]=e8,eF[105]=eY,eF[106]=e$,eF[107]=e4,eF[108]=e3,eF[109]=eq,eF[110]=eH,eF[111]=e1,eF[112]=e0,eF[113]=eJ,eF[114]=eZ,eF[115]=e9,eF[116]=e_):e_=eF[116],eF[117]!==e4?(eE=(0,a.jsx)(ej,{isNakamaLibrary:e4}),eF[117]=e4,eF[118]=eE):eE=eF[118],eF[119]!==eJ?(eI=(0,a.jsx)(W.d,{unmatchedGroups:eJ}),eF[119]=eJ,eF[120]=eI):eI=eF[120],eF[121]!==e0?(eA=(0,a.jsx)(H,{unknownGroups:e0}),eF[121]=e0,eF[122]=eA):eA=eF[122],eF[123]!==eY?(eP=(0,a.jsx)(F,{files:eY}),eF[123]=eY,eF[124]=eP):eP=eF[124],eF[125]===Symbol.for("react.memo_cache_sentinel")?(eR=(0,a.jsx)(S,{}),eF[125]=eR):eR=eF[125],eF[126]!==ew||eF[127]!==ek||eF[128]!==eL||eF[129]!==e_||eF[130]!==eE||eF[131]!==eI||eF[132]!==eA||eF[133]!==eP||eF[134]!==ey||eF[135]!==ex||eF[136]!==eb||eF[137]!==eS||eF[138]!==eC?(eD=(0,a.jsxs)("div",{"data-home-screen":!0,className:"contents",children:[ey,ex,eb,ef,eS,eC,ew,ek,eL,e_,eE,eI,eA,eP,eR]}),eF[126]=ew,eF[127]=ek,eF[128]=eL,eF[129]=e_,eF[130]=eE,eF[131]=eI,eF[132]=eA,eF[133]=eP,eF[134]=ey,eF[135]=ex,eF[136]=eb,eF[137]=eS,eF[138]=eC,eF[139]=eD):eD=eF[139],eD}function l6(e){return"discover-header"!==e.type&&"anime-continue-watching-header"!==e.type}function l7(e){return"anime-continue-watching"===e.type}function l8(e){return null==e?void 0:e.media}function l9(e){return e.entries}function ne(e,l){return(0,a.jsx)(lv.E,{className:(0,es.cn)("h-[22rem] min-[2000px]:h-[24rem] col-span-1 aspect-[6/7] flex-none rounded-[--radius-md] relative overflow-hidden","[&:nth-child(8)]:hidden min-[2000px]:[&:nth-child(8)]:block","[&:nth-child(7)]:hidden 2xl:[&:nth-child(7)]:block","[&:nth-child(6)]:hidden xl:[&:nth-child(6)]:block","[&:nth-child(5)]:hidden xl:[&:nth-child(5)]:block","[&:nth-child(4)]:hidden lg:[&:nth-child(4)]:block","[&:nth-child(3)]:hidden md:[&:nth-child(3)]:block")},l)}function nl(e){var l,n,t,r,o,c,d,u,m,h,p,g,y,x,b,v;let f,j,S,N=(0,i.c)(81),{item:C,index:w}=e,{libraryGenres:k,libraryCollectionList:_,filteredLibraryCollectionList:E,isLoading:I,continueWatchingList:A,streamingMediaIds:P,hasEntries:T,isNakamaLibrary:R}=e.libraryCollectionProps;(0,eV.Ky)();let D=Q[C.type];e:{if(!D||!C){f=void 0;break e}if(!C.schemaVersion||C.schemaVersion!==D.schemaVersion){let e;N[0]!==C||N[1]!==D.schemaVersion?(e={...C,schemaVersion:D.schemaVersion,options:void 0},N[0]=C,N[1]=D.schemaVersion,N[2]=e):e=N[2],f=e;break e}f=C}let F=f,O=(null==F?void 0:F.type)==="local-anime-library-stats";N[3]!==O?(j={enabled:O},N[3]=O,N[4]=j):j=N[4];let{data:M}=(0,s.lD)(j);if(!D||!F){let e;return N[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{children:"Item not found"}),N[5]=e):e=N[5],e}if("anime-continue-watching"===F.type){let e,l=0===w;return N[6]!==A||N[7]!==I||N[8]!==l?(e=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(L.P,{episodes:A,isLoading:I,withTitle:l})}),N[6]=A,N[7]=I,N[8]=l,N[9]=e):e=N[9],e}if("anime-library"===F.type){let e,i=null==(l=F.options)?void 0:l.statuses,t=(null==(n=F.options)?void 0:n.layout)||"grid";return N[10]!==A||N[11]!==E||N[12]!==T||N[13]!==I||N[14]!==_||N[15]!==k||N[16]!==P||N[17]!==i||N[18]!==t?(e=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ly.v,{genres:k,collectionList:_,filteredCollectionList:E,continueWatchingList:A,isLoading:I,hasEntries:T,streamingMediaIds:P,showStatuses:i,type:t})}),N[10]=A,N[11]=E,N[12]=T,N[13]=I,N[14]=_,N[15]=k,N[16]=P,N[17]=i,N[18]=t,N[19]=e):e=N[19],e}if("anime-carousel"===F.type){let l;return N[20]!==F||N[21]!==e.libraryCollectionProps?(l=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ns,{libraryCollectionProps:e.libraryCollectionProps,item:F})}),N[20]=F,N[21]=e.libraryCollectionProps,N[22]=l):l=N[22],l}if("manga-carousel"===F.type){let l;return N[23]!==F||N[24]!==e.libraryCollectionProps?(l=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(nd,{libraryCollectionProps:e.libraryCollectionProps,item:F})}),N[23]=F,N[24]=e.libraryCollectionProps,N[25]=l):l=N[25],l}if("anime-schedule-calendar"===F.type){let l;return N[26]!==F||N[27]!==e.libraryCollectionProps?(l=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(nt,{libraryCollectionProps:e.libraryCollectionProps,item:F})}),N[26]=F,N[27]=e.libraryCollectionProps,N[28]=l):l=N[28],l}if("library-upcoming-episodes"===F.type){let l;return N[29]!==F||N[30]!==e.libraryCollectionProps?(l=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ni,{libraryCollectionProps:e.libraryCollectionProps,item:F})}),N[29]=F,N[30]=e.libraryCollectionProps,N[31]=l):l=N[31],l}if("discover-header"===F.type||"anime-continue-watching-header"===F.type)return null;if("aired-recently"===F.type){let e;return N[32]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(e5.f,{className:"px-4",children:(0,a.jsx)(lR.i,{})}),N[32]=e):e=N[32],e}if("manga-library"===F.type){let l;return N[33]!==w||N[34]!==F||N[35]!==e.libraryCollectionProps?(l=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(na,{libraryCollectionProps:e.libraryCollectionProps,item:F,index:w})}),N[33]=w,N[34]=F,N[35]=e.libraryCollectionProps,N[36]=l):l=N[36],l}if("local-anime-library"===F.type){let l;return N[37]!==w||N[38]!==F||N[39]!==e.libraryCollectionProps?(l=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(nn,{libraryCollectionProps:e.libraryCollectionProps,item:F,index:w})}),N[37]=w,N[38]=F,N[39]=e.libraryCollectionProps,N[40]=l):l=N[40],l}if("local-anime-library-stats"===F.type){let e,l,n,i,s,f,j,S,C,w,k,L,_,E,I,A,P,T,D=R&&"lg:grid-cols-5";N[41]!==D?(e=(0,es.cn)("grid grid-cols-3 lg:grid-cols-6 gap-4 [&>div]:text-center [&>div>p]:text-[--muted] py-4",D),N[41]=D,N[42]=e):e=N[42],N[43]!==(null==M||null==(t=M.stats)?void 0:t.totalSize)||N[44]!==R?(l=!R&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:null!=(p=null==M||null==(m=M.stats)?void 0:m.totalSize)?p:"-"}),(0,a.jsx)("p",{children:"Library"})]}),N[43]=null==M||null==(h=M.stats)?void 0:h.totalSize,N[44]=R,N[45]=l):l=N[45];let F=null!=(g=null==M||null==(r=M.stats)?void 0:r.totalFiles)?g:"-";N[46]!==F?(n=(0,a.jsx)("h3",{children:F}),N[46]=F,N[47]=n):n=N[47],N[48]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)("p",{children:"Files"}),N[48]=i):i=N[48],N[49]!==n?(s=(0,a.jsxs)("div",{children:[n,i]}),N[49]=n,N[50]=s):s=N[50];let O=null!=(y=null==M||null==(o=M.stats)?void 0:o.totalEntries)?y:"-";N[51]!==O?(f=(0,a.jsx)("h3",{children:O}),N[51]=O,N[52]=f):f=N[52],N[53]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsx)("p",{children:"Entries"}),N[53]=j):j=N[53],N[54]!==f?(S=(0,a.jsxs)("div",{children:[f,j]}),N[54]=f,N[55]=S):S=N[55];let G=null!=(x=null==M||null==(c=M.stats)?void 0:c.totalShows)?x:"-";N[56]!==G?(C=(0,a.jsx)("h3",{children:G}),N[56]=G,N[57]=C):C=N[57],N[58]===Symbol.for("react.memo_cache_sentinel")?(w=(0,a.jsx)("p",{children:"TV Shows"}),N[58]=w):w=N[58],N[59]!==C?(k=(0,a.jsxs)("div",{children:[C,w]}),N[59]=C,N[60]=k):k=N[60];let B=null!=(b=null==M||null==(d=M.stats)?void 0:d.totalMovies)?b:"-";N[61]!==B?(L=(0,a.jsx)("h3",{children:B}),N[61]=B,N[62]=L):L=N[62],N[63]===Symbol.for("react.memo_cache_sentinel")?(_=(0,a.jsx)("p",{children:"Movies"}),N[63]=_):_=N[63],N[64]!==L?(E=(0,a.jsxs)("div",{children:[L,_]}),N[64]=L,N[65]=E):E=N[65];let U=null!=(v=null==M||null==(u=M.stats)?void 0:u.totalSpecials)?v:"-";return N[66]!==U?(I=(0,a.jsx)("h3",{children:U}),N[66]=U,N[67]=I):I=N[67],N[68]===Symbol.for("react.memo_cache_sentinel")?(A=(0,a.jsx)("p",{children:"Specials"}),N[68]=A):A=N[68],N[69]!==I?(P=(0,a.jsxs)("div",{children:[I,A]}),N[69]=I,N[70]=P):P=N[70],N[71]!==S||N[72]!==k||N[73]!==E||N[74]!==P||N[75]!==e||N[76]!==l||N[77]!==s?(T=(0,a.jsx)(e5.f,{children:(0,a.jsxs)("div",{className:e,"data-detailed-library-view-stats-container":!0,children:[l,s,S,k,E,P]})}),N[71]=S,N[72]=k,N[73]=E,N[74]=P,N[75]=e,N[76]=l,N[77]=s,N[78]=T):T=N[78],T}return N[79]!==F.type?(S=(0,a.jsxs)("div",{children:["Item not found (",F.type,")"]}),N[79]=F.type,N[80]=S):S=N[80],S}function nn(e){var l,n;let t,s=(0,i.c)(8),r=(null==(n=e.item)||null==(l=n.options)?void 0:l.layout)||"grid";return s[0]!==e.libraryCollectionProps.continueWatchingList||s[1]!==e.libraryCollectionProps.hasEntries||s[2]!==e.libraryCollectionProps.isLoading||s[3]!==e.libraryCollectionProps.isNakamaLibrary||s[4]!==e.libraryCollectionProps.libraryCollectionList||s[5]!==e.libraryCollectionProps.streamingMediaIds||s[6]!==r?(t=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(lt,{isHomeItem:!0,collectionList:e.libraryCollectionProps.libraryCollectionList,continueWatchingList:e.libraryCollectionProps.continueWatchingList,isLoading:e.libraryCollectionProps.isLoading,hasEntries:e.libraryCollectionProps.hasEntries,streamingMediaIds:e.libraryCollectionProps.streamingMediaIds,isNakamaLibrary:e.libraryCollectionProps.isNakamaLibrary,type:r})}),s[0]=e.libraryCollectionProps.continueWatchingList,s[1]=e.libraryCollectionProps.hasEntries,s[2]=e.libraryCollectionProps.isLoading,s[3]=e.libraryCollectionProps.isNakamaLibrary,s[4]=e.libraryCollectionProps.libraryCollectionList,s[5]=e.libraryCollectionProps.streamingMediaIds,s[6]=r,s[7]=t):t=s[7],t}function na(e){var l,n;let t,s,r=(0,i.c)(10),{item:o,index:c}=e;(0,eV.Ky)();let{mangaCollection:d,filteredMangaCollection:u,mangaCollectionLoading:m,storedProviders:h,hasManga:p}=(0,lI.k)();if(!d||m){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(lC.C,{}),r[0]=e):e=r[0],e}r[1]===Symbol.for("react.memo_cache_sentinel")?(t=[],r[1]=t):t=r[1];let g=null==(l=o.options)?void 0:l.statuses,y=(null==(n=o.options)?void 0:n.layout)||"grid",x=0===c;return r[2]!==u||r[3]!==p||r[4]!==d||r[5]!==h||r[6]!==g||r[7]!==y||r[8]!==x?(s=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(lA.D4,{collection:d,filteredCollection:u,genres:t,storedProviders:h,hasManga:p,showStatuses:g,type:y,withTitle:x})})}),r[2]=u,r[3]=p,r[4]=d,r[5]=h,r[6]=g,r[7]=y,r[8]=x,r[9]=s):s=r[9],s}function ni(e){let l,n=(0,i.c)(1),{libraryCollectionProps:t}=e,{hasEntries:s}=t;return s?(n[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(e5.f,{className:"space-y-0 px-4",children:(0,a.jsx)(lT.K,{})}),n[0]=l):l=n[0],l):null}function nt(e){let l,n=(0,i.c)(2),t=(0,lw.Y2)();return n[0]!==t?(l=(0,a.jsx)(e5.f,{className:"space-y-0 px-4 py-4",children:(0,a.jsx)(lP.ut,{missingEpisodes:t})}),n[0]=t,n[1]=l):l=n[1],l}function ns(e){let l,n,s,r,o,c,d,u=(0,i.c)(24),{item:m}=e,h=b.useRef(null),p=m.options;u[0]===Symbol.for("react.memo_cache_sentinel")?(l={once:!0},u[0]=l):l=u[0];let g=(0,lS.W)(h,l);u[1]!==p?(n=(null==p?void 0:p.sorting)?[p.sorting]:["SCORE_DESC"],u[1]=p,u[2]=n):n=u[2];let y=(null==p?void 0:p.season)||void 0,x=(null==p?void 0:p.seasonYear)?p.seasonYear:void 0,v=(null==p?void 0:p.genres)||void 0,f=(null==p?void 0:p.format)||void 0;u[3]!==p?(s=(null==p?void 0:p.status)&&Array.isArray(p.status)?p.status:["RELEASING","FINISHED"],u[3]=p,u[4]=s):s=u[4];let j=(null==p?void 0:p.isAdult)||void 0,S=(null==p?void 0:p.countryOfOrigin)||void 0;u[5]!==n||u[6]!==y||u[7]!==x||u[8]!==v||u[9]!==f||u[10]!==s||u[11]!==j||u[12]!==S?(r={page:1,perPage:20,sort:n,season:y,seasonYear:x,genres:v,format:f,status:s,isAdult:j,countryOfOrigin:S},u[5]=n,u[6]=y,u[7]=x,u[8]=v,u[9]=f,u[10]=s,u[11]=j,u[12]=S,u[13]=r):r=u[13];let{data:N,isLoading:C}=(0,t.qN)(r,!!(null==p?void 0:p.name)&&g),w=(null==p?void 0:p.name)||"Anime Carousel";if(u[14]!==w?(o=(0,a.jsx)("h2",{children:w}),u[14]=w,u[15]=o):o=u[15],u[16]!==N||u[17]!==g||u[18]!==C||u[19]!==m){var k,L,_;c=C||N||!g?(0,a.jsxs)(e6.FN,{className:"w-full max-w-full",gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!0,children:[(0,a.jsx)(e6.h1,{className:"-top-2"}),(0,a.jsx)(e6.Wk,{className:"px-6",children:N?null==N||null==(_=N.Page)||null==(L=_.media)||null==(k=L.filter(Boolean))?void 0:k.sort(nc).map(no):[...Array(10).keys()].map(nr)})]}):(0,a.jsx)(np,{item:m}),u[16]=N,u[17]=g,u[18]=C,u[19]=m,u[20]=c}else c=u[20];return u[21]!==o||u[22]!==c?(d=(0,a.jsxs)(e5.f,{className:"space-y-0 px-4",ref:h,children:[o,c]}),u[21]=o,u[22]=c,u[23]=d):d=u[23],d}function nr(e,l){return(0,a.jsx)(lN.m,{},l)}function no(e){return(0,a.jsx)(e2.V,{media:e,showLibraryBadge:!0,containerClassName:"basis-[200px] md:basis-[250px] mx-2 mt-8 mb-0",showTrailer:!0,type:"anime"},e.id)}function nc(e,l){return l.meanScore-e.meanScore}function nd(e){let l,n,t,s,o,c,d,u=(0,i.c)(23),{item:m}=e,h=b.useRef(null),p=m.options;u[0]===Symbol.for("react.memo_cache_sentinel")?(l={once:!0},u[0]=l):l=u[0];let g=(0,lS.W)(h,l);u[1]!==p?(n=(null==p?void 0:p.sorting)?[p.sorting]:["SCORE_DESC"],u[1]=p,u[2]=n):n=u[2];let y=(null==p?void 0:p.year)?p.year:void 0,x=(null==p?void 0:p.genres)||void 0,v=(null==p?void 0:p.format)||void 0;u[3]!==p?(t=(null==p?void 0:p.status)&&Array.isArray(p.status)?p.status:["RELEASING","FINISHED"],u[3]=p,u[4]=t):t=u[4];let f=(null==p?void 0:p.isAdult)||void 0,j=(null==p?void 0:p.countryOfOrigin)||void 0;u[5]!==n||u[6]!==y||u[7]!==x||u[8]!==v||u[9]!==t||u[10]!==f||u[11]!==j?(s={page:1,perPage:20,sort:n,year:y,genres:x,format:v,status:t,isAdult:f,countryOfOrigin:j},u[5]=n,u[6]=y,u[7]=x,u[8]=v,u[9]=t,u[10]=f,u[11]=j,u[12]=s):s=u[12];let{data:S,isLoading:N}=(0,r.cE)(s,!!(null==p?void 0:p.name)&&g),C=(null==p?void 0:p.name)||"Manga Carousel";if(u[13]!==C?(o=(0,a.jsx)("h2",{children:C}),u[13]=C,u[14]=o):o=u[14],u[15]!==S||u[16]!==g||u[17]!==N||u[18]!==m){var w,k,L;c=N||S||!g?(0,a.jsxs)(e6.FN,{className:"w-full max-w-full",gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!0,children:[(0,a.jsx)(e6.h1,{className:"-top-2"}),(0,a.jsx)(e6.Wk,{className:"px-6",children:S?null==S||null==(L=S.Page)||null==(k=L.media)||null==(w=k.filter(Boolean))?void 0:w.sort(nh).map(nm):[...Array(10).keys()].map(nu)})]}):(0,a.jsx)(np,{item:m}),u[15]=S,u[16]=g,u[17]=N,u[18]=m,u[19]=c}else c=u[19];return u[20]!==o||u[21]!==c?(d=(0,a.jsxs)(e5.f,{className:"space-y-0 px-4",ref:h,children:[o,c]}),u[20]=o,u[21]=c,u[22]=d):d=u[22],d}function nu(e,l){return(0,a.jsx)(lN.m,{},l)}function nm(e){return(0,a.jsx)(e2.V,{media:e,containerClassName:"basis-[200px] md:basis-[250px] mx-2 mt-8 mb-0",type:"manga"},e.id)}function nh(e,l){return l.meanScore-e.meanScore}function np(e){let l,n=(0,i.c)(2),{item:t}=e,s=Q[t.type],r=null==s?void 0:s.name;return n[0]!==r?(l=(0,a.jsx)(e5.f,{className:"rounded-xl bg-gray-900 border-2 border-dashed border-orange-400 p-4 !my-4",children:(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-400",children:['Item "',r,'" cannot be displayed because it is missing some required options.']})}),n[0]=r,n[1]=l):l=n[1],l}let ng="force-static";function ny(){let e,l=(0,i.c)(1);return(0,eV.Ky)(),l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l5,{})}),l[0]=e):e=l[0],e}},7013:(e,l,n)=>{"use strict";n.d(l,{JW:()=>d,M$:()=>m,Ok:()=>u});var a=n(19749),i=n(7675),t=n(74889),s=n(35349),r=n(46278),o=n(29724),c=n(69554);function d(){let e,l,n=(0,a.c)(4),c=(0,r.jE)(),d=(0,o.Xr)(s.Q);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[t.S.SETTINGS.GettingStarted.key],n[0]=e):e=n[0],n[1]!==c||n[2]!==d?(l={endpoint:t.S.SETTINGS.GettingStarted.endpoint,method:t.S.SETTINGS.GettingStarted.methods[0],mutationKey:e,onSuccess:async()=>{await c.invalidateQueries({queryKey:[t.S.SETTINGS.GetSettings.key]}),await c.invalidateQueries({queryKey:[t.S.STATUS.GetStatus.key]}),d(!0)}},n[1]=c,n[2]=d,n[3]=l):l=n[3],(0,i.qk)(l)}function u(){let e,l,n=(0,a.c)(3),s=(0,r.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[t.S.SETTINGS.SaveSettings.key],n[0]=e):e=n[0],n[1]!==s?(l={endpoint:t.S.SETTINGS.SaveSettings.endpoint,method:t.S.SETTINGS.SaveSettings.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[t.S.SETTINGS.GetSettings.key]}),await s.invalidateQueries({queryKey:[t.S.STATUS.GetStatus.key]}),c.oR.success("Settings saved")}},n[1]=s,n[2]=l):l=n[2],(0,i.qk)(l)}function m(){let e,l,n=(0,a.c)(3),s=(0,r.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[t.S.SETTINGS.SaveAutoDownloaderSettings.key],n[0]=e):e=n[0],n[1]!==s?(l={endpoint:t.S.SETTINGS.SaveAutoDownloaderSettings.endpoint,method:t.S.SETTINGS.SaveAutoDownloaderSettings.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[t.S.SETTINGS.GetSettings.key]}),await s.invalidateQueries({queryKey:[t.S.STATUS.GetStatus.key]}),c.oR.success("Settings saved")}},n[1]=s,n[2]=l):l=n[2],(0,i.qk)(l)}},8816:(e,l,n)=>{"use strict";n.d(l,{K:()=>h});var a=n(95155),i=n(42094),t=n(13029),s=n(96826),r=n(244),o=n(6708),c=n(44608),d=n(80919),u=n(6066),m=n(12115);function h(){let e=(0,s.v1)(),l=(0,u.useRouter)(),{data:n}=(0,i.u)(),h=m.useMemo(()=>{var l,a,i,t,s,r;let o=(null==(l=(null!=(r=null==n||null==(i=n.MediaListCollection)||null==(a=i.lists)?void 0:a.filter(e=>"DROPPED"!==e.status).map(e=>null==e?void 0:e.entries).flat())?r:[]).map(e=>null==e?void 0:e.media))?void 0:l.filter(Boolean)).filter(e=>{var l;return!!(null==(l=e.nextAiringEpisode)?void 0:l.episode)}).sort((e,l)=>e.nextAiringEpisode.timeUntilAiring-l.nextAiringEpisode.timeUntilAiring);return(null==e||null==(s=e.settings)||null==(t=s.anilist)?void 0:t.enableAdultContent)?o:o.filter(e=>!e.isAdult)},[n]);return(null==h?void 0:h.length)?(0,a.jsx)(r.KZ,{children:h.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Upcoming episodes"}),(0,a.jsx)("p",{className:"text-[--muted]",children:"Based on your anime list"})]}),(0,a.jsxs)(o.FN,{className:"w-full max-w-full",gap:"md",opts:{align:"start"},autoScroll:!0,children:[(0,a.jsx)(o.h1,{}),(0,a.jsx)(o.Wk,{children:h.map(e=>{var n,i,s,r,u,m;return(0,a.jsx)(o.A7,{className:"md:basis-1/2 lg:basis-1/3 2xl:basis-1/4 min-[2000px]:basis-1/5",children:(0,a.jsx)(t.U,{image:e.bannerImage||(null==(n=e.coverImage)?void 0:n.large),topTitle:null==(i=e.title)?void 0:i.userPreferred,title:"Episode ".concat(null==(s=e.nextAiringEpisode)?void 0:s.episode),meta:(0,c.m)((0,d.p)(new Date,null==(r=e.nextAiringEpisode)?void 0:r.timeUntilAiring),{addSuffix:!0}),imageClass:"opacity-50",actionIcon:null,onClick:()=>{l.push("/entry?id=".concat(e.id))},anime:{id:e.id,image:null==(u=e.coverImage)?void 0:u.large,title:null==(m=e.title)?void 0:m.userPreferred}},e.id)},e.id)})})]})]})}):null}},15044:(e,l,n)=>{"use strict";n.d(l,{Gd:()=>r,Gm:()=>c,H2:()=>o});var a=n(19749),i=n(7675),t=n(74889),s=n(46278);function r(){let e,l=(0,a.c)(1);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:t.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.endpoint,method:t.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.methods[0],queryKey:[t.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key],enabled:!0},l[0]=e):e=l[0],(0,i.fl)(e)}function o(){let e,l,n=(0,a.c)(3),r=(0,s.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[t.S.LIBRARY_EXPLORER.RefreshLibraryExplorerFileTree.key],n[0]=e):e=n[0],n[1]!==r?(l={endpoint:t.S.LIBRARY_EXPLORER.RefreshLibraryExplorerFileTree.endpoint,method:t.S.LIBRARY_EXPLORER.RefreshLibraryExplorerFileTree.methods[0],mutationKey:e,onSuccess:async()=>{r.invalidateQueries({queryKey:[t.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key]})}},n[1]=r,n[2]=l):l=n[2],(0,i.qk)(l)}function c(){let e,l,n=(0,a.c)(3),r=(0,s.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[t.S.LOCALFILES.SuperUpdateLocalFiles.key],n[0]=e):e=n[0],n[1]!==r?(l={endpoint:t.S.LOCALFILES.SuperUpdateLocalFiles.endpoint,method:t.S.LOCALFILES.SuperUpdateLocalFiles.methods[0],mutationKey:e,onSuccess:async()=>{r.invalidateQueries({queryKey:[t.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key]})}},n[1]=r,n[2]=l):l=n[2],(0,i.qk)(l)}},29648:(e,l,n)=>{"use strict";n.d(l,{U6:()=>k,gw:()=>w,ho:()=>C});var a=n(95155),i=n(19749),t=n(7675),s=n(74889),r=n(15044),o=n(46278),c=n(69554),d=n(48555),u=n(83563),m=n(96826),h=n(24038),p=n(244),g=n(84127),y=n(76049),x=n(57073),b=n(60695),v=n(73832),f=n(42500),j=n(29724),S=n(12115),N=n(75780);let C=(0,f.eU)(!1),w=(0,f.eU)(!1);function k(){var e,l,n,f,k;let I,A,P,T,R,D,F,O,M,G,B,U,V,z,K,H,W,q,X,$,Q,Z,Y,J,ee,el=(0,i.c)(65),en=(0,m.v1)(),[ea,ei]=(0,j.fp)(C),[,et]=(0,j.fp)(w),[es]=(0,j.fp)(d.Qy),er=(0,v.C)(!0),eo=(0,v.C)(!0),ec=(0,v.C)(!0);el[0]!==ei?(I=()=>{ei(!1)},el[0]=ei,el[1]=I):I=el[1];let{mutate:ed,isPending:eu}=function(e){let l,n,a=(0,i.c)(5),d=(0,o.jE)(),{mutate:u}=(0,r.H2)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(l=[s.S.SCAN.ScanLocalFiles.key],a[0]=l):l=a[0],a[1]!==e||a[2]!==d||a[3]!==u?(n={endpoint:s.S.SCAN.ScanLocalFiles.endpoint,method:s.S.SCAN.ScanLocalFiles.methods[0],mutationKey:l,onSuccess:async()=>{await d.invalidateQueries({queryKey:[s.S.ANIME_COLLECTION.GetLibraryCollection.key]}),c.oR.success("Library scanned"),u(),await d.invalidateQueries({queryKey:[s.S.ANIME_ENTRIES.GetMissingEpisodes.key]}),await d.invalidateQueries({queryKey:[s.S.AUTO_DOWNLOADER.GetAutoDownloaderItems.key]}),await d.invalidateQueries({queryKey:[s.S.ANIME_ENTRIES.GetAnimeEntry.key]}),null==e||e()}},a[1]=e,a[2]=d,a[3]=u,a[4]=n):n=a[4],(0,t.qk)(n)}(I);el[2]!==er||el[3]!==(null==es?void 0:es.length)?(A=()=>{(null==es?void 0:es.length)?er.on():er.off()},el[2]=er,el[3]=null==es?void 0:es.length,el[4]=A):A=el[4],el[5]!==es?(P=[es],el[5]=es,el[6]=P):P=el[6],S.useEffect(A,P),el[7]!==eu||el[8]!==et?(T=()=>{et(eu)},el[7]=eu,el[8]=et,el[9]=T):T=el[9],el[10]!==eu?(R=[eu],el[10]=eu,el[11]=R):R=el[11],S.useEffect(T,R),el[12]!==er.active||el[13]!==ed||el[14]!==ei||el[15]!==ec.active||el[16]!==eo.active?(D=function(){ed({enhanced:!er.active,skipLockedFiles:eo.active,skipIgnoredFiles:ec.active}),ei(!1)},el[12]=er.active,el[13]=ed,el[14]=ei,el[15]=ec.active,el[16]=eo.active,el[17]=D):D=el[17];let em=D,{inject:eh,remove:ep}=(0,u.H)();el[18]!==em||el[19]!==eh||el[20]!==ep?(F=()=>(eh("scanner-controls",{priority:1,items:[{id:"refresh",value:"refresh",heading:"Library",render:E,onSelect:e=>{let{ctx:l}=e;l.close(),setTimeout(()=>{em()},500)},showBasedOnInput:"startsWith"}],filter:_,shouldShow:L,showBasedOnInput:"startsWith"}),()=>ep("scanner-controls")),el[18]=em,el[19]=eh,el[20]=ep,el[21]=F):F=el[21],el[22]===Symbol.for("react.memo_cache_sentinel")?(O=[],el[22]=O):O=el[22],S.useEffect(F,O),el[23]!==ei?(M=e=>{ei(e)},el[23]=ei,el[24]=M):M=el[24],el[25]===Symbol.for("react.memo_cache_sentinel")?(G=(0,a.jsx)(h.Z,{spread:50,glow:!0,disabled:!1,proximity:100,inactiveZone:.01,className:"!mt-0 opacity-30"}),el[25]=G):G=el[25],el[26]!==(null==en||null==(e=en.user)?void 0:e.isSimulated)?(B=(null==en||null==(f=en.user)?void 0:f.isSimulated)&&(0,a.jsx)("div",{className:"border border-dashed rounded-md py-2 px-4 !mt-5",children:"Using this feature without an AniList account is not recommended if you have a large library, as it may lead to rate limits and slower scanning. Please consider using an account for a better experience."}),el[26]=null==en||null==(k=en.user)?void 0:k.isSimulated,el[27]=B):B=el[27],el[28]===Symbol.for("react.memo_cache_sentinel")?(U=(0,a.jsx)("h5",{className:"text-[--muted]",children:"Local files"}),el[28]=U):U=el[28],el[29]!==eo?(V=e=>eo.set(e),el[29]=eo,el[30]=V):V=el[30],el[31]!==eo.active||el[32]!==V?(z=(0,a.jsx)(b.d,{side:"right",label:"Skip locked files",value:eo.active,onValueChange:V}),el[31]=eo.active,el[32]=V,el[33]=z):z=el[33],el[34]!==ec?(K=e=>ec.set(e),el[34]=ec,el[35]=K):K=el[35],el[36]!==ec.active||el[37]!==K?(H=(0,a.jsx)(b.d,{side:"right",label:"Skip ignored files",value:ec.active,onValueChange:K}),el[36]=ec.active,el[37]=K,el[38]=H):H=el[38],el[39]===Symbol.for("react.memo_cache_sentinel")?(W=(0,a.jsx)(x.w,{}),el[39]=W):W=el[39],el[40]===Symbol.for("react.memo_cache_sentinel")?(q=(0,a.jsx)("h5",{className:"text-[--muted]",children:"Matching data"}),el[40]=q):q=el[40],el[41]!==er?(X=e=>er.set(e),el[41]=er,el[42]=X):X=el[42],el[43]!==er.active?($=er.active?"":(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"text-[--orange]",children:"Slower for large libraries"}),". For faster scanning, add the anime entries present in your library to your lists and re-enable this before scanning."]}),el[43]=er.active,el[44]=$):$=el[44];let eg=!(null==es?void 0:es.length);el[45]!==er.active||el[46]!==X||el[47]!==$||el[48]!==eg?(Q=(0,a.jsxs)(p.KZ,{className:"space-y-2",children:[q,(0,a.jsx)(b.d,{side:"right",label:"Use my AniList lists only",moreHelp:"Disabling this will cause Seanime to send more API requests which may lead to rate limits and slower scanning",value:er.active,onValueChange:X,help:$,disabled:eg})]}),el[45]=er.active,el[46]=X,el[47]=$,el[48]=eg,el[49]=Q):Q=el[49],el[50]!==z||el[51]!==H||el[52]!==Q?(Z=(0,a.jsx)("div",{className:"space-y-4","data-scanner-modal-content":!0,children:(0,a.jsxs)(p.KZ,{className:"space-y-2",children:[U,z,H,W,Q]})}),el[50]=z,el[51]=H,el[52]=Q,el[53]=Z):Z=el[53],el[54]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,a.jsx)(N.CKj,{}),el[54]=Y):Y=el[54];let ey=!(null==en||null==(n=en.settings)||null==(l=n.library)?void 0:l.libraryPath);return el[55]!==em||el[56]!==eu||el[57]!==ey?(J=(0,a.jsx)(g.$n,{onClick:em,intent:"primary",leftIcon:Y,loading:eu,className:"w-full",disabled:ey,children:"Scan"}),el[55]=em,el[56]=eu,el[57]=ey,el[58]=J):J=el[58],el[59]!==ea||el[60]!==B||el[61]!==Z||el[62]!==J||el[63]!==M?(ee=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(y.a,{"data-scanner-modal":!0,open:ea,onOpenChange:M,title:"Library Scanner",titleClass:"text-center",contentClass:"space-y-4 max-w-2xl bg-gray-950 bg-opacity-70 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none rounded-xl",overlayClass:"bg-gray-950/70 backdrop-blur-sm",children:[G,B,Z,J]})}),el[59]=ea,el[60]=B,el[61]=Z,el[62]=J,el[63]=M,el[64]=ee):ee=el[64],ee}function L(e){let{ctx:l}=e;return"/"===l.router.pathname}function _(e){let{item:l,input:n}=e;return!n||l.value.toLowerCase().includes(n.toLowerCase())}function E(){return(0,a.jsx)("p",{children:"Refresh library"})}},71536:(e,l,n)=>{Promise.resolve().then(n.bind(n,1211))},92952:(e,l,n)=>{"use strict";n.d(l,{d:()=>E,r:()=>_});var a=n(95155),i=n(2159),t=n(58092),s=n(9478),r=n(81845),o=n(92224),c=n(14680),d=n(5249),u=n(244),m=n(84127),h=n(63352),p=n(91360),g=n(15388),y=n(2091),x=n(76136),b=n(52885),v=n(12556),f=n(42500),j=n(29724),S=n(12115),N=n(3692),C=n(28718),w=n(75780),k=n(80893),L=n(69554);let _=(0,f.eU)(!1);function E(e){var l,n;let{unmatchedGroups:f}=e,[E,I]=(0,j.fp)(_),[A,P]=S.useState(0),T=f.length-1,[R,D]=S.useState(null==f?void 0:f[0]),[F,O]=S.useState([]),[M,G]=S.useState(0),{mutate:B}=(0,t.E)(),{data:U,mutate:V,isPending:z,reset:K}=(0,i.XD)(),{mutate:H,isPending:W}=(0,s.bU)(),{mutate:q,isPending:X}=(0,i.Zx)(),$=W||X,[Q,Z]=S.useState(0),Y=S.useCallback(e=>{e&&!isNaN(Number(e))&&(G(Number(e)),Z(e=>e+1))},[]);S.useLayoutEffect(()=>{var e,l;O(null!=(l=null==R||null==(e=R.localFiles)?void 0:e.map(e=>e.path))?l:[])},[R]),S.useEffect(()=>{P(0),D(f[0])},[E,f]),S.useEffect(()=>{D(f[A]),G(0),K()},[A,f]);let J=S.useCallback(()=>(0,a.jsx)(x.Q,{value:M,onValueChange:e=>G(e),formatOptions:{useGrouping:!1}}),[null==R?void 0:R.dir,Q]);function ee(){0===A&&1===f.length&&I(!1),G(0),K(),P(0),D(f[0])}let el=S.useCallback(()=>{V({dir:R.dir},{onSuccess:e=>{setTimeout(()=>{(null==e?void 0:e.length)||L.oR.warning("No suggestions found, try searching manually")},500)}})},[null==R?void 0:R.dir,V]);S.useEffect(()=>{R||I(!1)},[R]);let{setSeaCommandInput:en,setSeaCommandOpen:ea}=(0,r.W)(),{searchAndSelectMedia:ei,selectedAnime:et,onAcknowledgeSelection:es}=(0,o.U)();return(S.useEffect(()=>{et&&(G(et.id),Z(e=>e+1),es(),ea(!1))},[et]),R)?(0,a.jsx)(g._s,{"data-unmatched-file-manager-drawer":!0,open:E,onOpenChange:()=>I(!1),size:"xl",title:"Unmatched files",children:(0,a.jsxs)(u.KZ,{className:"mt-4",children:[(0,a.jsxs)("div",{className:(0,p.cn)("flex w-full justify-between",{hidden:f.length<=1}),children:[(0,a.jsx)(m.$n,{intent:"gray-subtle",leftIcon:(0,a.jsx)(N.QVr,{}),disabled:0===A,onClick:()=>{P(e=>e-1)},className:(0,p.cn)("transition-opacity",{"opacity-0":0===A}),children:"Previous"}),(0,a.jsxs)("p",{children:[A+1," / ",T+1]}),(0,a.jsx)(m.$n,{intent:"gray-subtle",rightIcon:(0,a.jsx)(N.Z0P,{}),disabled:A>=T,onClick:()=>{P(e=>e+1)},className:(0,p.cn)("transition-opacity",{"opacity-0":A>=T}),children:"Next"})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border text-sm tracking-wide p-2 px-4 rounded-[--radius-md] line-clamp-1 flex gap-2 items-center cursor-pointer transition hover:bg-opacity-80",onClick:()=>B({path:R.dir}),children:[(0,a.jsx)(C.WNP,{className:"text-2xl"}),R.dir]}),(0,a.jsx)("div",{className:"flex items-center flex-wrap gap-2",children:(0,a.jsxs)("div",{className:"flex gap-2 items-center w-full",children:[(0,a.jsx)("p",{className:"flex-none text-lg mr-2 font-semibold",children:"Anilist ID"}),(0,a.jsx)(J,{}),(0,a.jsx)(m.$n,{intent:"white",onClick:function(){R&&M>0&&F.length>0&&q({paths:F,mediaId:M},{onSuccess:()=>{ee()}})},disabled:$,children:"Match selection"})]})}),(0,a.jsxs)("div",{className:"bg-gray-950 border p-2 px-2 divide-y divide-[--border] rounded-[--radius-md] max-h-[50vh] max-w-full overflow-x-auto overflow-y-auto text-sm",children:[(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(h.Sc,{label:"Select all files",value:F.length===(null==R||null==(l=R.localFiles)?void 0:l.length)||0!==F.length&&"indeterminate",onValueChange:e=>{"boolean"==typeof e&&O(e=>{var l,n,a;return e.length===(null==R||null==(l=R.localFiles)?void 0:l.length)?[]:null!=(a=null==R||null==(n=R.localFiles)?void 0:n.map(e=>e.path))?a:[]})},fieldClass:"w-[fit-content]"})}),null==(n=R.localFiles)?void 0:n.sort((e,l)=>{var n,a,i,t;return Number(null!=(i=null==(n=e.parsedInfo)?void 0:n.episode)?i:0)-Number(null!=(t=null==(a=l.parsedInfo)?void 0:a.episode)?t:0)}).map((e,l)=>(0,a.jsx)("div",{className:"p-2 ",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(h.Sc,{label:"".concat(v.V.basename(e.path)),value:F.includes(e.path),onValueChange:l=>{"boolean"==typeof l&&O(n=>l?[...n,e.path]:n.filter(l=>l!==e.path))},labelClass:"text-sm tracking-wide data-[checked=false]:opacity-50",fieldClass:"w-[fit-content]"})})},"".concat(e.path,"-").concat(l)))]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-1",children:[(0,a.jsx)(m.$n,{leftIcon:(0,a.jsx)(w.CKj,{}),intent:"white-link",onClick:el,children:"Fetch suggestions"}),(0,a.jsx)(m.$n,{intent:"white-subtle",onClick:function(){ei("anime"),ea(!0),setTimeout(()=>{var e,l,n,a;en("/search "+((null==R||null==(a=R.localFiles)||null==(n=a[0])||null==(l=n.parsedFolderInfo)||null==(e=l[0])?void 0:e.title)||""))},200)},children:"Search on AniList"}),(0,a.jsx)("div",{className:"flex flex-1"}),(0,a.jsx)(m.$n,{leftIcon:(0,a.jsx)(k.dxg,{className:"text-lg"}),intent:"warning-subtle",size:"sm",rounded:!0,disabled:$,onClick:function(){F.length>0&&H({paths:F,action:"ignore"},{onSuccess:()=>{ee(),L.oR.success("Files ignored")}})},children:"Ignore selection"})]}),z&&(0,a.jsx)(y.kt,{}),!z&&!!(null==U?void 0:U.length)&&(0,a.jsx)(b.z,{defaultValue:"1",fieldClass:"w-full",fieldLabelClass:"text-md",label:"Select Anime",value:String(M),onValueChange:Y,options:null==U?void 0:U.map(e=>{var l,n,i,t,s,r,o;return{label:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-base md:text-md font-medium !-mt-1.5 line-clamp-1",children:(null==(l=e.title)?void 0:l.userPreferred)||(null==(n=e.title)?void 0:n.english)||(null==(i=e.title)?void 0:i.romaji)||"N/A"}),(0,a.jsxs)("div",{className:"mt-2 flex w-full gap-4",children:[(null==(t=e.coverImage)?void 0:t.medium)&&(0,a.jsx)("div",{className:"h-28 w-28 flex-none rounded-[--radius-md] object-cover object-center relative overflow-hidden",children:(0,a.jsx)(c.r,{src:e.coverImage.medium,alt:"",fill:!0,quality:100,priority:!0,sizes:"10rem",className:"object-cover object-center"})}),(0,a.jsxs)("div",{className:"text-[--muted]",children:[(0,a.jsxs)("p",{children:["Type: ",(0,a.jsx)("span",{className:"text-gray-200 font-semibold",children:e.format})]}),(0,a.jsxs)("p",{children:["Aired: ",(null==(s=e.startDate)?void 0:s.year)?new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(new Date((null==(r=e.startDate)?void 0:r.year)||0,(null==(o=e.startDate)?void 0:o.month)||0)):"-"]}),(0,a.jsxs)("p",{children:["Status: ",e.status]}),(0,a.jsx)(d.i,{href:"https://anilist.co/anime/".concat(e.id),target:"_blank",children:(0,a.jsx)(m.$n,{intent:"primary-link",size:"sm",className:"px-0",children:"Open on AniList"})})]})]})]}),value:String(e.id)||""}}),stackClass:"grid grid-cols-1 md:grid-cols-2 gap-2 space-y-0",itemContainerClass:(0,p.cn)("items-start cursor-pointer transition border-transparent rounded-[--radius] p-4 w-full","bg-gray-50 hover:bg-[--subtle] dark:bg-gray-900","data-[state=checked]:bg-white dark:data-[state=checked]:bg-gray-950","focus:ring-2 ring-brand-100 dark:ring-brand-900 ring-offset-1 ring-offset-[--background] focus-within:ring-2 transition","border border-transparent data-[state=checked]:border-[--brand] data-[state=checked]:ring-offset-0"),itemClass:(0,p.cn)("border-transparent absolute top-2 right-2 bg-transparent dark:bg-transparent dark:data-[state=unchecked]:bg-transparent","data-[state=unchecked]:bg-transparent data-[state=unchecked]:hover:bg-transparent dark:data-[state=unchecked]:hover:bg-transparent","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent"),itemIndicatorClass:"hidden",itemLabelClass:"font-medium flex flex-col items-center data-[state=checked]:text-[--brand] cursor-pointer"})]})}):null}}},e=>{var l=l=>e(e.s=l);e.O(0,[7518,3873,5271,3380,844,9204,6446,2150,6711,585,5479,4506,5897,8087,5760,3603,7753,7949,2362,4613,512,9910,8429,8481,2202,7825,1805,5290,4762,4218,4791,7228,6905,9986,1597,7528,5045,4809,9690,9325,9360,8154,1298,5340,4101,1029,1078,1683,5334,6862,4033,9484,9832,5565,2975,7363,5667,8672,2701,615,8441,6891,7358],()=>l(71536)),_N_E=e.O()}]);