(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9981],{8816:(e,l,n)=>{"use strict";n.d(l,{K:()=>h});var i=n(95155),a=n(42094),t=n(13029),r=n(96826),s=n(244),o=n(6708),c=n(44608),d=n(80919),u=n(6066),m=n(12115);function h(){let e=(0,r.v1)(),l=(0,u.useRouter)(),{data:n}=(0,a.u)(),h=m.useMemo(()=>{var l,i,a,t,r,s;let o=(null==(l=(null!=(s=null==n||null==(a=n.MediaListCollection)||null==(i=a.lists)?void 0:i.filter(e=>"DROPPED"!==e.status).map(e=>null==e?void 0:e.entries).flat())?s:[]).map(e=>null==e?void 0:e.media))?void 0:l.filter(Boolean)).filter(e=>{var l;return!!(null==(l=e.nextAiringEpisode)?void 0:l.episode)}).sort((e,l)=>e.nextAiringEpisode.timeUntilAiring-l.nextAiringEpisode.timeUntilAiring);return(null==e||null==(r=e.settings)||null==(t=r.anilist)?void 0:t.enableAdultContent)?o:o.filter(e=>!e.isAdult)},[n]);return(null==h?void 0:h.length)?(0,i.jsx)(s.KZ,{children:h.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"Upcoming episodes"}),(0,i.jsx)("p",{className:"text-[--muted]",children:"Based on your anime list"})]}),(0,i.jsxs)(o.FN,{className:"w-full max-w-full",gap:"md",opts:{align:"start"},autoScroll:!0,children:[(0,i.jsx)(o.h1,{}),(0,i.jsx)(o.Wk,{children:h.map(e=>{var n,a,r,s,u,m;return(0,i.jsx)(o.A7,{className:"md:basis-1/2 lg:basis-1/3 2xl:basis-1/4 min-[2000px]:basis-1/5",children:(0,i.jsx)(t.U,{image:e.bannerImage||(null==(n=e.coverImage)?void 0:n.large),topTitle:null==(a=e.title)?void 0:a.userPreferred,title:"Episode ".concat(null==(r=e.nextAiringEpisode)?void 0:r.episode),meta:(0,c.m)((0,d.p)(new Date,null==(s=e.nextAiringEpisode)?void 0:s.timeUntilAiring),{addSuffix:!0}),imageClass:"opacity-50",actionIcon:null,onClick:()=>{l.push("/entry?id=".concat(e.id))},anime:{id:e.id,image:null==(u=e.coverImage)?void 0:u.large,title:null==(m=e.title)?void 0:m.userPreferred}},e.id)},e.id)})})]})]})}):null}},31093:(e,l,n)=>{var i=n(39861),a=n(11169);e.exports=function(e,l,n,t){return null==e?[]:(a(l)||(l=null==l?[]:[l]),a(n=t?void 0:n)||(n=null==n?[]:[n]),i(e,l,n))}},68398:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>ng,dynamic:()=>nh});var i=n(95155),a=n(19749),t=n(42094),r=n(68205),s=n(38900),o=n(86726),c=n(64629),d=n(9478),u=n(83563),m=n(75733),h=n(244),g=n(84127),p=n(76049),x=n(42500),b=n(29724),y=n(12115),v=n(70376),f=n(69554);let j=(0,x.eU)(!1);function N(){let e,l,n,t,r,s,o,c,x,N,k,P,A,L,E,I,T,M=(0,a.c)(46),[D,O]=(0,b.fp)(j),{mutate:F,isPending:R}=(0,d.pZ)();M[0]!==F||M[1]!==O?(e=function(){F({action:"lock"},{onSuccess:()=>{O(!1),f.oR.success("Files locked")}})},M[0]=F,M[1]=O,M[2]=e):e=M[2];let z=e;M[3]!==F||M[4]!==O?(l=function(){F({action:"unlock"},{onSuccess:()=>{O(!1),f.oR.success("Files unlocked")}})},M[3]=F,M[4]=O,M[5]=l):l=M[5];let V=l,{mutate:U,isPending:B}=(0,d.uO)();M[6]!==U||M[7]!==O?(n=function(){U(void 0,{onSuccess:()=>{O(!1)}})},M[6]=U,M[7]=O,M[8]=n):n=M[8];let G=n;M[9]!==G?(t={title:"Remove empty directories",description:"This action will remove all empty directories in the library. Are you sure you want to continue?",onConfirm:()=>{G()}},M[9]=G,M[10]=t):t=M[10];let H=(0,m.J)(t),{inject:W,remove:K}=(0,u.H)();M[11]!==z||M[12]!==V||M[13]!==W||M[14]!==K?(r=()=>(W("anime-library-bulk-actions",{priority:1,items:[{id:"lock-files",value:"lock",heading:"Library",render:_,onSelect:e=>{z()}},{id:"unlock-files",value:"unlock",heading:"Library",render:w,onSelect:e=>{V()}}],filter:C,shouldShow:S,showBasedOnInput:"startsWith"}),()=>K("anime-library-bulk-actions")),M[11]=z,M[12]=V,M[13]=W,M[14]=K,M[15]=r):r=M[15],M[16]===Symbol.for("react.memo_cache_sentinel")?(s=[],M[16]=s):s=M[16],y.useEffect(r,s),M[17]!==O?(o=()=>O(!1),M[17]=O,M[18]=o):o=M[18],M[19]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(v.E2M,{className:"text-2xl"}),M[19]=c):c=M[19];let X=R||B;M[20]!==z||M[21]!==X?(x=(0,i.jsx)(g.$n,{leftIcon:c,intent:"gray-outline",className:"w-full",disabled:X,onClick:z,children:"Lock all files"}),M[20]=z,M[21]=X,M[22]=x):x=M[22],M[23]===Symbol.for("react.memo_cache_sentinel")?(N=(0,i.jsx)(v.iXN,{className:"text-2xl"}),M[23]=N):N=M[23];let Y=R||B;return M[24]!==V||M[25]!==Y?(k=(0,i.jsx)(g.$n,{leftIcon:N,intent:"gray-outline",className:"w-full",disabled:Y,onClick:V,children:"Unlock all files"}),M[24]=V,M[25]=Y,M[26]=k):k=M[26],M[27]!==k||M[28]!==x?(P=(0,i.jsxs)("div",{className:"flex gap-2 flex-col md:flex-row",children:[x,k]}),M[27]=k,M[28]=x,M[29]=P):P=M[29],M[30]!==H?(A=()=>H.open(),M[30]=H,M[31]=A):A=M[31],M[32]!==R||M[33]!==B||M[34]!==A?(L=(0,i.jsx)(g.$n,{intent:"gray-outline",className:"w-full",disabled:R,loading:B,onClick:A,children:"Remove empty directories"}),M[32]=R,M[33]=B,M[34]=A,M[35]=L):L=M[35],M[36]!==P||M[37]!==L?(E=(0,i.jsxs)(h.KZ,{spacing:"sm",children:[P,L]}),M[36]=P,M[37]=L,M[38]=E):E=M[38],M[39]!==H?(I=(0,i.jsx)(m.K,{...H}),M[39]=H,M[40]=I):I=M[40],M[41]!==D||M[42]!==E||M[43]!==I||M[44]!==o?(T=(0,i.jsxs)(p.a,{open:D,onOpenChange:o,title:"Bulk actions",contentClass:"space-y-4",children:[E,I]}),M[41]=D,M[42]=E,M[43]=I,M[44]=o,M[45]=T):T=M[45],T}function S(e){let{ctx:l}=e;return"/"===l.router.pathname}function C(e){let{item:l,input:n}=e;return!n||l.value.toLowerCase().includes(n.toLowerCase())}function w(){return(0,i.jsx)("p",{children:"Unlock all files"})}function _(){return(0,i.jsx)("p",{children:"Lock all files"})}var k=n(86531),P=n(1382),A=n(58092),L=n(78106),E=n(63352),I=n(15388),T=n(12556),M=n(80893);let D=(0,x.eU)(!1);function O(e){let l,n,t,r,s,o,c,u,m,p,x=(0,a.c)(26),{files:v}=e,[f,j]=(0,b.fp)(D);(0,A.E)();let{mutate:N,isPending:S}=(0,d.bU)();x[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],x[0]=l):l=x[0];let[C,w]=y.useState(l);x[1]!==v?(n=()=>{var e;w(null!=(e=null==v?void 0:v.map(z))?e:[])},t=[v],x[1]=v,x[2]=n,x[3]=t):(n=x[2],t=x[3]),y.useLayoutEffect(n,t),x[4]!==C||x[5]!==N?(r=function(){C.length>0&&N({paths:C,action:"unignore"},{onSuccess:R})},x[4]=C,x[5]=N,x[6]=r):r=x[6];let _=r;return x[7]!==j?(s=()=>j(!1),x[7]=j,x[8]=s):s=x[8],x[9]!==v.length||x[10]!==_||x[11]!==S?(o=v.length>0&&(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,i.jsx)("div",{className:"flex flex-1"}),(0,i.jsx)(g.$n,{leftIcon:(0,i.jsx)(M.dxg,{className:"text-lg"}),intent:"white",size:"sm",rounded:!0,loading:S,onClick:_,children:"Un-ignore selection"})]}),x[9]=v.length,x[10]=_,x[11]=S,x[12]=o):o=x[12],x[13]!==v.length?(c=0===v.length&&(0,i.jsx)(L.D,{title:null,children:"No ignored files"}),x[13]=v.length,x[14]=c):c=x[14],x[15]!==v||x[16]!==C?(u=v.length>0&&(0,i.jsxs)("div",{className:"bg-gray-950 border p-2 px-2 divide-y divide-[--border] rounded-[--radius-md] max-h-[85vh] max-w-full overflow-x-auto overflow-y-auto text-sm",children:[(0,i.jsx)("div",{className:"p-2",children:(0,i.jsx)(E.Sc,{label:"Select all files",value:C.length===(null==v?void 0:v.length)||0!==C.length&&"indeterminate",onValueChange:e=>{"boolean"==typeof e&&w(e=>{var l;return e.length===(null==v?void 0:v.length)?[]:null!=(l=null==v?void 0:v.map(F))?l:[]})},fieldClass:"w-[fit-content]"})}),v.map((e,l)=>(0,i.jsx)("div",{className:"p-2 ",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)(E.Sc,{label:"".concat(T.V.basename(e.path)),value:C.includes(e.path),onValueChange:l=>{"boolean"==typeof l&&w(n=>l?[...n,e.path]:n.filter(l=>l!==e.path))},fieldClass:"w-[fit-content]"})})},"".concat(e.path,"-").concat(l)))]}),x[15]=v,x[16]=C,x[17]=u):u=x[17],x[18]!==o||x[19]!==c||x[20]!==u?(m=(0,i.jsxs)(h.KZ,{className:"mt-4",children:[o,c,u]}),x[18]=o,x[19]=c,x[20]=u,x[21]=m):m=x[21],x[22]!==f||x[23]!==s||x[24]!==m?(p=(0,i.jsx)(I._s,{open:f,onOpenChange:s,size:"xl",title:"Ignored files",children:m}),x[22]=f,x[23]=s,x[24]=m,x[25]=p):p=x[25],p}function F(e){return e.path}function R(){f.oR.success("Files un-ignored")}function z(e){return e.path}var V=n(29648),U=n(97447),B=n(92952),G=n(62394);let H=[{id:"anime-continue-watching",type:"anime-continue-watching",schemaVersion:1},{id:"anime-library",type:"anime-library",schemaVersion:1,options:{statuses:["CURRENT","PAUSED","PLANNING","COMPLETED","DROPPED"],layout:"grid"}}],W=[{label:"Name",type:"text",name:"name"},{label:"Sorting",type:"select",name:"sorting",options:[{label:"Popular",value:"POPULARITY_DESC"},{label:"Trending",value:"TRENDING_DESC"},{label:"Romaji Title (A-Z)",value:"TITLE_ROMAJI_ASC"},{label:"Romaji Title (Z-A)",value:"TITLE_ROMAJI_DESC"},{label:"English title (A-Z)",value:"TITLE_ENGLISH_ASC"},{label:"English title (Z-A)",value:"TITLE_ENGLISH_DESC"},{label:"Score (0-10)",value:"SCORE"},{label:"Score (10-0)",value:"SCORE_DESC"}]},{label:"Status",type:"multi-select",name:"status",options:[{label:"Releasing",value:"RELEASING"},{label:"Finished",value:"FINISHED"},{label:"Not yet released",value:"NOT_YET_RELEASED"}]},{label:"Format",type:"select",name:"format",options:[{label:"TV",value:"TV"},{label:"Movie",value:"MOVIE"},{label:"OVA",value:"OVA"},{label:"ONA",value:"ONA"},{label:"Special",value:"SPECIAL"}]},{label:"Genres",type:"multi-select",options:G.mY.map(e=>({value:e,label:e})),name:"genres"},{label:"Season",type:"select",name:"season",options:[{value:"WINTER",label:"Winter"},{value:"SPRING",label:"Spring"},{value:"SUMMER",label:"Summer"},{value:"FALL",label:"Fall"}]},{label:"Year",type:"number",name:"year",min:0,max:2100},{label:"Country of Origin",type:"select",name:"countryOfOrigin",options:G.Mm}],K={"centered-title":{name:"Centered title",kind:["row"],schemaVersion:1,description:"Display a centered title text.",options:[{label:"Text",type:"text",name:"text"}]},"anime-continue-watching":{name:"Continue Watching",kind:["row","header"],schemaVersion:1,description:"Display a list of episodes you are currently watching."},"anime-continue-watching-header":{name:"Continue Watching Header",kind:["header"],schemaVersion:1,description:"Display a header with a carousel of anime you are currently watching."},"anime-library":{name:"Anime Library",kind:["row"],schemaVersion:2,description:"Display anime you have in your library by status.",options:[{label:"Statuses",name:"statuses",type:"multi-select",options:[{value:"CURRENT",label:"Currently Watching"},{value:"PAUSED",label:"Paused"},{value:"PLANNING",label:"Planning"},{value:"COMPLETED",label:"Completed"},{value:"DROPPED",label:"Dropped"}]},{label:"Layout",name:"layout",type:"select",options:[{label:"Grid",value:"grid"},{label:"Carousel",value:"carousel"}]}]},"local-anime-library":{name:"Local Anime Library",kind:["row"],schemaVersion:2,description:"Display a complete grid of anime you have in your local library.",options:[{label:"Layout",name:"layout",type:"select",options:[{label:"Grid",value:"grid"},{label:"Carousel",value:"carousel"}]}]},"library-upcoming-episodes":{name:"Upcoming Library Episodes",kind:["row"],schemaVersion:1,description:"Display a carousel of upcoming episodes from anime you have in your library."},"aired-recently":{name:"Aired Recently (Global)",kind:["row"],schemaVersion:1,description:"Display a carousel of anime episodes that aired recently."},"anime-schedule-calendar":{name:"Anime Schedule Calendar",kind:["row"],schemaVersion:2,description:"Display a calendar of anime episodes based on their airing schedule.",options:[{label:"Type",name:"type",type:"select",options:[{label:"My lists",value:"my-lists"},{label:"Global",value:"global"}]}]},"local-anime-library-stats":{name:"Local Anime Library Stats",kind:["row"],schemaVersion:1,description:"Display the stats for your local anime library."},"discover-header":{name:"Discover Header",kind:["header"],schemaVersion:1,description:"Display a header with a carousel of anime that are trending."},"anime-carousel":{name:"Anime Carousel",kind:["row"],schemaVersion:3,options:W,description:"Display a carousel of anime based on the selected options."},"manga-carousel":{name:"Manga Carousel",kind:["row"],schemaVersion:1,description:"Display a carousel of manga based on the selected options.",options:W.map(e=>"format"===e.name?{...e,options:[{label:"Manga",value:"MANGA"},{label:"One Shot",value:"ONE_SHOT"}]}:e)},"manga-library":{name:"Manga Library",kind:["row","header"],schemaVersion:2,description:"Display a list of manga you have in your library by status.",options:[{label:"Statuses",name:"statuses",type:"multi-select",options:[{value:"CURRENT",label:"Currently Reading"},{value:"PAUSED",label:"Paused"}]},{label:"Layout",name:"layout",type:"select",options:[{label:"Grid",value:"grid"},{label:"Carousel",value:"carousel"}]}]}},X=Object.keys(K);var Y=n(74889),$=n(98802),Z=n(7013),q=n(55014),Q=n(96826),J=n(26603),ee=n(74907),el=n(24038),en=n(91360),ei=n(2091),ea=n(76136),et=n(52885),er=n(30033),es=n(53712),eo=n(1925),ec=n(98317),ed=n(76445),eu=n(63981),em=n(46278),eh=n(38628),eg=n(43994),ep=n(41452);let ex=(0,x.eU)(!1),eb={"anime-continue-watching":eg.Ubi,"anime-continue-watching-header":eg.Ubi,"anime-library":ep.wHW,"local-anime-library":eh.yPD,"library-upcoming-episodes":eg.wr3,"aired-recently":eg.CZu,"anime-schedule-calendar":eg.IdP,"local-anime-library-stats":v.veA,"discover-header":eg.Gd$,"anime-carousel":M.XL_,"manga-carousel":M.XL_,"manga-continue-reading":eg.Z5q,"manga-library":eg.Z5q,"centered-title":eg.WYS};function ey(e){var l,n,a,t;let{emptyLibrary:r,isNakamaLibrary:s}=e,c=(0,Q.v1)(),[d,u]=(0,b.fp)(ex),[m,h]=y.useState(null),{data:g,isLoading:x}=(0,o.bN)(),{mutate:j,isPending:N}=(0,o.sA)(),[S,C]=y.useState(g||H),w=X.filter(e=>"anime-carousel"===e||"manga-carousel"===e||"centered-title"===e||!S.some(l=>l.type===e)),_=y.useRef(null);y.useEffect(()=>{let e=g||H;return C(e),_.current&&(clearTimeout(_.current),_.current=null),_.current=setTimeout(()=>{let l=P(S);l.length!==e.length&&(C(l),j({items:l},{onSuccess:()=>{console.log("Home items updated")}}))},500),()=>{_.current&&(clearTimeout(_.current),_.current=null)}},[g]);let k=y.useCallback(e=>{let{active:l,over:n}=e;if(l.id!==(null==n?void 0:n.id)){let e=S.findIndex(e=>e.id===l.id),i=S.findIndex(e=>e.id===(null==n?void 0:n.id)),a=P((0,ed.be)(S,e,i));C(a),j({items:a},{onSuccess:()=>{}})}},[S,j]);function P(e){let l=e.filter(e=>!!K[e.type]);return l.map(e=>({...e,schemaVersion:K[e.type].schemaVersion}))}let A=e=>{let l=P([...S,{id:(0,J.gZ)(),type:e,schemaVersion:K[e].schemaVersion}]);C(l),j({items:l},{onSuccess:()=>{f.oR.success("Home item added")}})},L=e=>{let l=P(S.filter(l=>l.id!==e));C(l),j({items:l},{onSuccess:()=>{f.oR.success("Home item removed")}})},E=(null==c||null==(l=c.torrentstreamSettings)?void 0:l.includeInLibrary)||(null==c||null==(n=c.debridSettings)?void 0:n.includeDebridStreamInLibrary)||(null==c||null==(t=c.settings)||null==(a=t.library)?void 0:a.includeOnlineStreamingInLibrary)?"stream":"local",{mutateAsync:I,isPending:T}=(0,Z.Ok)(),{mutateAsync:M,isPending:D}=(0,q.c3)(),{mutateAsync:O,isPending:F}=(0,$.wO)(),R=(0,em.jE)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.a,{open:d,onOpenChange:u,title:(0,i.jsxs)("div",{className:"flex items-center gap-2 w-full justify-center",children:[(0,i.jsx)(eh.M14,{className:"size-5"}),"Home ",(0,i.jsx)(ee.q,{className:"ml-0 mt-0.5"})]}),contentClass:"max-w-5xl bg-gray-950 bg-opacity-80 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none sm:rounded-3xl",overlayClass:"bg-gray-950/70 backdrop-blur-sm",children:[(0,i.jsx)(el.Z,{variant:"classic",spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01,className:"opacity-50 !mt-0"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,i.jsx)(eg.Ubi,{className:"size-5"}),(0,i.jsx)("h4",{className:"text-lg font-semibold",children:"Anime Library"})]}),(0,i.jsx)(et.z,{value:E,onValueChange:e=>{(async()=>{var l;await Promise.all([I({...null==c?void 0:c.settings,library:{...null==c||null==(l=c.settings)?void 0:l.library,includeOnlineStreamingInLibrary:"stream"===e}}),M({settings:{...null==c?void 0:c.torrentstreamSettings,includeInLibrary:"stream"===e}}),O({settings:{...null==c?void 0:c.debridSettings,includeDebridStreamInLibrary:"stream"===e}})]),await R.invalidateQueries({queryKey:[Y.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await R.invalidateQueries({queryKey:[Y.S.ANIME_ENTRIES.GetMissingEpisodes.key]})})()},disabled:T||D||F,options:[{label:"Local anime only",value:"local"},{label:"Local anime + Streaming",value:"stream"}],itemClass:(0,en.cn)("border-transparent absolute top-2 right-2 bg-transparent dark:bg-transparent dark:data-[state=unchecked]:bg-transparent","data-[state=unchecked]:bg-transparent data-[state=unchecked]:hover:bg-transparent dark:data-[state=unchecked]:hover:bg-transparent","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent"),stackClass:"space-y-0 flex flex-row gap-2",itemIndicatorClass:"hidden",itemLabelClass:"font-normal tracking-wide line-clamp-1 truncate flex flex-col items-center data-[state=checked]:text-[--gray] cursor-pointer",itemContainerClass:(0,en.cn)("items-start cursor-pointer transition border-transparent rounded-[--radius] py-1.5 px-3 w-full","hover:bg-[--subtle] dark:bg-gray-900","data-[state=checked]:bg-white dark:data-[state=unchecked]:hover:bg-gray-800 dark:data-[state=checked]:bg-gray-900","focus:ring-2 ring-transparent dark:ring-transparent outline-none ring-offset-1 ring-offset-[--background] focus-within:ring-2 transition","border border-transparent data-[state=checked]:border-gray-500 data-[state=checked]:ring-offset-0")}),(0,i.jsx)("p",{className:"text-sm text-[--muted] pt-4",children:"local"===E?"Only anime in your local library will be displayed":"All anime in your currently watching list will be included in the library"})]}),(0,i.jsxs)("div",{className:(0,en.cn)("hidden lg:block"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,i.jsx)(eg.hXO,{className:"size-5"}),(0,i.jsx)("h4",{className:"text-lg font-semibold",children:"Home Layout"})]}),x?(0,i.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,i.jsx)(ei.kt,{})}):(0,i.jsx)(eo.Mp,{modifiers:[ec.FN],onDragEnd:k,children:(0,i.jsx)(ed.gB,{items:S.map(e=>e.id),strategy:ed._G,children:(0,i.jsx)("div",{className:"space-y-2 bg-gray-900/30 rounded-xl p-4 border border-gray-800",children:0===S.length?(0,i.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No items added yet. Add some items below to customize your home screen."}):S.map((e,l)=>(0,i.jsx)(ev,{item:e,index:l,onRemove:L,onEditOptions:h,isUpdating:N},e.id))})})})]}),(0,i.jsxs)("div",{className:(0,en.cn)("hidden lg:block"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,i.jsx)(v.Ca6,{className:"size-5"}),(0,i.jsx)("h4",{className:"text-lg font-semibold",children:"Available Items"})]}),0===w.length?(0,i.jsx)("div",{className:"text-center py-6 text-gray-400",children:"All available items have been added to your home screen."}):(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:w.toSorted((e,l)=>K[e].name.localeCompare(K[l].name)).map(e=>(0,i.jsx)(eC,{id:e,type:e,onAdd:A,isUpdating:N},e))})]})]})]}),m&&(0,i.jsx)(e_,{id:m,item:S.find(e=>e.id===m),isOpen:!!m,onClose:()=>h(null),onSave:(e,l)=>{let n=P(S.map(n=>n.id===e?{...n,options:l}:n));C(n),j({items:n},{onSuccess:()=>{f.oR.success("Home layout updated"),h(null)}})},isUpdating:N})]})}function ev(e){var l,n,t,r,s,o,c,d,u;let m,h,p,x,b,y,f,j,N,S,C,w,_,k,P,A,L=(0,a.c)(50),{item:E,onRemove:I,onEditOptions:T,isUpdating:M,index:D}=e;L[0]!==E.id?(m={id:E.id},L[0]=E.id,L[1]=m):m=L[1];let{attributes:O,listeners:F,setNodeRef:R,transform:z,transition:V}=(0,ed.gl)(m);L[2]!==z?(h=eu.Ks.Transform.toString(z?{...z,scaleY:1}:null),L[2]=z,L[3]=h):h=L[3],L[4]!==h||L[5]!==V?(p={transform:h,transition:V},L[4]=h,L[5]=V,L[6]=p):p=L[6];let U=p,B=K[E.type],G=eb[E.type]||eh.M14;if(!B)return null;let H=1===B.kind.length&&"header"===B.kind[0]&&0!==D&&"opacity-50";L[7]!==H?(x=(0,en.cn)("flex items-center gap-3 p-3 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-gray-600 transition-colors cursor-move",H),L[7]=H,L[8]=x):x=L[8],L[9]!==G?(b=(0,i.jsx)("div",{className:"p-2 bg-gray-700/50 rounded-lg",children:(0,i.jsx)(G,{className:"size-5 text-gray-300"})}),L[9]=G,L[10]=b):b=L[10];let W=!!(null==(l=E.options)?void 0:l.name)&&': "'.concat(E.options.name,'"'),X="centered-title"===E.type&&(null==(n=E.options)?void 0:n.text)&&': "'.concat(E.options.text,'"');return L[11]!==B.name||L[12]!==W||L[13]!==X?(y=(0,i.jsxs)("div",{className:"font-medium text-white",children:[B.name,W,X]}),L[11]=B.name,L[12]=W,L[13]=X,L[14]=y):y=L[14],L[15]!==B.description?(f=(0,i.jsx)("p",{className:"text-xs text-[--muted] line-clamp-1",children:B.description}),L[15]=B.description,L[16]=f):f=L[16],L[17]!==B.kind?(j=B.kind.map(eS).join(", "),L[17]=B.kind,L[18]=j):j=L[18],L[19]!==j?(N=(0,i.jsx)("div",{className:"text-sm text-gray-400",children:j}),L[19]=j,L[20]=N):N=L[20],L[21]!==f||L[22]!==N||L[23]!==y?(S=(0,i.jsxs)("div",{className:"flex-1",children:[y,f,N]}),L[21]=f,L[22]=N,L[23]=y,L[24]=S):S=L[24],L[25]!==B.options||L[26]!==M||L[27]!==E.id||L[28]!==(null==(r=E.options)||null==(t=r.name)?void 0:t.length)||L[29]!==T?(C=B.options&&(0,i.jsx)(g.K0,{intent:"gray-subtle",size:"sm",onClick:()=>T(E.id),disabled:M,className:(0,en.cn)("hover:bg-blue-500/20 hover:text-blue-400",(null==(s=B.options)?void 0:s.find(eN))&&!(null==(c=E.options)||null==(o=c.name)?void 0:o.length)&&"bg-fuchsia-600 animate-bounce"),icon:(0,i.jsx)(v.nMM,{className:"size-4"}),onPointerDown:ej}),L[25]=B.options,L[26]=M,L[27]=E.id,L[28]=null==(u=E.options)||null==(d=u.name)?void 0:d.length,L[29]=T,L[30]=C):C=L[30],L[31]!==E.id||L[32]!==I?(w=()=>I(E.id),L[31]=E.id,L[32]=I,L[33]=w):w=L[33],L[34]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)(v.id1,{className:"size-4"}),L[34]=_):_=L[34],L[35]!==M||L[36]!==w?(k=(0,i.jsx)(g.K0,{intent:"gray-subtle",size:"sm",onClick:w,disabled:M,className:"hover:bg-red-500/20 hover:text-red-400",icon:_,onPointerDown:ef}),L[35]=M,L[36]=w,L[37]=k):k=L[37],L[38]!==C||L[39]!==k?(P=(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[C,k]}),L[38]=C,L[39]=k,L[40]=P):P=L[40],L[41]!==O||L[42]!==F||L[43]!==R||L[44]!==U||L[45]!==S||L[46]!==P||L[47]!==x||L[48]!==b?(A=(0,i.jsxs)("div",{ref:R,style:U,...O,...F,className:x,children:[b,S,P]}),L[41]=O,L[42]=F,L[43]=R,L[44]=U,L[45]=S,L[46]=P,L[47]=x,L[48]=b,L[49]=A):A=L[49],A}function ef(e){return e.stopPropagation()}function ej(e){return e.stopPropagation()}function eN(e){return"name"===e.name}function eS(e){return e.charAt(0).toUpperCase()+e.slice(1)}function eC(e){let l,n,t,r,s,o,c,d,u,m,h=(0,a.c)(25),{type:p,onAdd:x,isUpdating:b}=e,y=K[p],f=eb[p]||eh.M14;return y?(h[0]!==f?(l=(0,i.jsx)("div",{className:"p-2 bg-gray-800/50 rounded-lg group-hover:bg-gray-700/50 transition-colors",children:(0,i.jsx)(f,{className:"size-5 text-gray-400 group-hover:text-gray-300 transition-colors"})}),h[0]=f,h[1]=l):l=h[1],h[2]!==y.name?(n=(0,i.jsx)("div",{className:"font-medium text-white",children:y.name}),h[2]=y.name,h[3]=n):n=h[3],h[4]!==y.description?(t=(0,i.jsx)("p",{className:"text-xs text-[--muted]",children:y.description}),h[4]=y.description,h[5]=t):t=h[5],h[6]!==y.kind?(r=y.kind.map(ew).join(", "),h[6]=y.kind,h[7]=r):r=h[7],h[8]!==r?(s=(0,i.jsx)("div",{className:"text-sm text-gray-400",children:r}),h[8]=r,h[9]=s):s=h[9],h[10]!==n||h[11]!==t||h[12]!==s?(o=(0,i.jsxs)("div",{className:"flex-1",children:[n,t,s]}),h[10]=n,h[11]=t,h[12]=s,h[13]=o):o=h[13],h[14]!==x||h[15]!==p?(c=()=>x(p),h[14]=x,h[15]=p,h[16]=c):c=h[16],h[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)(v.Ca6,{}),h[17]=d):d=h[17],h[18]!==b||h[19]!==c?(u=(0,i.jsx)(g.$n,{intent:"primary-subtle",size:"sm",onClick:c,disabled:b,leftIcon:d,children:"Add"}),h[18]=b,h[19]=c,h[20]=u):u=h[20],h[21]!==l||h[22]!==o||h[23]!==u?(m=(0,i.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-900/30 rounded-xl border border-gray-800 hover:border-gray-700 transition-colors group",children:[l,o,u]}),h[21]=l,h[22]=o,h[23]=u,h[24]=m):m=h[24],m):null}function ew(e){return e.charAt(0).toUpperCase()+e.slice(1)}function e_(e){let l,n,t,r,s,o,c,d,u,m,h,x=(0,a.c)(26),{id:b,item:f,isOpen:j,onClose:N,onSave:S,isUpdating:C}=e,w=K[f.type];x[0]!==f.options?(l=f.options||{},x[0]=f.options,x[1]=l):l=x[1];let[_,k]=y.useState(l);if(y.useEffect(()=>{if(!w||w.schemaVersion!==f.schemaVersion)return void k({});k(f.options||{})},[f.options,w]),!(null==w?void 0:w.options))return null;x[2]===Symbol.for("react.memo_cache_sentinel")?(n=(e,l)=>{k(n=>({...n,[e]:l}))},x[2]=n):n=x[2];let P=n;x[3]!==_||x[4]!==b||x[5]!==S?(t=()=>{S(b,_)},x[3]=_,x[4]=b,x[5]=S,x[6]=t):t=x[6];let A=t;x[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(v.nMM,{className:"size-5"}),x[7]=r):r=x[7],x[8]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)("div",{className:"text-sm text-gray-400",children:"Customize the settings for this home item."}),x[8]=s):s=x[8],x[9]!==_?(o=e=>(0,i.jsx)(ek,{option:e,value:_[e.name],onChange:l=>P(e.name,l)},e.name),x[9]=_,x[10]=o):o=x[10];let L=(w.options||[]).map(o);return x[11]!==L?(c=(0,i.jsx)("div",{className:"space-y-4",children:L}),x[11]=L,x[12]=c):c=x[12],x[13]!==C||x[14]!==N?(d=(0,i.jsx)(g.$n,{intent:"gray-subtle",onClick:N,disabled:C,children:"Cancel"}),x[13]=C,x[14]=N,x[15]=d):d=x[15],x[16]!==A||x[17]!==C?(u=(0,i.jsx)(g.$n,{intent:"primary",onClick:A,loading:C,children:"Save"}),x[16]=A,x[17]=C,x[18]=u):u=x[18],x[19]!==d||x[20]!==u?(m=(0,i.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800",children:[d,u]}),x[19]=d,x[20]=u,x[21]=m):m=x[21],x[22]!==c||x[23]!==m||x[24]!==s?(h=(0,i.jsxs)("div",{className:"space-y-6",children:[s,c,m]}),x[22]=c,x[23]=m,x[24]=s,x[25]=h):h=x[25],(0,i.jsx)(p.a,{open:j,onOpenChange:N,title:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[r,"Configure ",w.name]}),contentClass:"max-w-2xl bg-gray-950 bg-opacity-60 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none sm:rounded-3xl",overlayClass:"bg-gray-950/70 backdrop-blur-sm",children:h})}function ek(e){let l,n=(0,a.c)(57),{option:t,value:r,onChange:s}=e,{label:o,type:c,options:d,min:u,max:m}=t;n[0]!==s||n[1]!==r?(l=e=>{let l=Array.isArray(r)?r:[];s(l.includes(e)?l.filter(l=>l!==e):[...l,e])},n[0]=s,n[1]=r,n[2]=l):l=n[2];let h=l;switch(c){case"text":{let e,l,a,t;n[3]!==o?(e=(0,i.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[3]=o,n[4]=e):e=n[4];let c=r||"";n[5]!==s?(l=e=>s(e.target.value),n[5]=s,n[6]=l):l=n[6];let d="Enter ".concat(o.toLowerCase());return n[7]!==c||n[8]!==l||n[9]!==d?(a=(0,i.jsx)(es.k,{value:c,onChange:l,placeholder:d}),n[7]=c,n[8]=l,n[9]=d,n[10]=a):a=n[10],n[11]!==e||n[12]!==a?(t=(0,i.jsxs)("div",{className:"space-y-2",children:[e,a]}),n[11]=e,n[12]=a,n[13]=t):t=n[13],t}case"number":{let e,l,a,t,c;n[14]!==o?(e=(0,i.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[14]=o,n[15]=e):e=n[15];let d=r||u||0;return n[16]!==s?(l=e=>s(e),n[16]=s,n[17]=l):l=n[17],n[18]===Symbol.for("react.memo_cache_sentinel")?(a={useGrouping:!1},n[18]=a):a=n[18],n[19]!==m||n[20]!==u||n[21]!==d||n[22]!==l?(t=(0,i.jsx)(ea.Q,{value:d,onValueChange:l,min:u,max:m,formatOptions:a}),n[19]=m,n[20]=u,n[21]=d,n[22]=l,n[23]=t):t=n[23],n[24]!==e||n[25]!==t?(c=(0,i.jsxs)("div",{className:"space-y-2",children:[e,t]}),n[24]=e,n[25]=t,n[26]=c):c=n[26],c}case"select":{let e,l,a,t;n[27]!==o?(e=(0,i.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[27]=o,n[28]=e):e=n[28];let c=r||"",u="Select ".concat(o.toLowerCase());return n[29]!==d?(l=[...d],n[29]=d,n[30]=l):l=n[30],n[31]!==s||n[32]!==c||n[33]!==u||n[34]!==l?(a=(0,i.jsx)(er.l,{value:c,onValueChange:s,placeholder:u,options:l}),n[31]=s,n[32]=c,n[33]=u,n[34]=l,n[35]=a):a=n[35],n[36]!==e||n[37]!==a?(t=(0,i.jsxs)("div",{className:"space-y-2",children:[e,a]}),n[36]=e,n[37]=a,n[38]=t):t=n[38],t}case"multi-select":{let e,l,a,t,s;n[39]!==r?(e=Array.isArray(r)?r:[],n[39]=r,n[40]=e):e=n[40];let c=e;if(n[41]!==o?(l=(0,i.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[41]=o,n[42]=l):l=n[42],n[43]!==h||n[44]!==d||n[45]!==c){let e;n[47]!==h||n[48]!==c?(e=e=>(0,i.jsx)("button",{type:"button",onClick:()=>h(e.value),className:(0,en.cn)("p-2 text-sm rounded-md border transition-colors text-left",c.includes(e.value)?"bg-brand-500/20 border-brand-500 text-brand-300":"bg-gray-800/50 border-gray-700 text-gray-300 hover:border-gray-600"),children:e.label},e.value),n[47]=h,n[48]=c,n[49]=e):e=n[49],a=d.map(e),n[43]=h,n[44]=d,n[45]=c,n[46]=a}else a=n[46];return n[50]!==a?(t=(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-48 overflow-y-auto p-3 bg-gray-900/30 rounded-lg border border-gray-800",children:a}),n[50]=a,n[51]=t):t=n[51],n[52]!==l||n[53]!==t?(s=(0,i.jsxs)("div",{className:"space-y-2",children:[l,t]}),n[52]=l,n[53]=t,n[54]=s):s=n[54],s}default:{let e;return n[55]!==c?(e=(0,i.jsxs)("div",{className:"text-sm text-gray-400",children:["Unsupported field type: ",c]}),n[55]=c,n[56]=e):e=n[56],e}}}var eP=n(17946),eA=n(97400),eL=n(21842);let eE=(0,eL.tG)("sea-v3-home-settings-toolbar-button-discovered",!1);function eI(e){let l=(0,a.c)(3),{type:n}=e;(0,b.fp)(eE);let[,t]=(0,b.fp)(ex);if("toolbar"===n){let e,n;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(eg.ZB5,{className:"text-2xl"}),l[0]=e):e=l[0],l[1]!==t?(n=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eA.m_,{trigger:(0,i.jsx)(g.K0,{"data-library-toolbar-switch-view-button":!0,intent:"white-subtle",icon:e,onClick:()=>{t(!0)}}),children:"Home Settings"})}),l[1]=t,l[2]=n):n=l[2],n}}var eT=n(41611),eM=n(81281),eD=n(29694),eO=n(64847),eF=n(5249),eR=n(17934),ez=n(91332),eV=n(73594),eU=n(10653);function eB(e){var l,n,t,r,s,o,c,d,u,m;let h,p,x,y,f,N,S,C,w,_,k,P=(0,a.c)(49),{unmatchedLocalFiles:L,unknownGroups:E,hasEntries:I,isStreamingOnly:T,isNakamaLibrary:O,className:F}=e;(0,ez.Ky)();let R=(0,b.Xr)(j),z=(0,eM.zh)(),G=(0,Q.v1)(),H=(0,b.Xr)(V.ho),W=(0,b.Xr)(B.r),K=(0,b.Xr)(D),X=(0,b.Xr)(U.$),Y=(0,b.Xr)(eT.qE),{setModalOpen:$}=(0,eD.e)(),{data:Z,isLoading:q}=(0,eP.dA)(!1),[J,ee]=(0,b.fp)(l4),{mutate:el}=(0,A.E)(),ei=!!(null==G||null==(n=G.settings)||null==(l=n.library)?void 0:l.libraryPath);return P[0]!==F?(h=(0,en.cn)("flex flex-wrap w-full justify-end gap-1 p-4 relative z-[10]",F),P[0]=F,P[1]=h):h=P[1],P[2]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)("div",{className:"flex flex-1 pointer-events-none","data-home-toolbar-spacer":!0}),P[2]=p):p=P[2],P[3]!==O||P[4]!==(null==z||null==(t=z.hostConnectionStatus)?void 0:t.username)?(x=O&&(0,i.jsxs)(eA.m_,{trigger:(0,i.jsx)("div",{className:"flex items-center px-2 h-10",children:(0,i.jsx)(ep.u67,{className:"size-8"})}),children:[null==z||null==(o=z.hostConnectionStatus)?void 0:o.username,"'s Library"]}),P[3]=O,P[4]=null==z||null==(c=z.hostConnectionStatus)?void 0:c.username,P[5]=x):x=P[5],P[6]!==(null==Z?void 0:Z.extensions)||P[7]!==q?(y=!q&&!(null==Z||null==(d=Z.extensions)?void 0:d.some(eH))&&(0,i.jsx)(eO.Q,{extensions:null==Z?void 0:Z.extensions,children:(0,i.jsx)("span",{children:(0,i.jsx)(eA.m_,{trigger:(0,i.jsx)(g.$n,{"data-home-toolbar-missing-extensions-button":!0,className:"animate-bounce",intent:"warning",leftIcon:(0,i.jsx)(eV.t5W,{className:"text-2xl"}),children:"Add missing extensions"}),children:"No torrent providers installed."})})}),P[6]=null==Z?void 0:Z.extensions,P[7]=q,P[8]=y):y=P[8],P[9]!==I||P[10]!==ei||P[11]!==J||P[12]!==O||P[13]!==T||P[14]!==ee||P[15]!==Y||P[16]!==$||P[17]!==L.length?(f=I&&(0,i.jsxs)(i.Fragment,{children:[!T&&!O&&(0,i.jsx)(eA.m_,{trigger:(0,i.jsx)(g.K0,{"data-home-toolbar-switch-view-button":!0,intent:"base"===J?"white-subtle":"white",icon:"base"===J?(0,i.jsx)(eh.yPD,{className:"text-2xl"}):(0,i.jsx)(eh.oKG,{className:"text-2xl"}),onClick:()=>ee(eG)}),children:"base"===J?"Local Anime Library":"Home"}),!T&&!O&&ei&&(0,i.jsx)(eA.m_,{trigger:(0,i.jsx)(g.K0,{"data-home-toolbar-switch-view-button":!0,intent:"white-subtle",icon:(0,i.jsx)(eg.kWS,{className:"text-2xl"}),onClick:()=>{Y(!0)},className:(0,en.cn)(L.length>0&&"animate-pulse")}),children:"Library Explorer"}),(0,i.jsx)(eA.m_,{trigger:(0,i.jsx)(g.K0,{"data-home-toolbar-playlists-button":!0,intent:"white-subtle",icon:(0,i.jsx)(ep.wHW,{className:"text-2xl"}),onClick:()=>$(!0)}),children:"Playlists"})]}),P[9]=I,P[10]=ei,P[11]=J,P[12]=O,P[13]=T,P[14]=ee,P[15]=Y,P[16]=$,P[17]=L.length,P[18]=f):f=P[18],P[19]!==I||P[20]!==ei||P[21]!==O||P[22]!==H?(N=!O&&ei&&(0,i.jsx)(eA.m_,{trigger:(0,i.jsx)("div",{children:(0,i.jsx)(g.$n,{"data-home-toolbar-scan-button":!0,intent:I?"white-subtle":"primary",leftIcon:I?(0,i.jsx)(eg.Z05,{className:"text-xl"}):(0,i.jsx)(eg.OjV,{className:"text-xl"}),onClick:()=>H(!0),hideTextOnSmallScreen:!0,children:I?"Refresh":"Scan"})}),children:I?"Refresh Anime Library":"Scan Anime Library"}),P[19]=I,P[20]=ei,P[21]=O,P[22]=H,P[23]=N):N=P[23],P[24]!==W||P[25]!==L.length?(S=L.length>0&&(0,i.jsxs)(g.$n,{"data-home-toolbar-unmatched-button":!0,intent:"alert",leftIcon:(0,i.jsx)(eh.Q9o,{}),className:"animate-bounce",onClick:()=>W(!0),children:["Resolve unmatched (",L.length,")"]}),P[24]=W,P[25]=L.length,P[26]=S):S=P[26],P[27]!==X||P[28]!==E.length?(C=E.length>0&&(0,i.jsxs)(g.$n,{"data-home-toolbar-unknown-button":!0,intent:"warning",leftIcon:(0,i.jsx)(eh.Q9o,{}),className:"animate-bounce",onClick:()=>X(!0),children:["Resolve hidden media (",E.length,")"]}),P[27]=X,P[28]=E.length,P[29]=C):C=P[29],P[30]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)(eI,{type:"toolbar"}),P[30]=w):w=P[30],P[31]!==I||P[32]!==ei||P[33]!==O||P[34]!==T||P[35]!==el||P[36]!==R||P[37]!==K||P[38]!==(null==G||null==(s=G.settings)||null==(r=s.library)?void 0:r.libraryPath)?(_=!T&&!O&&ei&&(0,i.jsxs)(eR.rI,{trigger:(0,i.jsx)(g.K0,{"data-home-toolbar-dropdown-menu-trigger":!0,icon:(0,i.jsx)(v.voe,{}),intent:"gray-basic"}),children:[(0,i.jsxs)(eR._2,{"data-home-toolbar-open-directory-button":!0,disabled:!ei,className:(0,en.cn)("cursor-pointer",{"!text-[--muted]":!ei}),onClick:()=>{var e,l,n;el({path:null!=(n=null==G||null==(l=G.settings)||null==(e=l.library)?void 0:e.libraryPath)?n:""})},children:[(0,i.jsx)(v.gNt,{}),(0,i.jsx)("span",{children:"Open directory"})]}),(0,i.jsxs)(eR._2,{"data-home-toolbar-bulk-actions-button":!0,onClick:()=>R(!0),disabled:!I,className:(0,en.cn)({"!text-[--muted]":!I}),children:[(0,i.jsx)(v.S6K,{}),(0,i.jsx)("span",{children:"Bulk actions"})]}),(0,i.jsxs)(eR._2,{"data-home-toolbar-ignored-files-button":!0,onClick:()=>K(!0),className:(0,en.cn)({"!text-[--muted]":!I}),children:[(0,i.jsx)(M.dxg,{}),(0,i.jsx)("span",{children:"Ignored files"})]}),(0,i.jsx)(eF.i,{href:"/scan-summaries",children:(0,i.jsxs)(eR._2,{"data-home-toolbar-scan-summaries-button":!0,children:[(0,i.jsx)(M.rlW,{}),(0,i.jsx)("span",{children:"Scan summaries"})]})}),(0,i.jsx)(eU.QV,{})]}),P[31]=I,P[32]=ei,P[33]=O,P[34]=T,P[35]=el,P[36]=R,P[37]=K,P[38]=null==G||null==(m=G.settings)||null==(u=m.library)?void 0:u.libraryPath,P[39]=_):_=P[39],P[40]!==h||P[41]!==x||P[42]!==y||P[43]!==f||P[44]!==N||P[45]!==S||P[46]!==C||P[47]!==_?(k=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:h,"data-home-toolbar-container":!0,children:[p,x,y,f,N,S,C,w,_]})}),P[40]=h,P[41]=x,P[42]=y,P[43]=f,P[44]=N,P[45]=S,P[46]=C,P[47]=_,P[48]=k):k=P[48],k}function eG(e){return"detailed"===e?"base":"detailed"}function eH(e){return"anime-torrent-provider"===e.type}var eW=n(90984),eK=n(83394),eX=n(14370),eY=n(85210),e$=n(47555);let eZ={...eY.Bq,sorting:"TITLE"},eq=(0,e$.E)(eZ),eQ=(0,eL.tG)("sea-detailed-library-selected-list","-"),eJ=(0,e$.E)("");var e0=n(36945),e1=n(61585),e2=n(37191),e3=n(45754),e4=n(6708),e5=n(60695),e6=n(23391),e7=n(80743),e8=n(78711),e9=n(78453),le=n(3692),ll=n(75780),ln=n(40568);function li(e){var l,n,t;let s,o,c,d,u,m,h,p,x,v=(0,a.c)(38),{isLoading:f,hasEntries:j,streamingMediaIds:N,isNakamaLibrary:S,isHomeItem:C,type:w}=e,_=void 0===w?"grid":w;(0,ez.Ky)();let k=(0,b.Xr)(l4),P=(0,eM.zh)(),{stats:A,libraryCollectionList:L,libraryGenres:E,libraryEntries:I}=function(){var e,l,n,i,a,t,s,o,c,d,u,m;let{enabled:h=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!0},g=(0,Q.v1)(),{animeLibraryCollectionDefaultSorting:p}=(0,ez.Ky)(),{data:x}=(0,eK.H_)(),{data:v,isLoading:f}=(0,r.lD)({enabled:h}),[j,N]=(0,b.fp)(eq),S=(0,eX.d)(j,500),C=(0,b.md)(eJ);y.useLayoutEffect(()=>{let e={...j};e.sorting=p,N(e)},[v,p]);let w=y.useMemo(()=>{if(!v||!v.lists)return[];let e=v.lists.map(e=>{var l,n;if(!e)return e;let i=(0,eY.TI)(e.entries,j,null==g||null==(n=g.settings)||null==(l=n.anilist)?void 0:l.enableAdultContent,v.continueWatchingList,x);return{type:e.type,status:e.status,entries:i}});return[e.find(e=>"CURRENT"===e.type),e.find(e=>"PAUSED"===e.type),e.find(e=>"PLANNING"===e.type),e.find(e=>"COMPLETED"===e.type),e.find(e=>"DROPPED"===e.type)].filter(Boolean)},[v,S,null==g||null==(l=g.settings)||null==(e=l.anilist)?void 0:e.enableAdultContent,x]),_=y.useMemo(()=>w.map(e=>{if(!e)return e;let l=(0,eY.Qw)(e.entries,C);return{type:e.type,status:e.status,entries:l}}).filter(Boolean),[w,C]),k=y.useMemo(()=>{var e,l,n,i;if(!v||!v.lists)return[];let a=null!=(i=null==(e=v.lists)?void 0:e.flatMap(e=>e.entries).filter(Boolean))?i:[];return(0,eY.TI)(a,j,null==g||null==(n=g.settings)||null==(l=n.anilist)?void 0:l.enableAdultContent,v.continueWatchingList,x)},[v,S,null==g||null==(i=g.settings)||null==(n=i.anilist)?void 0:n.enableAdultContent,x]),P=y.useMemo(()=>(0,eY.Qw)(k,C),[k,C]),A=y.useMemo(()=>{var e,l,n,i;return(null==v?void 0:v.continueWatchingList)?!(null==g||null==(l=g.settings)||null==(e=l.anilist)?void 0:e.enableAdultContent)||(null==g||null==(i=g.settings)||null==(n=i.anilist)?void 0:n.blurAdultContent)?v.continueWatchingList.filter(e=>{var l;return(null==(l=e.baseAnime)?void 0:l.isAdult)===!1}):v.continueWatchingList:[]},[null==v?void 0:v.continueWatchingList,null==g||null==(t=g.settings)||null==(a=t.anilist)?void 0:a.enableAdultContent,null==g||null==(o=g.settings)||null==(s=o.anilist)?void 0:s.blurAdultContent]),L=y.useMemo(()=>{var e;return null==(e=[...new Set(null==_?void 0:_.flatMap(e=>{var l,n;return null!=(n=null==(l=e.entries)?void 0:l.flatMap(e=>{var l;return null==(l=e.media)?void 0:l.genres}))?n:[]}))].filter(Boolean))?void 0:e.sort((e,l)=>e.localeCompare(l))},[_]);return{isLoading:f,stats:null==v?void 0:v.stats,libraryCollectionList:_,libraryEntries:P,libraryGenres:L,continueWatchingList:A,unmatchedLocalFiles:null!=(c=null==v?void 0:v.unmatchedLocalFiles)?c:[],ignoredLocalFiles:null!=(d=null==v?void 0:v.ignoredLocalFiles)?d:[],unmatchedGroups:null!=(u=null==v?void 0:v.unmatchedGroups)?u:[],unknownGroups:null!=(m=null==v?void 0:v.unknownGroups)?m:[]}}(),[T,M]=(0,b.fp)(eQ);if(v[0]!==T||v[1]!==M?(s=()=>{"-"!==T&&"all"!==T&&M("-")},v[0]=T,v[1]=M,v[2]=s):s=v[2],v[3]===Symbol.for("react.memo_cache_sentinel")?(o=[],v[3]=o):o=v[3],y.useLayoutEffect(s,o),f){let e;return v[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(ei.kt,{}),v[4]=e):e=v[4],e}return j?(v[5]!==C||v[6]!==S||v[7]!==(null==P||null==(l=P.hostConnectionStatus)?void 0:l.username)||v[8]!==k?(c=!C&&(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between","data-detailed-library-view-header-container":!0,children:[(0,i.jsxs)("div",{className:"flex gap-4 items-center relative w-fit",children:[(0,i.jsx)(g.K0,{icon:(0,i.jsx)(e9.nXt,{}),rounded:!0,intent:"white-outline",size:"sm",onClick:()=>k("base")}),!S&&(0,i.jsx)("h3",{className:"text-ellipsis truncate",children:"Home"}),S&&(0,i.jsxs)("h3",{className:"text-ellipsis truncate",children:[(null==P||null==(n=P.hostConnectionStatus)?void 0:n.username)||"Host","'s Library"]})]}),(0,i.jsx)(ls,{})]}),v[5]=C,v[6]=S,v[7]=null==P||null==(t=P.hostConnectionStatus)?void 0:t.username,v[8]=k,v[9]=c):c=v[9],v[10]!==C||v[11]!==S||v[12]!==(null==A?void 0:A.totalEntries)||v[13]!==(null==A?void 0:A.totalFiles)||v[14]!==(null==A?void 0:A.totalMovies)||v[15]!==(null==A?void 0:A.totalShows)||v[16]!==(null==A?void 0:A.totalSize)||v[17]!==(null==A?void 0:A.totalSpecials)?(d=!C&&(0,i.jsxs)("div",{className:(0,en.cn)("grid grid-cols-3 lg:grid-cols-6 gap-4 [&>div]:text-center [&>div>p]:text-[--muted]",S&&"lg:grid-cols-5"),"data-detailed-library-view-stats-container":!0,children:[!S&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==A?void 0:A.totalSize}),(0,i.jsx)("p",{children:"Library"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==A?void 0:A.totalFiles}),(0,i.jsx)("p",{children:"Files"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==A?void 0:A.totalEntries}),(0,i.jsx)("p",{children:"Entries"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==A?void 0:A.totalShows}),(0,i.jsx)("p",{children:"TV Shows"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==A?void 0:A.totalMovies}),(0,i.jsx)("p",{children:"Movies"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==A?void 0:A.totalSpecials}),(0,i.jsx)("p",{children:"Specials"})]})]}),v[10]=C,v[11]=S,v[12]=null==A?void 0:A.totalEntries,v[13]=null==A?void 0:A.totalFiles,v[14]=null==A?void 0:A.totalMovies,v[15]=null==A?void 0:A.totalShows,v[16]=null==A?void 0:A.totalSize,v[17]=null==A?void 0:A.totalSpecials,v[18]=d):d=v[18],v[19]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)(lo,{}),v[19]=u):u=v[19],v[20]!==E?(m=(0,i.jsx)(lm,{genres:E}),v[20]=E,v[21]=m):m=v[21],v[22]!==L||v[23]!==T||v[24]!==N||v[25]!==_?(h="all"!==T&&L.map(e=>{var l;return(null==(l=e.entries)?void 0:l.length)?(0,i.jsx)(la,{list:e,streamingMediaIds:N,type:_},e.type):null}),v[22]=L,v[23]=T,v[24]=N,v[25]=_,v[26]=h):h=v[26],v[27]!==I||v[28]!==T||v[29]!==N||v[30]!==_?(p="all"===T&&(0,i.jsx)(lt,{entries:I,streamingMediaIds:N,type:_}),v[27]=I,v[28]=T,v[29]=N,v[30]=_,v[31]=p):p=v[31],v[32]!==c||v[33]!==d||v[34]!==m||v[35]!==h||v[36]!==p?(x=(0,i.jsxs)(e3.f,{className:"px-4 space-y-8 relative z-[4]","data-detailed-library-view-container":!0,children:[c,d,u,m,h,p]}),v[32]=c,v[33]=d,v[34]=m,v[35]=h,v[36]=p,v[37]=x):x=v[37],x):null}let la=y.memo(e=>{var l,n,t,r,s,o;let c,d,u,m,h,g,p=(0,a.c)(20),{list:x,streamingMediaIds:v,type:f}=e,[j]=(0,b.fp)(eQ);if("-"!==j&&j!==x.type)return null;let N=x.type;p[0]!==x.type?(c=(0,e7.me)(x.type),p[0]=x.type,p[1]=c):c=p[1];let S=null!=(n=null==x||null==(l=x.entries)?void 0:l.length)?n:0;return p[2]!==S?(d=(0,i.jsx)("span",{className:"text-[--muted] font-medium ml-3",children:S}),p[2]=S,p[3]=d):d=p[3],p[4]!==c||p[5]!==d?(u=(0,i.jsxs)("h2",{children:[c," ",d]}),p[4]=c,p[5]=d,p[6]=u):u=p[6],p[7]!==x.entries||p[8]!==v||p[9]!==f?(m="grid"===f&&(0,i.jsx)(e0.xt,{itemCount:(null==x||null==(t=x.entries)?void 0:t.length)||0,children:null==(r=x.entries)?void 0:r.map(e=>(0,i.jsx)(lr,{entry:e,streamingMediaIds:v,type:f},e.mediaId))}),p[7]=x.entries,p[8]=v,p[9]=f,p[10]=m):m=p[10],p[11]!==x.entries||p[12]!==v||p[13]!==f?(h="carousel"===f&&(0,i.jsxs)(e4.FN,{className:(0,en.cn)("w-full max-w-full !mt-0"),gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!1,children:[(0,i.jsx)(e4.h1,{className:"-top-2"}),(0,i.jsx)(e4.Wk,{className:"px-6",children:null==(o=x.entries)||null==(s=o.filter(Boolean))?void 0:s.map(e=>(0,i.jsx)(lr,{entry:e,streamingMediaIds:v,type:f},e.mediaId))})]}),p[11]=x.entries,p[12]=v,p[13]=f,p[14]=h):h=p[14],p[15]!==x.type||p[16]!==u||p[17]!==m||p[18]!==h?(g=(0,i.jsxs)(y.Fragment,{children:[u,m,h]},N),p[15]=x.type,p[16]=u,p[17]=m,p[18]=h,p[19]=g):g=p[19],g}),lt=y.memo(e=>{let l,n,t,r=(0,a.c)(11),{entries:s,streamingMediaIds:o,type:c}=e;if(r[0]!==s||r[1]!==o||r[2]!==c?(l="grid"===c&&(0,i.jsx)(e0.xt,{itemCount:(null==s?void 0:s.length)||0,children:null==s?void 0:s.map(e=>(0,i.jsx)(lr,{entry:e,streamingMediaIds:o,type:c},e.mediaId))}),r[0]=s,r[1]=o,r[2]=c,r[3]=l):l=r[3],r[4]!==s||r[5]!==o||r[6]!==c){var d;n="carousel"===c&&(0,i.jsxs)(e4.FN,{className:(0,en.cn)("w-full max-w-full !mt-0"),gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!1,children:[(0,i.jsx)(e4.h1,{className:"-top-2"}),(0,i.jsx)(e4.Wk,{className:"px-6",children:null==s||null==(d=s.filter(Boolean))?void 0:d.map(e=>(0,i.jsx)(lr,{entry:e,streamingMediaIds:o,type:c},e.mediaId))})]}),r[4]=s,r[5]=o,r[6]=c,r[7]=n}else n=r[7];return r[8]!==l||r[9]!==n?(t=(0,i.jsxs)(y.Fragment,{children:[l,n]}),r[8]=l,r[9]=n,r[10]=t):t=r[10],t}),lr=y.memo(e=>{let l,n=(0,a.c)(6),{entry:t,type:r}=e,s="carousel"===r?"basis-[200px] md:basis-[250px] mx-2 mt-8 mb-0":void 0;return n[0]!==t.libraryData||n[1]!==t.listData||n[2]!==t.media||n[3]!==t.nakamaLibraryData||n[4]!==s?(l=(0,i.jsx)(e1.V,{media:t.media,listData:t.listData,libraryData:t.libraryData,nakamaLibraryData:t.nakamaLibraryData,showListDataButton:!0,withAudienceScore:!1,type:"anime",containerClassName:s}),n[0]=t.libraryData,n[1]=t.listData,n[2]=t.media,n[3]=t.nakamaLibraryData,n[4]=s,n[5]=l):l=n[5],l}),ls=()=>{let e,l,n,t,r,s=(0,a.c)(9),[o,c]=y.useState(""),d=(0,b.Xr)(eJ),u=(0,eX.d)(o,500);return s[0]!==o||s[1]!==d?(e=()=>{d(o)},s[0]=o,s[1]=d,s[2]=e):e=s[2],s[3]!==u?(l=[u],s[3]=u,s[4]=l):l=s[4],y.useEffect(e,l),s[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(ll.CKj,{}),s[5]=n):n=s[5],s[6]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{c(e)},s[6]=t):t=s[6],s[7]!==o?(r=(0,i.jsx)("div",{className:"w-full md:w-[300px]",children:(0,i.jsx)(es.k,{leftIcon:n,value:o,onValueChange:t,className:"rounded-full bg-gray-900/50"})}),s[7]=o,s[8]=r):r=s[8],r};function lo(){var e,l,n,t,r,s;let o,c,d,u,m,p,x,y,f,j,N,S,C,w,_,k,P,A,L,E,I,T,M,D,O,F,R,z,V,U,B,H,W,K,X,Y,$,Z,q,J,ee,el,ei,ea=(0,a.c)(114),et=(0,Q.v1)(),[es,eo]=(0,b.fp)(eq),[ec,ed]=(0,b.fp)(eQ),eu="-"===ec;ea[0]!==ed?(o=()=>ed("-"),ea[0]=ed,ea[1]=o):o=ea[1],ea[2]!==eu||ea[3]!==o?(c={name:"Lists",isCurrent:eu,onClick:o},ea[2]=eu,ea[3]=o,ea[4]=c):c=ea[4];let em="all"===ec;ea[5]!==ed?(d=()=>ed("all"),ea[5]=ed,ea[6]=d):d=ea[6],ea[7]!==em||ea[8]!==d?(u={name:"All",isCurrent:em,onClick:d},ea[7]=em,ea[8]=d,ea[9]=u):u=ea[9];let eh="CURRENT"===ec;ea[10]!==ed?(m=()=>ed("CURRENT"),ea[10]=ed,ea[11]=m):m=ea[11],ea[12]!==eh||ea[13]!==m?(p={name:"Watching",isCurrent:eh,onClick:m},ea[12]=eh,ea[13]=m,ea[14]=p):p=ea[14];let ex="PLANNING"===ec;ea[15]!==ed?(x=()=>ed("PLANNING"),ea[15]=ed,ea[16]=x):x=ea[16],ea[17]!==x||ea[18]!==ex?(y={name:"Planning",isCurrent:ex,onClick:x},ea[17]=x,ea[18]=ex,ea[19]=y):y=ea[19];let eb="PAUSED"===ec;ea[20]!==ed?(f=()=>ed("PAUSED"),ea[20]=ed,ea[21]=f):f=ea[21],ea[22]!==eb||ea[23]!==f?(j={name:"Paused",isCurrent:eb,onClick:f},ea[22]=eb,ea[23]=f,ea[24]=j):j=ea[24];let ey="COMPLETED"===ec;ea[25]!==ed?(N=()=>ed("COMPLETED"),ea[25]=ed,ea[26]=N):N=ea[26],ea[27]!==ey||ea[28]!==N?(S={name:"Completed",isCurrent:ey,onClick:N},ea[27]=ey,ea[28]=N,ea[29]=S):S=ea[29];let ev="DROPPED"===ec;ea[30]!==ed?(C=()=>ed("DROPPED"),ea[30]=ed,ea[31]=C):C=ea[31],ea[32]!==ev||ea[33]!==C?(w={name:"Dropped",isCurrent:ev,onClick:C},ea[32]=ev,ea[33]=C,ea[34]=w):w=ea[34],ea[35]!==y||ea[36]!==j||ea[37]!==S||ea[38]!==c||ea[39]!==w||ea[40]!==u||ea[41]!==p?(_=(0,i.jsx)("div",{className:"flex w-full justify-center",children:(0,i.jsx)(e6.tH,{className:"h-10 w-fit pb-6",triggerClass:"px-4 py-1",items:[c,u,p,y,j,S,w]})}),ea[35]=y,ea[36]=j,ea[37]=S,ea[38]=c,ea[39]=w,ea[40]=u,ea[41]=p,ea[42]=_):_=ea[42];let ef="TITLE"!==es.sorting&&"text-indigo-300 font-bold text-xl";ea[43]!==ef?(k=(0,en.cn)(ef),ea[43]=ef,ea[44]=k):k=ea[44],ea[45]!==k?(P=(0,i.jsx)(le.EDF,{className:k}),ea[45]=k,ea[46]=P):P=ea[46];let ej=es.sorting||"TITLE";ea[47]!==eo?(A=e=>eo(l=>{l.sorting=e}),ea[47]=eo,ea[48]=A):A=ea[48],ea[49]!==P||ea[50]!==ej||ea[51]!==A?(L=(0,i.jsx)(er.l,{label:"Sorting",leftAddon:P,className:"w-full",fieldClass:"flex items-center",inputContainerClass:"w-full",options:eY.wi,value:ej,onValueChange:A,fieldLabelClass:"hidden"}),ea[49]=P,ea[50]=ej,ea[51]=A,ea[52]=L):L=ea[52];let eN=null!==es.format&&""!==es.format&&"text-indigo-300 font-bold text-xl";ea[53]!==eN?(E=(0,en.cn)(eN),ea[53]=eN,ea[54]=E):E=ea[54],ea[55]!==E?(I=(0,i.jsx)(ep.xjJ,{className:E}),ea[55]=E,ea[56]=I):I=ea[56];let eS=es.format||"";ea[57]!==eo?(T=e=>eo(l=>{l.format=e}),ea[57]=eo,ea[58]=T):T=ea[58],ea[59]!==I||ea[60]!==eS||ea[61]!==T?(M=(0,i.jsx)(er.l,{leftAddon:I,label:"Format",placeholder:"All formats",className:"w-full",fieldClass:"w-full",options:G.xh,value:eS,onValueChange:T,fieldLabelClass:"hidden"}),ea[59]=I,ea[60]=eS,ea[61]=T,ea[62]=M):M=ea[62];let eC=null!==es.status&&""!==es.status&&"text-indigo-300 font-bold text-xl";ea[63]!==eC?(D=(0,en.cn)(eC),ea[63]=eC,ea[64]=D):D=ea[64],ea[65]!==D?(O=(0,i.jsx)(ln.PgI,{className:D}),ea[65]=D,ea[66]=O):O=ea[66],ea[67]===Symbol.for("react.memo_cache_sentinel")?(F=[...G._v],ea[67]=F):F=ea[67];let ew=es.status||"";ea[68]!==eo?(R=e=>eo(l=>{l.status=e}),ea[68]=eo,ea[69]=R):R=ea[69],ea[70]!==O||ea[71]!==ew||ea[72]!==R?(z=(0,i.jsx)(er.l,{leftAddon:O,label:"Status",placeholder:"All statuses",className:"w-full",fieldClass:"w-full",options:F,value:ew,onValueChange:R,fieldLabelClass:"hidden"}),ea[70]=O,ea[71]=ew,ea[72]=R,ea[73]=z):z=ea[73];let e_=null!==es.season&&""!==es.season&&"text-indigo-300 font-bold text-xl";ea[74]!==e_?(V=(0,en.cn)(e_),ea[74]=e_,ea[75]=V):V=ea[75],ea[76]!==V?(U=(0,i.jsx)(eg.Cfp,{className:V}),ea[76]=V,ea[77]=U):U=ea[77],ea[78]===Symbol.for("react.memo_cache_sentinel")?(B=G.lW.map(lu),ea[78]=B):B=ea[78];let ek=es.season||"";ea[79]!==eo?(H=e=>eo(l=>{l.season=e}),ea[79]=eo,ea[80]=H):H=ea[80],ea[81]!==U||ea[82]!==ek||ea[83]!==H?(W=(0,i.jsx)(er.l,{leftAddon:U,label:"Season",placeholder:"All seasons",className:"w-full",fieldClass:"w-full flex items-center",inputContainerClass:"w-full",options:B,value:ek,onValueChange:H,fieldLabelClass:"hidden"}),ea[81]=U,ea[82]=ek,ea[83]=H,ea[84]=W):W=ea[84];let eP=null!==es.year&&""!==es.year&&"text-indigo-300 font-bold text-xl";ea[85]!==eP?(K=(0,en.cn)(eP),ea[85]=eP,ea[86]=K):K=ea[86],ea[87]!==K?(X=(0,i.jsx)(eg.IdP,{className:K}),ea[87]=K,ea[88]=X):X=ea[88],ea[89]===Symbol.for("react.memo_cache_sentinel")?(Y=[...Array(70)].map(ld).map(lc),ea[89]=Y):Y=ea[89];let eA=es.year||"";return ea[90]!==eo?($=e=>eo(l=>{l.year=e}),ea[90]=eo,ea[91]=$):$=ea[91],ea[92]!==X||ea[93]!==eA||ea[94]!==$?(Z=(0,i.jsx)(er.l,{leftAddon:X,label:"Year",placeholder:"Timeless",className:"w-full",fieldClass:"w-full",options:Y,value:eA,onValueChange:$,fieldLabelClass:"hidden"}),ea[92]=X,ea[93]=eA,ea[94]=$,ea[95]=Z):Z=ea[95],ea[96]===Symbol.for("react.memo_cache_sentinel")?(q=(0,i.jsx)(v.id1,{}),ea[96]=q):q=ea[96],ea[97]!==eo?(J=(0,i.jsx)("div",{className:"flex gap-4 items-center w-full",children:(0,i.jsx)(g.K0,{icon:q,intent:"alert-subtle",className:"flex-none",onClick:()=>{eo(eZ)}})}),ea[97]=eo,ea[98]=J):J=ea[98],ea[99]!==es.isAdult||ea[100]!==(null==et||null==(l=et.settings)||null==(e=l.anilist)?void 0:e.enableAdultContent)||ea[101]!==eo?(ee=(null==et||null==(t=et.settings)||null==(n=t.anilist)?void 0:n.enableAdultContent)&&(0,i.jsx)("div",{className:"flex h-full items-center",children:(0,i.jsx)(e5.d,{label:"Adult",value:es.isAdult,onValueChange:e=>eo(l=>{l.isAdult=e}),fieldLabelClass:"hidden"})}),ea[99]=es.isAdult,ea[100]=null==et||null==(s=et.settings)||null==(r=s.anilist)?void 0:r.enableAdultContent,ea[101]=eo,ea[102]=ee):ee=ea[102],ea[103]!==L||ea[104]!==M||ea[105]!==z||ea[106]!==W||ea[107]!==Z||ea[108]!==J||ea[109]!==ee?(el=(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 2xl:grid-cols-[1fr_1fr_1fr_1fr_1fr_auto_auto] gap-4","data-detailed-library-view-search-options-grid":!0,children:[L,M,z,W,Z,J,ee]}),ea[103]=L,ea[104]=M,ea[105]=z,ea[106]=W,ea[107]=Z,ea[108]=J,ea[109]=ee,ea[110]=el):el=ea[110],ea[111]!==_||ea[112]!==el?(ei=(0,i.jsxs)(h.KZ,{className:"px-4 xl:px-0","data-detailed-library-view-search-options-container":!0,children:[_,el]}),ea[111]=_,ea[112]=el,ea[113]=ei):ei=ea[113],ei}function lc(e){return{value:String(e),label:String(e)}}function ld(e,l){return(0,e8.C)(new Date)-l}function lu(e){return{value:e.toUpperCase(),label:e}}function lm(e){var l;let n,t,r,s=(0,a.c)(13),{genres:o}=e,[c,d]=(0,b.fp)(eq),u=!(null==(l=c.genre)?void 0:l.length);if(s[0]!==d?(n=()=>d(lh),s[0]=d,s[1]=n):n=s[1],s[2]!==u||s[3]!==n?(t={name:"All",isCurrent:u,onClick:n},s[2]=u,s[3]=n,s[4]=t):t=s[4],s[5]!==o||s[6]!==c.genre||s[7]!==d||s[8]!==t){let e;s[10]!==c.genre||s[11]!==d?(e=e=>{var l,n;return{name:e,isCurrent:null!=(n=null==(l=c.genre)?void 0:l.includes(e))&&n,onClick:()=>d(l=>{var n,i;(null==(n=l.genre)?void 0:n.includes(e))?l.genre=null==(i=l.genre)?void 0:i.filter(l=>l!==e):l.genre=[...l.genre||[],e]})}},s[10]=c.genre,s[11]=d,s[12]=e):e=s[12],r=(0,i.jsx)(e2.H,{items:[t,...o.map(e)]}),s[5]=o,s[6]=c.genre,s[7]=d,s[8]=t,s[9]=r}else r=s[9];return r}function lh(e){e.genre=[]}var lg=n(58443),lp=n(48555),lx=n(23335),lb=n(77717),ly=n(94077),lv=n(65468),lf=n(43826),lj=n(81274),lN=n(2311),lS=n(68090),lC=n(71559),lw=n(29260),l_=n(30420),lk=n(90124),lP=n(13),lA=n(67329),lL=n(32931),lE=n(79437),lI=n(70957),lT=n(8816),lM=n(72531),lD=n(78216),lO=n(13029),lF=n(99639),lR=n(25305),lz=n(32754),lV=n(35656),lU=n(14680),lB=n(42692),lG=n(22960),lH=n(90711),lW=n(84218),lK=n(6066);let lX=(0,x.eU)(!1),lY=(0,x.eU)(0),l$=(0,x.eU)(!1),lZ=(0,x.eU)(null,(e,l,n)=>{e(lY)!==n&&(l(l$,!0),setTimeout(()=>{l(lY,n),l(l$,!1)},300))}),lq=lW.P.create(lU.r);function lQ(e){let l,n,t,r,s=(0,a.c)(11),{totalEpisodes:o,currentIndex:c,onIndexChange:d,className:u}=e;if((0,ez.Ky)(),o<=1)return null;let m=Math.min(o,99);return s[0]!==u?(l=(0,en.cn)("hidden lg:flex items-center gap-2 z-[10] pl-8 max-w-[20rem] flex-wrap top-[4.5rem]",u),s[0]=u,s[1]=l):l=s[1],s[2]!==m?(n=Array.from({length:m}),s[2]=m,s[3]=n):n=s[3],s[4]!==c||s[5]!==d||s[6]!==n?(t=n.map((e,l)=>(0,i.jsx)("button",{className:(0,en.cn)("h-1.5 rounded-sm transition-all duration-300 cursor-pointer",l===c?"w-6 bg-[--muted]":"w-3 bg-[--subtle] hover:bg-gray-300"),onClick:()=>d(l),"aria-label":"Go to episode ".concat(l+1)},l)),s[4]=c,s[5]=d,s[6]=n,s[7]=t):t=s[7],s[8]!==l||s[9]!==t?(r=(0,i.jsx)("div",{className:l,children:t}),s[8]=l,s[9]=t,s[10]=r):r=s[10],r}function lJ(e){var l,n,t,r,s,o,c,d;let u,m,h,p,x,v,f,j,N,S,C,w,_,k,P,A,L,E,I,T,M,D,O,F,R,z,V,U,B,G,H,W,K,X=(0,a.c)(76),{episode:Y,episodes:$,onHoverChange:Z}=e,q=(0,ez.Ky)(),{setPreviewModalMediaId:Q}=(0,lz.D)(),J=Y.baseAnime,ee=(0,b.md)(lY),el=(0,b.md)(l$),ei=(0,b.Xr)(lZ),[ea]=(0,b.fp)(lX),et=$[ee]||null;if(q.mediaPageBannerType===ez.px.BlurWhenUnavailable&&(null==et||null==(l=et.baseAnime)||l.bannerImage),X[0]!==ee||X[1]!==$.length||X[2]!==ea||X[3]!==ei?(u=()=>{if($.length<=1)return;let e=setInterval(()=>{ea||ei((ee+1)%$.length)},8e3);return()=>clearInterval(e)},m=[ee,$.length,ea,ei],X[0]=ee,X[1]=$.length,X[2]=ea,X[3]=ei,X[4]=u,X[5]=m):(u=X[4],m=X[5]),y.useEffect(u,m),!J)return null;let er=q.hideTopNavbar&&"top-[4rem]",es=ly.X&&q.mediaPageBannerSize===ez.kE.Small&&"top-[0rem]",eo=ly.X&&q.mediaPageBannerSize!==ez.kE.Small&&"top-[2rem]";X[6]!==er||X[7]!==es||X[8]!==eo?(h=(0,en.cn)("absolute left-2 w-fit h-[20rem] bg-gradient-to-t z-[3] hidden lg:block","top-[5rem]",er,es,eo),X[6]=er,X[7]=es,X[8]=eo,X[9]=h):h=X[9],X[10]!==Z?(p=()=>Z(!0),x=()=>Z(!1),X[10]=Z,X[11]=p,X[12]=x):(p=X[11],x=X[12]),X[13]===Symbol.for("react.memo_cache_sentinel")?(v={initial:{opacity:0,x:-40},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"spring",damping:20,stiffness:100}},X[13]=v):v=X[13],X[14]===Symbol.for("react.memo_cache_sentinel")?(f={opacity:0,scale:.7,skew:5},X[14]=f):f=X[14],X[15]===Symbol.for("react.memo_cache_sentinel")?(j={opacity:1,scale:1,skew:0},X[15]=j):j=X[15],X[16]===Symbol.for("react.memo_cache_sentinel")?(N={opacity:1,scale:1,skewY:1},S={duration:.5},X[16]=N,X[17]=S):(N=X[16],S=X[17]);let ec="/entry?id=".concat(J.id);X[18]!==J.coverImage||X[19]!==el?(C=(null==(r=J.coverImage)?void 0:r.large)&&(0,i.jsx)("div",{className:"w-[180px] h-[280px] relative rounded-[--radius-md] overflow-hidden bg-[--background] shadow-md",children:(0,i.jsx)(lU.r,{src:J.coverImage.large,alt:"cover image",fill:!0,priority:!0,placeholder:(0,lV.r)(700,475),className:(0,en.cn)("object-cover object-center transition-opacity duration-1000",el&&"opacity-30",!el&&"opacity-100")})}),X[18]=J.coverImage,X[19]=el,X[20]=C):C=X[20],X[21]!==ec||X[22]!==C?(w=(0,i.jsx)(lW.P.div,{className:"flex-none",initial:f,animate:j,exit:N,transition:S,children:(0,i.jsx)(eF.i,{href:ec,children:C})}),X[21]=ec,X[22]=C,X[23]=w):w=X[23],X[24]===Symbol.for("react.memo_cache_sentinel")?(_={opacity:0,x:10},k={opacity:1,x:0},P={duration:.5,delay:.6},X[24]=_,X[25]=k,X[26]=P):(_=X[24],k=X[25],P=X[26]);let ed="/entry?id=".concat(J.id),eu=(null==(n=J.title)?void 0:n.userPreferred)||"";return X[27]!==eu?(A=(0,i.jsx)(lB.W,{className:"[text-shadow:_0_1px_10px_rgb(0_0_0_/_20%)] text-white leading-8 line-clamp-2 pb-1 max-w-md text-pretty text-3xl overflow-ellipsis",words:eu}),X[27]=eu,X[28]=A):A=X[28],X[29]!==ed||X[30]!==A?(L=(0,i.jsx)(eF.i,{href:ed,children:A}),X[29]=ed,X[30]=A,X[31]=L):L=X[31],X[32]!==J.genres?(E=null==(s=J.genres)?void 0:s.slice(0,3).map(l0),X[32]=J.genres,X[33]=E):E=X[33],X[34]!==E?(I=(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:E}),X[34]=E,X[35]=I):I=X[35],X[36]!==J.meanScore?(T=J.meanScore&&(0,i.jsx)("div",{className:"rounded-full w-fit inline-block",children:(0,i.jsx)(lR.H2,{meanScore:J.meanScore})}),X[36]=J.meanScore,X[37]=T):T=X[37],X[38]!==(null==(t=J.nextAiringEpisode)?void 0:t.airingAt)?(M=(null==(o=J.nextAiringEpisode)?void 0:o.airingAt)&&(0,i.jsxs)("p",{className:"text-base text-brand-200 inline-flex items-center gap-1.5",children:[(0,i.jsx)(ln.PgI,{})," Releasing now"]}),X[38]=null==(c=J.nextAiringEpisode)?void 0:c.airingAt,X[39]=M):M=X[39],X[40]!==T||X[41]!==M?(D=(0,i.jsxs)("div",{className:"flex items-center max-w-lg gap-4",children:[T,M]}),X[40]=T,X[41]=M,X[42]=D):D=X[42],X[43]===Symbol.for("react.memo_cache_sentinel")?(O={opacity:0,x:10},F={opacity:1,x:0},R={duration:.5,delay:.7},X[43]=O,X[44]=F,X[45]=R):(O=X[43],F=X[44],R=X[45]),X[46]!==J.description?(z=null==(d=J.description)?void 0:d.replace(/(<([^>]+)>)/ig,""),X[46]=J.description,X[47]=z):z=X[47],X[48]!==z?(V=(0,i.jsx)(lG.F,{className:"max-w-lg leading-3 h-[77px] mb-4 p-0 text-sm",children:z}),X[48]=z,X[49]=V):V=X[49],X[50]!==J.id||X[51]!==Q?(U=(0,i.jsx)(g.$n,{size:"sm",intent:"gray-outline",className:"rounded-full",onClick:()=>Q(J.id,"anime"),children:"Preview"}),X[50]=J.id,X[51]=Q,X[52]=U):U=X[52],X[53]!==V||X[54]!==U?(B=(0,i.jsxs)(lW.P.div,{className:"pt-0 left-0",initial:O,animate:F,transition:R,children:[V,U]}),X[53]=V,X[54]=U,X[55]=B):B=X[55],X[56]!==L||X[57]!==I||X[58]!==D||X[59]!==B?(G=(0,i.jsxs)(lW.P.div,{className:"flex-auto space-y-2 z-[1]",initial:_,animate:k,transition:P,children:[L,I,D,B]}),X[56]=L,X[57]=I,X[58]=D,X[59]=B,X[60]=G):G=X[60],X[61]!==w||X[62]!==G||X[63]!==p||X[64]!==x?(H=(0,i.jsxs)(lW.P.div,{className:"flex items-center relative gap-6 p-6 pr-3 w-fit overflow-hidden",onMouseEnter:p,onMouseLeave:x,...v,children:[w,G]}),X[61]=w,X[62]=G,X[63]=p,X[64]=x,X[65]=H):H=X[65],X[66]!==ee||X[67]!==$.length||X[68]!==ei?(W=(0,i.jsx)(lQ,{totalEpisodes:$.length,currentIndex:ee,onIndexChange:ei}),X[66]=ee,X[67]=$.length,X[68]=ei,X[69]=W):W=X[69],X[70]!==J.id||X[71]!==J.idMal||X[72]!==H||X[73]!==W||X[74]!==h?(K=(0,i.jsxs)("div",{className:h,"data-media-id":J.id,"data-media-mal-id":J.idMal,children:[H,W]}),X[70]=J.id,X[71]=J.idMal,X[72]=H,X[73]=W,X[74]=h,X[75]=K):K=X[75],K}function l0(e){return(0,i.jsx)("div",{className:"text-sm font-semibold px-1 text-gray-300",children:e},e)}function l1(e){var l,n,t,r,s,o,c,d,u,m,h,g,p,x,b,y,v;let f,j,N,S,C,w,_,k,P,A=(0,a.c)(39),{episode:L,isTransitioning:E}=e,I=(0,ez.Ky)(),T=(0,lK.useRouter)(),M=(0,Q.v1)(),{setPlayNext:D}=(0,lD.p$)(),{data:O}=(0,eK.H_)();A[0]!==(null==(l=L.baseAnime)?void 0:l.id)||A[1]!==T||A[2]!==(null==M?void 0:M.isOffline)||A[3]!==D?(f=()=>{var e;D(null==(e=L.baseAnime)?void 0:e.id,()=>{var e,l;(null==M?void 0:M.isOffline)?T.push("/offline/entry/anime?id=".concat(null==(l=L.baseAnime)?void 0:l.id)):T.push("/entry?id=".concat(null==(e=L.baseAnime)?void 0:e.id))})},A[0]=null==(v=L.baseAnime)?void 0:v.id,A[1]=T,A[2]=null==M?void 0:M.isOffline,A[3]=D,A[4]=f):f=A[4];let F=f,R=I.hideTopNavbar&&"top-[4rem]",z=ly.X&&I.mediaPageBannerSize===ez.kE.Small&&"top-[1rem]",V=ly.X&&I.mediaPageBannerSize!==ez.kE.Small&&"top-[3rem]";A[5]!==R||A[6]!==z||A[7]!==V?(j=(0,en.cn)("absolute right-6 w-fit h-[25rem] z-[3] hidden lg:block overflow-hidden","top-[5rem]",R,z,V),A[5]=R,A[6]=z,A[7]=V,A[8]=j):j=A[8],A[9]===Symbol.for("react.memo_cache_sentinel")?(N={initial:{opacity:0,x:40},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{type:"spring",damping:20,stiffness:100}},A[9]=N):N=A[9];let U=(null==(n=L.episodeMetadata)?void 0:n.image)||(null==(t=L.baseAnime)?void 0:t.bannerImage)||(null==(s=L.baseAnime)||null==(r=s.coverImage)?void 0:r.extraLarge),B=L.episodeTitle||(null==L||null==(c=L.baseAnime)||null==(o=c.title)?void 0:o.userPreferred),G=L.displayTitle,H=L.isInvalid,W=null==(d=L.baseAnime)?void 0:d.episodes,K=L.progressNumber,X=L.episodeNumber,Y=null==(u=L.episodeMetadata)?void 0:u.length,$=L.episodeNumber!==L.progressNumber,Z=(null==(m=L.baseAnime)?void 0:m.id)||0;A[10]!==L.episodeNumber||A[11]!==Z||A[12]!==O?(S=(0,eK.hH)(O,Z,L.episodeNumber),A[10]=L.episodeNumber,A[11]=Z,A[12]=O,A[13]=S):S=A[13];let q=(null==(h=L.baseAnime)?void 0:h.id)||0;A[14]!==L.episodeNumber||A[15]!==q||A[16]!==O?(C=(0,eK.pj)(O,q,L.episodeNumber),A[14]=L.episodeNumber,A[15]=q,A[16]=O,A[17]=C):C=A[17];let J=(null==L||null==(g=L.baseAnime)?void 0:g.id)||0,ee=null==L||null==(x=L.baseAnime)||null==(p=x.coverImage)?void 0:p.medium,el=null==L||null==(y=L.baseAnime)||null==(b=y.title)?void 0:b.userPreferred;A[18]!==J||A[19]!==ee||A[20]!==el?(w={id:J,image:ee,title:el},A[18]=J,A[19]=ee,A[20]=el,A[21]=w):w=A[21];let ei=E&&"opacity-50";return A[22]!==ei?(_=(0,en.cn)("transition-opacity duration-1000",ei),A[22]=ei,A[23]=_):_=A[23],A[24]!==L||A[25]!==F||A[26]!==W||A[27]!==Y||A[28]!==$||A[29]!==S||A[30]!==C||A[31]!==w||A[32]!==_||A[33]!==U||A[34]!==B?(k=(0,i.jsx)("div",{className:"p-6 w-fit",children:(0,i.jsx)(lW.P.div,{...N,className:"2xl:w-[500px] xl:w-[400px] lg:w-[300px] rounded-xl overflow-hidden",children:(0,i.jsx)(lO.U,{episode:L,image:U,topTitle:B,title:G,isInvalid:H,progressTotal:W,progressNumber:K,episodeNumber:X,length:Y,hasDiscrepancy:$,percentageComplete:S,minutesRemaining:C,anime:w,forceSingleContainer:!0,onClick:F,className:_})})}),A[24]=L,A[25]=F,A[26]=W,A[27]=Y,A[28]=$,A[29]=S,A[30]=C,A[31]=w,A[32]=_,A[33]=U,A[34]=B,A[35]=k):k=A[35],A[36]!==k||A[37]!==j?(P=(0,i.jsx)(lW.P.div,{className:j,children:k}),A[36]=k,A[37]=j,A[38]=P):P=A[38],P}function l2(e){var l,n,t,r,s,o,c,d,u,m,h,g;let p,x,b,y,v,f,j,N,S,C,w,_,k,P,A=(0,a.c)(33),{episode:L,isTransitioning:E,shouldBlurBanner:I}=e,T=(0,ez.Ky)();A[0]!==(null==L||null==(l=L.baseAnime)?void 0:l.bannerImage)||A[1]!==(null==L||null==(t=L.baseAnime)||null==(n=t.coverImage)?void 0:n.extraLarge)||A[2]!==T.libraryScreenBannerType||A[3]!==T.libraryScreenCustomBannerImage?(p=T.libraryScreenCustomBannerImage&&T.libraryScreenBannerType===ez.H4.Custom?(0,lH.sU)(T.libraryScreenCustomBannerImage):(null==L||null==(s=L.baseAnime)?void 0:s.bannerImage)||(null==L||null==(c=L.baseAnime)||null==(o=c.coverImage)?void 0:o.extraLarge),A[0]=null==L||null==(d=L.baseAnime)?void 0:d.bannerImage,A[1]=null==L||null==(m=L.baseAnime)||null==(u=m.coverImage)?void 0:u.extraLarge,A[2]=T.libraryScreenBannerType,A[3]=T.libraryScreenCustomBannerImage,A[4]=p):p=A[4];let M=p,D=!T.disableSidebarTransparency&&lF.j,O=T.mediaPageBannerSize===ez.kE.Small&&"lg:h-[30rem]";A[5]!==D||A[6]!==O?(x=(0,en.cn)("lg:h-[35rem] w-full flex-none object-cover object-center absolute top-0 bg-[--background] overflow-hidden",D,ly.X&&"top-[-2rem]",O),A[5]=D,A[6]=O,A[7]=x):x=A[7],A[8]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)("div",{className:"w-full z-[2] absolute bottom-[-10rem] h-[10rem] bg-gradient-to-b from-[--background] via-transparent via-100% to-transparent"}),y=(0,i.jsx)("div",{className:"w-full absolute z-[2] top-0 h-[10rem] opacity-50 bg-gradient-to-b from-[--background] to-transparent"}),A[8]=b,A[9]=y):(b=A[8],y=A[9]);let F=E&&"opacity-70";return A[10]!==F?(v=(0,en.cn)("opacity-0 duration-1000 bg-[var(--background)] w-full h-full absolute z-[2]",F),A[10]=F,A[11]=v):v=A[11],A[12]!==v?(f=(0,i.jsx)("div",{className:v}),A[12]=v,A[13]=f):f=A[13],A[14]!==M||A[15]!==(null==L||null==(r=L.baseAnime)?void 0:r.bannerImage)||A[16]!==E?(j=M&&(0,i.jsx)(lq,{src:M,alt:"banner image",fill:!0,quality:100,priority:!0,className:(0,en.cn)("object-cover object-center z-[1] transition-all duration-1000",E&&"scale-[1.01] -translate-x-0.5",!E&&"scale-100 translate-x-0",!(null==L||null==(h=L.baseAnime)?void 0:h.bannerImage)&&"opacity-35")}),A[14]=M,A[15]=null==L||null==(g=L.baseAnime)?void 0:g.bannerImage,A[16]=E,A[17]=j):j=A[17],A[18]!==j?(N=(0,i.jsx)(lf.N,{children:(0,i.jsx)("div",{className:"w-full h-full absolute z-[1] overflow-hidden",children:j})}),A[18]=j,A[19]=N):N=A[19],A[20]!==I?(S=I&&(0,i.jsx)("div",{className:"absolute top-0 w-full h-full backdrop-blur-2xl z-[2]"}),A[20]=I,A[21]=S):S=A[21],A[22]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsx)("div",{className:(0,en.cn)("hidden lg:block max-w-[80rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background] from-5% via-[--background] transition-opacity via-opacity-50 via-5% to-transparent","opacity-100 duration-500")}),w=(0,i.jsx)("div",{className:(0,en.cn)("hidden lg:block max-w-[60rem] w-full z-[2] h-full absolute -right-[10rem] &-right-[25rem] &-bottom-[10rem] bg-gradient-to-l from-[--background] &rotate-45 via-[--background] via-opacity-50 via-5% transition-opacity to-transparent","opacity-100 duration-500")}),A[22]=C,A[23]=w):(C=A[22],w=A[23]),A[24]!==T.disableSidebarTransparency?(_=!T.disableSidebarTransparency&&(0,i.jsx)("div",{className:(0,en.cn)("hidden lg:block max-w-[10rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background] via-[--background] transition-opacity via-opacity-50 via-5% to-transparent","opacity-70 duration-500")}),A[24]=T.disableSidebarTransparency,A[25]=_):_=A[25],A[26]===Symbol.for("react.memo_cache_sentinel")?(k=(0,i.jsx)("div",{className:"w-full z-[2] absolute bottom-0 h-[20rem] bg-gradient-to-t from-[--background] via-[--background] via-opacity-50 via-10% to-transparent"}),A[26]=k):k=A[26],A[27]!==N||A[28]!==S||A[29]!==_||A[30]!==x||A[31]!==f?(P=(0,i.jsxs)("div",{className:x,children:[b,y,f,N,S,C,w,_,k]}),A[27]=N,A[28]=S,A[29]=_,A[30]=x,A[31]=f,A[32]=P):P=A[32],P}function l3(e){var l;let n,t,r,s,o,c,d,u,m=(0,a.c)(27),{episodes:h,className:g}=e,p=(0,ez.Ky)(),x=(0,b.md)(lY),v=(0,b.md)(l$),f=(0,b.Xr)(lZ),[j,N]=(0,b.fp)(lX),S=h[x]||null,C=p.mediaPageBannerType===ez.px.BlurWhenUnavailable&&!(null==S||null==(l=S.baseAnime)?void 0:l.bannerImage);if(m[0]!==x||m[1]!==h.length||m[2]!==j||m[3]!==f?(n=()=>{if(h.length<=1)return;let e=setInterval(()=>{j||f((x+1)%h.length)},8e3);return()=>clearInterval(e)},t=[x,h.length,j,f],m[0]=x,m[1]=h.length,m[2]=j,m[3]=f,m[4]=n,m[5]=t):(n=m[4],t=m[5]),y.useEffect(n,t),!h.length)return null;let w=p.hideTopNavbar&&"lg:h-[32rem]",_=p.mediaPageBannerSize===ez.kE.Small&&"lg:h-[26rem]",k=p.mediaPageBannerSize===ez.kE.Small&&p.hideTopNavbar&&"lg:h-[28rem]";return m[6]!==g||m[7]!==w||m[8]!==_||m[9]!==k?(r=(0,en.cn)("__header lg:h-[28rem] max-w-full overflow-hidden",w,_,k,g),m[6]=g,m[7]=w,m[8]=_,m[9]=k,m[10]=r):r=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(s={initial:{opacity:0},animate:{opacity:1},transition:{duration:1.2}},m[11]=s):s=m[11],m[12]!==S||m[13]!==v||m[14]!==C?(o=(0,i.jsx)(l2,{episode:S,isTransitioning:v,shouldBlurBanner:C}),m[12]=S,m[13]=v,m[14]=C,m[15]=o):o=m[15],m[16]!==S||m[17]!==h||m[18]!==v||m[19]!==N?(c=S&&!v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(lJ,{episode:S,episodes:h,onHoverChange:N}),(0,i.jsx)(l1,{episode:S,isTransitioning:v})]}),m[16]=S,m[17]=h,m[18]=v,m[19]=N,m[20]=c):c=m[20],m[21]!==c?(d=(0,i.jsx)(lf.N,{children:c}),m[21]=c,m[22]=d):d=m[22],m[23]!==d||m[24]!==r||m[25]!==o?(u=(0,i.jsxs)(lW.P.div,{className:r,...s,children:[o,d]}),m[23]=d,m[24]=r,m[25]=o,m[26]=u):u=m[26],u}let l4=(0,x.eU)("base"),l5=(0,eL.tG)("sea-home-discover-header-type","anime",void 0,{getOnInit:!0});function l6(){var e,l,n,a,t,r,s,d,u,m,h,p,x,v,f,j,S,C,w,_,k,A,L,E,I,T,M,D,F;let R=(0,Q.v1)(),{data:z,isLoading:G}=(0,o.bN)(),{width:W}=(0,lS.A)(),K=(0,b.md)(lp.Qy),X=!(null==K?void 0:K.length),{libraryGenres:Y,libraryCollectionList:$,filteredLibraryCollectionList:Z,isLoading:q,continueWatchingList:J,unmatchedLocalFiles:ee,ignoredLocalFiles:el,unmatchedGroups:ei,unknownGroups:ea,streamingMediaIds:et,hasEntries:er,isStreamingOnly:es,isNakamaLibrary:eo}=(0,eW.VI)(),{mangaCollection:ec}=(0,lL.k)(),ed=(0,ez.Ky)(),[eu,em]=(0,b.fp)(l4),[eh,ep]=(0,b.fp)(l5),[eb,ev]=(0,b.fp)(lA.G),ef=(0,b.Xr)(ex),ej=y.useMemo(()=>{var e;let l=(null==z?void 0:z.length)?z:H;return W<1024&&(null==(e=l[0])?void 0:e.type)==="anime-continue-watching-header"?(l.find(e=>"anime-continue-watching"===e.type)&&(l=l.filter(e=>"anime-continue-watching"!==e.type)),l.map(e=>"anime-continue-watching-header"===e.type?{...e,type:"anime-continue-watching"}:e)):l},[z,W<1024]);y.useEffect(()=>{ev(eb)},[eb]);let eN=(0,b.Xr)(V.ho),eS=(null==R||null==(e=R.torrentstreamSettings)?void 0:e.includeInLibrary)||(null==R||null==(l=R.debridSettings)?void 0:l.includeDebridStreamInLibrary)||(null==R||null==(a=R.settings)||null==(n=a.library)?void 0:n.includeOnlineStreamingInLibrary)?"stream":"local";return q||G?(0,i.jsx)(y.Fragment,{children:(0,i.jsxs)("div",{className:"p-4 space-y-4 relative z-[4]",children:[(0,i.jsx)(lb.E,{className:"h-12 w-full max-w-lg relative"}),(0,i.jsx)("div",{className:(0,en.cn)("grid h-[22rem] min-[2000px]:h-[24rem] grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-7 min-[2000px]:grid-cols-8 gap-4"),children:[1,2,3,4,5,6,7,8].map((e,l)=>(0,i.jsx)(lb.E,{className:(0,en.cn)("h-[22rem] min-[2000px]:h-[24rem] col-span-1 aspect-[6/7] flex-none rounded-[--radius-md] relative overflow-hidden","[&:nth-child(8)]:hidden min-[2000px]:[&:nth-child(8)]:block","[&:nth-child(7)]:hidden 2xl:[&:nth-child(7)]:block","[&:nth-child(6)]:hidden xl:[&:nth-child(6)]:block","[&:nth-child(5)]:hidden xl:[&:nth-child(5)]:block","[&:nth-child(4)]:hidden lg:[&:nth-child(4)]:block","[&:nth-child(3)]:hidden md:[&:nth-child(3)]:block")},l))})]})}):!er&&function(e){if(!e)return!0;for(let l of e)if(!["anime-continue-watching","anime-library","anime-continue-watching-header","local-anime-library","local-anime-library-stats","library-upcoming-episodes"].includes(l.type))return!1;return!0}(ej)&&!q?(0,i.jsxs)("div",{"data-home-screen":"no-entries",className:"contents",children:[(0,i.jsxs)(y.Fragment,{children:[(0,i.jsx)(l_.In,{playTrailer:!ly.Ck}),(0,i.jsx)("div",{className:"h-0 visibility-hidden pointer-events-none opacity-0",children:"manga"===eh&&(0,i.jsx)(lP.fG,{country:"JP",forDiscoverHeader:!0})})]}),(0,i.jsx)(eB,{collectionList:$,unmatchedLocalFiles:ee,ignoredLocalFiles:el,unknownGroups:ea,isLoading:q,hasEntries:er,isStreamingOnly:es,isNakamaLibrary:eo,className:(0,en.cn)(((null==(A=ej[0])?void 0:A.type)==="discover-header"||(null==(L=ej[0])?void 0:L.type)==="anime-continue-watching-header")&&"!mt-[-4rem] !mb-[-1rem]")}),(0,i.jsxs)("div",{className:"text-center space-y-6 py-10",children:[(0,i.jsx)("h2",{children:"Your home screen is empty"}),!!(null==R||null==(I=R.settings)||null==(E=I.library)?void 0:E.libraryPath)&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(g.$n,{intent:"primary-glass",leftIcon:(0,i.jsx)(ll.CKj,{}),size:"xl",rounded:!0,onClick:()=>eN(!0),children:"Scan your anime library"})}),!(null==R||null==(M=R.settings)||null==(T=M.library)?void 0:T.libraryPath)&&X&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eF.i,{href:"/discover",className:"block",children:(0,i.jsx)(g.$n,{intent:"gray-glass",leftIcon:(0,i.jsx)(eg._rf,{}),size:"lg",rounded:!0,children:"Add series to your collection"})})}),!(null==R||null==(F=R.settings)||null==(D=F.library)?void 0:D.libraryPath)&&!X&&(0,i.jsxs)(i.Fragment,{children:["local"===eS&&(0,i.jsx)(g.$n,{intent:"gray-glass",leftIcon:(0,i.jsx)(lN.xVK,{className:"text-2xl"}),size:"lg",rounded:!0,onClick:()=>{ef(!0)},children:"Add currently watched series to the library"}),"stream"===eS&&(0,i.jsxs)("div",{className:"p-4 border w-fit mx-auto border-dashed rounded-xl",children:[(0,i.jsx)("p",{children:"No series are currently being watched"}),(0,i.jsx)("p",{className:"text-[--muted]",children:"Add series to your 'Currently watching' list to get started"})]})]})]}),(0,i.jsx)("h3",{children:"Trending Right Now"}),(0,i.jsx)(lk.tl,{}),(0,i.jsx)("div",{"data-home-screen-item-divider":!0,className:"h-8"}),(0,i.jsx)(ey,{emptyLibrary:!0,isNakamaLibrary:eo}),(0,i.jsx)(B.d,{unmatchedGroups:ei}),(0,i.jsx)(U.U,{unknownGroups:ea}),(0,i.jsx)(O,{files:el}),(0,i.jsx)(N,{})]}):(0,i.jsxs)("div",{"data-home-screen":!0,className:"contents",children:[(null==(t=ej[0])?void 0:t.type)==="discover-header"&&(0,i.jsxs)(y.Fragment,{children:[(0,i.jsx)(l_.In,{}),(0,i.jsxs)("div",{className:"h-0 visibility-hidden pointer-events-none opacity-0",children:["anime"===eh&&(0,i.jsx)(lk.tl,{}),"manga"===eh&&(0,i.jsx)(lP.fG,{country:"JP",forDiscoverHeader:!0})]})]}),(null==(r=ej[0])?void 0:r.type)==="anime-continue-watching-header"&&(0,i.jsx)(y.Fragment,{children:(0,i.jsx)(l3,{episodes:J})}),ed.libraryScreenBannerType===ez.H4.Dynamic&&(null==(s=ej[0])?void 0:s.type)==="manga-library"&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(lx.dx,{manga:(null==ec||null==(m=ec.lists)||null==(u=m.flatMap(e=>e.entries))||null==(d=u.flatMap(e=>null==e?void 0:e.media))?void 0:d.filter(Boolean))||[]})}),(0,i.jsx)("div",{className:(0,en.cn)("h-12 lg:hidden"),"data-library-toolbar-top-padding":!0}),(null==(h=ej[0])?void 0:h.type)!=="anime-continue-watching-header"&&(null==(p=ej[0])?void 0:p.type)==="anime-continue-watching"&&(0,i.jsx)("div",{className:(0,en.cn)("lg:h-16 hidden"),"data-library-toolbar-top-padding":!0}),ed.libraryScreenBannerType===ez.H4.Dynamic&&er&&((null==(x=ej[0])?void 0:x.type)==="anime-continue-watching"||(null==(v=ej[0])?void 0:v.type)==="manga-library")&&(0,i.jsx)("div",{className:(0,en.cn)("h-28",ed.hideTopNavbar&&"h-40"),"data-library-toolbar-top-padding":!0}),(0,i.jsx)(eB,{collectionList:$,unmatchedLocalFiles:ee,ignoredLocalFiles:el,unknownGroups:ea,isLoading:q,hasEntries:er,isStreamingOnly:es,isNakamaLibrary:eo,className:(0,en.cn)(((null==(f=ej[0])?void 0:f.type)==="discover-header"||(null==(j=ej[0])?void 0:j.type)==="anime-continue-watching-header")&&"!mt-[-4rem] !mb-[-1rem]")}),!!ed.libraryScreenCustomBannerImage&&ed.libraryScreenBannerType===ez.H4.Custom&&(null==(S=ej[0])?void 0:S.type)!=="discover-header"&&(null==(C=ej[0])?void 0:C.type)!=="anime-continue-watching-header"&&(0,i.jsx)("div",{"data-custom-library-banner-top-spacer":!0,className:(0,en.cn)("py-20",ed.hideTopNavbar&&"py-28")}),er&&ed.libraryScreenBannerType===ez.H4.Custom&&(null==(w=ej[0])?void 0:w.type)!=="discover-header"&&(null==(_=ej[0])?void 0:_.type)!=="anime-continue-watching-header"&&(0,i.jsx)(P.z,{isLibraryScreen:!0,isHomeScreen:!0}),er&&-1!==ej.findIndex(e=>"anime-continue-watching"===e.type)&&ed.libraryScreenBannerType===ez.H4.Dynamic&&(0,i.jsx)("div",{className:(0,en.cn)((null==(k=ej[0])?void 0:k.type)!=="anime-continue-watching"?"visibility-hidden pointer-events-none opacity-0 !mt-0":"contents !mt-0"),children:(0,i.jsx)(c.F,{list:J})}),!q&&(0,i.jsxs)(lf.N,{mode:"wait",children:["base"===eu&&(0,i.jsxs)(e3.f,{className:"relative 2xl:order-first pb-10 pt-4",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.25},children:[ej.filter(e=>"discover-header"!==e.type&&"anime-continue-watching-header"!==e.type).map((e,l)=>(0,i.jsxs)(y.Fragment,{children:[0!==l&&(null==e?void 0:e.type)!=="manga-library"&&(null==e?void 0:e.type)!=="anime-library"&&(null==e?void 0:e.type)!=="anime-continue-watching"&&"anime-library-stats"!==e.type&&(0,i.jsx)("div",{"data-home-screen-item-divider":l,className:"h-8"}),(0,i.jsx)(l7,{item:e,index:ej.findIndex(l=>l.id===e.id),libraryCollectionProps:{libraryGenres:Y,libraryCollectionList:$,filteredLibraryCollectionList:Z,isLoading:q,continueWatchingList:J,unmatchedLocalFiles:ee,ignoredLocalFiles:el,unmatchedGroups:ei,unknownGroups:ea,streamingMediaIds:et,hasEntries:er,isStreamingOnly:es,isNakamaLibrary:eo}})]},e.id)),(0,i.jsx)("div",{"data-home-screen-item-divider":!0,className:"h-8"})]},"base"),"detailed"===eu&&(0,i.jsx)(e3.f,{className:"relative 2xl:order-first pb-10 pt-4",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.25},children:(0,i.jsx)(li,{collectionList:$,continueWatchingList:J,isLoading:q,hasEntries:er,streamingMediaIds:et,isNakamaLibrary:eo})},"detailed")]}),(0,i.jsx)(ey,{isNakamaLibrary:eo}),(0,i.jsx)(B.d,{unmatchedGroups:ei}),(0,i.jsx)(U.U,{unknownGroups:ea}),(0,i.jsx)(O,{files:el}),(0,i.jsx)(N,{})]})}function l7(e){var l,n,t,s,o,c,d,u,m,h,g,p,x,b,y,v,f,j,N,S;let C,w,_,P=(0,a.c)(90),{item:A,index:L}=e,{libraryGenres:E,libraryCollectionList:I,filteredLibraryCollectionList:T,isLoading:M,continueWatchingList:D,streamingMediaIds:O,hasEntries:F,isNakamaLibrary:R}=e.libraryCollectionProps;(0,ez.Ky)();let z=K[A.type];e:{if(!z||!A){C=void 0;break e}if(!A.schemaVersion||A.schemaVersion!==z.schemaVersion){let e;P[0]!==A||P[1]!==z.schemaVersion?(e={...A,schemaVersion:z.schemaVersion,options:void 0},P[0]=A,P[1]=z.schemaVersion,P[2]=e):e=P[2],C=e;break e}C=A}let V=C,U=(null==V?void 0:V.type)==="local-anime-library-stats";P[3]!==U?(w={enabled:U},P[3]=U,P[4]=w):w=P[4];let{data:B}=(0,r.lD)(w);if(!z||!V){let e;return P[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{children:"Item not found"}),P[5]=e):e=P[5],e}if("centered-title"===V.type){let e,a=null==(l=V.options)?void 0:l.text,t=null==(n=V.options)?void 0:n.text;return P[6]!==a||P[7]!==t?(e=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("h2",{"data-home-screen-centered-title":a,className:"text-center text-3xl lg:text-4xl font-bold py-4",children:t})}),P[6]=a,P[7]=t,P[8]=e):e=P[8],e}if("anime-continue-watching"===V.type){let e,l=0===L;return P[9]!==D||P[10]!==M||P[11]!==l?(e=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(k.P,{episodes:D,isLoading:M,withTitle:l})}),P[9]=D,P[10]=M,P[11]=l,P[12]=e):e=P[12],e}if("anime-library"===V.type){let e,l=null==(t=V.options)?void 0:t.statuses,n=(null==(s=V.options)?void 0:s.layout)||"grid";return P[13]!==D||P[14]!==T||P[15]!==F||P[16]!==M||P[17]!==I||P[18]!==E||P[19]!==O||P[20]!==l||P[21]!==n?(e=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(lg.v,{genres:E,collectionList:I,filteredCollectionList:T,continueWatchingList:D,isLoading:M,hasEntries:F,streamingMediaIds:O,showStatuses:l,type:n})}),P[13]=D,P[14]=T,P[15]=F,P[16]=M,P[17]=I,P[18]=E,P[19]=O,P[20]=l,P[21]=n,P[22]=e):e=P[22],e}if("anime-carousel"===V.type){let l;return P[23]!==V||P[24]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(na,{libraryCollectionProps:e.libraryCollectionProps,item:V})}),P[23]=V,P[24]=e.libraryCollectionProps,P[25]=l):l=P[25],l}if("manga-carousel"===V.type){let l;return P[26]!==V||P[27]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(no,{libraryCollectionProps:e.libraryCollectionProps,item:V})}),P[26]=V,P[27]=e.libraryCollectionProps,P[28]=l):l=P[28],l}if("anime-schedule-calendar"===V.type){let l,n,a;return P[29]!==V||P[30]!==e.libraryCollectionProps?(l=(null==(o=V.options)?void 0:o.type)!=="global"&&(0,i.jsx)(nl,{libraryCollectionProps:e.libraryCollectionProps,item:V}),P[29]=V,P[30]=e.libraryCollectionProps,P[31]=l):l=P[31],P[32]!==V||P[33]!==e.libraryCollectionProps?(n=(null==(c=V.options)?void 0:c.type)==="global"&&(0,i.jsx)(nn,{libraryCollectionProps:e.libraryCollectionProps,item:V}),P[32]=V,P[33]=e.libraryCollectionProps,P[34]=n):n=P[34],P[35]!==l||P[36]!==n?(a=(0,i.jsxs)(i.Fragment,{children:[l,n]}),P[35]=l,P[36]=n,P[37]=a):a=P[37],a}if("library-upcoming-episodes"===V.type){let l;return P[38]!==V||P[39]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ne,{libraryCollectionProps:e.libraryCollectionProps,item:V})}),P[38]=V,P[39]=e.libraryCollectionProps,P[40]=l):l=P[40],l}if("discover-header"===V.type||"anime-continue-watching-header"===V.type)return null;if("aired-recently"===V.type){let e;return P[41]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(e3.f,{className:"px-4",children:(0,i.jsx)(lM.i,{})}),P[41]=e):e=P[41],e}if("manga-library"===V.type){let l;return P[42]!==L||P[43]!==V||P[44]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l9,{libraryCollectionProps:e.libraryCollectionProps,item:V,index:L})}),P[42]=L,P[43]=V,P[44]=e.libraryCollectionProps,P[45]=l):l=P[45],l}if("local-anime-library"===V.type){let l;return P[46]!==L||P[47]!==V||P[48]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l8,{libraryCollectionProps:e.libraryCollectionProps,item:V,index:L})}),P[46]=L,P[47]=V,P[48]=e.libraryCollectionProps,P[49]=l):l=P[49],l}if("local-anime-library-stats"===V.type){let e,l,n,a,t,r,s,o,c,C,w,_,k,A,L,E,I,T,M=R&&"lg:grid-cols-5";P[50]!==M?(e=(0,en.cn)("grid grid-cols-3 lg:grid-cols-6 gap-4 [&>div]:text-center [&>div>p]:text-[--muted] py-4",M),P[50]=M,P[51]=e):e=P[51],P[52]!==(null==B||null==(d=B.stats)?void 0:d.totalSize)||P[53]!==R?(l=!R&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null!=(y=null==B||null==(x=B.stats)?void 0:x.totalSize)?y:"-"}),(0,i.jsx)("p",{children:"Library"})]}),P[52]=null==B||null==(b=B.stats)?void 0:b.totalSize,P[53]=R,P[54]=l):l=P[54];let D=null!=(v=null==B||null==(u=B.stats)?void 0:u.totalFiles)?v:"-";P[55]!==D?(n=(0,i.jsx)("h3",{children:D}),P[55]=D,P[56]=n):n=P[56],P[57]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)("p",{children:"Files"}),P[57]=a):a=P[57],P[58]!==n?(t=(0,i.jsxs)("div",{children:[n,a]}),P[58]=n,P[59]=t):t=P[59];let O=null!=(f=null==B||null==(m=B.stats)?void 0:m.totalEntries)?f:"-";P[60]!==O?(r=(0,i.jsx)("h3",{children:O}),P[60]=O,P[61]=r):r=P[61],P[62]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)("p",{children:"Entries"}),P[62]=s):s=P[62],P[63]!==r?(o=(0,i.jsxs)("div",{children:[r,s]}),P[63]=r,P[64]=o):o=P[64];let F=null!=(j=null==B||null==(h=B.stats)?void 0:h.totalShows)?j:"-";P[65]!==F?(c=(0,i.jsx)("h3",{children:F}),P[65]=F,P[66]=c):c=P[66],P[67]===Symbol.for("react.memo_cache_sentinel")?(C=(0,i.jsx)("p",{children:"TV Shows"}),P[67]=C):C=P[67],P[68]!==c?(w=(0,i.jsxs)("div",{children:[c,C]}),P[68]=c,P[69]=w):w=P[69];let z=null!=(N=null==B||null==(g=B.stats)?void 0:g.totalMovies)?N:"-";P[70]!==z?(_=(0,i.jsx)("h3",{children:z}),P[70]=z,P[71]=_):_=P[71],P[72]===Symbol.for("react.memo_cache_sentinel")?(k=(0,i.jsx)("p",{children:"Movies"}),P[72]=k):k=P[72],P[73]!==_?(A=(0,i.jsxs)("div",{children:[_,k]}),P[73]=_,P[74]=A):A=P[74];let V=null!=(S=null==B||null==(p=B.stats)?void 0:p.totalSpecials)?S:"-";return P[75]!==V?(L=(0,i.jsx)("h3",{children:V}),P[75]=V,P[76]=L):L=P[76],P[77]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsx)("p",{children:"Specials"}),P[77]=E):E=P[77],P[78]!==L?(I=(0,i.jsxs)("div",{children:[L,E]}),P[78]=L,P[79]=I):I=P[79],P[80]!==o||P[81]!==w||P[82]!==A||P[83]!==I||P[84]!==e||P[85]!==l||P[86]!==t?(T=(0,i.jsx)(e3.f,{children:(0,i.jsxs)("div",{className:e,"data-detailed-library-view-stats-container":!0,children:[l,t,o,w,A,I]})}),P[80]=o,P[81]=w,P[82]=A,P[83]=I,P[84]=e,P[85]=l,P[86]=t,P[87]=T):T=P[87],T}return P[88]!==V.type?(_=(0,i.jsxs)("div",{children:["Item not found (",V.type,")"]}),P[88]=V.type,P[89]=_):_=P[89],_}function l8(e){var l,n;let t,r=(0,a.c)(8),s=(null==(n=e.item)||null==(l=n.options)?void 0:l.layout)||"grid";return r[0]!==e.libraryCollectionProps.continueWatchingList||r[1]!==e.libraryCollectionProps.hasEntries||r[2]!==e.libraryCollectionProps.isLoading||r[3]!==e.libraryCollectionProps.isNakamaLibrary||r[4]!==e.libraryCollectionProps.libraryCollectionList||r[5]!==e.libraryCollectionProps.streamingMediaIds||r[6]!==s?(t=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(li,{isHomeItem:!0,collectionList:e.libraryCollectionProps.libraryCollectionList,continueWatchingList:e.libraryCollectionProps.continueWatchingList,isLoading:e.libraryCollectionProps.isLoading,hasEntries:e.libraryCollectionProps.hasEntries,streamingMediaIds:e.libraryCollectionProps.streamingMediaIds,isNakamaLibrary:e.libraryCollectionProps.isNakamaLibrary,type:s})}),r[0]=e.libraryCollectionProps.continueWatchingList,r[1]=e.libraryCollectionProps.hasEntries,r[2]=e.libraryCollectionProps.isLoading,r[3]=e.libraryCollectionProps.isNakamaLibrary,r[4]=e.libraryCollectionProps.libraryCollectionList,r[5]=e.libraryCollectionProps.streamingMediaIds,r[6]=s,r[7]=t):t=r[7],t}function l9(e){var l,n;let t,r,s=(0,a.c)(10),{item:o,index:c}=e;(0,ez.Ky)();let{mangaCollection:d,filteredMangaCollection:u,mangaCollectionLoading:m,storedProviders:h,hasManga:g}=(0,lL.k)();if(!d||m){let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(lw.C,{}),s[0]=e):e=s[0],e}s[1]===Symbol.for("react.memo_cache_sentinel")?(t=[],s[1]=t):t=s[1];let p=null==(l=o.options)?void 0:l.statuses,x=(null==(n=o.options)?void 0:n.layout)||"grid",b=0===c;return s[2]!==u||s[3]!==g||s[4]!==d||s[5]!==h||s[6]!==p||s[7]!==x||s[8]!==b?(r=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(lE.D4,{collection:d,filteredCollection:u,genres:t,storedProviders:h,hasManga:g,showStatuses:p,type:x,withTitle:b})})}),s[2]=u,s[3]=g,s[4]=d,s[5]=h,s[6]=p,s[7]=x,s[8]=b,s[9]=r):r=s[9],r}function ne(e){let l,n=(0,a.c)(1),{libraryCollectionProps:t}=e,{hasEntries:r}=t;return r?(n[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)(e3.f,{className:"space-y-0 px-4",children:(0,i.jsx)(lT.K,{})}),n[0]=l):l=n[0],l):null}function nl(e){let l,n=(0,a.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)(e3.f,{className:"space-y-0 px-4 py-4",children:(0,i.jsx)(lI.ut,{})}),n[0]=l):l=n[0],l}function nn(e){var l,n,r,s,o,c,d,u;let m,h,g,p,x,b,y,v,f,j,N,S,C=(0,a.c)(36),w=new Date,_=(0,lv.f)(w,-14),k=(0,lv.f)(w,-7),P=(0,lv.f)(w,7),A=(0,lv.f)(w,14);C[0]===Symbol.for("react.memo_cache_sentinel")?(m={page:1,perPage:100,airingAt_lesser:Math.floor(k.getTime()/1e3),airingAt_greater:Math.floor(_.getTime()/1e3),notYetAired:!1,sort:["TIME"]},C[0]=m):m=C[0];let{data:L}=(0,t.h7)(m);C[1]===Symbol.for("react.memo_cache_sentinel")?(h={page:2,perPage:100,airingAt_lesser:Math.floor(k.getTime()/1e3),airingAt_greater:Math.floor(_.getTime()/1e3),notYetAired:!1,sort:["TIME"]},C[1]=h):h=C[1];let{data:E}=(0,t.h7)(h);C[2]===Symbol.for("react.memo_cache_sentinel")?(g={page:1,perPage:200,airingAt_lesser:Math.floor(w.getTime()/1e3),airingAt_greater:Math.floor(k.getTime()/1e3),notYetAired:!1,sort:["TIME"]},C[2]=g):g=C[2];let{data:I}=(0,t.h7)(g);C[3]===Symbol.for("react.memo_cache_sentinel")?(p={page:2,perPage:200,airingAt_lesser:Math.floor(w.getTime()/1e3),airingAt_greater:Math.floor(k.getTime()/1e3),notYetAired:!1,sort:["TIME"]},C[3]=p):p=C[3];let{data:T}=(0,t.h7)(p);C[4]===Symbol.for("react.memo_cache_sentinel")?(x={page:1,perPage:100,airingAt_lesser:Math.floor(P.getTime()/1e3),airingAt_greater:Math.floor(w.getTime()/1e3),notYetAired:!0,sort:["TIME"]},C[4]=x):x=C[4];let{data:M}=(0,t.h7)(x);C[5]===Symbol.for("react.memo_cache_sentinel")?(b={page:2,perPage:100,airingAt_lesser:Math.floor(P.getTime()/1e3),airingAt_greater:Math.floor(w.getTime()/1e3),notYetAired:!0,sort:["TIME"]},C[5]=b):b=C[5];let{data:D}=(0,t.h7)(b);C[6]===Symbol.for("react.memo_cache_sentinel")?(y={page:1,perPage:100,airingAt_lesser:Math.floor(A.getTime()/1e3),airingAt_greater:Math.floor(P.getTime()/1e3),notYetAired:!0,sort:["TIME"]},C[6]=y):y=C[6];let{data:O}=(0,t.h7)(y),F=Math.floor(A.getTime()/1e3);C[7]===Symbol.for("react.memo_cache_sentinel")?(v={page:2,perPage:100,airingAt_lesser:F,airingAt_greater:Math.floor(P.getTime()/1e3),notYetAired:!0,sort:["TIME"]},C[7]=v):v=C[7];let{data:R}=(0,t.h7)(v);C[8]===Symbol.for("react.memo_cache_sentinel")?(j=[],C[8]=j):j=C[8];let z=j;if(null==L||null==(l=L.Page)?void 0:l.airingSchedules){let e;C[9]!==L.Page.airingSchedules?(e=[...L.Page.airingSchedules],C[9]=L.Page.airingSchedules,C[10]=e):e=C[10],z=e}if(null==E||null==(n=E.Page)?void 0:n.airingSchedules){let e;C[11]!==z||C[12]!==E.Page.airingSchedules?(e=[...z,...E.Page.airingSchedules],C[11]=z,C[12]=E.Page.airingSchedules,C[13]=e):e=C[13],z=e}if(null==I||null==(r=I.Page)?void 0:r.airingSchedules){let e;C[14]!==z||C[15]!==I.Page.airingSchedules?(e=[...z,...I.Page.airingSchedules],C[14]=z,C[15]=I.Page.airingSchedules,C[16]=e):e=C[16],z=e}if(null==T||null==(s=T.Page)?void 0:s.airingSchedules){let e;C[17]!==z||C[18]!==T.Page.airingSchedules?(e=[...z,...T.Page.airingSchedules],C[17]=z,C[18]=T.Page.airingSchedules,C[19]=e):e=C[19],z=e}if(null==M||null==(o=M.Page)?void 0:o.airingSchedules){let e;C[20]!==z||C[21]!==M.Page.airingSchedules?(e=[...z,...M.Page.airingSchedules],C[20]=z,C[21]=M.Page.airingSchedules,C[22]=e):e=C[22],z=e}if(null==D||null==(c=D.Page)?void 0:c.airingSchedules){let e;C[23]!==z||C[24]!==D.Page.airingSchedules?(e=[...z,...D.Page.airingSchedules],C[23]=z,C[24]=D.Page.airingSchedules,C[25]=e):e=C[25],z=e}if(null==O||null==(d=O.Page)?void 0:d.airingSchedules){let e;C[26]!==z||C[27]!==O.Page.airingSchedules?(e=[...z,...O.Page.airingSchedules],C[26]=z,C[27]=O.Page.airingSchedules,C[28]=e):e=C[28],z=e}if(null==R||null==(u=R.Page)?void 0:u.airingSchedules){let e;C[29]!==z||C[30]!==R.Page.airingSchedules?(e=[...z,...R.Page.airingSchedules],C[29]=z,C[30]=R.Page.airingSchedules,C[31]=e):e=C[31],z=e}return C[32]!==z?(N=z.map(ni),C[32]=z,C[33]=N):N=C[33],f=N,C[34]!==f?(S=(0,i.jsx)(e3.f,{className:"space-y-0 px-4 py-4",children:(0,i.jsx)(lI.ut,{items:f},"home-screen")}),C[34]=f,C[35]=S):S=C[35],S}function ni(e){var l,n,i,a,t;let r=new Date(1e3*(e.airingAt||0)),s=r.toISOString(),o="".concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"));return{mediaId:e.media.id,title:e.media.title.userPreferred,time:o,dateTime:s,image:(null==(l=e.media)?void 0:l.bannerImage)||(null==(i=e.media)||null==(n=i.coverImage)?void 0:n.medium),episodeNumber:e.episode,isMovie:(null==(a=e.media)?void 0:a.format)==="MOVIE",isSeasonFinale:!!(null==(t=e.media)?void 0:t.episodes)&&e.media.episodes===e.episode}}function na(e){var l,n,r,s,o;let c,d,u,m,h,g,p,x=(0,a.c)(24),{item:b}=e,v=y.useRef(null),f=b.options;x[0]===Symbol.for("react.memo_cache_sentinel")?(c={once:!0},x[0]=c):c=x[0];let j=(0,lj.W)(v,c);x[1]!==f?(d=(null==f?void 0:f.sorting)?[f.sorting]:["SCORE_DESC"],x[1]=f,x[2]=d):d=x[2];let N=(null==f?void 0:f.season)||void 0,S=(null==f?void 0:f.year)?f.year:void 0,C=(null==f||null==(l=f.genres)?void 0:l.length)?null==f?void 0:f.genres:void 0,w=(null==f?void 0:f.format)||void 0;x[3]!==f?(u=(null==f||null==(n=f.status)?void 0:n.length)&&Array.isArray(f.status)?f.status:["RELEASING","FINISHED"],x[3]=f,x[4]=u):u=x[4];let _=(null==f?void 0:f.isAdult)||void 0,k=(null==f?void 0:f.countryOfOrigin)||void 0;x[5]!==d||x[6]!==N||x[7]!==S||x[8]!==C||x[9]!==w||x[10]!==u||x[11]!==_||x[12]!==k?(m={page:1,perPage:20,sort:d,season:N,seasonYear:S,genres:C,format:w,status:u,isAdult:_,countryOfOrigin:k},x[5]=d,x[6]=N,x[7]=S,x[8]=C,x[9]=w,x[10]=u,x[11]=_,x[12]=k,x[13]=m):m=x[13];let{data:P,isLoading:A}=(0,t.qN)(m,!!(null==f?void 0:f.name)&&j),L=(null==f?void 0:f.name)||"Anime Carousel";return x[14]!==L?(h=(0,i.jsx)("h2",{children:L}),x[14]=L,x[15]=h):h=x[15],x[16]!==P||x[17]!==j||x[18]!==A||x[19]!==b?(g=A||P||!j?(0,i.jsxs)(e4.FN,{className:"w-full max-w-full",gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!0,children:[(0,i.jsx)(e4.h1,{className:"-top-2"}),(0,i.jsx)(e4.Wk,{className:"px-6",children:P?null==P||null==(o=P.Page)||null==(s=o.media)||null==(r=s.filter(Boolean))?void 0:r.sort(ns).map(nr):[...Array(10).keys()].map(nt)})]}):(0,i.jsx)(nm,{item:b}),x[16]=P,x[17]=j,x[18]=A,x[19]=b,x[20]=g):g=x[20],x[21]!==h||x[22]!==g?(p=(0,i.jsxs)(e3.f,{className:"space-y-0 px-4",ref:v,children:[h,g]}),x[21]=h,x[22]=g,x[23]=p):p=x[23],p}function nt(e,l){return(0,i.jsx)(lC.m,{},l)}function nr(e){return(0,i.jsx)(e1.V,{media:e,showLibraryBadge:!0,containerClassName:"basis-[200px] md:basis-[250px] mx-2 mt-8 mb-0",showTrailer:!0,type:"anime"},e.id)}function ns(e,l){return l.meanScore-e.meanScore}function no(e){var l,n,t,r,o;let c,d,u,m,h,g,p,x=(0,a.c)(23),{item:b}=e,v=y.useRef(null),f=b.options;x[0]===Symbol.for("react.memo_cache_sentinel")?(c={once:!0},x[0]=c):c=x[0];let j=(0,lj.W)(v,c);x[1]!==f?(d=(null==f?void 0:f.sorting)?[f.sorting]:["SCORE_DESC"],x[1]=f,x[2]=d):d=x[2];let N=(null==f?void 0:f.year)?f.year:void 0,S=(null==f||null==(l=f.genres)?void 0:l.length)?null==f?void 0:f.genres:void 0,C=(null==f?void 0:f.format)||void 0;x[3]!==f?(u=(null==f||null==(n=f.status)?void 0:n.length)&&Array.isArray(f.status)?f.status:["RELEASING","FINISHED"],x[3]=f,x[4]=u):u=x[4];let w=(null==f?void 0:f.isAdult)||void 0,_=(null==f?void 0:f.countryOfOrigin)||void 0;x[5]!==d||x[6]!==N||x[7]!==S||x[8]!==C||x[9]!==u||x[10]!==w||x[11]!==_?(m={page:1,perPage:20,sort:d,year:N,genres:S,format:C,status:u,isAdult:w,countryOfOrigin:_},x[5]=d,x[6]=N,x[7]=S,x[8]=C,x[9]=u,x[10]=w,x[11]=_,x[12]=m):m=x[12];let{data:k,isLoading:P}=(0,s.cE)(m,!!(null==f?void 0:f.name)&&j),A=(null==f?void 0:f.name)||"Manga Carousel";return x[13]!==A?(h=(0,i.jsx)("h2",{children:A}),x[13]=A,x[14]=h):h=x[14],x[15]!==k||x[16]!==j||x[17]!==P||x[18]!==b?(g=P||k||!j?(0,i.jsxs)(e4.FN,{className:"w-full max-w-full",gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!0,children:[(0,i.jsx)(e4.h1,{className:"-top-2"}),(0,i.jsx)(e4.Wk,{className:"px-6",children:k?null==k||null==(o=k.Page)||null==(r=o.media)||null==(t=r.filter(Boolean))?void 0:t.sort(nu).map(nd):[...Array(10).keys()].map(nc)})]}):(0,i.jsx)(nm,{item:b}),x[15]=k,x[16]=j,x[17]=P,x[18]=b,x[19]=g):g=x[19],x[20]!==h||x[21]!==g?(p=(0,i.jsxs)(e3.f,{className:"space-y-0 px-4",ref:v,children:[h,g]}),x[20]=h,x[21]=g,x[22]=p):p=x[22],p}function nc(e,l){return(0,i.jsx)(lC.m,{},l)}function nd(e){return(0,i.jsx)(e1.V,{media:e,containerClassName:"basis-[200px] md:basis-[250px] mx-2 mt-8 mb-0",type:"manga"},e.id)}function nu(e,l){return l.meanScore-e.meanScore}function nm(e){let l,n=(0,a.c)(2),{item:t}=e,r=K[t.type],s=null==r?void 0:r.name;return n[0]!==s?(l=(0,i.jsx)(e3.f,{className:"rounded-xl bg-gray-900 border-2 border-dashed border-orange-400 p-4 !my-4",children:(0,i.jsxs)("p",{className:"text-sm font-medium text-gray-400",children:['Item "',s,'" cannot be displayed because it is missing some required options.']})}),n[0]=s,n[1]=l):l=n[1],l}let nh="force-static";function ng(){let e,l=(0,a.c)(1);return(0,ez.Ky)(),l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l6,{})}),l[0]=e):e=l[0],e}},71536:(e,l,n)=>{Promise.resolve().then(n.bind(n,68398))}},e=>{var l=l=>e(e.s=l);e.O(0,[7518,3873,5271,3380,844,9204,6446,2150,6711,585,5479,4506,5897,8087,5760,3603,7753,2362,4613,512,9910,8429,7949,8481,2202,4777,6079,7825,1805,5290,4762,4218,4791,1626,6905,9986,1597,7528,5045,9690,9325,9360,1334,1298,5340,4101,1029,4872,1078,1683,5334,6862,4033,9484,9832,5565,2975,7363,5667,8672,6803,615,2701,9033,8441,6891,7358],()=>l(71536)),_N_E=e.O()}]);