(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9981],{8816:(e,l,n)=>{"use strict";n.d(l,{K:()=>h});var i=n(95155),a=n(42094),t=n(13029),r=n(96826),s=n(244),o=n(6708),c=n(44608),d=n(80919),u=n(6066),m=n(12115);function h(){let e=(0,r.v1)(),l=(0,u.useRouter)(),{data:n}=(0,a.u)(),h=m.useMemo(()=>{var l,i,a,t,r,s;let o=(null==(l=(null!=(s=null==n||null==(a=n.MediaListCollection)||null==(i=a.lists)?void 0:i.filter(e=>"DROPPED"!==e.status).map(e=>null==e?void 0:e.entries).flat())?s:[]).map(e=>null==e?void 0:e.media))?void 0:l.filter(Boolean)).filter(e=>{var l;return!!(null==(l=e.nextAiringEpisode)?void 0:l.episode)}).sort((e,l)=>e.nextAiringEpisode.timeUntilAiring-l.nextAiringEpisode.timeUntilAiring);return(null==e||null==(r=e.settings)||null==(t=r.anilist)?void 0:t.enableAdultContent)?o:o.filter(e=>!e.isAdult)},[n]);return(null==h?void 0:h.length)?(0,i.jsx)(s.KZ,{children:h.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"Upcoming episodes"}),(0,i.jsx)("p",{className:"text-[--muted]",children:"Based on your anime list"})]}),(0,i.jsxs)(o.FN,{className:"w-full max-w-full",gap:"md",opts:{align:"start"},autoScroll:!0,children:[(0,i.jsx)(o.h1,{}),(0,i.jsx)(o.Wk,{children:h.map(e=>{var n,a,r,s,u,m;return(0,i.jsx)(o.A7,{className:"md:basis-1/2 lg:basis-1/3 2xl:basis-1/4 min-[2000px]:basis-1/5",children:(0,i.jsx)(t.U,{image:e.bannerImage||(null==(n=e.coverImage)?void 0:n.large),topTitle:null==(a=e.title)?void 0:a.userPreferred,title:"Episode ".concat(null==(r=e.nextAiringEpisode)?void 0:r.episode),meta:(0,c.m)((0,d.p)(new Date,null==(s=e.nextAiringEpisode)?void 0:s.timeUntilAiring),{addSuffix:!0}),imageClass:"opacity-50",actionIcon:null,onClick:()=>{l.push("/entry?id=".concat(e.id))},anime:{id:e.id,image:null==(u=e.coverImage)?void 0:u.large,title:null==(m=e.title)?void 0:m.userPreferred}},e.id)},e.id)})})]})]})}):null}},68398:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>no,dynamic:()=>ns});var i=n(95155),a=n(19749),t=n(42094),r=n(68205),s=n(38900),o=n(86726),c=n(64629),d=n(9478),u=n(83563),m=n(75733),h=n(244),p=n(84127),g=n(76049),x=n(42500),b=n(29724),y=n(12115),v=n(70376),f=n(69554);let j=(0,x.eU)(!1);function N(){let e,l,n,t,r,s,o,c,x,N,A,_,L,P,E,I,D,T=(0,a.c)(46),[M,F]=(0,b.fp)(j),{mutate:O,isPending:R}=(0,d.pZ)();T[0]!==O||T[1]!==F?(e=function(){O({action:"lock"},{onSuccess:()=>{F(!1),f.oR.success("Files locked")}})},T[0]=O,T[1]=F,T[2]=e):e=T[2];let z=e;T[3]!==O||T[4]!==F?(l=function(){O({action:"unlock"},{onSuccess:()=>{F(!1),f.oR.success("Files unlocked")}})},T[3]=O,T[4]=F,T[5]=l):l=T[5];let V=l,{mutate:U,isPending:B}=(0,d.uO)();T[6]!==U||T[7]!==F?(n=function(){U(void 0,{onSuccess:()=>{F(!1)}})},T[6]=U,T[7]=F,T[8]=n):n=T[8];let G=n;T[9]!==G?(t={title:"Remove empty directories",description:"This action will remove all empty directories in the library. Are you sure you want to continue?",onConfirm:()=>{G()}},T[9]=G,T[10]=t):t=T[10];let H=(0,m.J)(t),{inject:K,remove:W}=(0,u.H)();T[11]!==z||T[12]!==V||T[13]!==K||T[14]!==W?(r=()=>(K("anime-library-bulk-actions",{priority:1,items:[{id:"lock-files",value:"lock",heading:"Library",render:k,onSelect:e=>{z()}},{id:"unlock-files",value:"unlock",heading:"Library",render:S,onSelect:e=>{V()}}],filter:w,shouldShow:C,showBasedOnInput:"startsWith"}),()=>W("anime-library-bulk-actions")),T[11]=z,T[12]=V,T[13]=K,T[14]=W,T[15]=r):r=T[15],T[16]===Symbol.for("react.memo_cache_sentinel")?(s=[],T[16]=s):s=T[16],y.useEffect(r,s),T[17]!==F?(o=()=>F(!1),T[17]=F,T[18]=o):o=T[18],T[19]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(v.E2M,{className:"text-2xl"}),T[19]=c):c=T[19];let X=R||B;T[20]!==z||T[21]!==X?(x=(0,i.jsx)(p.$n,{leftIcon:c,intent:"gray-outline",className:"w-full",disabled:X,onClick:z,children:"Lock all files"}),T[20]=z,T[21]=X,T[22]=x):x=T[22],T[23]===Symbol.for("react.memo_cache_sentinel")?(N=(0,i.jsx)(v.iXN,{className:"text-2xl"}),T[23]=N):N=T[23];let Z=R||B;return T[24]!==V||T[25]!==Z?(A=(0,i.jsx)(p.$n,{leftIcon:N,intent:"gray-outline",className:"w-full",disabled:Z,onClick:V,children:"Unlock all files"}),T[24]=V,T[25]=Z,T[26]=A):A=T[26],T[27]!==A||T[28]!==x?(_=(0,i.jsxs)("div",{className:"flex gap-2 flex-col md:flex-row",children:[x,A]}),T[27]=A,T[28]=x,T[29]=_):_=T[29],T[30]!==H?(L=()=>H.open(),T[30]=H,T[31]=L):L=T[31],T[32]!==R||T[33]!==B||T[34]!==L?(P=(0,i.jsx)(p.$n,{intent:"gray-outline",className:"w-full",disabled:R,loading:B,onClick:L,children:"Remove empty directories"}),T[32]=R,T[33]=B,T[34]=L,T[35]=P):P=T[35],T[36]!==_||T[37]!==P?(E=(0,i.jsxs)(h.KZ,{spacing:"sm",children:[_,P]}),T[36]=_,T[37]=P,T[38]=E):E=T[38],T[39]!==H?(I=(0,i.jsx)(m.K,{...H}),T[39]=H,T[40]=I):I=T[40],T[41]!==M||T[42]!==E||T[43]!==I||T[44]!==o?(D=(0,i.jsxs)(g.a,{open:M,onOpenChange:o,title:"Bulk actions",contentClass:"space-y-4",children:[E,I]}),T[41]=M,T[42]=E,T[43]=I,T[44]=o,T[45]=D):D=T[45],D}function C(e){let{ctx:l}=e;return"/"===l.router.pathname}function w(e){let{item:l,input:n}=e;return!n||l.value.toLowerCase().includes(n.toLowerCase())}function S(){return(0,i.jsx)("p",{children:"Unlock all files"})}function k(){return(0,i.jsx)("p",{children:"Lock all files"})}var A=n(86531),_=n(1382),L=n(58092),P=n(78106),E=n(63352),I=n(15388),D=n(12556),T=n(80893);let M=(0,x.eU)(!1);function F(e){let l,n,t,r,s,o,c,u,m,g,x=(0,a.c)(26),{files:v}=e,[f,j]=(0,b.fp)(M);(0,L.E)();let{mutate:N,isPending:C}=(0,d.bU)();x[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],x[0]=l):l=x[0];let[w,S]=y.useState(l);x[1]!==v?(n=()=>{var e;S(null!=(e=null==v?void 0:v.map(z))?e:[])},t=[v],x[1]=v,x[2]=n,x[3]=t):(n=x[2],t=x[3]),y.useLayoutEffect(n,t),x[4]!==w||x[5]!==N?(r=function(){w.length>0&&N({paths:w,action:"unignore"},{onSuccess:R})},x[4]=w,x[5]=N,x[6]=r):r=x[6];let k=r;return x[7]!==j?(s=()=>j(!1),x[7]=j,x[8]=s):s=x[8],x[9]!==v.length||x[10]!==k||x[11]!==C?(o=v.length>0&&(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,i.jsx)("div",{className:"flex flex-1"}),(0,i.jsx)(p.$n,{leftIcon:(0,i.jsx)(T.dxg,{className:"text-lg"}),intent:"white",size:"sm",rounded:!0,loading:C,onClick:k,children:"Un-ignore selection"})]}),x[9]=v.length,x[10]=k,x[11]=C,x[12]=o):o=x[12],x[13]!==v.length?(c=0===v.length&&(0,i.jsx)(P.D,{title:null,children:"No ignored files"}),x[13]=v.length,x[14]=c):c=x[14],x[15]!==v||x[16]!==w?(u=v.length>0&&(0,i.jsxs)("div",{className:"bg-gray-950 border p-2 px-2 divide-y divide-[--border] rounded-[--radius-md] max-h-[85vh] max-w-full overflow-x-auto overflow-y-auto text-sm",children:[(0,i.jsx)("div",{className:"p-2",children:(0,i.jsx)(E.Sc,{label:"Select all files",value:w.length===(null==v?void 0:v.length)||0!==w.length&&"indeterminate",onValueChange:e=>{"boolean"==typeof e&&S(e=>{var l;return e.length===(null==v?void 0:v.length)?[]:null!=(l=null==v?void 0:v.map(O))?l:[]})},fieldClass:"w-[fit-content]"})}),v.map((e,l)=>(0,i.jsx)("div",{className:"p-2 ",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)(E.Sc,{label:"".concat(D.V.basename(e.path)),value:w.includes(e.path),onValueChange:l=>{"boolean"==typeof l&&S(n=>l?[...n,e.path]:n.filter(l=>l!==e.path))},fieldClass:"w-[fit-content]"})})},"".concat(e.path,"-").concat(l)))]}),x[15]=v,x[16]=w,x[17]=u):u=x[17],x[18]!==o||x[19]!==c||x[20]!==u?(m=(0,i.jsxs)(h.KZ,{className:"mt-4",children:[o,c,u]}),x[18]=o,x[19]=c,x[20]=u,x[21]=m):m=x[21],x[22]!==f||x[23]!==s||x[24]!==m?(g=(0,i.jsx)(I._s,{open:f,onOpenChange:s,size:"xl",title:"Ignored files",children:m}),x[22]=f,x[23]=s,x[24]=m,x[25]=g):g=x[25],g}function O(e){return e.path}function R(){f.oR.success("Files un-ignored")}function z(e){return e.path}var V=n(29648),U=n(97447),B=n(92952),G=n(62394);let H=[{id:"anime-continue-watching",type:"anime-continue-watching",schemaVersion:1},{id:"anime-library",type:"anime-library",schemaVersion:1,options:{statuses:["CURRENT","PAUSED","PLANNING","COMPLETED","DROPPED"],layout:"grid"}}],K=[{label:"Name",type:"text",name:"name"},{label:"Sorting",type:"select",name:"sorting",options:[{label:"Popular",value:"POPULARITY_DESC"},{label:"Trending",value:"TRENDING_DESC"},{label:"Romaji Title (A-Z)",value:"TITLE_ROMAJI_ASC"},{label:"Romaji Title (Z-A)",value:"TITLE_ROMAJI_DESC"},{label:"English title (A-Z)",value:"TITLE_ENGLISH_ASC"},{label:"English title (Z-A)",value:"TITLE_ENGLISH_DESC"},{label:"Score (0-10)",value:"SCORE"},{label:"Score (10-0)",value:"SCORE_DESC"}]},{label:"Status",type:"multi-select",name:"status",options:[{label:"Releasing",value:"RELEASING"},{label:"Finished",value:"FINISHED"},{label:"Not yet released",value:"NOT_YET_RELEASED"}]},{label:"Format",type:"select",name:"format",options:[{label:"TV",value:"TV"},{label:"Movie",value:"MOVIE"},{label:"OVA",value:"OVA"},{label:"ONA",value:"ONA"},{label:"Special",value:"SPECIAL"}]},{label:"Genres",type:"multi-select",options:G.mY.map(e=>({value:e,label:e})),name:"genres"},{label:"Season",type:"select",name:"season",options:[{value:"WINTER",label:"Winter"},{value:"SPRING",label:"Spring"},{value:"SUMMER",label:"Summer"},{value:"FALL",label:"Fall"}]},{label:"Year",type:"number",name:"year",min:0,max:2100},{label:"Country of Origin",type:"select",name:"countryOfOrigin",options:G.Mm}],W={"centered-title":{name:"Centered title",kind:["row"],schemaVersion:1,description:"Display a centered title text.",options:[{label:"Text",type:"text",name:"text"}]},"anime-continue-watching":{name:"Continue Watching",kind:["row","header"],schemaVersion:1,description:"Display a list of episodes you are currently watching."},"anime-continue-watching-header":{name:"Continue Watching Header",kind:["header"],schemaVersion:1,description:"Display a header with a carousel of anime you are currently watching."},"anime-library":{name:"Anime Library",kind:["row"],schemaVersion:2,description:"Display anime you have in your library by status.",options:[{label:"Statuses",name:"statuses",type:"multi-select",options:[{value:"CURRENT",label:"Currently Watching"},{value:"PAUSED",label:"Paused"},{value:"PLANNING",label:"Planning"},{value:"COMPLETED",label:"Completed"},{value:"DROPPED",label:"Dropped"}]},{label:"Layout",name:"layout",type:"select",options:[{label:"Grid",value:"grid"},{label:"Carousel",value:"carousel"}]}]},"local-anime-library":{name:"Local Anime Library",kind:["row"],schemaVersion:2,description:"Display a complete grid of anime you have in your local library.",options:[{label:"Layout",name:"layout",type:"select",options:[{label:"Grid",value:"grid"},{label:"Carousel",value:"carousel"}]}]},"library-upcoming-episodes":{name:"Upcoming Library Episodes",kind:["row"],schemaVersion:1,description:"Display a carousel of upcoming episodes from anime you have in your library."},"aired-recently":{name:"Aired Recently (Global)",kind:["row"],schemaVersion:1,description:"Display a carousel of anime episodes that aired recently."},"anime-schedule-calendar":{name:"Anime Schedule Calendar",kind:["row"],schemaVersion:1,description:"Display a calendar of anime episodes based on their airing schedule."},"local-anime-library-stats":{name:"Local Anime Library Stats",kind:["row"],schemaVersion:1,description:"Display the stats for your local anime library."},"discover-header":{name:"Discover Header",kind:["header"],schemaVersion:1,description:"Display a header with a carousel of anime that are trending."},"anime-carousel":{name:"Anime Carousel",kind:["row"],schemaVersion:3,options:K,description:"Display a carousel of anime based on the selected options."},"manga-carousel":{name:"Manga Carousel",kind:["row"],schemaVersion:1,description:"Display a carousel of manga based on the selected options.",options:K.map(e=>"format"===e.name?{...e,options:[{label:"Manga",value:"MANGA"},{label:"One Shot",value:"ONE_SHOT"}]}:e)},"manga-library":{name:"Manga Library",kind:["row","header"],schemaVersion:2,description:"Display a list of manga you have in your library by status.",options:[{label:"Statuses",name:"statuses",type:"multi-select",options:[{value:"CURRENT",label:"Currently Reading"},{value:"PAUSED",label:"Paused"}]},{label:"Layout",name:"layout",type:"select",options:[{label:"Grid",value:"grid"},{label:"Carousel",value:"carousel"}]}]}},X=Object.keys(W);var Z=n(74889),$=n(98802),Y=n(7013),q=n(55014),Q=n(96826),J=n(26603),ee=n(74907),el=n(24038),en=n(91360),ei=n(2091),ea=n(76136),et=n(52885),er=n(30033),es=n(53712),eo=n(1925),ec=n(98317),ed=n(76445),eu=n(63981),em=n(46278),eh=n(38628),ep=n(43994),eg=n(41452);let ex=(0,x.eU)(!1),eb={"anime-continue-watching":ep.Ubi,"anime-continue-watching-header":ep.Ubi,"anime-library":eg.wHW,"local-anime-library":eh.yPD,"library-upcoming-episodes":ep.wr3,"aired-recently":ep.CZu,"anime-schedule-calendar":ep.IdP,"local-anime-library-stats":v.veA,"discover-header":ep.Gd$,"anime-carousel":T.XL_,"manga-carousel":T.XL_,"manga-continue-reading":ep.Z5q,"manga-library":ep.Z5q,"centered-title":ep.WYS};function ey(e){var l,n,a,t;let{emptyLibrary:r,isNakamaLibrary:s}=e,c=(0,Q.v1)(),[d,u]=(0,b.fp)(ex),[m,h]=y.useState(null),{data:p,isLoading:x}=(0,o.bN)(),{mutate:j,isPending:N}=(0,o.sA)(),[C,w]=y.useState(p||H),S=X.filter(e=>"anime-carousel"===e||"manga-carousel"===e||"centered-title"===e||!C.some(l=>l.type===e)),k=y.useRef(null);y.useEffect(()=>{let e=p||H;return w(e),k.current&&(clearTimeout(k.current),k.current=null),k.current=setTimeout(()=>{let l=_(C);l.length!==e.length&&(w(l),j({items:l},{onSuccess:()=>{console.log("Home items updated")}}))},500),()=>{k.current&&(clearTimeout(k.current),k.current=null)}},[p]);let A=y.useCallback(e=>{let{active:l,over:n}=e;if(l.id!==(null==n?void 0:n.id)){let e=C.findIndex(e=>e.id===l.id),i=C.findIndex(e=>e.id===(null==n?void 0:n.id)),a=_((0,ed.be)(C,e,i));w(a),j({items:a},{onSuccess:()=>{}})}},[C,j]);function _(e){let l=e.filter(e=>!!W[e.type]);return l.map(e=>({...e,schemaVersion:W[e.type].schemaVersion}))}let L=e=>{let l=_([...C,{id:(0,J.gZ)(),type:e,schemaVersion:W[e].schemaVersion}]);w(l),j({items:l},{onSuccess:()=>{f.oR.success("Home item added")}})},P=e=>{let l=_(C.filter(l=>l.id!==e));w(l),j({items:l},{onSuccess:()=>{f.oR.success("Home item removed")}})},E=(null==c||null==(l=c.torrentstreamSettings)?void 0:l.includeInLibrary)||(null==c||null==(n=c.debridSettings)?void 0:n.includeDebridStreamInLibrary)||(null==c||null==(t=c.settings)||null==(a=t.library)?void 0:a.includeOnlineStreamingInLibrary)?"stream":"local",{mutateAsync:I,isPending:D}=(0,Y.Ok)(),{mutateAsync:T,isPending:M}=(0,q.c3)(),{mutateAsync:F,isPending:O}=(0,$.wO)(),R=(0,em.jE)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.a,{open:d,onOpenChange:u,title:(0,i.jsxs)("div",{className:"flex items-center gap-2 w-full justify-center",children:[(0,i.jsx)(eh.M14,{className:"size-5"}),"Home ",(0,i.jsx)(ee.q,{className:"ml-0 mt-0.5"})]}),contentClass:"max-w-5xl bg-gray-950 bg-opacity-80 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none sm:rounded-3xl",overlayClass:"bg-gray-950/70 backdrop-blur-sm",children:[(0,i.jsx)(el.Z,{variant:"classic",spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01,className:"opacity-50 !mt-0"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,i.jsx)(ep.Ubi,{className:"size-5"}),(0,i.jsx)("h4",{className:"text-lg font-semibold",children:"Anime Library"})]}),(0,i.jsx)(et.z,{value:E,onValueChange:e=>{(async()=>{var l;await Promise.all([I({...null==c?void 0:c.settings,library:{...null==c||null==(l=c.settings)?void 0:l.library,includeOnlineStreamingInLibrary:"stream"===e}}),T({settings:{...null==c?void 0:c.torrentstreamSettings,includeInLibrary:"stream"===e}}),F({settings:{...null==c?void 0:c.debridSettings,includeDebridStreamInLibrary:"stream"===e}})]),await R.invalidateQueries({queryKey:[Z.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await R.invalidateQueries({queryKey:[Z.S.ANIME_ENTRIES.GetMissingEpisodes.key]})})()},disabled:D||M||O,options:[{label:"Local anime only",value:"local"},{label:"Local anime + Streaming",value:"stream"}],itemClass:(0,en.cn)("border-transparent absolute top-2 right-2 bg-transparent dark:bg-transparent dark:data-[state=unchecked]:bg-transparent","data-[state=unchecked]:bg-transparent data-[state=unchecked]:hover:bg-transparent dark:data-[state=unchecked]:hover:bg-transparent","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent"),stackClass:"space-y-0 flex flex-row gap-2",itemIndicatorClass:"hidden",itemLabelClass:"font-normal tracking-wide line-clamp-1 truncate flex flex-col items-center data-[state=checked]:text-[--gray] cursor-pointer",itemContainerClass:(0,en.cn)("items-start cursor-pointer transition border-transparent rounded-[--radius] py-1.5 px-3 w-full","hover:bg-[--subtle] dark:bg-gray-900","data-[state=checked]:bg-white dark:data-[state=unchecked]:hover:bg-gray-800 dark:data-[state=checked]:bg-gray-900","focus:ring-2 ring-transparent dark:ring-transparent outline-none ring-offset-1 ring-offset-[--background] focus-within:ring-2 transition","border border-transparent data-[state=checked]:border-gray-500 data-[state=checked]:ring-offset-0")}),(0,i.jsx)("p",{className:"text-sm text-[--muted] pt-4",children:"local"===E?"Only anime in your local library will be displayed":"All anime in your currently watching list will be included in the library"})]}),(0,i.jsxs)("div",{className:(0,en.cn)(),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,i.jsx)(ep.hXO,{className:"size-5"}),(0,i.jsx)("h4",{className:"text-lg font-semibold",children:"Home Layout"})]}),x?(0,i.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,i.jsx)(ei.kt,{})}):(0,i.jsx)(eo.Mp,{modifiers:[ec.FN],onDragEnd:A,children:(0,i.jsx)(ed.gB,{items:C.map(e=>e.id),strategy:ed._G,children:(0,i.jsx)("div",{className:"space-y-2 bg-gray-900/30 rounded-xl p-4 border border-gray-800",children:0===C.length?(0,i.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No items added yet. Add some items below to customize your home screen."}):C.map((e,l)=>(0,i.jsx)(ev,{item:e,index:l,onRemove:P,onEditOptions:h,isUpdating:N},e.id))})})})]}),(0,i.jsxs)("div",{className:(0,en.cn)(),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,i.jsx)(v.Ca6,{className:"size-5"}),(0,i.jsx)("h4",{className:"text-lg font-semibold",children:"Available Items"})]}),0===S.length?(0,i.jsx)("div",{className:"text-center py-6 text-gray-400",children:"All available items have been added to your home screen."}):(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.toSorted((e,l)=>W[e].name.localeCompare(W[l].name)).map(e=>(0,i.jsx)(ew,{id:e,type:e,onAdd:L,isUpdating:N},e))})]})]})]}),m&&(0,i.jsx)(ek,{id:m,item:C.find(e=>e.id===m),isOpen:!!m,onClose:()=>h(null),onSave:(e,l)=>{let n=_(C.map(n=>n.id===e?{...n,options:l}:n));w(n),j({items:n},{onSuccess:()=>{f.oR.success("Home layout updated"),h(null)}})},isUpdating:N})]})}function ev(e){var l,n,t,r,s,o,c,d,u;let m,h,g,x,b,y,f,j,N,C,w,S,k,A,_,L,P=(0,a.c)(50),{item:E,onRemove:I,onEditOptions:D,isUpdating:T,index:M}=e;P[0]!==E.id?(m={id:E.id},P[0]=E.id,P[1]=m):m=P[1];let{attributes:F,listeners:O,setNodeRef:R,transform:z,transition:V}=(0,ed.gl)(m);P[2]!==z?(h=eu.Ks.Transform.toString(z?{...z,scaleY:1}:null),P[2]=z,P[3]=h):h=P[3],P[4]!==h||P[5]!==V?(g={transform:h,transition:V},P[4]=h,P[5]=V,P[6]=g):g=P[6];let U=g,B=W[E.type],G=eb[E.type]||eh.M14;if(!B)return null;let H=1===B.kind.length&&"header"===B.kind[0]&&0!==M&&"opacity-50";P[7]!==H?(x=(0,en.cn)("flex items-center gap-3 p-3 bg-gray-800/50 rounded-xl border border-gray-700 hover:border-gray-600 transition-colors cursor-move",H),P[7]=H,P[8]=x):x=P[8],P[9]!==G?(b=(0,i.jsx)("div",{className:"p-2 bg-gray-700/50 rounded-lg",children:(0,i.jsx)(G,{className:"size-5 text-gray-300"})}),P[9]=G,P[10]=b):b=P[10];let K=!!(null==(l=E.options)?void 0:l.name)&&': "'.concat(E.options.name,'"'),X="centered-title"===E.type&&(null==(n=E.options)?void 0:n.text)&&': "'.concat(E.options.text,'"');return P[11]!==B.name||P[12]!==K||P[13]!==X?(y=(0,i.jsxs)("div",{className:"font-medium text-white",children:[B.name,K,X]}),P[11]=B.name,P[12]=K,P[13]=X,P[14]=y):y=P[14],P[15]!==B.description?(f=(0,i.jsx)("p",{className:"text-xs text-[--muted] line-clamp-1",children:B.description}),P[15]=B.description,P[16]=f):f=P[16],P[17]!==B.kind?(j=B.kind.map(eC).join(", "),P[17]=B.kind,P[18]=j):j=P[18],P[19]!==j?(N=(0,i.jsx)("div",{className:"text-sm text-gray-400",children:j}),P[19]=j,P[20]=N):N=P[20],P[21]!==f||P[22]!==N||P[23]!==y?(C=(0,i.jsxs)("div",{className:"flex-1",children:[y,f,N]}),P[21]=f,P[22]=N,P[23]=y,P[24]=C):C=P[24],P[25]!==B.options||P[26]!==T||P[27]!==E.id||P[28]!==(null==(r=E.options)||null==(t=r.name)?void 0:t.length)||P[29]!==D?(w=B.options&&(0,i.jsx)(p.K0,{intent:"gray-subtle",size:"sm",onClick:()=>D(E.id),disabled:T,className:(0,en.cn)("hover:bg-blue-500/20 hover:text-blue-400",(null==(s=B.options)?void 0:s.find(eN))&&!(null==(c=E.options)||null==(o=c.name)?void 0:o.length)&&"bg-fuchsia-600 animate-bounce"),icon:(0,i.jsx)(v.nMM,{className:"size-4"}),onPointerDown:ej}),P[25]=B.options,P[26]=T,P[27]=E.id,P[28]=null==(u=E.options)||null==(d=u.name)?void 0:d.length,P[29]=D,P[30]=w):w=P[30],P[31]!==E.id||P[32]!==I?(S=()=>I(E.id),P[31]=E.id,P[32]=I,P[33]=S):S=P[33],P[34]===Symbol.for("react.memo_cache_sentinel")?(k=(0,i.jsx)(v.id1,{className:"size-4"}),P[34]=k):k=P[34],P[35]!==T||P[36]!==S?(A=(0,i.jsx)(p.K0,{intent:"gray-subtle",size:"sm",onClick:S,disabled:T,className:"hover:bg-red-500/20 hover:text-red-400",icon:k,onPointerDown:ef}),P[35]=T,P[36]=S,P[37]=A):A=P[37],P[38]!==w||P[39]!==A?(_=(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[w,A]}),P[38]=w,P[39]=A,P[40]=_):_=P[40],P[41]!==F||P[42]!==O||P[43]!==R||P[44]!==U||P[45]!==C||P[46]!==_||P[47]!==x||P[48]!==b?(L=(0,i.jsxs)("div",{ref:R,style:U,...F,...O,className:x,children:[b,C,_]}),P[41]=F,P[42]=O,P[43]=R,P[44]=U,P[45]=C,P[46]=_,P[47]=x,P[48]=b,P[49]=L):L=P[49],L}function ef(e){return e.stopPropagation()}function ej(e){return e.stopPropagation()}function eN(e){return"name"===e.name}function eC(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ew(e){let l,n,t,r,s,o,c,d,u,m,h=(0,a.c)(25),{type:g,onAdd:x,isUpdating:b}=e,y=W[g],f=eb[g]||eh.M14;return y?(h[0]!==f?(l=(0,i.jsx)("div",{className:"p-2 bg-gray-800/50 rounded-lg group-hover:bg-gray-700/50 transition-colors",children:(0,i.jsx)(f,{className:"size-5 text-gray-400 group-hover:text-gray-300 transition-colors"})}),h[0]=f,h[1]=l):l=h[1],h[2]!==y.name?(n=(0,i.jsx)("div",{className:"font-medium text-white",children:y.name}),h[2]=y.name,h[3]=n):n=h[3],h[4]!==y.description?(t=(0,i.jsx)("p",{className:"text-xs text-[--muted]",children:y.description}),h[4]=y.description,h[5]=t):t=h[5],h[6]!==y.kind?(r=y.kind.map(eS).join(", "),h[6]=y.kind,h[7]=r):r=h[7],h[8]!==r?(s=(0,i.jsx)("div",{className:"text-sm text-gray-400",children:r}),h[8]=r,h[9]=s):s=h[9],h[10]!==n||h[11]!==t||h[12]!==s?(o=(0,i.jsxs)("div",{className:"flex-1",children:[n,t,s]}),h[10]=n,h[11]=t,h[12]=s,h[13]=o):o=h[13],h[14]!==x||h[15]!==g?(c=()=>x(g),h[14]=x,h[15]=g,h[16]=c):c=h[16],h[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)(v.Ca6,{}),h[17]=d):d=h[17],h[18]!==b||h[19]!==c?(u=(0,i.jsx)(p.$n,{intent:"primary-subtle",size:"sm",onClick:c,disabled:b,leftIcon:d,children:"Add"}),h[18]=b,h[19]=c,h[20]=u):u=h[20],h[21]!==l||h[22]!==o||h[23]!==u?(m=(0,i.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-900/30 rounded-xl border border-gray-800 hover:border-gray-700 transition-colors group",children:[l,o,u]}),h[21]=l,h[22]=o,h[23]=u,h[24]=m):m=h[24],m):null}function eS(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ek(e){let l,n,t,r,s,o,c,d,u,m,h,x=(0,a.c)(26),{id:b,item:f,isOpen:j,onClose:N,onSave:C,isUpdating:w}=e,S=W[f.type];x[0]!==f.options?(l=f.options||{},x[0]=f.options,x[1]=l):l=x[1];let[k,A]=y.useState(l);if(y.useEffect(()=>{if(!S||S.schemaVersion!==f.schemaVersion)return void A({});A(f.options||{})},[f.options,S]),!(null==S?void 0:S.options))return null;x[2]===Symbol.for("react.memo_cache_sentinel")?(n=(e,l)=>{A(n=>({...n,[e]:l}))},x[2]=n):n=x[2];let _=n;x[3]!==k||x[4]!==b||x[5]!==C?(t=()=>{C(b,k)},x[3]=k,x[4]=b,x[5]=C,x[6]=t):t=x[6];let L=t;x[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(v.nMM,{className:"size-5"}),x[7]=r):r=x[7],x[8]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)("div",{className:"text-sm text-gray-400",children:"Customize the settings for this home item."}),x[8]=s):s=x[8],x[9]!==k?(o=e=>(0,i.jsx)(eA,{option:e,value:k[e.name],onChange:l=>_(e.name,l)},e.name),x[9]=k,x[10]=o):o=x[10];let P=(S.options||[]).map(o);return x[11]!==P?(c=(0,i.jsx)("div",{className:"space-y-4",children:P}),x[11]=P,x[12]=c):c=x[12],x[13]!==w||x[14]!==N?(d=(0,i.jsx)(p.$n,{intent:"gray-subtle",onClick:N,disabled:w,children:"Cancel"}),x[13]=w,x[14]=N,x[15]=d):d=x[15],x[16]!==L||x[17]!==w?(u=(0,i.jsx)(p.$n,{intent:"primary",onClick:L,loading:w,children:"Save"}),x[16]=L,x[17]=w,x[18]=u):u=x[18],x[19]!==d||x[20]!==u?(m=(0,i.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800",children:[d,u]}),x[19]=d,x[20]=u,x[21]=m):m=x[21],x[22]!==c||x[23]!==m||x[24]!==s?(h=(0,i.jsxs)("div",{className:"space-y-6",children:[s,c,m]}),x[22]=c,x[23]=m,x[24]=s,x[25]=h):h=x[25],(0,i.jsx)(g.a,{open:j,onOpenChange:N,title:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[r,"Configure ",S.name]}),contentClass:"max-w-2xl bg-gray-950 bg-opacity-60 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none sm:rounded-3xl",overlayClass:"bg-gray-950/70 backdrop-blur-sm",children:h})}function eA(e){let l,n=(0,a.c)(57),{option:t,value:r,onChange:s}=e,{label:o,type:c,options:d,min:u,max:m}=t;n[0]!==s||n[1]!==r?(l=e=>{let l=Array.isArray(r)?r:[];s(l.includes(e)?l.filter(l=>l!==e):[...l,e])},n[0]=s,n[1]=r,n[2]=l):l=n[2];let h=l;switch(c){case"text":{let e,l,a,t;n[3]!==o?(e=(0,i.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[3]=o,n[4]=e):e=n[4];let c=r||"";n[5]!==s?(l=e=>s(e.target.value),n[5]=s,n[6]=l):l=n[6];let d="Enter ".concat(o.toLowerCase());return n[7]!==c||n[8]!==l||n[9]!==d?(a=(0,i.jsx)(es.k,{value:c,onChange:l,placeholder:d}),n[7]=c,n[8]=l,n[9]=d,n[10]=a):a=n[10],n[11]!==e||n[12]!==a?(t=(0,i.jsxs)("div",{className:"space-y-2",children:[e,a]}),n[11]=e,n[12]=a,n[13]=t):t=n[13],t}case"number":{let e,l,a,t,c;n[14]!==o?(e=(0,i.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[14]=o,n[15]=e):e=n[15];let d=r||u||0;return n[16]!==s?(l=e=>s(e),n[16]=s,n[17]=l):l=n[17],n[18]===Symbol.for("react.memo_cache_sentinel")?(a={useGrouping:!1},n[18]=a):a=n[18],n[19]!==m||n[20]!==u||n[21]!==d||n[22]!==l?(t=(0,i.jsx)(ea.Q,{value:d,onValueChange:l,min:u,max:m,formatOptions:a}),n[19]=m,n[20]=u,n[21]=d,n[22]=l,n[23]=t):t=n[23],n[24]!==e||n[25]!==t?(c=(0,i.jsxs)("div",{className:"space-y-2",children:[e,t]}),n[24]=e,n[25]=t,n[26]=c):c=n[26],c}case"select":{let e,l,a,t;n[27]!==o?(e=(0,i.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[27]=o,n[28]=e):e=n[28];let c=r||"",u="Select ".concat(o.toLowerCase());return n[29]!==d?(l=[...d],n[29]=d,n[30]=l):l=n[30],n[31]!==s||n[32]!==c||n[33]!==u||n[34]!==l?(a=(0,i.jsx)(er.l,{value:c,onValueChange:s,placeholder:u,options:l}),n[31]=s,n[32]=c,n[33]=u,n[34]=l,n[35]=a):a=n[35],n[36]!==e||n[37]!==a?(t=(0,i.jsxs)("div",{className:"space-y-2",children:[e,a]}),n[36]=e,n[37]=a,n[38]=t):t=n[38],t}case"multi-select":{let e,l,a,t,s;n[39]!==r?(e=Array.isArray(r)?r:[],n[39]=r,n[40]=e):e=n[40];let c=e;if(n[41]!==o?(l=(0,i.jsx)("label",{className:"text-sm font-medium text-white",children:o}),n[41]=o,n[42]=l):l=n[42],n[43]!==h||n[44]!==d||n[45]!==c){let e;n[47]!==h||n[48]!==c?(e=e=>(0,i.jsx)("button",{type:"button",onClick:()=>h(e.value),className:(0,en.cn)("p-2 text-sm rounded-md border transition-colors text-left",c.includes(e.value)?"bg-brand-500/20 border-brand-500 text-brand-300":"bg-gray-800/50 border-gray-700 text-gray-300 hover:border-gray-600"),children:e.label},e.value),n[47]=h,n[48]=c,n[49]=e):e=n[49],a=d.map(e),n[43]=h,n[44]=d,n[45]=c,n[46]=a}else a=n[46];return n[50]!==a?(t=(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-48 overflow-y-auto p-3 bg-gray-900/30 rounded-lg border border-gray-800",children:a}),n[50]=a,n[51]=t):t=n[51],n[52]!==l||n[53]!==t?(s=(0,i.jsxs)("div",{className:"space-y-2",children:[l,t]}),n[52]=l,n[53]=t,n[54]=s):s=n[54],s}default:{let e;return n[55]!==c?(e=(0,i.jsxs)("div",{className:"text-sm text-gray-400",children:["Unsupported field type: ",c]}),n[55]=c,n[56]=e):e=n[56],e}}}var e_=n(97400),eL=n(21842);let eP=(0,eL.tG)("sea-v3-home-settings-toolbar-button-discovered",!1);function eE(e){let l=(0,a.c)(3),{type:n}=e;(0,b.fp)(eP);let[,t]=(0,b.fp)(ex);if("toolbar"===n){let e,n;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(ep.ZB5,{className:"text-2xl"}),l[0]=e):e=l[0],l[1]!==t?(n=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e_.m_,{trigger:(0,i.jsx)(p.K0,{"data-library-toolbar-switch-view-button":!0,intent:"white-subtle",icon:e,onClick:()=>{t(!0)}}),children:"Home Settings"})}),l[1]=t,l[2]=n):n=l[2],n}}var eI=n(41611),eD=n(29694),eT=n(5249),eM=n(17934),eF=n(91332),eO=n(10653);function eR(e){var l,n,t,r,s,o;let c,d,u,m,h,g,x,y,f,N,C=(0,a.c)(44),{unmatchedLocalFiles:w,unknownGroups:S,hasEntries:k,isStreamingOnly:A,isNakamaLibrary:_,className:P}=e;(0,eF.Ky)();let E=(0,b.Xr)(j),I=(0,Q.v1)(),D=(0,b.Xr)(V.ho),F=(0,b.Xr)(B.r),O=(0,b.Xr)(M),R=(0,b.Xr)(U.$),z=(0,b.Xr)(eI.qE),{setModalOpen:G}=(0,eD.e)(),[H,K]=(0,b.fp)(l0),{mutate:W}=(0,L.E)(),X=!!(null==I||null==(n=I.settings)||null==(l=n.library)?void 0:l.libraryPath);return C[0]!==P?(c=(0,en.cn)("flex flex-wrap w-full justify-end gap-1 p-4 relative z-[10]",P),C[0]=P,C[1]=c):c=C[1],C[2]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)("div",{className:"flex flex-1 pointer-events-none","data-library-toolbar-spacer":!0}),C[2]=d):d=C[2],C[3]!==_?(u=_&&(0,i.jsx)(e_.m_,{trigger:(0,i.jsx)("div",{className:"flex items-center px-2 h-10",children:(0,i.jsx)(eg.u67,{className:"size-8"})}),children:"Nakama Library"}),C[3]=_,C[4]=u):u=C[4],C[5]!==k||C[6]!==X||C[7]!==H||C[8]!==_||C[9]!==A||C[10]!==K||C[11]!==z||C[12]!==G||C[13]!==w.length?(m=k&&(0,i.jsxs)(i.Fragment,{children:[!A&&!_&&(0,i.jsx)(e_.m_,{trigger:(0,i.jsx)(p.K0,{"data-library-toolbar-switch-view-button":!0,intent:"base"===H?"white-subtle":"white",icon:"base"===H?(0,i.jsx)(eh.yPD,{className:"text-2xl"}):(0,i.jsx)(eh.oKG,{className:"text-2xl"}),onClick:()=>K(ez)}),children:"base"===H?"Local Anime Library":"Home"}),!A&&!_&&X&&(0,i.jsx)(e_.m_,{trigger:(0,i.jsx)(p.K0,{"data-library-toolbar-switch-view-button":!0,intent:"white-subtle",icon:(0,i.jsx)(ep.kWS,{className:"text-2xl"}),onClick:()=>{z(!0)},className:(0,en.cn)(w.length>0&&"animate-pulse")}),children:"Library Explorer"}),(0,i.jsx)(e_.m_,{trigger:(0,i.jsx)(p.K0,{"data-library-toolbar-playlists-button":!0,intent:"white-subtle",icon:(0,i.jsx)(eg.wHW,{className:"text-2xl"}),onClick:()=>G(!0)}),children:"Playlists"})]}),C[5]=k,C[6]=X,C[7]=H,C[8]=_,C[9]=A,C[10]=K,C[11]=z,C[12]=G,C[13]=w.length,C[14]=m):m=C[14],C[15]!==k||C[16]!==X||C[17]!==_||C[18]!==D?(h=!_&&X&&(0,i.jsx)(e_.m_,{trigger:(0,i.jsx)("div",{children:(0,i.jsx)(p.$n,{"data-library-toolbar-scan-button":!0,intent:k?"white-subtle":"primary",leftIcon:k?(0,i.jsx)(ep.Z05,{className:"text-xl"}):(0,i.jsx)(ep.OjV,{className:"text-xl"}),onClick:()=>D(!0),hideTextOnSmallScreen:!0,children:k?"Refresh":"Scan"})}),children:k?"Refresh Anime Library":"Scan Anime Library"}),C[15]=k,C[16]=X,C[17]=_,C[18]=D,C[19]=h):h=C[19],C[20]!==F||C[21]!==w.length?(g=w.length>0&&(0,i.jsxs)(p.$n,{"data-library-toolbar-unmatched-button":!0,intent:"alert",leftIcon:(0,i.jsx)(eh.Q9o,{}),className:"animate-bounce",onClick:()=>F(!0),children:["Resolve unmatched (",w.length,")"]}),C[20]=F,C[21]=w.length,C[22]=g):g=C[22],C[23]!==R||C[24]!==S.length?(x=S.length>0&&(0,i.jsxs)(p.$n,{"data-library-toolbar-unknown-button":!0,intent:"warning",leftIcon:(0,i.jsx)(eh.Q9o,{}),className:"animate-bounce",onClick:()=>R(!0),children:["Resolve hidden media (",S.length,")"]}),C[23]=R,C[24]=S.length,C[25]=x):x=C[25],C[26]===Symbol.for("react.memo_cache_sentinel")?(y=(0,i.jsx)(eE,{type:"toolbar"}),C[26]=y):y=C[26],C[27]!==k||C[28]!==X||C[29]!==_||C[30]!==A||C[31]!==W||C[32]!==E||C[33]!==O||C[34]!==(null==I||null==(r=I.settings)||null==(t=r.library)?void 0:t.libraryPath)?(f=!A&&!_&&X&&(0,i.jsxs)(eM.rI,{trigger:(0,i.jsx)(p.K0,{"data-library-toolbar-dropdown-menu-trigger":!0,icon:(0,i.jsx)(v.voe,{}),intent:"gray-basic"}),children:[(0,i.jsxs)(eM._2,{"data-library-toolbar-open-directory-button":!0,disabled:!X,className:(0,en.cn)("cursor-pointer",{"!text-[--muted]":!X}),onClick:()=>{var e,l,n;W({path:null!=(n=null==I||null==(l=I.settings)||null==(e=l.library)?void 0:e.libraryPath)?n:""})},children:[(0,i.jsx)(v.gNt,{}),(0,i.jsx)("span",{children:"Open directory"})]}),(0,i.jsxs)(eM._2,{"data-library-toolbar-bulk-actions-button":!0,onClick:()=>E(!0),disabled:!k,className:(0,en.cn)({"!text-[--muted]":!k}),children:[(0,i.jsx)(v.S6K,{}),(0,i.jsx)("span",{children:"Bulk actions"})]}),(0,i.jsxs)(eM._2,{"data-library-toolbar-ignored-files-button":!0,onClick:()=>O(!0),className:(0,en.cn)({"!text-[--muted]":!k}),children:[(0,i.jsx)(T.dxg,{}),(0,i.jsx)("span",{children:"Ignored files"})]}),(0,i.jsx)(eT.i,{href:"/scan-summaries",children:(0,i.jsxs)(eM._2,{"data-library-toolbar-scan-summaries-button":!0,children:[(0,i.jsx)(T.rlW,{}),(0,i.jsx)("span",{children:"Scan summaries"})]})}),(0,i.jsx)(eO.QV,{})]}),C[27]=k,C[28]=X,C[29]=_,C[30]=A,C[31]=W,C[32]=E,C[33]=O,C[34]=null==I||null==(o=I.settings)||null==(s=o.library)?void 0:s.libraryPath,C[35]=f):f=C[35],C[36]!==c||C[37]!==u||C[38]!==m||C[39]!==h||C[40]!==g||C[41]!==x||C[42]!==f?(N=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:c,"data-library-toolbar-container":!0,children:[d,u,m,h,g,x,y,f]})}),C[36]=c,C[37]=u,C[38]=m,C[39]=h,C[40]=g,C[41]=x,C[42]=f,C[43]=N):N=C[43],N}function ez(e){return"detailed"===e?"base":"detailed"}var eV=n(90984),eU=n(83394),eB=n(14370),eG=n(85210),eH=n(47555);let eK={...eG.Bq,sorting:"TITLE"},eW=(0,eH.E)(eK),eX=(0,eL.tG)("sea-detailed-library-selected-list","-"),eZ=(0,eH.E)("");var e$=n(36945),eY=n(61585),eq=n(37191),eQ=n(81281),eJ=n(45754),e0=n(6708),e1=n(60695),e2=n(23391),e3=n(80743),e4=n(78711),e5=n(78453),e6=n(3692),e7=n(75780),e8=n(40568);function e9(e){var l,n,t;let s,o,c,d,u,m,h,g,x,v=(0,a.c)(38),{isLoading:f,hasEntries:j,streamingMediaIds:N,isNakamaLibrary:C,isHomeItem:w,type:S}=e,k=void 0===S?"grid":S;(0,eF.Ky)();let A=(0,b.Xr)(l0),_=(0,eQ.zh)(),{stats:L,libraryCollectionList:P,libraryGenres:E,libraryEntries:I}=function(){var e,l,n,i,a,t,s,o,c,d,u,m;let{enabled:h=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!0},p=(0,Q.v1)(),{animeLibraryCollectionDefaultSorting:g}=(0,eF.Ky)(),{data:x}=(0,eU.H_)(),{data:v,isLoading:f}=(0,r.lD)({enabled:h}),[j,N]=(0,b.fp)(eW),C=(0,eB.d)(j,500),w=(0,b.md)(eZ);y.useLayoutEffect(()=>{let e={...j};e.sorting=g,N(e)},[v,g]);let S=y.useMemo(()=>{if(!v||!v.lists)return[];let e=v.lists.map(e=>{var l,n;if(!e)return e;let i=(0,eG.TI)(e.entries,j,null==p||null==(n=p.settings)||null==(l=n.anilist)?void 0:l.enableAdultContent,v.continueWatchingList,x);return{type:e.type,status:e.status,entries:i}});return[e.find(e=>"CURRENT"===e.type),e.find(e=>"PAUSED"===e.type),e.find(e=>"PLANNING"===e.type),e.find(e=>"COMPLETED"===e.type),e.find(e=>"DROPPED"===e.type)].filter(Boolean)},[v,C,null==p||null==(l=p.settings)||null==(e=l.anilist)?void 0:e.enableAdultContent,x]),k=y.useMemo(()=>S.map(e=>{if(!e)return e;let l=(0,eG.Qw)(e.entries,w);return{type:e.type,status:e.status,entries:l}}).filter(Boolean),[S,w]),A=y.useMemo(()=>{var e,l,n,i;if(!v||!v.lists)return[];let a=null!=(i=null==(e=v.lists)?void 0:e.flatMap(e=>e.entries).filter(Boolean))?i:[];return(0,eG.TI)(a,j,null==p||null==(n=p.settings)||null==(l=n.anilist)?void 0:l.enableAdultContent,v.continueWatchingList,x)},[v,C,null==p||null==(i=p.settings)||null==(n=i.anilist)?void 0:n.enableAdultContent,x]),_=y.useMemo(()=>(0,eG.Qw)(A,w),[A,w]),L=y.useMemo(()=>{var e,l,n,i;return(null==v?void 0:v.continueWatchingList)?!(null==p||null==(l=p.settings)||null==(e=l.anilist)?void 0:e.enableAdultContent)||(null==p||null==(i=p.settings)||null==(n=i.anilist)?void 0:n.blurAdultContent)?v.continueWatchingList.filter(e=>{var l;return(null==(l=e.baseAnime)?void 0:l.isAdult)===!1}):v.continueWatchingList:[]},[null==v?void 0:v.continueWatchingList,null==p||null==(t=p.settings)||null==(a=t.anilist)?void 0:a.enableAdultContent,null==p||null==(o=p.settings)||null==(s=o.anilist)?void 0:s.blurAdultContent]),P=y.useMemo(()=>{var e;return null==(e=[...new Set(null==k?void 0:k.flatMap(e=>{var l,n;return null!=(n=null==(l=e.entries)?void 0:l.flatMap(e=>{var l;return null==(l=e.media)?void 0:l.genres}))?n:[]}))].filter(Boolean))?void 0:e.sort((e,l)=>e.localeCompare(l))},[k]);return{isLoading:f,stats:null==v?void 0:v.stats,libraryCollectionList:k,libraryEntries:_,libraryGenres:P,continueWatchingList:L,unmatchedLocalFiles:null!=(c=null==v?void 0:v.unmatchedLocalFiles)?c:[],ignoredLocalFiles:null!=(d=null==v?void 0:v.ignoredLocalFiles)?d:[],unmatchedGroups:null!=(u=null==v?void 0:v.unmatchedGroups)?u:[],unknownGroups:null!=(m=null==v?void 0:v.unknownGroups)?m:[]}}(),[D,T]=(0,b.fp)(eX);if(v[0]!==D||v[1]!==T?(s=()=>{"-"!==D&&"all"!==D&&T("-")},v[0]=D,v[1]=T,v[2]=s):s=v[2],v[3]===Symbol.for("react.memo_cache_sentinel")?(o=[],v[3]=o):o=v[3],y.useLayoutEffect(s,o),f){let e;return v[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(ei.kt,{}),v[4]=e):e=v[4],e}return j?(v[5]!==w||v[6]!==C||v[7]!==(null==_||null==(l=_.hostConnectionStatus)?void 0:l.username)||v[8]!==A?(c=!w&&(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between","data-detailed-library-view-header-container":!0,children:[(0,i.jsxs)("div",{className:"flex gap-4 items-center relative w-fit",children:[(0,i.jsx)(p.K0,{icon:(0,i.jsx)(e5.nXt,{}),rounded:!0,intent:"white-outline",size:"sm",onClick:()=>A("base")}),!C&&(0,i.jsx)("h3",{className:"text-ellipsis truncate",children:"Home"}),C&&(0,i.jsxs)("h3",{className:"text-ellipsis truncate",children:[(null==_||null==(n=_.hostConnectionStatus)?void 0:n.username)||"Host","'s Library"]})]}),(0,i.jsx)(li,{})]}),v[5]=w,v[6]=C,v[7]=null==_||null==(t=_.hostConnectionStatus)?void 0:t.username,v[8]=A,v[9]=c):c=v[9],v[10]!==w||v[11]!==C||v[12]!==(null==L?void 0:L.totalEntries)||v[13]!==(null==L?void 0:L.totalFiles)||v[14]!==(null==L?void 0:L.totalMovies)||v[15]!==(null==L?void 0:L.totalShows)||v[16]!==(null==L?void 0:L.totalSize)||v[17]!==(null==L?void 0:L.totalSpecials)?(d=!w&&(0,i.jsxs)("div",{className:(0,en.cn)("grid grid-cols-3 lg:grid-cols-6 gap-4 [&>div]:text-center [&>div>p]:text-[--muted]",C&&"lg:grid-cols-5"),"data-detailed-library-view-stats-container":!0,children:[!C&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==L?void 0:L.totalSize}),(0,i.jsx)("p",{children:"Library"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==L?void 0:L.totalFiles}),(0,i.jsx)("p",{children:"Files"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==L?void 0:L.totalEntries}),(0,i.jsx)("p",{children:"Entries"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==L?void 0:L.totalShows}),(0,i.jsx)("p",{children:"TV Shows"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==L?void 0:L.totalMovies}),(0,i.jsx)("p",{children:"Movies"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null==L?void 0:L.totalSpecials}),(0,i.jsx)("p",{children:"Specials"})]})]}),v[10]=w,v[11]=C,v[12]=null==L?void 0:L.totalEntries,v[13]=null==L?void 0:L.totalFiles,v[14]=null==L?void 0:L.totalMovies,v[15]=null==L?void 0:L.totalShows,v[16]=null==L?void 0:L.totalSize,v[17]=null==L?void 0:L.totalSpecials,v[18]=d):d=v[18],v[19]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)(la,{}),v[19]=u):u=v[19],v[20]!==E?(m=(0,i.jsx)(lo,{genres:E}),v[20]=E,v[21]=m):m=v[21],v[22]!==P||v[23]!==D||v[24]!==N||v[25]!==k?(h="all"!==D&&P.map(e=>{var l;return(null==(l=e.entries)?void 0:l.length)?(0,i.jsx)(le,{list:e,streamingMediaIds:N,type:k},e.type):null}),v[22]=P,v[23]=D,v[24]=N,v[25]=k,v[26]=h):h=v[26],v[27]!==I||v[28]!==D||v[29]!==N||v[30]!==k?(g="all"===D&&(0,i.jsx)(ll,{entries:I,streamingMediaIds:N,type:k}),v[27]=I,v[28]=D,v[29]=N,v[30]=k,v[31]=g):g=v[31],v[32]!==c||v[33]!==d||v[34]!==m||v[35]!==h||v[36]!==g?(x=(0,i.jsxs)(eJ.f,{className:"px-4 space-y-8 relative z-[4]","data-detailed-library-view-container":!0,children:[c,d,u,m,h,g]}),v[32]=c,v[33]=d,v[34]=m,v[35]=h,v[36]=g,v[37]=x):x=v[37],x):null}let le=y.memo(e=>{var l,n,t,r,s,o;let c,d,u,m,h,p,g=(0,a.c)(20),{list:x,streamingMediaIds:v,type:f}=e,[j]=(0,b.fp)(eX);if("-"!==j&&j!==x.type)return null;let N=x.type;g[0]!==x.type?(c=(0,e3.me)(x.type),g[0]=x.type,g[1]=c):c=g[1];let C=null!=(n=null==x||null==(l=x.entries)?void 0:l.length)?n:0;return g[2]!==C?(d=(0,i.jsx)("span",{className:"text-[--muted] font-medium ml-3",children:C}),g[2]=C,g[3]=d):d=g[3],g[4]!==c||g[5]!==d?(u=(0,i.jsxs)("h2",{children:[c," ",d]}),g[4]=c,g[5]=d,g[6]=u):u=g[6],g[7]!==x.entries||g[8]!==v||g[9]!==f?(m="grid"===f&&(0,i.jsx)(e$.xt,{itemCount:(null==x||null==(t=x.entries)?void 0:t.length)||0,children:null==(r=x.entries)?void 0:r.map(e=>(0,i.jsx)(ln,{entry:e,streamingMediaIds:v,type:f},e.mediaId))}),g[7]=x.entries,g[8]=v,g[9]=f,g[10]=m):m=g[10],g[11]!==x.entries||g[12]!==v||g[13]!==f?(h="carousel"===f&&(0,i.jsxs)(e0.FN,{className:(0,en.cn)("w-full max-w-full !mt-0"),gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!1,children:[(0,i.jsx)(e0.h1,{className:"-top-2"}),(0,i.jsx)(e0.Wk,{className:"px-6",children:null==(o=x.entries)||null==(s=o.filter(Boolean))?void 0:s.map(e=>(0,i.jsx)(ln,{entry:e,streamingMediaIds:v,type:f},e.mediaId))})]}),g[11]=x.entries,g[12]=v,g[13]=f,g[14]=h):h=g[14],g[15]!==x.type||g[16]!==u||g[17]!==m||g[18]!==h?(p=(0,i.jsxs)(y.Fragment,{children:[u,m,h]},N),g[15]=x.type,g[16]=u,g[17]=m,g[18]=h,g[19]=p):p=g[19],p}),ll=y.memo(e=>{let l,n,t,r=(0,a.c)(11),{entries:s,streamingMediaIds:o,type:c}=e;if(r[0]!==s||r[1]!==o||r[2]!==c?(l="grid"===c&&(0,i.jsx)(e$.xt,{itemCount:(null==s?void 0:s.length)||0,children:null==s?void 0:s.map(e=>(0,i.jsx)(ln,{entry:e,streamingMediaIds:o,type:c},e.mediaId))}),r[0]=s,r[1]=o,r[2]=c,r[3]=l):l=r[3],r[4]!==s||r[5]!==o||r[6]!==c){var d;n="carousel"===c&&(0,i.jsxs)(e0.FN,{className:(0,en.cn)("w-full max-w-full !mt-0"),gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!1,children:[(0,i.jsx)(e0.h1,{className:"-top-2"}),(0,i.jsx)(e0.Wk,{className:"px-6",children:null==s||null==(d=s.filter(Boolean))?void 0:d.map(e=>(0,i.jsx)(ln,{entry:e,streamingMediaIds:o,type:c},e.mediaId))})]}),r[4]=s,r[5]=o,r[6]=c,r[7]=n}else n=r[7];return r[8]!==l||r[9]!==n?(t=(0,i.jsxs)(y.Fragment,{children:[l,n]}),r[8]=l,r[9]=n,r[10]=t):t=r[10],t}),ln=y.memo(e=>{let l,n=(0,a.c)(6),{entry:t,type:r}=e,s="carousel"===r?"basis-[200px] md:basis-[250px] mx-2 mt-8 mb-0":void 0;return n[0]!==t.libraryData||n[1]!==t.listData||n[2]!==t.media||n[3]!==t.nakamaLibraryData||n[4]!==s?(l=(0,i.jsx)(eY.V,{media:t.media,listData:t.listData,libraryData:t.libraryData,nakamaLibraryData:t.nakamaLibraryData,showListDataButton:!0,withAudienceScore:!1,type:"anime",containerClassName:s}),n[0]=t.libraryData,n[1]=t.listData,n[2]=t.media,n[3]=t.nakamaLibraryData,n[4]=s,n[5]=l):l=n[5],l}),li=()=>{let e,l,n,t,r,s=(0,a.c)(9),[o,c]=y.useState(""),d=(0,b.Xr)(eZ),u=(0,eB.d)(o,500);return s[0]!==o||s[1]!==d?(e=()=>{d(o)},s[0]=o,s[1]=d,s[2]=e):e=s[2],s[3]!==u?(l=[u],s[3]=u,s[4]=l):l=s[4],y.useEffect(e,l),s[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(e7.CKj,{}),s[5]=n):n=s[5],s[6]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{c(e)},s[6]=t):t=s[6],s[7]!==o?(r=(0,i.jsx)("div",{className:"w-full md:w-[300px]",children:(0,i.jsx)(es.k,{leftIcon:n,value:o,onValueChange:t,className:"rounded-full bg-gray-900/50"})}),s[7]=o,s[8]=r):r=s[8],r};function la(){var e,l,n,t,r,s;let o,c,d,u,m,g,x,y,f,j,N,C,w,S,k,A,_,L,P,E,I,D,T,M,F,O,R,z,V,U,B,H,K,W,X,Z,$,Y,q,J,ee,el,ei,ea=(0,a.c)(114),et=(0,Q.v1)(),[es,eo]=(0,b.fp)(eW),[ec,ed]=(0,b.fp)(eX),eu="-"===ec;ea[0]!==ed?(o=()=>ed("-"),ea[0]=ed,ea[1]=o):o=ea[1],ea[2]!==eu||ea[3]!==o?(c={name:"Lists",isCurrent:eu,onClick:o},ea[2]=eu,ea[3]=o,ea[4]=c):c=ea[4];let em="all"===ec;ea[5]!==ed?(d=()=>ed("all"),ea[5]=ed,ea[6]=d):d=ea[6],ea[7]!==em||ea[8]!==d?(u={name:"All",isCurrent:em,onClick:d},ea[7]=em,ea[8]=d,ea[9]=u):u=ea[9];let eh="CURRENT"===ec;ea[10]!==ed?(m=()=>ed("CURRENT"),ea[10]=ed,ea[11]=m):m=ea[11],ea[12]!==eh||ea[13]!==m?(g={name:"Watching",isCurrent:eh,onClick:m},ea[12]=eh,ea[13]=m,ea[14]=g):g=ea[14];let ex="PLANNING"===ec;ea[15]!==ed?(x=()=>ed("PLANNING"),ea[15]=ed,ea[16]=x):x=ea[16],ea[17]!==x||ea[18]!==ex?(y={name:"Planning",isCurrent:ex,onClick:x},ea[17]=x,ea[18]=ex,ea[19]=y):y=ea[19];let eb="PAUSED"===ec;ea[20]!==ed?(f=()=>ed("PAUSED"),ea[20]=ed,ea[21]=f):f=ea[21],ea[22]!==eb||ea[23]!==f?(j={name:"Paused",isCurrent:eb,onClick:f},ea[22]=eb,ea[23]=f,ea[24]=j):j=ea[24];let ey="COMPLETED"===ec;ea[25]!==ed?(N=()=>ed("COMPLETED"),ea[25]=ed,ea[26]=N):N=ea[26],ea[27]!==ey||ea[28]!==N?(C={name:"Completed",isCurrent:ey,onClick:N},ea[27]=ey,ea[28]=N,ea[29]=C):C=ea[29];let ev="DROPPED"===ec;ea[30]!==ed?(w=()=>ed("DROPPED"),ea[30]=ed,ea[31]=w):w=ea[31],ea[32]!==ev||ea[33]!==w?(S={name:"Dropped",isCurrent:ev,onClick:w},ea[32]=ev,ea[33]=w,ea[34]=S):S=ea[34],ea[35]!==y||ea[36]!==j||ea[37]!==C||ea[38]!==c||ea[39]!==S||ea[40]!==u||ea[41]!==g?(k=(0,i.jsx)("div",{className:"flex w-full justify-center",children:(0,i.jsx)(e2.tH,{className:"h-10 w-fit pb-6",triggerClass:"px-4 py-1",items:[c,u,g,y,j,C,S]})}),ea[35]=y,ea[36]=j,ea[37]=C,ea[38]=c,ea[39]=S,ea[40]=u,ea[41]=g,ea[42]=k):k=ea[42];let ef="TITLE"!==es.sorting&&"text-indigo-300 font-bold text-xl";ea[43]!==ef?(A=(0,en.cn)(ef),ea[43]=ef,ea[44]=A):A=ea[44],ea[45]!==A?(_=(0,i.jsx)(e6.EDF,{className:A}),ea[45]=A,ea[46]=_):_=ea[46];let ej=es.sorting||"TITLE";ea[47]!==eo?(L=e=>eo(l=>{l.sorting=e}),ea[47]=eo,ea[48]=L):L=ea[48],ea[49]!==_||ea[50]!==ej||ea[51]!==L?(P=(0,i.jsx)(er.l,{label:"Sorting",leftAddon:_,className:"w-full",fieldClass:"flex items-center",inputContainerClass:"w-full",options:eG.wi,value:ej,onValueChange:L,fieldLabelClass:"hidden"}),ea[49]=_,ea[50]=ej,ea[51]=L,ea[52]=P):P=ea[52];let eN=null!==es.format&&""!==es.format&&"text-indigo-300 font-bold text-xl";ea[53]!==eN?(E=(0,en.cn)(eN),ea[53]=eN,ea[54]=E):E=ea[54],ea[55]!==E?(I=(0,i.jsx)(eg.xjJ,{className:E}),ea[55]=E,ea[56]=I):I=ea[56];let eC=es.format||"";ea[57]!==eo?(D=e=>eo(l=>{l.format=e}),ea[57]=eo,ea[58]=D):D=ea[58],ea[59]!==I||ea[60]!==eC||ea[61]!==D?(T=(0,i.jsx)(er.l,{leftAddon:I,label:"Format",placeholder:"All formats",className:"w-full",fieldClass:"w-full",options:G.xh,value:eC,onValueChange:D,fieldLabelClass:"hidden"}),ea[59]=I,ea[60]=eC,ea[61]=D,ea[62]=T):T=ea[62];let ew=null!==es.status&&""!==es.status&&"text-indigo-300 font-bold text-xl";ea[63]!==ew?(M=(0,en.cn)(ew),ea[63]=ew,ea[64]=M):M=ea[64],ea[65]!==M?(F=(0,i.jsx)(e8.PgI,{className:M}),ea[65]=M,ea[66]=F):F=ea[66],ea[67]===Symbol.for("react.memo_cache_sentinel")?(O=[...G._v],ea[67]=O):O=ea[67];let eS=es.status||"";ea[68]!==eo?(R=e=>eo(l=>{l.status=e}),ea[68]=eo,ea[69]=R):R=ea[69],ea[70]!==F||ea[71]!==eS||ea[72]!==R?(z=(0,i.jsx)(er.l,{leftAddon:F,label:"Status",placeholder:"All statuses",className:"w-full",fieldClass:"w-full",options:O,value:eS,onValueChange:R,fieldLabelClass:"hidden"}),ea[70]=F,ea[71]=eS,ea[72]=R,ea[73]=z):z=ea[73];let ek=null!==es.season&&""!==es.season&&"text-indigo-300 font-bold text-xl";ea[74]!==ek?(V=(0,en.cn)(ek),ea[74]=ek,ea[75]=V):V=ea[75],ea[76]!==V?(U=(0,i.jsx)(ep.Cfp,{className:V}),ea[76]=V,ea[77]=U):U=ea[77],ea[78]===Symbol.for("react.memo_cache_sentinel")?(B=G.lW.map(ls),ea[78]=B):B=ea[78];let eA=es.season||"";ea[79]!==eo?(H=e=>eo(l=>{l.season=e}),ea[79]=eo,ea[80]=H):H=ea[80],ea[81]!==U||ea[82]!==eA||ea[83]!==H?(K=(0,i.jsx)(er.l,{leftAddon:U,label:"Season",placeholder:"All seasons",className:"w-full",fieldClass:"w-full flex items-center",inputContainerClass:"w-full",options:B,value:eA,onValueChange:H,fieldLabelClass:"hidden"}),ea[81]=U,ea[82]=eA,ea[83]=H,ea[84]=K):K=ea[84];let e_=null!==es.year&&""!==es.year&&"text-indigo-300 font-bold text-xl";ea[85]!==e_?(W=(0,en.cn)(e_),ea[85]=e_,ea[86]=W):W=ea[86],ea[87]!==W?(X=(0,i.jsx)(ep.IdP,{className:W}),ea[87]=W,ea[88]=X):X=ea[88],ea[89]===Symbol.for("react.memo_cache_sentinel")?(Z=[...Array(70)].map(lr).map(lt),ea[89]=Z):Z=ea[89];let eL=es.year||"";return ea[90]!==eo?($=e=>eo(l=>{l.year=e}),ea[90]=eo,ea[91]=$):$=ea[91],ea[92]!==X||ea[93]!==eL||ea[94]!==$?(Y=(0,i.jsx)(er.l,{leftAddon:X,label:"Year",placeholder:"Timeless",className:"w-full",fieldClass:"w-full",options:Z,value:eL,onValueChange:$,fieldLabelClass:"hidden"}),ea[92]=X,ea[93]=eL,ea[94]=$,ea[95]=Y):Y=ea[95],ea[96]===Symbol.for("react.memo_cache_sentinel")?(q=(0,i.jsx)(v.id1,{}),ea[96]=q):q=ea[96],ea[97]!==eo?(J=(0,i.jsx)("div",{className:"flex gap-4 items-center w-full",children:(0,i.jsx)(p.K0,{icon:q,intent:"alert-subtle",className:"flex-none",onClick:()=>{eo(eK)}})}),ea[97]=eo,ea[98]=J):J=ea[98],ea[99]!==es.isAdult||ea[100]!==(null==et||null==(l=et.settings)||null==(e=l.anilist)?void 0:e.enableAdultContent)||ea[101]!==eo?(ee=(null==et||null==(t=et.settings)||null==(n=t.anilist)?void 0:n.enableAdultContent)&&(0,i.jsx)("div",{className:"flex h-full items-center",children:(0,i.jsx)(e1.d,{label:"Adult",value:es.isAdult,onValueChange:e=>eo(l=>{l.isAdult=e}),fieldLabelClass:"hidden"})}),ea[99]=es.isAdult,ea[100]=null==et||null==(s=et.settings)||null==(r=s.anilist)?void 0:r.enableAdultContent,ea[101]=eo,ea[102]=ee):ee=ea[102],ea[103]!==P||ea[104]!==T||ea[105]!==z||ea[106]!==K||ea[107]!==Y||ea[108]!==J||ea[109]!==ee?(el=(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 2xl:grid-cols-[1fr_1fr_1fr_1fr_1fr_auto_auto] gap-4","data-detailed-library-view-search-options-grid":!0,children:[P,T,z,K,Y,J,ee]}),ea[103]=P,ea[104]=T,ea[105]=z,ea[106]=K,ea[107]=Y,ea[108]=J,ea[109]=ee,ea[110]=el):el=ea[110],ea[111]!==k||ea[112]!==el?(ei=(0,i.jsxs)(h.KZ,{className:"px-4 xl:px-0","data-detailed-library-view-search-options-container":!0,children:[k,el]}),ea[111]=k,ea[112]=el,ea[113]=ei):ei=ea[113],ei}function lt(e){return{value:String(e),label:String(e)}}function lr(e,l){return(0,e4.C)(new Date)-l}function ls(e){return{value:e.toUpperCase(),label:e}}function lo(e){var l;let n,t,r,s=(0,a.c)(13),{genres:o}=e,[c,d]=(0,b.fp)(eW),u=!(null==(l=c.genre)?void 0:l.length);if(s[0]!==d?(n=()=>d(lc),s[0]=d,s[1]=n):n=s[1],s[2]!==u||s[3]!==n?(t={name:"All",isCurrent:u,onClick:n},s[2]=u,s[3]=n,s[4]=t):t=s[4],s[5]!==o||s[6]!==c.genre||s[7]!==d||s[8]!==t){let e;s[10]!==c.genre||s[11]!==d?(e=e=>{var l,n;return{name:e,isCurrent:null!=(n=null==(l=c.genre)?void 0:l.includes(e))&&n,onClick:()=>d(l=>{var n,i;(null==(n=l.genre)?void 0:n.includes(e))?l.genre=null==(i=l.genre)?void 0:i.filter(l=>l!==e):l.genre=[...l.genre||[],e]})}},s[10]=c.genre,s[11]=d,s[12]=e):e=s[12],r=(0,i.jsx)(eq.H,{items:[t,...o.map(e)]}),s[5]=o,s[6]=c.genre,s[7]=d,s[8]=t,s[9]=r}else r=s[9];return r}function lc(e){e.genre=[]}var ld=n(58443),lu=n(48555),lm=n(23335),lh=n(77717),lp=n(94077),lg=n(43826),lx=n(81274),lb=n(2311),ly=n(68090),lv=n(71559),lf=n(29260),lj=n(52116),lN=n(30420),lC=n(90124),lw=n(13),lS=n(67329),lk=n(32931),lA=n(79437),l_=n(70957),lL=n(8816),lP=n(72531),lE=n(78216),lI=n(13029),lD=n(99639),lT=n(25305),lM=n(32754),lF=n(35656),lO=n(14680),lR=n(42692),lz=n(22960),lV=n(90711),lU=n(84218),lB=n(6066);let lG=(0,x.eU)(!1),lH=(0,x.eU)(0),lK=(0,x.eU)(!1),lW=(0,x.eU)(null,(e,l,n)=>{e(lH)!==n&&(l(lK,!0),setTimeout(()=>{l(lH,n),l(lK,!1)},300))}),lX=lU.P.create(lO.r);function lZ(e){let l,n,t,r,s=(0,a.c)(11),{totalEpisodes:o,currentIndex:c,onIndexChange:d,className:u}=e;if((0,eF.Ky)(),o<=1)return null;let m=Math.min(o,99);return s[0]!==u?(l=(0,en.cn)("hidden lg:flex items-center gap-2 z-[10] pl-8 max-w-[20rem] flex-wrap top-[4.5rem]",u),s[0]=u,s[1]=l):l=s[1],s[2]!==m?(n=Array.from({length:m}),s[2]=m,s[3]=n):n=s[3],s[4]!==c||s[5]!==d||s[6]!==n?(t=n.map((e,l)=>(0,i.jsx)("button",{className:(0,en.cn)("h-1.5 rounded-sm transition-all duration-300 cursor-pointer",l===c?"w-6 bg-[--muted]":"w-3 bg-[--subtle] hover:bg-gray-300"),onClick:()=>d(l),"aria-label":"Go to episode ".concat(l+1)},l)),s[4]=c,s[5]=d,s[6]=n,s[7]=t):t=s[7],s[8]!==l||s[9]!==t?(r=(0,i.jsx)("div",{className:l,children:t}),s[8]=l,s[9]=t,s[10]=r):r=s[10],r}function l$(e){var l,n,t,r,s,o,c,d;let u,m,h,g,x,v,f,j,N,C,w,S,k,A,_,L,P,E,I,D,T,M,F,O,R,z,V,U,B,G,H,K,W,X=(0,a.c)(76),{episode:Z,episodes:$,onHoverChange:Y}=e,q=(0,eF.Ky)(),{setPreviewModalMediaId:Q}=(0,lM.D)(),J=Z.baseAnime,ee=(0,b.md)(lH),el=(0,b.md)(lK),ei=(0,b.Xr)(lW),[ea]=(0,b.fp)(lG),et=$[ee]||null;if(q.mediaPageBannerType===eF.px.BlurWhenUnavailable&&(null==et||null==(l=et.baseAnime)||l.bannerImage),X[0]!==ee||X[1]!==$.length||X[2]!==ea||X[3]!==ei?(u=()=>{if($.length<=1)return;let e=setInterval(()=>{ea||ei((ee+1)%$.length)},8e3);return()=>clearInterval(e)},m=[ee,$.length,ea,ei],X[0]=ee,X[1]=$.length,X[2]=ea,X[3]=ei,X[4]=u,X[5]=m):(u=X[4],m=X[5]),y.useEffect(u,m),!J)return null;let er=q.hideTopNavbar&&"top-[4rem]",es=lp.X&&q.mediaPageBannerSize===eF.kE.Small&&"top-[0rem]",eo=lp.X&&q.mediaPageBannerSize!==eF.kE.Small&&"top-[2rem]";X[6]!==er||X[7]!==es||X[8]!==eo?(h=(0,en.cn)("absolute left-2 w-fit h-[20rem] bg-gradient-to-t z-[3] hidden lg:block","top-[5rem]",er,es,eo),X[6]=er,X[7]=es,X[8]=eo,X[9]=h):h=X[9],X[10]!==Y?(g=()=>Y(!0),x=()=>Y(!1),X[10]=Y,X[11]=g,X[12]=x):(g=X[11],x=X[12]),X[13]===Symbol.for("react.memo_cache_sentinel")?(v={initial:{opacity:0,x:-40},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"spring",damping:20,stiffness:100}},X[13]=v):v=X[13],X[14]===Symbol.for("react.memo_cache_sentinel")?(f={opacity:0,scale:.7,skew:5},X[14]=f):f=X[14],X[15]===Symbol.for("react.memo_cache_sentinel")?(j={opacity:1,scale:1,skew:0},X[15]=j):j=X[15],X[16]===Symbol.for("react.memo_cache_sentinel")?(N={opacity:1,scale:1,skewY:1},C={duration:.5},X[16]=N,X[17]=C):(N=X[16],C=X[17]);let ec="/entry?id=".concat(J.id);X[18]!==J.coverImage||X[19]!==el?(w=(null==(r=J.coverImage)?void 0:r.large)&&(0,i.jsx)("div",{className:"w-[180px] h-[280px] relative rounded-[--radius-md] overflow-hidden bg-[--background] shadow-md",children:(0,i.jsx)(lO.r,{src:J.coverImage.large,alt:"cover image",fill:!0,priority:!0,placeholder:(0,lF.r)(700,475),className:(0,en.cn)("object-cover object-center transition-opacity duration-1000",el&&"opacity-30",!el&&"opacity-100")})}),X[18]=J.coverImage,X[19]=el,X[20]=w):w=X[20],X[21]!==ec||X[22]!==w?(S=(0,i.jsx)(lU.P.div,{className:"flex-none",initial:f,animate:j,exit:N,transition:C,children:(0,i.jsx)(eT.i,{href:ec,children:w})}),X[21]=ec,X[22]=w,X[23]=S):S=X[23],X[24]===Symbol.for("react.memo_cache_sentinel")?(k={opacity:0,x:10},A={opacity:1,x:0},_={duration:.5,delay:.6},X[24]=k,X[25]=A,X[26]=_):(k=X[24],A=X[25],_=X[26]);let ed="/entry?id=".concat(J.id),eu=(null==(n=J.title)?void 0:n.userPreferred)||"";return X[27]!==eu?(L=(0,i.jsx)(lR.W,{className:"[text-shadow:_0_1px_10px_rgb(0_0_0_/_20%)] text-white leading-8 line-clamp-2 pb-1 max-w-md text-pretty text-3xl overflow-ellipsis",words:eu}),X[27]=eu,X[28]=L):L=X[28],X[29]!==ed||X[30]!==L?(P=(0,i.jsx)(eT.i,{href:ed,children:L}),X[29]=ed,X[30]=L,X[31]=P):P=X[31],X[32]!==J.genres?(E=null==(s=J.genres)?void 0:s.slice(0,3).map(lY),X[32]=J.genres,X[33]=E):E=X[33],X[34]!==E?(I=(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:E}),X[34]=E,X[35]=I):I=X[35],X[36]!==J.meanScore?(D=J.meanScore&&(0,i.jsx)("div",{className:"rounded-full w-fit inline-block",children:(0,i.jsx)(lT.H2,{meanScore:J.meanScore})}),X[36]=J.meanScore,X[37]=D):D=X[37],X[38]!==(null==(t=J.nextAiringEpisode)?void 0:t.airingAt)?(T=(null==(o=J.nextAiringEpisode)?void 0:o.airingAt)&&(0,i.jsxs)("p",{className:"text-base text-brand-200 inline-flex items-center gap-1.5",children:[(0,i.jsx)(e8.PgI,{})," Releasing now"]}),X[38]=null==(c=J.nextAiringEpisode)?void 0:c.airingAt,X[39]=T):T=X[39],X[40]!==D||X[41]!==T?(M=(0,i.jsxs)("div",{className:"flex items-center max-w-lg gap-4",children:[D,T]}),X[40]=D,X[41]=T,X[42]=M):M=X[42],X[43]===Symbol.for("react.memo_cache_sentinel")?(F={opacity:0,x:10},O={opacity:1,x:0},R={duration:.5,delay:.7},X[43]=F,X[44]=O,X[45]=R):(F=X[43],O=X[44],R=X[45]),X[46]!==J.description?(z=null==(d=J.description)?void 0:d.replace(/(<([^>]+)>)/ig,""),X[46]=J.description,X[47]=z):z=X[47],X[48]!==z?(V=(0,i.jsx)(lz.F,{className:"max-w-lg leading-3 h-[77px] mb-4 p-0 text-sm",children:z}),X[48]=z,X[49]=V):V=X[49],X[50]!==J.id||X[51]!==Q?(U=(0,i.jsx)(p.$n,{size:"sm",intent:"gray-outline",className:"rounded-full",onClick:()=>Q(J.id,"anime"),children:"Preview"}),X[50]=J.id,X[51]=Q,X[52]=U):U=X[52],X[53]!==V||X[54]!==U?(B=(0,i.jsxs)(lU.P.div,{className:"pt-0 left-0",initial:F,animate:O,transition:R,children:[V,U]}),X[53]=V,X[54]=U,X[55]=B):B=X[55],X[56]!==P||X[57]!==I||X[58]!==M||X[59]!==B?(G=(0,i.jsxs)(lU.P.div,{className:"flex-auto space-y-2 z-[1]",initial:k,animate:A,transition:_,children:[P,I,M,B]}),X[56]=P,X[57]=I,X[58]=M,X[59]=B,X[60]=G):G=X[60],X[61]!==S||X[62]!==G||X[63]!==g||X[64]!==x?(H=(0,i.jsxs)(lU.P.div,{className:"flex items-center relative gap-6 p-6 pr-3 w-fit overflow-hidden",onMouseEnter:g,onMouseLeave:x,...v,children:[S,G]}),X[61]=S,X[62]=G,X[63]=g,X[64]=x,X[65]=H):H=X[65],X[66]!==ee||X[67]!==$.length||X[68]!==ei?(K=(0,i.jsx)(lZ,{totalEpisodes:$.length,currentIndex:ee,onIndexChange:ei}),X[66]=ee,X[67]=$.length,X[68]=ei,X[69]=K):K=X[69],X[70]!==J.id||X[71]!==J.idMal||X[72]!==H||X[73]!==K||X[74]!==h?(W=(0,i.jsxs)("div",{className:h,"data-media-id":J.id,"data-media-mal-id":J.idMal,children:[H,K]}),X[70]=J.id,X[71]=J.idMal,X[72]=H,X[73]=K,X[74]=h,X[75]=W):W=X[75],W}function lY(e){return(0,i.jsx)("div",{className:"text-sm font-semibold px-1 text-gray-300",children:e},e)}function lq(e){var l,n,t,r,s,o,c,d,u,m,h,p,g,x,b,y,v;let f,j,N,C,w,S,k,A,_,L=(0,a.c)(39),{episode:P,isTransitioning:E}=e,I=(0,eF.Ky)(),D=(0,lB.useRouter)(),T=(0,Q.v1)(),{setPlayNext:M}=(0,lE.p$)(),{data:F}=(0,eU.H_)();L[0]!==(null==(l=P.baseAnime)?void 0:l.id)||L[1]!==D||L[2]!==(null==T?void 0:T.isOffline)||L[3]!==M?(f=()=>{var e;M(null==(e=P.baseAnime)?void 0:e.id,()=>{var e,l;(null==T?void 0:T.isOffline)?D.push("/offline/entry/anime?id=".concat(null==(l=P.baseAnime)?void 0:l.id)):D.push("/entry?id=".concat(null==(e=P.baseAnime)?void 0:e.id))})},L[0]=null==(v=P.baseAnime)?void 0:v.id,L[1]=D,L[2]=null==T?void 0:T.isOffline,L[3]=M,L[4]=f):f=L[4];let O=f,R=I.hideTopNavbar&&"top-[4rem]",z=lp.X&&I.mediaPageBannerSize===eF.kE.Small&&"top-[1rem]",V=lp.X&&I.mediaPageBannerSize!==eF.kE.Small&&"top-[3rem]";L[5]!==R||L[6]!==z||L[7]!==V?(j=(0,en.cn)("absolute right-6 w-fit h-[25rem] z-[3] hidden lg:block overflow-hidden","top-[5rem]",R,z,V),L[5]=R,L[6]=z,L[7]=V,L[8]=j):j=L[8],L[9]===Symbol.for("react.memo_cache_sentinel")?(N={initial:{opacity:0,x:40},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{type:"spring",damping:20,stiffness:100}},L[9]=N):N=L[9];let U=(null==(n=P.episodeMetadata)?void 0:n.image)||(null==(t=P.baseAnime)?void 0:t.bannerImage)||(null==(s=P.baseAnime)||null==(r=s.coverImage)?void 0:r.extraLarge),B=P.episodeTitle||(null==P||null==(c=P.baseAnime)||null==(o=c.title)?void 0:o.userPreferred),G=P.displayTitle,H=P.isInvalid,K=null==(d=P.baseAnime)?void 0:d.episodes,W=P.progressNumber,X=P.episodeNumber,Z=null==(u=P.episodeMetadata)?void 0:u.length,$=P.episodeNumber!==P.progressNumber,Y=(null==(m=P.baseAnime)?void 0:m.id)||0;L[10]!==P.episodeNumber||L[11]!==Y||L[12]!==F?(C=(0,eU.hH)(F,Y,P.episodeNumber),L[10]=P.episodeNumber,L[11]=Y,L[12]=F,L[13]=C):C=L[13];let q=(null==(h=P.baseAnime)?void 0:h.id)||0;L[14]!==P.episodeNumber||L[15]!==q||L[16]!==F?(w=(0,eU.pj)(F,q,P.episodeNumber),L[14]=P.episodeNumber,L[15]=q,L[16]=F,L[17]=w):w=L[17];let J=(null==P||null==(p=P.baseAnime)?void 0:p.id)||0,ee=null==P||null==(x=P.baseAnime)||null==(g=x.coverImage)?void 0:g.medium,el=null==P||null==(y=P.baseAnime)||null==(b=y.title)?void 0:b.userPreferred;L[18]!==J||L[19]!==ee||L[20]!==el?(S={id:J,image:ee,title:el},L[18]=J,L[19]=ee,L[20]=el,L[21]=S):S=L[21];let ei=E&&"opacity-50";return L[22]!==ei?(k=(0,en.cn)("transition-opacity duration-1000",ei),L[22]=ei,L[23]=k):k=L[23],L[24]!==P||L[25]!==O||L[26]!==K||L[27]!==Z||L[28]!==$||L[29]!==C||L[30]!==w||L[31]!==S||L[32]!==k||L[33]!==U||L[34]!==B?(A=(0,i.jsx)("div",{className:"p-6 w-fit",children:(0,i.jsx)(lU.P.div,{...N,className:"2xl:w-[500px] xl:w-[400px] lg:w-[300px] rounded-xl overflow-hidden",children:(0,i.jsx)(lI.U,{episode:P,image:U,topTitle:B,title:G,isInvalid:H,progressTotal:K,progressNumber:W,episodeNumber:X,length:Z,hasDiscrepancy:$,percentageComplete:C,minutesRemaining:w,anime:S,forceSingleContainer:!0,onClick:O,className:k})})}),L[24]=P,L[25]=O,L[26]=K,L[27]=Z,L[28]=$,L[29]=C,L[30]=w,L[31]=S,L[32]=k,L[33]=U,L[34]=B,L[35]=A):A=L[35],L[36]!==A||L[37]!==j?(_=(0,i.jsx)(lU.P.div,{className:j,children:A}),L[36]=A,L[37]=j,L[38]=_):_=L[38],_}function lQ(e){var l,n,t,r,s,o,c,d,u,m,h,p;let g,x,b,y,v,f,j,N,C,w,S,k,A,_,L=(0,a.c)(33),{episode:P,isTransitioning:E,shouldBlurBanner:I}=e,D=(0,eF.Ky)();L[0]!==(null==P||null==(l=P.baseAnime)?void 0:l.bannerImage)||L[1]!==(null==P||null==(t=P.baseAnime)||null==(n=t.coverImage)?void 0:n.extraLarge)||L[2]!==D.libraryScreenBannerType||L[3]!==D.libraryScreenCustomBannerImage?(g=D.libraryScreenCustomBannerImage&&D.libraryScreenBannerType===eF.H4.Custom?(0,lV.sU)(D.libraryScreenCustomBannerImage):(null==P||null==(s=P.baseAnime)?void 0:s.bannerImage)||(null==P||null==(c=P.baseAnime)||null==(o=c.coverImage)?void 0:o.extraLarge),L[0]=null==P||null==(d=P.baseAnime)?void 0:d.bannerImage,L[1]=null==P||null==(m=P.baseAnime)||null==(u=m.coverImage)?void 0:u.extraLarge,L[2]=D.libraryScreenBannerType,L[3]=D.libraryScreenCustomBannerImage,L[4]=g):g=L[4];let T=g,M=!D.disableSidebarTransparency&&lD.j,F=D.mediaPageBannerSize===eF.kE.Small&&"lg:h-[30rem]";L[5]!==M||L[6]!==F?(x=(0,en.cn)("lg:h-[35rem] w-full flex-none object-cover object-center absolute top-0 bg-[--background] overflow-hidden",M,lp.X&&"top-[-2rem]",F),L[5]=M,L[6]=F,L[7]=x):x=L[7],L[8]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)("div",{className:"w-full z-[2] absolute bottom-[-10rem] h-[10rem] bg-gradient-to-b from-[--background] via-transparent via-100% to-transparent"}),y=(0,i.jsx)("div",{className:"w-full absolute z-[2] top-0 h-[10rem] opacity-50 bg-gradient-to-b from-[--background] to-transparent"}),L[8]=b,L[9]=y):(b=L[8],y=L[9]);let O=E&&"opacity-70";return L[10]!==O?(v=(0,en.cn)("opacity-0 duration-1000 bg-[var(--background)] w-full h-full absolute z-[2]",O),L[10]=O,L[11]=v):v=L[11],L[12]!==v?(f=(0,i.jsx)("div",{className:v}),L[12]=v,L[13]=f):f=L[13],L[14]!==T||L[15]!==(null==P||null==(r=P.baseAnime)?void 0:r.bannerImage)||L[16]!==E?(j=T&&(0,i.jsx)(lX,{src:T,alt:"banner image",fill:!0,quality:100,priority:!0,className:(0,en.cn)("object-cover object-center z-[1] transition-all duration-1000",E&&"scale-[1.01] -translate-x-0.5",!E&&"scale-100 translate-x-0",!(null==P||null==(h=P.baseAnime)?void 0:h.bannerImage)&&"opacity-35")}),L[14]=T,L[15]=null==P||null==(p=P.baseAnime)?void 0:p.bannerImage,L[16]=E,L[17]=j):j=L[17],L[18]!==j?(N=(0,i.jsx)(lg.N,{children:(0,i.jsx)("div",{className:"w-full h-full absolute z-[1] overflow-hidden",children:j})}),L[18]=j,L[19]=N):N=L[19],L[20]!==I?(C=I&&(0,i.jsx)("div",{className:"absolute top-0 w-full h-full backdrop-blur-2xl z-[2]"}),L[20]=I,L[21]=C):C=L[21],L[22]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)("div",{className:(0,en.cn)("hidden lg:block max-w-[80rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background] from-5% via-[--background] transition-opacity via-opacity-50 via-5% to-transparent","opacity-100 duration-500")}),S=(0,i.jsx)("div",{className:(0,en.cn)("hidden lg:block max-w-[60rem] w-full z-[2] h-full absolute -right-[10rem] &-right-[25rem] &-bottom-[10rem] bg-gradient-to-l from-[--background] &rotate-45 via-[--background] via-opacity-50 via-5% transition-opacity to-transparent","opacity-100 duration-500")}),L[22]=w,L[23]=S):(w=L[22],S=L[23]),L[24]!==D.disableSidebarTransparency?(k=!D.disableSidebarTransparency&&(0,i.jsx)("div",{className:(0,en.cn)("hidden lg:block max-w-[10rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background] via-[--background] transition-opacity via-opacity-50 via-5% to-transparent","opacity-70 duration-500")}),L[24]=D.disableSidebarTransparency,L[25]=k):k=L[25],L[26]===Symbol.for("react.memo_cache_sentinel")?(A=(0,i.jsx)("div",{className:"w-full z-[2] absolute bottom-0 h-[20rem] bg-gradient-to-t from-[--background] via-[--background] via-opacity-50 via-10% to-transparent"}),L[26]=A):A=L[26],L[27]!==N||L[28]!==C||L[29]!==k||L[30]!==x||L[31]!==f?(_=(0,i.jsxs)("div",{className:x,children:[b,y,f,N,C,w,S,k,A]}),L[27]=N,L[28]=C,L[29]=k,L[30]=x,L[31]=f,L[32]=_):_=L[32],_}function lJ(e){var l;let n,t,r,s,o,c,d,u,m=(0,a.c)(27),{episodes:h,className:p}=e,g=(0,eF.Ky)(),x=(0,b.md)(lH),v=(0,b.md)(lK),f=(0,b.Xr)(lW),[j,N]=(0,b.fp)(lG),C=h[x]||null,w=g.mediaPageBannerType===eF.px.BlurWhenUnavailable&&!(null==C||null==(l=C.baseAnime)?void 0:l.bannerImage);if(m[0]!==x||m[1]!==h.length||m[2]!==j||m[3]!==f?(n=()=>{if(h.length<=1)return;let e=setInterval(()=>{j||f((x+1)%h.length)},8e3);return()=>clearInterval(e)},t=[x,h.length,j,f],m[0]=x,m[1]=h.length,m[2]=j,m[3]=f,m[4]=n,m[5]=t):(n=m[4],t=m[5]),y.useEffect(n,t),!h.length)return null;let S=g.hideTopNavbar&&"lg:h-[32rem]",k=g.mediaPageBannerSize===eF.kE.Small&&"lg:h-[26rem]",A=g.mediaPageBannerSize===eF.kE.Small&&g.hideTopNavbar&&"lg:h-[28rem]";return m[6]!==p||m[7]!==S||m[8]!==k||m[9]!==A?(r=(0,en.cn)("__header lg:h-[28rem] max-w-full overflow-hidden",S,k,A,p),m[6]=p,m[7]=S,m[8]=k,m[9]=A,m[10]=r):r=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(s={initial:{opacity:0},animate:{opacity:1},transition:{duration:1.2}},m[11]=s):s=m[11],m[12]!==C||m[13]!==v||m[14]!==w?(o=(0,i.jsx)(lQ,{episode:C,isTransitioning:v,shouldBlurBanner:w}),m[12]=C,m[13]=v,m[14]=w,m[15]=o):o=m[15],m[16]!==C||m[17]!==h||m[18]!==v||m[19]!==N?(c=C&&!v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l$,{episode:C,episodes:h,onHoverChange:N}),(0,i.jsx)(lq,{episode:C,isTransitioning:v})]}),m[16]=C,m[17]=h,m[18]=v,m[19]=N,m[20]=c):c=m[20],m[21]!==c?(d=(0,i.jsx)(lg.N,{children:c}),m[21]=c,m[22]=d):d=m[22],m[23]!==d||m[24]!==r||m[25]!==o?(u=(0,i.jsxs)(lU.P.div,{className:r,...s,children:[o,d]}),m[23]=d,m[24]=r,m[25]=o,m[26]=u):u=m[26],u}let l0=(0,x.eU)("base"),l1=(0,eL.tG)("sea-home-discover-header-type","anime",void 0,{getOnInit:!0});function l2(){var e,l,n,a,t,r,s,d,u,m,h,g,x,v,f,j,C,w,S,k,A,L,P,E,I,D,T,M,O;let R=(0,Q.v1)(),{data:z,isLoading:G}=(0,o.bN)(),{width:K}=(0,ly.A)(),W=(0,b.md)(lu.Qy),X=!(null==W?void 0:W.length),{libraryGenres:Z,libraryCollectionList:$,filteredLibraryCollectionList:Y,isLoading:q,continueWatchingList:J,unmatchedLocalFiles:ee,ignoredLocalFiles:el,unmatchedGroups:ei,unknownGroups:ea,streamingMediaIds:et,hasEntries:er,isStreamingOnly:es,isNakamaLibrary:eo}=(0,eV.VI)(),{mangaCollection:ec}=(0,lk.k)(),ed=(0,eF.Ky)(),[eu,em]=(0,b.fp)(l0),[eh,eg]=(0,b.fp)(l1),[eb,ev]=(0,b.fp)(lS.G),ef=(0,b.Xr)(ex),ej=y.useMemo(()=>{var e;let l=(null==z?void 0:z.length)?z:H;return K<1024&&(null==(e=l[0])?void 0:e.type)==="anime-continue-watching-header"?(l.find(e=>"anime-continue-watching"===e.type)&&(l=l.filter(e=>"anime-continue-watching"!==e.type)),l.map(e=>"anime-continue-watching-header"===e.type?{...e,type:"anime-continue-watching"}:e)):l},[z,K<1024]);y.useEffect(()=>{ev(eb)},[eb]);let eN=(0,b.Xr)(V.ho),eC=(null==R||null==(e=R.torrentstreamSettings)?void 0:e.includeInLibrary)||(null==R||null==(l=R.debridSettings)?void 0:l.includeDebridStreamInLibrary)||(null==R||null==(a=R.settings)||null==(n=a.library)?void 0:n.includeOnlineStreamingInLibrary)?"stream":"local";return q||G?(0,i.jsx)(y.Fragment,{children:(0,i.jsxs)("div",{className:"p-4 space-y-4 relative z-[4]",children:[(0,i.jsx)(lh.E,{className:"h-12 w-full max-w-lg relative"}),(0,i.jsx)("div",{className:(0,en.cn)("grid h-[22rem] min-[2000px]:h-[24rem] grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-7 min-[2000px]:grid-cols-8 gap-4"),children:[1,2,3,4,5,6,7,8].map((e,l)=>(0,i.jsx)(lh.E,{className:(0,en.cn)("h-[22rem] min-[2000px]:h-[24rem] col-span-1 aspect-[6/7] flex-none rounded-[--radius-md] relative overflow-hidden","[&:nth-child(8)]:hidden min-[2000px]:[&:nth-child(8)]:block","[&:nth-child(7)]:hidden 2xl:[&:nth-child(7)]:block","[&:nth-child(6)]:hidden xl:[&:nth-child(6)]:block","[&:nth-child(5)]:hidden xl:[&:nth-child(5)]:block","[&:nth-child(4)]:hidden lg:[&:nth-child(4)]:block","[&:nth-child(3)]:hidden md:[&:nth-child(3)]:block")},l))})]})}):!er&&function(e){if(!e)return!0;for(let l of e)if(!["anime-continue-watching","anime-library","anime-continue-watching-header","local-anime-library","local-anime-library-stats","library-upcoming-episodes"].includes(l.type))return!1;return!0}(ej)&&!q?(0,i.jsxs)("div",{"data-home-screen":"no-entries",className:"contents",children:[(0,i.jsxs)(y.Fragment,{children:[(0,i.jsx)(lN.In,{playTrailer:!lp.Ck}),(0,i.jsx)("div",{className:"h-0 visibility-hidden pointer-events-none opacity-0",children:"manga"===eh&&(0,i.jsx)(lw.fG,{country:"JP",forDiscoverHeader:!0})})]}),(0,i.jsx)(eR,{collectionList:$,unmatchedLocalFiles:ee,ignoredLocalFiles:el,unknownGroups:ea,isLoading:q,hasEntries:er,isStreamingOnly:es,isNakamaLibrary:eo,className:(0,en.cn)(((null==(L=ej[0])?void 0:L.type)==="discover-header"||(null==(P=ej[0])?void 0:P.type)==="anime-continue-watching-header")&&"!mt-[-4rem] !mb-[-1rem]")}),(0,i.jsxs)("div",{className:"text-center space-y-6 py-10",children:[(0,i.jsx)("h2",{children:"Your home screen is empty"}),!!(null==R||null==(I=R.settings)||null==(E=I.library)?void 0:E.libraryPath)&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(p.$n,{intent:"primary-glass",leftIcon:(0,i.jsx)(e7.CKj,{}),size:"xl",rounded:!0,onClick:()=>eN(!0),children:"Scan your anime library"})}),!(null==R||null==(T=R.settings)||null==(D=T.library)?void 0:D.libraryPath)&&X&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eT.i,{href:"/discover",className:"block",children:(0,i.jsx)(p.$n,{intent:"gray-glass",leftIcon:(0,i.jsx)(ep._rf,{}),size:"lg",rounded:!0,children:"Add series to your collection"})})}),!(null==R||null==(O=R.settings)||null==(M=O.library)?void 0:M.libraryPath)&&!X&&(0,i.jsxs)(i.Fragment,{children:["local"===eC&&(0,i.jsx)(p.$n,{intent:"gray-glass",leftIcon:(0,i.jsx)(lb.xVK,{className:"text-2xl"}),size:"lg",rounded:!0,onClick:()=>{ef(!0)},children:"Add currently watched series to the library"}),"stream"===eC&&(0,i.jsxs)("div",{className:"p-4 border w-fit mx-auto border-dashed rounded-xl",children:[(0,i.jsx)("p",{children:"No series are currently being watched"}),(0,i.jsx)("p",{className:"text-[--muted]",children:"Add series to your 'Currently watching' list to get started"})]})]})]}),(0,i.jsx)("h3",{children:"Trending Right Now"}),(0,i.jsx)(lC.tl,{}),(0,i.jsx)("div",{"data-home-screen-item-divider":!0,className:"h-8"}),(0,i.jsx)(ey,{emptyLibrary:!0,isNakamaLibrary:eo}),(0,i.jsx)(B.d,{unmatchedGroups:ei}),(0,i.jsx)(U.U,{unknownGroups:ea}),(0,i.jsx)(F,{files:el}),(0,i.jsx)(N,{})]}):(0,i.jsxs)("div",{"data-home-screen":!0,className:"contents",children:[(null==(t=ej[0])?void 0:t.type)==="discover-header"&&(0,i.jsxs)(y.Fragment,{children:[(0,i.jsx)(lN.In,{}),(0,i.jsxs)("div",{className:"h-0 visibility-hidden pointer-events-none opacity-0",children:["anime"===eh&&(0,i.jsx)(lC.tl,{}),"manga"===eh&&(0,i.jsx)(lw.fG,{country:"JP",forDiscoverHeader:!0})]})]}),(null==(r=ej[0])?void 0:r.type)==="anime-continue-watching-header"&&(0,i.jsx)(y.Fragment,{children:(0,i.jsx)(lJ,{episodes:J})}),ed.libraryScreenBannerType===eF.H4.Dynamic&&(null==(s=ej[0])?void 0:s.type)==="manga-library"&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(lm.dx,{manga:(null==ec||null==(m=ec.lists)||null==(u=m.flatMap(e=>e.entries))||null==(d=u.flatMap(e=>null==e?void 0:e.media))?void 0:d.filter(Boolean))||[]})}),(0,i.jsx)("div",{className:(0,en.cn)("h-12 lg:hidden"),"data-library-toolbar-top-padding":!0}),(null==(h=ej[0])?void 0:h.type)!=="anime-continue-watching-header"&&(null==(g=ej[0])?void 0:g.type)==="anime-continue-watching"&&(0,i.jsx)("div",{className:(0,en.cn)("lg:h-16 hidden"),"data-library-toolbar-top-padding":!0}),ed.libraryScreenBannerType===eF.H4.Dynamic&&er&&((null==(x=ej[0])?void 0:x.type)==="anime-continue-watching"||(null==(v=ej[0])?void 0:v.type)==="manga-library")&&(0,i.jsx)("div",{className:(0,en.cn)("h-28",ed.hideTopNavbar&&"h-40"),"data-library-toolbar-top-padding":!0}),(0,i.jsx)(eR,{collectionList:$,unmatchedLocalFiles:ee,ignoredLocalFiles:el,unknownGroups:ea,isLoading:q,hasEntries:er,isStreamingOnly:es,isNakamaLibrary:eo,className:(0,en.cn)(((null==(f=ej[0])?void 0:f.type)==="discover-header"||(null==(j=ej[0])?void 0:j.type)==="anime-continue-watching-header")&&"!mt-[-4rem] !mb-[-1rem]")}),!!ed.libraryScreenCustomBannerImage&&ed.libraryScreenBannerType===eF.H4.Custom&&(null==(C=ej[0])?void 0:C.type)!=="discover-header"&&(null==(w=ej[0])?void 0:w.type)!=="anime-continue-watching-header"&&(0,i.jsx)("div",{"data-custom-library-banner-top-spacer":!0,className:(0,en.cn)("py-20",ed.hideTopNavbar&&"py-28")}),er&&ed.libraryScreenBannerType===eF.H4.Custom&&(null==(S=ej[0])?void 0:S.type)!=="discover-header"&&(null==(k=ej[0])?void 0:k.type)!=="anime-continue-watching-header"&&(0,i.jsx)(_.z,{isLibraryScreen:!0,isHomeScreen:!0}),er&&-1!==ej.findIndex(e=>"anime-continue-watching"===e.type)&&ed.libraryScreenBannerType===eF.H4.Dynamic&&(0,i.jsx)("div",{className:(0,en.cn)((null==(A=ej[0])?void 0:A.type)!=="anime-continue-watching"?"visibility-hidden pointer-events-none opacity-0 !mt-0":"contents !mt-0"),children:(0,i.jsx)(c.F,{list:J})}),!q&&(0,i.jsxs)(lg.N,{mode:"wait",children:["base"===eu&&(0,i.jsxs)(eJ.f,{className:"relative 2xl:order-first pb-10 pt-4",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.25},children:[ej.filter(e=>"discover-header"!==e.type&&"anime-continue-watching-header"!==e.type).map((e,l)=>(0,i.jsxs)(y.Fragment,{children:[0!==l&&(null==e?void 0:e.type)!=="manga-library"&&(null==e?void 0:e.type)!=="anime-library"&&(null==e?void 0:e.type)!=="anime-continue-watching"&&"anime-library-stats"!==e.type&&(0,i.jsx)("div",{"data-home-screen-item-divider":l,className:"h-8"}),(0,i.jsx)(l3,{item:e,index:ej.findIndex(l=>l.id===e.id),libraryCollectionProps:{libraryGenres:Z,libraryCollectionList:$,filteredLibraryCollectionList:Y,isLoading:q,continueWatchingList:J,unmatchedLocalFiles:ee,ignoredLocalFiles:el,unmatchedGroups:ei,unknownGroups:ea,streamingMediaIds:et,hasEntries:er,isStreamingOnly:es,isNakamaLibrary:eo}})]},e.id)),(0,i.jsx)("div",{"data-home-screen-item-divider":!0,className:"h-8"})]},"base"),"detailed"===eu&&(0,i.jsx)(eJ.f,{className:"relative 2xl:order-first pb-10 pt-4",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.25},children:(0,i.jsx)(e9,{collectionList:$,continueWatchingList:J,isLoading:q,hasEntries:er,streamingMediaIds:et,isNakamaLibrary:eo})},"detailed")]}),(0,i.jsx)(ey,{isNakamaLibrary:eo}),(0,i.jsx)(B.d,{unmatchedGroups:ei}),(0,i.jsx)(U.U,{unknownGroups:ea}),(0,i.jsx)(F,{files:el}),(0,i.jsx)(N,{})]})}function l3(e){var l,n,t,s,o,c,d,u,m,h,p,g,x,b,y,v,f,j;let N,C,w,S=(0,a.c)(84),{item:k,index:_}=e,{libraryGenres:L,libraryCollectionList:P,filteredLibraryCollectionList:E,isLoading:I,continueWatchingList:D,streamingMediaIds:T,hasEntries:M,isNakamaLibrary:F}=e.libraryCollectionProps;(0,eF.Ky)();let O=W[k.type];e:{if(!O||!k){N=void 0;break e}if(!k.schemaVersion||k.schemaVersion!==O.schemaVersion){let e;S[0]!==k||S[1]!==O.schemaVersion?(e={...k,schemaVersion:O.schemaVersion,options:void 0},S[0]=k,S[1]=O.schemaVersion,S[2]=e):e=S[2],N=e;break e}N=k}let R=N,z=(null==R?void 0:R.type)==="local-anime-library-stats";S[3]!==z?(C={enabled:z},S[3]=z,S[4]=C):C=S[4];let{data:V}=(0,r.lD)(C);if(!O||!R){let e;return S[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{children:"Item not found"}),S[5]=e):e=S[5],e}if("centered-title"===R.type){let e,a=null==(l=R.options)?void 0:l.text,t=null==(n=R.options)?void 0:n.text;return S[6]!==a||S[7]!==t?(e=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("h2",{"data-home-screen-centered-title":a,className:"text-center text-3xl lg:text-4xl font-bold py-4",children:t})}),S[6]=a,S[7]=t,S[8]=e):e=S[8],e}if("anime-continue-watching"===R.type){let e,l=0===_;return S[9]!==D||S[10]!==I||S[11]!==l?(e=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(A.P,{episodes:D,isLoading:I,withTitle:l})}),S[9]=D,S[10]=I,S[11]=l,S[12]=e):e=S[12],e}if("anime-library"===R.type){let e,l=null==(t=R.options)?void 0:t.statuses,n=(null==(s=R.options)?void 0:s.layout)||"grid";return S[13]!==D||S[14]!==E||S[15]!==M||S[16]!==I||S[17]!==P||S[18]!==L||S[19]!==T||S[20]!==l||S[21]!==n?(e=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ld.v,{genres:L,collectionList:P,filteredCollectionList:E,continueWatchingList:D,isLoading:I,hasEntries:M,streamingMediaIds:T,showStatuses:l,type:n})}),S[13]=D,S[14]=E,S[15]=M,S[16]=I,S[17]=P,S[18]=L,S[19]=T,S[20]=l,S[21]=n,S[22]=e):e=S[22],e}if("anime-carousel"===R.type){let l;return S[23]!==R||S[24]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l8,{libraryCollectionProps:e.libraryCollectionProps,item:R})}),S[23]=R,S[24]=e.libraryCollectionProps,S[25]=l):l=S[25],l}if("manga-carousel"===R.type){let l;return S[26]!==R||S[27]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(nn,{libraryCollectionProps:e.libraryCollectionProps,item:R})}),S[26]=R,S[27]=e.libraryCollectionProps,S[28]=l):l=S[28],l}if("anime-schedule-calendar"===R.type){let l;return S[29]!==R||S[30]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l7,{libraryCollectionProps:e.libraryCollectionProps,item:R})}),S[29]=R,S[30]=e.libraryCollectionProps,S[31]=l):l=S[31],l}if("library-upcoming-episodes"===R.type){let l;return S[32]!==R||S[33]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l6,{libraryCollectionProps:e.libraryCollectionProps,item:R})}),S[32]=R,S[33]=e.libraryCollectionProps,S[34]=l):l=S[34],l}if("discover-header"===R.type||"anime-continue-watching-header"===R.type)return null;if("aired-recently"===R.type){let e;return S[35]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(eJ.f,{className:"px-4",children:(0,i.jsx)(lP.i,{})}),S[35]=e):e=S[35],e}if("manga-library"===R.type){let l;return S[36]!==_||S[37]!==R||S[38]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l5,{libraryCollectionProps:e.libraryCollectionProps,item:R,index:_})}),S[36]=_,S[37]=R,S[38]=e.libraryCollectionProps,S[39]=l):l=S[39],l}if("local-anime-library"===R.type){let l;return S[40]!==_||S[41]!==R||S[42]!==e.libraryCollectionProps?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l4,{libraryCollectionProps:e.libraryCollectionProps,item:R,index:_})}),S[40]=_,S[41]=R,S[42]=e.libraryCollectionProps,S[43]=l):l=S[43],l}if("local-anime-library-stats"===R.type){let e,l,n,a,t,r,s,N,C,w,k,A,_,L,P,E,I,D,T=F&&"lg:grid-cols-5";S[44]!==T?(e=(0,en.cn)("grid grid-cols-3 lg:grid-cols-6 gap-4 [&>div]:text-center [&>div>p]:text-[--muted] py-4",T),S[44]=T,S[45]=e):e=S[45],S[46]!==(null==V||null==(o=V.stats)?void 0:o.totalSize)||S[47]!==F?(l=!F&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:null!=(x=null==V||null==(p=V.stats)?void 0:p.totalSize)?x:"-"}),(0,i.jsx)("p",{children:"Library"})]}),S[46]=null==V||null==(g=V.stats)?void 0:g.totalSize,S[47]=F,S[48]=l):l=S[48];let M=null!=(b=null==V||null==(c=V.stats)?void 0:c.totalFiles)?b:"-";S[49]!==M?(n=(0,i.jsx)("h3",{children:M}),S[49]=M,S[50]=n):n=S[50],S[51]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)("p",{children:"Files"}),S[51]=a):a=S[51],S[52]!==n?(t=(0,i.jsxs)("div",{children:[n,a]}),S[52]=n,S[53]=t):t=S[53];let O=null!=(y=null==V||null==(d=V.stats)?void 0:d.totalEntries)?y:"-";S[54]!==O?(r=(0,i.jsx)("h3",{children:O}),S[54]=O,S[55]=r):r=S[55],S[56]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)("p",{children:"Entries"}),S[56]=s):s=S[56],S[57]!==r?(N=(0,i.jsxs)("div",{children:[r,s]}),S[57]=r,S[58]=N):N=S[58];let R=null!=(v=null==V||null==(u=V.stats)?void 0:u.totalShows)?v:"-";S[59]!==R?(C=(0,i.jsx)("h3",{children:R}),S[59]=R,S[60]=C):C=S[60],S[61]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)("p",{children:"TV Shows"}),S[61]=w):w=S[61],S[62]!==C?(k=(0,i.jsxs)("div",{children:[C,w]}),S[62]=C,S[63]=k):k=S[63];let z=null!=(f=null==V||null==(m=V.stats)?void 0:m.totalMovies)?f:"-";S[64]!==z?(A=(0,i.jsx)("h3",{children:z}),S[64]=z,S[65]=A):A=S[65],S[66]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)("p",{children:"Movies"}),S[66]=_):_=S[66],S[67]!==A?(L=(0,i.jsxs)("div",{children:[A,_]}),S[67]=A,S[68]=L):L=S[68];let U=null!=(j=null==V||null==(h=V.stats)?void 0:h.totalSpecials)?j:"-";return S[69]!==U?(P=(0,i.jsx)("h3",{children:U}),S[69]=U,S[70]=P):P=S[70],S[71]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsx)("p",{children:"Specials"}),S[71]=E):E=S[71],S[72]!==P?(I=(0,i.jsxs)("div",{children:[P,E]}),S[72]=P,S[73]=I):I=S[73],S[74]!==N||S[75]!==k||S[76]!==L||S[77]!==I||S[78]!==e||S[79]!==l||S[80]!==t?(D=(0,i.jsx)(eJ.f,{children:(0,i.jsxs)("div",{className:e,"data-detailed-library-view-stats-container":!0,children:[l,t,N,k,L,I]})}),S[74]=N,S[75]=k,S[76]=L,S[77]=I,S[78]=e,S[79]=l,S[80]=t,S[81]=D):D=S[81],D}return S[82]!==R.type?(w=(0,i.jsxs)("div",{children:["Item not found (",R.type,")"]}),S[82]=R.type,S[83]=w):w=S[83],w}function l4(e){var l,n;let t,r=(0,a.c)(8),s=(null==(n=e.item)||null==(l=n.options)?void 0:l.layout)||"grid";return r[0]!==e.libraryCollectionProps.continueWatchingList||r[1]!==e.libraryCollectionProps.hasEntries||r[2]!==e.libraryCollectionProps.isLoading||r[3]!==e.libraryCollectionProps.isNakamaLibrary||r[4]!==e.libraryCollectionProps.libraryCollectionList||r[5]!==e.libraryCollectionProps.streamingMediaIds||r[6]!==s?(t=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e9,{isHomeItem:!0,collectionList:e.libraryCollectionProps.libraryCollectionList,continueWatchingList:e.libraryCollectionProps.continueWatchingList,isLoading:e.libraryCollectionProps.isLoading,hasEntries:e.libraryCollectionProps.hasEntries,streamingMediaIds:e.libraryCollectionProps.streamingMediaIds,isNakamaLibrary:e.libraryCollectionProps.isNakamaLibrary,type:s})}),r[0]=e.libraryCollectionProps.continueWatchingList,r[1]=e.libraryCollectionProps.hasEntries,r[2]=e.libraryCollectionProps.isLoading,r[3]=e.libraryCollectionProps.isNakamaLibrary,r[4]=e.libraryCollectionProps.libraryCollectionList,r[5]=e.libraryCollectionProps.streamingMediaIds,r[6]=s,r[7]=t):t=r[7],t}function l5(e){var l,n;let t,r,s=(0,a.c)(10),{item:o,index:c}=e;(0,eF.Ky)();let{mangaCollection:d,filteredMangaCollection:u,mangaCollectionLoading:m,storedProviders:h,hasManga:p}=(0,lk.k)();if(!d||m){let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(lf.C,{}),s[0]=e):e=s[0],e}s[1]===Symbol.for("react.memo_cache_sentinel")?(t=[],s[1]=t):t=s[1];let g=null==(l=o.options)?void 0:l.statuses,x=(null==(n=o.options)?void 0:n.layout)||"grid",b=0===c;return s[2]!==u||s[3]!==p||s[4]!==d||s[5]!==h||s[6]!==g||s[7]!==x||s[8]!==b?(r=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(lA.D4,{collection:d,filteredCollection:u,genres:t,storedProviders:h,hasManga:p,showStatuses:g,type:x,withTitle:b})})}),s[2]=u,s[3]=p,s[4]=d,s[5]=h,s[6]=g,s[7]=x,s[8]=b,s[9]=r):r=s[9],r}function l6(e){let l,n=(0,a.c)(1),{libraryCollectionProps:t}=e,{hasEntries:r}=t;return r?(n[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)(eJ.f,{className:"space-y-0 px-4",children:(0,i.jsx)(lL.K,{})}),n[0]=l):l=n[0],l):null}function l7(e){let l,n=(0,a.c)(2),t=(0,lj.Y2)();return n[0]!==t?(l=(0,i.jsx)(eJ.f,{className:"space-y-0 px-4 py-4",children:(0,i.jsx)(l_.ut,{missingEpisodes:t})}),n[0]=t,n[1]=l):l=n[1],l}function l8(e){var l,n,r,s,o;let c,d,u,m,h,p,g,x=(0,a.c)(24),{item:b}=e,v=y.useRef(null),f=b.options;x[0]===Symbol.for("react.memo_cache_sentinel")?(c={once:!0},x[0]=c):c=x[0];let j=(0,lx.W)(v,c);x[1]!==f?(d=(null==f?void 0:f.sorting)?[f.sorting]:["SCORE_DESC"],x[1]=f,x[2]=d):d=x[2];let N=(null==f?void 0:f.season)||void 0,C=(null==f?void 0:f.year)?f.year:void 0,w=(null==f||null==(l=f.genres)?void 0:l.length)?null==f?void 0:f.genres:void 0,S=(null==f?void 0:f.format)||void 0;x[3]!==f?(u=(null==f||null==(n=f.status)?void 0:n.length)&&Array.isArray(f.status)?f.status:["RELEASING","FINISHED"],x[3]=f,x[4]=u):u=x[4];let k=(null==f?void 0:f.isAdult)||void 0,A=(null==f?void 0:f.countryOfOrigin)||void 0;x[5]!==d||x[6]!==N||x[7]!==C||x[8]!==w||x[9]!==S||x[10]!==u||x[11]!==k||x[12]!==A?(m={page:1,perPage:20,sort:d,season:N,seasonYear:C,genres:w,format:S,status:u,isAdult:k,countryOfOrigin:A},x[5]=d,x[6]=N,x[7]=C,x[8]=w,x[9]=S,x[10]=u,x[11]=k,x[12]=A,x[13]=m):m=x[13];let{data:_,isLoading:L}=(0,t.qN)(m,!!(null==f?void 0:f.name)&&j),P=(null==f?void 0:f.name)||"Anime Carousel";return x[14]!==P?(h=(0,i.jsx)("h2",{children:P}),x[14]=P,x[15]=h):h=x[15],x[16]!==_||x[17]!==j||x[18]!==L||x[19]!==b?(p=L||_||!j?(0,i.jsxs)(e0.FN,{className:"w-full max-w-full",gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!0,children:[(0,i.jsx)(e0.h1,{className:"-top-2"}),(0,i.jsx)(e0.Wk,{className:"px-6",children:_?null==_||null==(o=_.Page)||null==(s=o.media)||null==(r=s.filter(Boolean))?void 0:r.sort(nl).map(ne):[...Array(10).keys()].map(l9)})]}):(0,i.jsx)(nr,{item:b}),x[16]=_,x[17]=j,x[18]=L,x[19]=b,x[20]=p):p=x[20],x[21]!==h||x[22]!==p?(g=(0,i.jsxs)(eJ.f,{className:"space-y-0 px-4",ref:v,children:[h,p]}),x[21]=h,x[22]=p,x[23]=g):g=x[23],g}function l9(e,l){return(0,i.jsx)(lv.m,{},l)}function ne(e){return(0,i.jsx)(eY.V,{media:e,showLibraryBadge:!0,containerClassName:"basis-[200px] md:basis-[250px] mx-2 mt-8 mb-0",showTrailer:!0,type:"anime"},e.id)}function nl(e,l){return l.meanScore-e.meanScore}function nn(e){var l,n,t,r;let o,c,d,u,m,h,p,g=(0,a.c)(23),{item:x}=e,b=y.useRef(null),v=x.options;g[0]===Symbol.for("react.memo_cache_sentinel")?(o={once:!0},g[0]=o):o=g[0];let f=(0,lx.W)(b,o);g[1]!==v?(c=(null==v?void 0:v.sorting)?[v.sorting]:["SCORE_DESC"],g[1]=v,g[2]=c):c=g[2];let j=(null==v?void 0:v.year)?v.year:void 0,N=(null==v||null==(l=v.genres)?void 0:l.length)?null==v?void 0:v.genres:void 0,C=(null==v?void 0:v.format)||void 0;g[3]!==v?(d=(null==v?void 0:v.status)&&Array.isArray(v.status)?v.status:["RELEASING","FINISHED"],g[3]=v,g[4]=d):d=g[4];let w=(null==v?void 0:v.isAdult)||void 0,S=(null==v?void 0:v.countryOfOrigin)||void 0;g[5]!==c||g[6]!==j||g[7]!==N||g[8]!==C||g[9]!==d||g[10]!==w||g[11]!==S?(u={page:1,perPage:20,sort:c,year:j,genres:N,format:C,status:d,isAdult:w,countryOfOrigin:S},g[5]=c,g[6]=j,g[7]=N,g[8]=C,g[9]=d,g[10]=w,g[11]=S,g[12]=u):u=g[12];let{data:k,isLoading:A}=(0,s.cE)(u,!!(null==v?void 0:v.name)&&f),_=(null==v?void 0:v.name)||"Manga Carousel";return g[13]!==_?(m=(0,i.jsx)("h2",{children:_}),g[13]=_,g[14]=m):m=g[14],g[15]!==k||g[16]!==f||g[17]!==A||g[18]!==x?(h=A||k||!f?(0,i.jsxs)(e0.FN,{className:"w-full max-w-full",gap:"xl",opts:{align:"start",dragFree:!0},autoScroll:!0,children:[(0,i.jsx)(e0.h1,{className:"-top-2"}),(0,i.jsx)(e0.Wk,{className:"px-6",children:k?null==k||null==(r=k.Page)||null==(t=r.media)||null==(n=t.filter(Boolean))?void 0:n.sort(nt).map(na):[...Array(10).keys()].map(ni)})]}):(0,i.jsx)(nr,{item:x}),g[15]=k,g[16]=f,g[17]=A,g[18]=x,g[19]=h):h=g[19],g[20]!==m||g[21]!==h?(p=(0,i.jsxs)(eJ.f,{className:"space-y-0 px-4",ref:b,children:[m,h]}),g[20]=m,g[21]=h,g[22]=p):p=g[22],p}function ni(e,l){return(0,i.jsx)(lv.m,{},l)}function na(e){return(0,i.jsx)(eY.V,{media:e,containerClassName:"basis-[200px] md:basis-[250px] mx-2 mt-8 mb-0",type:"manga"},e.id)}function nt(e,l){return l.meanScore-e.meanScore}function nr(e){let l,n=(0,a.c)(2),{item:t}=e,r=W[t.type],s=null==r?void 0:r.name;return n[0]!==s?(l=(0,i.jsx)(eJ.f,{className:"rounded-xl bg-gray-900 border-2 border-dashed border-orange-400 p-4 !my-4",children:(0,i.jsxs)("p",{className:"text-sm font-medium text-gray-400",children:['Item "',s,'" cannot be displayed because it is missing some required options.']})}),n[0]=s,n[1]=l):l=n[1],l}let ns="force-static";function no(){let e,l=(0,a.c)(1);return(0,eF.Ky)(),l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l2,{})}),l[0]=e):e=l[0],e}},71536:(e,l,n)=>{Promise.resolve().then(n.bind(n,68398))}},e=>{var l=l=>e(e.s=l);e.O(0,[7518,3873,5271,3380,844,9204,6446,2150,6711,585,5479,4506,5897,8087,5760,3603,7753,2362,4613,512,9910,8429,7949,8481,2202,7825,1805,5290,4762,4218,4791,1626,6905,9986,1597,7528,5045,9690,9325,9360,1334,1298,5340,4101,1029,1078,1683,5334,6862,4033,9484,9832,5565,2975,7363,5667,8672,615,2701,9033,8441,6891,7358],()=>l(71536)),_N_E=e.O()}]);