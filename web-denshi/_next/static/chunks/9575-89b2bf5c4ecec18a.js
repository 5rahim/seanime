"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9575],{11983:(e,t,a)=>{a.d(t,{D0:()=>x,I:()=>v,Oj:()=>f,PF:()=>w,f1:()=>m,sC:()=>b,x8:()=>N});var n=a(19749),r=a(39076),l=a(50548),i=a(12459),s=a(93715),o=a(42500),d=a(29724),c=a(21842),u=a(4573),h=a.n(u),p=a(12115);let g=(0,o.eU)([]);function f(e){var t;let a=v(),[n,r]=(0,d.fp)(g);p.useEffect(()=>{r([])},[a]);let l=p.useCallback(e=>{r(t=>[...t,e])},[]);return{allPagesLoaded:n.length>0&&n.length===(null==e||null==(t=e.pages)?void 0:t.length),loadedPages:n,handlePageLoad:l}}let m=(0,c.tG)("sea-manga-chapter",void 0,void 0,{getOnInit:!0});function b(){return(0,d.Xr)(m)}function v(){return(0,d.md)(m)}function x(e,t){let a=v(),n=b(),i=(0,r.$0)(),o=p.useMemo(()=>{let n;if(!e||!a)return;let r=i.filter(e=>e.chapterId!==a.chapterId).sort((e,t)=>(0,l.Zf)(t.chapterNumber)-(0,l.Zf)(e.chapterNumber)).find(e=>(0,l.HH)(e.chapterNumber,a.chapterNumber)),s=r?{chapterId:r.chapterId,chapterNumber:r.chapterNumber,provider:r.provider,mediaId:Number(e)}:void 0;if(!(null==t?void 0:t.chapters))return s;let o=t.chapters.findIndex(e=>e.id===(null==a?void 0:a.chapterId));-1!==o&&t.chapters[o-1]&&(n={chapterId:t.chapters[o-1].id,chapterNumber:t.chapters[o-1].chapter,provider:t.chapters[o-1].provider,mediaId:t.mediaId});let d=t.chapters.filter(e=>e.id!==a.chapterId).sort((e,t)=>(0,l.Zf)(t.chapter)-(0,l.Zf)(e.chapter)).find(e=>(0,l.HH)(e.chapter,a.chapterNumber)),c=[s,n,d?{chapterId:d.id,chapterNumber:d.chapter,provider:d.provider,mediaId:t.mediaId}:void 0].filter(Boolean);if(0===c.length)return;if(1===c.length)return c[0];let u=c.reduce((e,t)=>e?t?Math.abs((0,l.Zf)(e.chapterNumber)-(0,l.Zf)(a.chapterNumber))<Math.abs((0,l.Zf)(t.chapterNumber)-(0,l.Zf)(a.chapterNumber))?e:t:e:t,c[0]);return s&&(0,l.Zf)(s.chapterNumber)===(0,l.Zf)(u.chapterNumber)?s:u},[e,a,i,null==t?void 0:t.chapters]),d=p.useMemo(()=>{let n;if(!e||!a)return;let r=i.filter(e=>e.chapterId!==a.chapterId).sort((e,t)=>(0,l.Zf)(e.chapterNumber)-(0,l.Zf)(t.chapterNumber)).find(e=>(0,l.Ge)(e.chapterNumber,a.chapterNumber)),s=r?{chapterId:r.chapterId,chapterNumber:r.chapterNumber,provider:r.provider,mediaId:Number(e)}:void 0;if(!(null==t?void 0:t.chapters))return s;let o=t.chapters.findIndex(e=>e.id===(null==a?void 0:a.chapterId));-1!==o&&t.chapters[o+1]&&(n={chapterId:t.chapters[o+1].id,chapterNumber:t.chapters[o+1].chapter,provider:t.chapters[o+1].provider,mediaId:t.mediaId});let d=t.chapters.filter(e=>e.id!==a.chapterId).sort((e,t)=>(0,l.Zf)(e.chapter)-(0,l.Zf)(t.chapter)).find(e=>(0,l.Ge)(e.chapter,a.chapterNumber)),c=[s,n,d?{chapterId:d.id,chapterNumber:d.chapter,provider:d.provider,mediaId:t.mediaId}:void 0].filter(Boolean);if(0===c.length)return;if(1===c.length)return c[0];let u=c.reduce((e,t)=>e?t?Math.abs((0,l.Zf)(e.chapterNumber)-(0,l.Zf)(a.chapterNumber))<Math.abs((0,l.Zf)(t.chapterNumber)-(0,l.Zf)(a.chapterNumber))?e:t:e:t,c[0]);return s&&(0,l.Zf)(s.chapterNumber)===(0,l.Zf)(u.chapterNumber)?s:u},[e,a,i,null==t?void 0:t.chapters]);return{goToChapter:p.useCallback(e=>{"previous"===e&&o?((0,s.v)("handle-chapter-reader").info("Going to previous chapter",o),n(o)):"next"===e&&d&&((0,s.v)("handle-chapter-reader").info("Going to next chapter",d),n(d))},[n,o,d]),previousChapter:o,nextChapter:d}}function N(e){let t,a,r=(0,n.c)(12),l=(0,d.md)(m),s=(0,d.md)(i.W6),o=(0,d.md)(i.h2),[c]=(0,d.fp)(i.a5),u=(0,d.Xr)(i.xY),h=(0,d.Xr)(i.uO);r[0]!==o||r[1]!==c||r[2]!==e||r[3]!==s||r[4]!==h||r[5]!==u?(t=()=>{var t,a,n,r,l,d,p,g;if(!(null==e||null==(t=e.pages)?void 0:t.length))return;let f={};if(s!==i.Oh.PAGED&&s!==i.Oh.LONG_STRIP&&e.pageDimensions&&0!==Object.keys(e.pageDimensions).length){let t=2e3,a=function(e){let t,a=new Map;e.forEach(e=>{a.set(e,(a.get(e)||0)+1)});let n=0;return a.forEach((e,a)=>{e>n&&(n=e,t=a)}),t}(Object.values(e.pageDimensions).map(O));a&&a>0&&(t=a+50);let i=new Map,s=0,o=0;for(;s<e.pages.length;){if(c>0&&s+1<=c){i.set(o,[e.pages[s].index]),s++,o++;continue}((null==(r=e.pageDimensions)||null==(n=r[s])?void 0:n.width)||0)>t?(i.set(o,[e.pages[s].index]),s++):e.pages[s+1]&&!((null==(d=e.pageDimensions)||null==(l=d[s+1])?void 0:l.width)&&(null==(g=e.pageDimensions)||null==(p=g[s+1])?void 0:p.width)>t)?(i.set(o,[e.pages[s].index,e.pages[s+1].index]),s+=2):(i.set(o,[e.pages[s].index]),s++),o++}i.forEach((e,t)=>{f[t]=e}),u(f),i.clear()}else{let t=0;for(;t<(null==e||null==(a=e.pages)?void 0:a.length);)f[t]=[t],t++;u(f)}let m=0;for(let[e,t]of Object.entries(f))if(t.includes(o)){m=Number(e);break}h(m)},r[0]=o,r[1]=c,r[2]=e,r[3]=s,r[4]=h,r[5]=u,r[6]=t):t=r[6];let g=null==e?void 0:e.pages;r[7]!==c||r[8]!==s||r[9]!==l||r[10]!==g?(a=[g,s,l,c],r[7]=c,r[8]=s,r[9]=l,r[10]=g,r[11]=a):a=r[11],p.useEffect(t,a)}function O(e){return e.width}function w(){let e,t,a,r,l=(0,n.c)(21),[s,o]=(0,d.fp)(i.W6),[c,u]=(0,d.fp)(i.E6),[g,f]=(0,d.fp)(i.DZ),[m,b]=(0,d.fp)(i.ll),[v,x]=(0,d.fp)(i.a5),N=j;l[0]!==x?(e=()=>{x(E)},l[0]=x,l[1]=e):e=l[1];let O=e;l[2]!==x?(t=()=>{x(D)},l[2]=x,l[3]=t):t=l[3];let w=t;l[4]!==w||l[5]!==O||l[6]!==g||l[7]!==m||l[8]!==c||l[9]!==s||l[10]!==f||l[11]!==b||l[12]!==u||l[13]!==o?(a=()=>(h().bind("m",()=>N(s,Object.values(i.Oh),o)),h().bind("d",()=>N(c,Object.values(i.uP),u)),h().bind("f",()=>N(g,Object.values(i.t$),f)),h().bind("s",()=>N(m,Object.values(i.x4),b)),h().bind("shift+right",()=>O()),h().bind("shift+left",()=>w()),A),l[4]=w,l[5]=O,l[6]=g,l[7]=m,l[8]=c,l[9]=s,l[10]=f,l[11]=b,l[12]=u,l[13]=o,l[14]=a):a=l[14],l[15]!==v||l[16]!==g||l[17]!==m||l[18]!==c||l[19]!==s?(r=[s,c,g,m,v],l[15]=v,l[16]=g,l[17]=m,l[18]=c,l[19]=s,l[20]=r):r=l[20],p.useEffect(a,r)}function A(){h().unbind("m"),h().unbind("d"),h().unbind("f"),h().unbind("s"),h().unbind("shift+right"),h().unbind("shift+left")}function D(e){return Math.max(0,e-1)}function E(e){return Math.max(0,e+1)}function j(e,t,a){let n=(t.indexOf(e)+1)%t.length;a(t[n])}},12459:(e,t,a)=>{a.d(t,{Ai:()=>o,Ap:()=>h,DZ:()=>w,E6:()=>v,EX:()=>m,IZ:()=>d,LI:()=>c,Oh:()=>x,RN:()=>A,Vl:()=>f,W6:()=>N,a5:()=>L,gI:()=>g,h2:()=>l,ll:()=>E,od:()=>u,qF:()=>y,sP:()=>C,t$:()=>O,uO:()=>i,uP:()=>b,ud:()=>j,wQ:()=>I,x4:()=>D,xM:()=>p,xY:()=>s});var n=a(42500),r=a(21842);let l=(0,n.eU)(0),i=(0,n.eU)(0),s=(0,n.eU)({}),o=(0,n.eU)(!1),d=(0,r.tG)("sea-manga-entry-reader-settings",{}),c={kbsChapterLeft:"sea-manga-chapter-left",kbsChapterRight:"sea-manga-chapter-right",kbsPageLeft:"sea-manga-page-left",kbsPageRight:"sea-manga-page-right"},u={[c.kbsChapterLeft]:"[",[c.kbsChapterRight]:"]",[c.kbsPageLeft]:"left",[c.kbsPageRight]:"right"},h=(0,r.tG)(c.kbsChapterLeft,u[c.kbsChapterLeft]),p=(0,r.tG)(c.kbsChapterRight,u[c.kbsChapterRight]),g=(0,r.tG)(c.kbsPageLeft,u[c.kbsPageLeft]),f=(0,r.tG)(c.kbsPageRight,u[c.kbsPageRight]),m={readingMode:"sea-manga-reading-mode",readingDirection:"sea-manga-reading-direction",pageFit:"sea-manga-page-fit",pageStretch:"sea-manga-page-stretch",pageGap:"sea-manga-page-gap",pageGapShadow:"sea-manga-page-gap-shadow",doublePageOffset:"sea-manga-double-page-offset",overflowPageContainerWidth:"sea-manga-overflow-page-container-width"},b={LTR:"ltr",RTL:"rtl"},v=(0,r.tG)(m.readingDirection,b.LTR),x={LONG_STRIP:"long-strip",PAGED:"paged",DOUBLE_PAGE:"double-page"},N=(0,r.tG)(m.readingMode,x.LONG_STRIP),O={CONTAIN:"contain",LARGER:"larger",COVER:"cover",TRUE_SIZE:"true-size"},w=(0,r.tG)(m.pageFit,O.CONTAIN),A=(0,r.tG)(m.overflowPageContainerWidth,50),D={NONE:"none",STRETCH:"stretch"},E=(0,r.tG)(m.pageStretch,D.NONE),j=(0,r.tG)("sea-manga-reader-progress-bar",!1),y=(0,r.tG)(m.pageGap,!0),I=(0,r.tG)(m.pageGapShadow,!0),L=(0,r.tG)(m.doublePageOffset,0),C=(0,n.eU)(!1)},17205:(e,t,a)=>{a.d(t,{DO:()=>u,ID:()=>d,Iu:()=>g,UT:()=>p,Xu:()=>h,Ym:()=>f,ke:()=>o,nC:()=>c,pK:()=>m});var n=a(19749),r=a(7675),l=a(74889),i=a(46278),s=a(69554);function o(e,t){let a,s,o,d=(0,n.c)(8),c=(0,i.jE)(),u=String(e);return d[0]!==t||d[1]!==u?(a=[l.S.MANGA_DOWNLOAD.DownloadMangaChapters.key,u,t],d[0]=t,d[1]=u,d[2]=a):a=d[2],d[3]!==c?(s=async()=>{await c.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadData.key]})},d[3]=c,d[4]=s):s=d[4],d[5]!==a||d[6]!==s?(o={endpoint:l.S.MANGA_DOWNLOAD.DownloadMangaChapters.endpoint,method:l.S.MANGA_DOWNLOAD.DownloadMangaChapters.methods[0],mutationKey:a,onSuccess:s},d[5]=a,d[6]=s,d[7]=o):o=d[7],(0,r.qk)(o)}function d(e){let t,a,i=(0,n.c)(7),s=String(e.mediaId),o=String(e.cached);i[0]!==s||i[1]!==o?(t=[l.S.MANGA_DOWNLOAD.GetMangaDownloadData.key,s,o],i[0]=s,i[1]=o,i[2]=t):t=i[2];let d=!!e.mediaId;return i[3]!==t||i[4]!==e||i[5]!==d?(a={endpoint:l.S.MANGA_DOWNLOAD.GetMangaDownloadData.endpoint,method:l.S.MANGA_DOWNLOAD.GetMangaDownloadData.methods[0],queryKey:t,data:e,enabled:d},i[3]=t,i[4]=e,i[5]=d,i[6]=a):a=i[6],(0,r.fl)(a)}function c(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.methods[0],queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key],enabled:!0},t[0]=e):e=t[0],(0,r.fl)(e)}function u(){let e,t,a=(0,n.c)(3),o=(0,i.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.MANGA_DOWNLOAD.StartMangaDownloadQueue.key],a[0]=e):e=a[0],a[1]!==o?(t={endpoint:l.S.MANGA_DOWNLOAD.StartMangaDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.StartMangaDownloadQueue.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key]}),s.oR.info("Downloading chapters")}},a[1]=o,a[2]=t):t=a[2],(0,r.qk)(t)}function h(){let e,t,a=(0,n.c)(3),o=(0,i.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.MANGA_DOWNLOAD.StopMangaDownloadQueue.key],a[0]=e):e=a[0],a[1]!==o?(t={endpoint:l.S.MANGA_DOWNLOAD.StopMangaDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.StopMangaDownloadQueue.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key]}),s.oR.success("Download queue stopped")}},a[1]=o,a[2]=t):t=a[2],(0,r.qk)(t)}function p(){let e,t,a=(0,n.c)(3),o=(0,i.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.MANGA_DOWNLOAD.ClearAllChapterDownloadQueue.key],a[0]=e):e=a[0],a[1]!==o?(t={endpoint:l.S.MANGA_DOWNLOAD.ClearAllChapterDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.ClearAllChapterDownloadQueue.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key]}),s.oR.success("Download queue cleared")}},a[1]=o,a[2]=t):t=a[2],(0,r.qk)(t)}function g(){let e,t,a=(0,n.c)(3),o=(0,i.jE)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[l.S.MANGA_DOWNLOAD.ResetErroredChapterDownloadQueue.key],a[0]=e):e=a[0],a[1]!==o?(t={endpoint:l.S.MANGA_DOWNLOAD.ResetErroredChapterDownloadQueue.endpoint,method:l.S.MANGA_DOWNLOAD.ResetErroredChapterDownloadQueue.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadQueue.key]}),s.oR.success("Reset errored chapters")}},a[1]=o,a[2]=t):t=a[2],(0,r.qk)(t)}function f(e,t){let a,o,d,c=(0,n.c)(8),u=(0,i.jE)(),h=String(e);return c[0]!==t||c[1]!==h?(a=[l.S.MANGA_DOWNLOAD.DeleteMangaDownloadedChapters.key,h,t],c[0]=t,c[1]=h,c[2]=a):a=c[2],c[3]!==u?(o=async()=>{await u.invalidateQueries({queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadData.key]}),s.oR.success("Chapters deleted")},c[3]=u,c[4]=o):o=c[4],c[5]!==a||c[6]!==o?(d={endpoint:l.S.MANGA_DOWNLOAD.DeleteMangaDownloadedChapters.endpoint,method:l.S.MANGA_DOWNLOAD.DeleteMangaDownloadedChapters.methods[0],mutationKey:a,onSuccess:o},c[5]=a,c[6]=o,c[7]=d):d=c[7],(0,r.qk)(d)}function m(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:l.S.MANGA_DOWNLOAD.GetMangaDownloadsList.endpoint,method:l.S.MANGA_DOWNLOAD.GetMangaDownloadsList.methods[0],queryKey:[l.S.MANGA_DOWNLOAD.GetMangaDownloadsList.key],enabled:!0},t[0]=e):e=t[0],(0,r.fl)(e)}},39076:(e,t,a)=>{a.d(t,{$0:()=>h,I2:()=>b,Sv:()=>p,Vb:()=>g});var n=a(19749),r=a(17205),l=a(24780),i=a(42500),s=a(29724),o=a(12115),d=a(69554);let c=(0,i.eU)(void 0),u=(0,i.eU)(e=>{let t=[],a=e(c);if(a){for(let e in a.downloaded)t=t.concat(a.downloaded[e].map(t=>({provider:e,chapterId:t.chapterId,chapterNumber:t.chapterNumber,queued:!1,downloaded:!0})));for(let e in a.queued)t=t.concat(a.queued[e].map(t=>({provider:e,chapterId:t.chapterId,chapterNumber:t.chapterNumber,queued:!0,downloaded:!1})))}return t});function h(){return(0,s.md)(u)}function p(e){let t,a,l,i,d=(0,n.c)(11),u=e?Number(e):void 0;d[0]!==u?(t={mediaId:u},d[0]=u,d[1]=t):t=d[1];let{data:h,isLoading:p,isError:g}=(0,r.ID)(t),f=(0,s.Xr)(c);return d[2]!==h||d[3]!==f?(a=()=>{f(h)},d[2]=h,d[3]=f,d[4]=a):a=d[4],d[5]!==h?(l=[h],d[5]=h,d[6]=l):l=d[6],o.useEffect(a,l),d[7]!==h||d[8]!==g||d[9]!==p?(i={downloadData:h,downloadDataLoading:p,downloadDataError:g},d[7]=h,d[8]=g,d[9]=p,d[10]=i):i=d[10],i}function g(e){let t,a,i=(0,n.c)(7),{selectedProvider:s}=(0,l.c2)(e),{mutate:o,isPending:d}=(0,r.ke)(e,s);return i[0]!==e||i[1]!==o||i[2]!==s?(t=t=>{s&&o({mediaId:Number(e),provider:s,chapterIds:t.map(m),startNow:!1},{onSuccess:f})},i[0]=e,i[1]=o,i[2]=s,i[3]=t):t=i[3],i[4]!==d||i[5]!==t?(a={downloadChapters:t,isSendingDownloadRequest:d},i[4]=d,i[5]=t,i[6]=a):a=i[6],a}function f(){d.oR.success("Chapters added to download queue")}function m(e){return e.id}function b(){let e,t=(0,n.c)(12),{data:a,isLoading:l,isError:i}=(0,r.nC)(),{mutate:s,isPending:o}=(0,r.DO)(),{mutate:d,isPending:c}=(0,r.Xu)(),{mutate:u,isPending:h}=(0,r.Iu)(),{mutate:p,isPending:g}=(0,r.UT)();return t[0]!==p||t[1]!==a||t[2]!==g||t[3]!==i||t[4]!==l||t[5]!==h||t[6]!==o||t[7]!==c||t[8]!==u||t[9]!==s||t[10]!==d?(e={downloadQueue:a,downloadQueueLoading:l,downloadQueueError:i,startDownloadQueue:s,isStartingDownloadQueue:o,stopDownloadQueue:d,isStoppingDownloadQueue:c,resetErroredChapters:u,isResettingErroredChapters:h,clearDownloadQueue:p,isClearingDownloadQueue:g},t[0]=p,t[1]=a,t[2]=g,t[3]=i,t[4]=l,t[5]=h,t[6]=o,t[7]=c,t[8]=u,t[9]=s,t[10]=d,t[11]=e):e=t[11],e}},39575:(e,t,a)=>{a.d(t,{A:()=>eo});var n=a(95155),r=a(19749),l=a(38900),i=a(83563),s=a(96826),o=a(50548),d=a(84127),c=a(2091),u=a(93715),h=a(12115),p=a(3692),g=a(85530);function f(e){let t,a,l,i,s,u,f,m,v,x=(0,r.c)(33),{index:N,pageContainer:O,page:w,containerClass:A,imageClass:D,onFinishedLoading:E,imageWidth:j,imageMaxWidth:y,containerMaxWidth:I}=e,L=h.useRef(null),{isLoaded:C,isLoading:R,hasError:k,retry:G}=b(L);x[0]!==C||x[1]!==E?(t=()=>{C&&E&&E()},x[0]=C,x[1]=E,x[2]=t):t=x[2],x[3]!==C?(a=[C],x[3]=C,x[4]=a):a=x[4],(0,g.A)(t,a);let{getChapterPageUrl:S}=(0,o.WG)();if(!w)return null;x[5]!==I?(l={maxWidth:I},x[5]=I,x[6]=l):l=x[6];let _="page-".concat(N);x[7]!==R?(i=R&&(0,n.jsx)(c.kt,{"data-chapter-page-loading-spinner":!0,containerClass:"h-full absolute inset-0 z-[1] w-full mx-auto",tabIndex:-1}),x[7]=R,x[8]=i):i=x[8],x[9]!==k||x[10]!==G?(s=k&&(0,n.jsx)("div",{"data-chapter-page-retry-container":!0,className:"h-full w-full flex justify-center items-center absolute inset-0 z-[10]",id:"retry-container",tabIndex:-1,children:(0,n.jsx)(d.K0,{intent:"white",icon:(0,n.jsx)(p.Swo,{id:"retry-icon"}),onClick:G,id:"retry-button",tabIndex:-1})}),x[9]=k,x[10]=G,x[11]=s):s=x[11];let P=null==O?void 0:O.isDownloaded;x[12]!==S||x[13]!==w.headers||x[14]!==w.url||x[15]!==P?(u=S(w.url,P,w.headers),x[12]=S,x[13]=w.headers,x[14]=w.url,x[15]=P,x[16]=u):u=x[16];let M="Page ".concat(N);return x[17]!==y||x[18]!==j?(f={width:j,maxWidth:y},x[17]=y,x[18]=j,x[19]=f):f=x[19],x[20]!==D||x[21]!==N||x[22]!==u||x[23]!==M||x[24]!==f?(m=(0,n.jsx)("img",{"data-chapter-page-image":!0,"data-page-index":N,src:u,alt:M,className:D,style:f,ref:L,tabIndex:-1}),x[20]=D,x[21]=N,x[22]=u,x[23]=M,x[24]=f,x[25]=m):m=x[25],x[26]!==A||x[27]!==m||x[28]!==l||x[29]!==_||x[30]!==i||x[31]!==s?(v=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{"data-chapter-page-container":!0,className:A,style:l,id:_,tabIndex:-1,children:[i,s,m]})}),x[26]=A,x[27]=m,x[28]=l,x[29]=_,x[30]=i,x[31]=s,x[32]=v):v=x[32],v}let m={LOADING:"loading",RETRYING:"retrying",LOADED:"loaded",ERROR:"error"},b=e=>{let[t,a]=h.useState(m.LOADING),n=h.useRef(0),r=t===m.RETRYING,l=t===m.LOADED,i=t===m.LOADING||t===m.RETRYING,s=t===m.ERROR,o=h.useCallback(()=>{var t;n.current=0,a(m.LOADING);let r=null==(t=e.current)?void 0:t.src;r&&(e.current.src=r)},[]);return h.useEffect(()=>{if(!e.current)return;let t=e.current;if(!t)return;let r=[];if(t&&t.complete&&t.naturalWidth>0&&0===r.length)return void a(m.LOADED);let l=e=>{if((0,u.v)("chapter-page").info("retrying"),n.current>=3)return void a(m.ERROR);a(m.RETRYING),n.current=n.current+1;let t=setTimeout(()=>{let a=e.target;if(!a)return;let n=a.src;a.src=n,r.splice(r.indexOf(t),1)},1e3);r.push(t)},i=()=>{a(m.LOADED)};return t.addEventListener("error",l),t.addEventListener("load",i,{once:!0}),()=>{for(let e of(t.removeEventListener("error",l),t.removeEventListener("load",i),r.splice(0)))clearTimeout(e)}},[e,n]),{isLoaded:l,isLoading:i,isRetrying:r,hasError:s,retry:o}};var v=a(11983),x=a(12459),N=a(91360),O=a(55226),w=a(29724),A=a(4573),D=a.n(A);function E(e){var t,a;let{pageContainer:r}=e,l=h.useRef(null),i=h.useRef(null),s=(0,w.md)(x.W6),o=(0,w.Xr)(x.sP),d=(0,w.md)(x.E6),c=(0,w.md)(x.DZ),u=(0,w.md)(x.qF),p=(0,w.md)(x.wQ),m=(0,w.md)(x.RN),[b,A]=(0,w.fp)(x.Ai),E=(0,w.md)(x.gI),j=(0,w.md)(x.Vl),y=(0,w.Xr)(x.h2),I=(0,w.md)(x.xY),[L,C]=(0,w.fp)(x.uO);(0,v.x8)(r);let{handlePageLoad:R}=(0,v.Oj)(r);(0,g.A)(()=>{var e;null==(e=l.current)||e.scrollTo({top:0})},[L]),h.useEffect(()=>{o(Object.keys(I).length>0&&L===Object.keys(I).length-1)},[L,I]);let k=h.useCallback(e=>{let t="left"===e&&d===x.uP.LTR||"right"===e&&d===x.uP.RTL;C(e=>{let a=t?e-1:e+1;return I.hasOwnProperty(a)?a:e})},[I,d]);h.useEffect(()=>(D().bind(E,()=>k("left")),D().bind(j,()=>k("right")),D().bind("up",()=>{var e;null==(e=l.current)||e.scrollBy(0,-100)}),D().bind("down",()=>{var e;null==(e=l.current)||e.scrollBy(0,100)}),()=>{D().unbind(E),D().unbind(j),D().unbind("up"),D().unbind("down")}),[E,j,I,d]);let G=h.useCallback(e=>{if(!i.current||"retry-button"===e.target.id||"retry-icon"===e.target.id)return;let{clientX:t}=e.nativeEvent,a=i.current.offsetWidth,n=(t-i.current.getBoundingClientRect().left)/a*100;n<=40?k("left"):n>=60?k("right"):(0,O.Fr)()||A(e=>!e)},[k,i.current]);h.useEffect(()=>{var e;if(!(null==r||null==(e=r.pages)?void 0:e.length))return;let t=I[L];t&&y(t[0])},[L]);let S=h.useMemo(()=>I[L],[L,I]),_=s===x.Oh.DOUBLE_PAGE&&(null==S?void 0:S.length)===2,P=_&&u&&c!==x.t$.COVER&&c!==x.t$.TRUE_SIZE&&p;return(0,n.jsx)("div",{"data-chapter-horizontal-reader-container":!0,className:(0,N.cn)("h-[calc(100dvh-3rem)] overflow-y-hidden overflow-x-hidden w-full px-4 select-none relative",b&&"h-dvh max-h-full","focus-visible:outline-none",c===x.t$.COVER&&"overflow-y-auto",c===x.t$.TRUE_SIZE&&"overflow-y-auto",c===x.t$.LARGER&&"overflow-y-auto",c===x.t$.LARGER&&s===x.Oh.DOUBLE_PAGE&&"w-full px-40 mx-auto"),ref:l,tabIndex:-1,children:(0,n.jsx)("div",{"data-chapter-horizontal-reader-page-wrapper":!0,className:(0,N.cn)("focus-visible:outline-none",_&&s===x.Oh.DOUBLE_PAGE&&"flex transition-transform duration-300",_&&s===x.Oh.DOUBLE_PAGE&&u&&"gap-2",_&&s===x.Oh.DOUBLE_PAGE&&"flex-row-reverse"),ref:i,onClick:G,children:null==r||null==(a=r.pages)||null==(t=a.toSorted((e,t)=>e.index-t.index))?void 0:t.map((e,t)=>(0,n.jsx)(f,{page:e,index:t,readingMode:s,pageContainer:r,onFinishedLoading:()=>{R(t)},containerClass:(0,N.cn)("w-full h-[calc(100dvh-3rem)] scroll-div min-h-[200px] relative page",b&&"h-dvh max-h-full","focus-visible:outline-none",(null==S?void 0:S.includes(t))?"displayed":"hidden",P&&s===x.Oh.DOUBLE_PAGE&&(null==S?void 0:S[0])===t&&"before:content-[''] before:absolute before:w-[3%] before:z-[5] before:h-full before:[background:_linear-gradient(-90deg,_rgba(17,_17,_17,_0)_0,_rgba(17,_17,_17,_.3)_100%)]",P&&s===x.Oh.DOUBLE_PAGE&&(null==S?void 0:S[1])===t&&"before:content-[''] before:absolute before:right-0 before:w-[3%] before:z-[5] before:h-full before:[background:_linear-gradient(90deg,_rgba(17,_17,_17,_0)_0,_rgba(17,_17,_17,_.3)_100%)]",c===x.t$.LARGER&&"h-full"),imageClass:(0,N.cn)("focus-visible:outline-none","h-full inset-0 object-center select-none z-[4] relative",s===x.Oh.PAGED&&c===x.t$.CONTAIN&&"object-contain w-full h-full",s===x.Oh.PAGED&&c===x.t$.LARGER&&"h-auto object-cover mx-auto",s===x.Oh.PAGED&&c===x.t$.COVER&&"w-full h-auto",s===x.Oh.PAGED&&c===x.t$.TRUE_SIZE&&"object-none h-auto w-auto mx-auto",s===x.Oh.DOUBLE_PAGE&&c===x.t$.CONTAIN&&"object-contain w-full h-full",s===x.Oh.DOUBLE_PAGE&&c===x.t$.LARGER&&"w-[1400px] h-auto object-cover mx-auto",s===x.Oh.DOUBLE_PAGE&&c===x.t$.COVER&&"w-full h-auto",s===x.Oh.DOUBLE_PAGE&&c===x.t$.TRUE_SIZE&&(0,N.cn)("object-none h-auto w-auto",_&&(null==S?void 0:S[0])===t?"mr-auto":_&&(null==S?void 0:S[1])===t?"ml-auto":"mx-auto"),_&&(null==S?void 0:S[0])===t&&"[object-position:0%_50%] before:content-['']",_&&(null==S?void 0:S[1])===t&&"[object-position:100%_50%]"),imageWidth:c===x.t$.LARGER&&s===x.Oh.PAGED?m+"%":void 0},e.url))})})}var j=a(70274),y=a(42500),I=a(42463);let L=(0,y.eU)(0);function C(e){var t;let{pageContainer:a}=e,r=h.useRef(null),l=(0,w.Xr)(x.sP),i=(0,w.md)(x.DZ),s=(0,w.md)(x.ll),o=(0,w.md)(x.qF),d=(0,w.md)(x.RN),[c,u]=(0,w.fp)(x.h2),p=(0,w.fp)(x.xY),[g,m]=(0,w.fp)(x.Ai),b=(0,w.md)(x.gI),A=(0,w.md)(x.Vl);(0,v.x8)(a);let{handlePageLoad:E}=(0,v.Oj)(a);(0,I.A)(()=>{if(0!==c){var e;let t=null==(e=r.current)?void 0:e.querySelector("#page-".concat(c));null==t||t.scrollIntoView()}});let y=(0,w.md)(L);(0,j.w5)(()=>{var e;let t=null==(e=r.current)?void 0:e.querySelector("#page-".concat(c));null==t||t.scrollIntoView()},[y]);let C=()=>{if(r.current){var e,t,n;let i=r.current.scrollTop,s=r.current.scrollHeight,o=r.current.clientHeight;i>1e3&&(null==a||null==(e=a.pages)?void 0:e.length)&&i+o>=s-1500?l(!0):l(!1),null==(n=r.current)||null==(t=n.querySelectorAll(".scroll-div"))||t.forEach(e=>{var t;R(e)&&(null==a||null==(t=a.pages)?void 0:t.length)&&u(Number(e.id.split("-")[1]))})}};return h.useEffect(()=>{l(!1)},[null==a?void 0:a.pages]),h.useEffect(()=>{var e;return null==(e=r.current)||e.addEventListener("scroll",C),()=>{var e;return null==(e=r.current)?void 0:e.removeEventListener("scroll",C)}},[r.current]),h.useEffect(()=>(D().bind("up",()=>{var e;null==(e=r.current)||e.scrollBy(0,-100)}),D().bind("down",()=>{var e;null==(e=r.current)||e.scrollBy(0,100)}),()=>{D().unbind("up"),D().unbind("down")}),[p]),h.useEffect(()=>(D().bind(b,()=>{if(c>0){var e;let t=null==(e=r.current)?void 0:e.querySelector("#page-".concat(c-1));null==t||t.scrollIntoView()}}),D().bind(A,()=>{var e,t,n;if((null==a||null==(e=a.pages)?void 0:e.length)&&c<(null==a||null==(t=a.pages)?void 0:t.length)-1){let e=null==(n=r.current)?void 0:n.querySelector("#page-".concat(c+1));null==e||e.scrollIntoView()}}),()=>{D().unbind(b),D().unbind(A)}),[b,A,p]),(0,n.jsx)("div",{"data-chapter-vertical-reader-container":!0,className:(0,N.cn)("max-h-[calc(100dvh-3rem)] overflow-hidden relative focus-visible:outline-none",g&&"h-full max-h-full"),tabIndex:-1,onClick:()=>{(0,O.Fr)()||m(e=>!e)},children:(0,n.jsxs)("div",{"data-chapter-vertical-reader-inner-container":!0,className:(0,N.cn)("w-full h-[calc(100dvh-3rem)] overflow-y-auto overflow-x-hidden px-4 select-none relative focus-visible:outline-none",g&&"h-dvh",o&&"space-y-4",(0,O.Fr)()&&"hide-scrollbar"),ref:r,tabIndex:-1,children:[(0,n.jsx)("div",{"data-chapter-vertical-reader-inner-container-spacer":!0,className:"absolute w-full h-full z-[5] focus-visible:outline-none",tabIndex:-1}),null==a||null==(t=a.pages)?void 0:t.map((e,t)=>(0,n.jsx)(f,{page:e,index:t,readingMode:"paged",pageContainer:a,onFinishedLoading:()=>{0===t&&u(0),E(t)},containerClass:(0,N.cn)("mx-auto scroll-div min-h-[200px] relative focus-visible:outline-none",i===x.t$.CONTAIN&&"max-w-full h-[calc(100dvh-60px)]",i===x.t$.TRUE_SIZE&&"max-w-full",i===x.t$.COVER&&"max-w-full"),containerMaxWidth:i===x.t$.LARGER?d+"%":void 0,imageClass:(0,N.cn)("max-w-full h-auto mx-auto select-none z-[4] relative focus-visible:outline-none",i===x.t$.CONTAIN?s===x.x4.NONE?"w-auto h-full object-center":"object-fill w-full max-w-[1400px] h-full":void 0,i===x.t$.LARGER?s===x.x4.NONE?"w-auto h-full object-center":"w-full h-auto object-cover mx-auto":void 0,i===x.t$.COVER&&"w-full h-auto",i===x.t$.TRUE_SIZE&&"object-none h-auto w-auto mx-auto")},e.url))]})})}let R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;return!(Math.floor(100- -(100*((a.top>=0?0:a.top)/a.height)))<t||Math.floor(100-(a.bottom-n)/a.height*100)<t)};var k=a(52963),G=a(15388),S=a(17934),_=a(76136),P=a(52885),M=a(57073),T=a(60695),W=a(78453),U=a(70376),$=a(27647),q=a(41452),z=a(28002),F=a(80893),Q=a(68090),Z=a(69554);let B={itemClass:(0,N.cn)("border-transparent absolute top-2 right-2 bg-transparent dark:bg-transparent dark:data-[state=unchecked]:bg-transparent","data-[state=unchecked]:bg-transparent data-[state=unchecked]:hover:bg-transparent dark:data-[state=unchecked]:hover:bg-transparent","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:ring-offset-transparent"),stackClass:"space-y-0 flex flex-wrap lg:flex-nowrap lg:flex-row gap-2",itemIndicatorClass:"hidden",itemLabelClass:"font-normal tracking-wide line-clamp-1 truncate flex flex-col items-center data-[state=checked]:text-[--gray] cursor-pointer",itemContainerClass:(0,N.cn)("items-start cursor-pointer transition border-transparent rounded-[--radius] py-1.5 px-3 w-full","hover:bg-[--subtle] dark:bg-gray-900","data-[state=checked]:bg-white dark:data-[state=unchecked]:hover:bg-gray-800 dark:data-[state=checked]:bg-gray-900","focus:ring-2 ring-transparent dark:ring-transparent outline-none ring-offset-1 ring-offset-[--background] focus-within:ring-2 transition","border border-transparent data-[state=checked]:border-gray-500 data-[state=checked]:ring-offset-0")},K=[{value:x.Oh.LONG_STRIP,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(z.zN_,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Long Strip"})]})},{value:x.Oh.PAGED,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(z.yIv,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Single Page"})]})},{value:x.Oh.DOUBLE_PAGE,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(q.sGl,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Double Page"})]})}],X=[{value:x.uP.LTR,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)("span",{children:"Left to Right"})," ",(0,n.jsx)(z.HNO,{className:"text-2xl"})]})},{value:x.uP.RTL,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(z._R2,{className:"text-2xl"})," ",(0,n.jsx)("span",{children:"Right to Left"})]})}],V=[{value:x.t$.CONTAIN,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(W._DL,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Contain"})]})},{value:x.t$.LARGER,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(F.l6L,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Overflow"})]})},{value:x.t$.COVER,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(W.byK,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Cover"})]})},{value:x.t$.TRUE_SIZE,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(p.vqJ,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"True size"})]})}],H=[{value:x.x4.NONE,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)(q.sKx,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"None"})]})},{value:x.x4.STRETCH,label:(0,n.jsxs)("span",{className:"flex gap-2 items-center",children:[(0,n.jsx)($.vrE,{className:"text-xl"})," ",(0,n.jsx)("span",{children:"Stretch"})]})}],Y=(0,y.eU)(!1);function J(e){var t;let{mediaId:a,...r}=e,[l,i]=(0,w.fp)(x.E6),[s,o]=(0,w.fp)(x.W6),[c,u]=(0,w.fp)(x.DZ),[g,f]=(0,w.fp)(x.ll),[m,b]=(0,w.fp)(x.qF),[v,O]=(0,w.fp)(x.wQ),[A,D]=(0,w.fp)(x.a5),[E,j]=(0,w.fp)(x.RN),[y,I]=(0,w.fp)(x.ud),[L,C]=(0,w.fp)(x.Ai),{width:R}=(0,Q.A)(),W=R<950,$=h.useMemo(()=>W?{[x.Oh.LONG_STRIP]:{pageFit:x.t$.COVER,pageStretch:x.x4.NONE},[x.Oh.PAGED]:{pageFit:x.t$.CONTAIN,pageStretch:x.x4.NONE},[x.Oh.DOUBLE_PAGE]:{pageFit:x.t$.CONTAIN,pageStretch:x.x4.NONE}}:{[x.Oh.LONG_STRIP]:{pageFit:x.t$.LARGER,pageStretch:x.x4.NONE},[x.Oh.PAGED]:{pageFit:x.t$.CONTAIN,pageStretch:x.x4.NONE},[x.Oh.DOUBLE_PAGE]:{pageFit:x.t$.CONTAIN,pageStretch:x.x4.NONE}},[W]),[q,z]=(0,w.fp)(x.IZ),F=h.useRef(!1);h.useEffect(()=>{if(!F.current&&q[a]){let e=q[a];i(e[x.EX.readingDirection]),o(e[x.EX.readingMode]),u(e[x.EX.pageFit]),f(e[x.EX.pageStretch]),b(e[x.EX.pageGap]),O(e[x.EX.pageGapShadow]),D(e[x.EX.doublePageOffset]),j(e[x.EX.overflowPageContainerWidth])}F.current=!0},[q[a]]),h.useEffect(()=>{z(e=>({...e,[a]:{[x.EX.readingDirection]:l,[x.EX.readingMode]:s,[x.EX.pageFit]:c,[x.EX.pageStretch]:g,[x.EX.pageGap]:m,[x.EX.pageGapShadow]:v,[x.EX.doublePageOffset]:A,[x.EX.overflowPageContainerWidth]:E}}))},[l,s,c,g,m,v,A,E]);let[J,ee]=(0,w.fp)(x.Ap),[et,ea]=(0,w.fp)(x.xM),[en,er]=(0,w.fp)(x.gI),[el,ei]=(0,w.fp)(x.Vl),es=c===$[s].pageFit&&g===$[s].pageStretch,eo=h.useCallback(e=>{switch(e){case x.LI.kbsChapterLeft:ee(x.od[e]);break;case x.LI.kbsChapterRight:ea(x.od[e]);break;case x.LI.kbsPageLeft:er(x.od[e]);break;case x.LI.kbsPageRight:ei(x.od[e])}},[]),ed=(e,t)=>{for(let a of Object.values(x.LI))a!==e&&({[x.LI.kbsChapterLeft]:J,[x.LI.kbsChapterRight]:et,[x.LI.kbsPageLeft]:en,[x.LI.kbsPageRight]:el})[a]===t&&eo(a)},ec=(e,t)=>{if(e.preventDefault(),e.stopPropagation(),!["Control","Shift","Meta","Command","Alt","Option"].includes(e.key)){var a;let n="".concat(e.metaKey?"meta+":"").concat(e.ctrlKey?"ctrl+":"").concat(e.altKey?"alt+":"").concat(e.shiftKey?"shift+":"").concat(e.key.toLowerCase().replace("arrow","").replace("insert","ins").replace("delete","del").replace(" ","space").replace("+","plus")),r={[x.LI.kbsChapterLeft]:ee,[x.LI.kbsChapterRight]:ea,[x.LI.kbsPageLeft]:er,[x.LI.kbsPageRight]:ei};null==(a=r[t])||a.call(r,n),ed(t,n)}};h.useEffect(()=>{s===x.Oh.DOUBLE_PAGE&&R<950&&o(e=>(Z.oR.error("Double page mode is not supported on small screens."),x.Oh.LONG_STRIP))},[R,s]);let[eu,eh]=(0,w.fp)(Y),[ep,eg]=(0,h.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(S.rI,{trigger:(0,n.jsx)(d.K0,{"data-chapter-reader-settings-dropdown-menu-trigger":!0,icon:(0,n.jsx)(U.nMM,{}),intent:"gray-basic",className:"flex lg:hidden"}),className:"block lg:hidden","data-chapter-reader-settings-dropdown-menu":!0,children:[(0,n.jsx)(S._2,{onClick:()=>eh(!0),children:"Open settings"}),(0,n.jsx)(S._2,{onClick:function(){let e=document.documentElement;ep&&document.exitFullscreen?(document.exitFullscreen(),eg(!1)):ep||(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),eg(!0))},children:"Toggle fullscreen"}),(0,n.jsxs)(S._2,{onClick:()=>C(e=>!e),children:[L?"Show":"Hide"," bar"]})]}),(0,n.jsx)(G._s,{trigger:(0,n.jsx)(d.K0,{icon:(0,n.jsx)(U.nMM,{}),intent:"gray-basic",className:"hidden lg:flex"}),title:"Settings",allowOutsideInteraction:!1,open:eu,onOpenChange:eh,size:"lg",contentClass:"z-[51] bg-gray-950/80 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none","data-chapter-reader-settings-drawer":!0,children:(0,n.jsxs)("div",{className:"space-y-4 py-4","data-chapter-reader-settings-drawer-content":!0,children:[(0,n.jsxs)(k.Zp,{className:"p-4 space-y-4",children:[(0,n.jsx)(P.z,{...B,label:"Reading Mode",options:K,value:s,onValueChange:e=>(function(e){if(e===x.Oh.DOUBLE_PAGE&&R<950)return void Z.oR.error("Double page mode is not supported on small screens.");o(e)})(e)}),(0,n.jsx)("div",{className:(0,N.cn)(s!==x.Oh.DOUBLE_PAGE&&"hidden"),children:(0,n.jsx)(_.Q,{label:"Offset",value:A,onValueChange:e=>D(e)})}),(0,n.jsx)(P.z,{...B,label:"Page Fit",options:V,value:c,onValueChange:e=>u(e)}),c===x.t$.LARGER&&(0,n.jsx)(_.Q,{label:"Page Container Width",max:100,min:0,rightAddon:"%",value:E,onValueChange:e=>j(e),disabled:s===x.Oh.DOUBLE_PAGE}),(0,n.jsx)("div",{className:(0,N.cn)((s!==x.Oh.LONG_STRIP||c!==x.t$.LARGER&&c!==x.t$.CONTAIN)&&"opacity-50 pointer-events-none"),children:(0,n.jsx)(P.z,{...B,label:"Page Stretch",options:H,value:g,onValueChange:e=>f(e),help:"'Stretch' forces all pages to have the same width as the container in 'Long Strip' mode."})}),(0,n.jsx)(d.$n,{size:"sm",className:"rounded-full w-full",intent:"white-subtle",disabled:es,onClick:()=>{u($[s].pageFit),f($[s].pageStretch)},children:(0,n.jsxs)("span",{className:"flex flex-none items-center",children:["Reset defaults for ",(0,n.jsx)("span",{className:"w-2"})," ",null==(t=K.find(e=>e.value===s))?void 0:t.label]})})]}),(0,n.jsxs)(k.Zp,{className:"p-4 space-y-4",children:[(0,n.jsxs)("div",{className:"flex gap-4 flex-wrap items-center",children:[(0,n.jsx)(T.d,{label:"Page Gap",value:m,onValueChange:b,fieldClass:"w-fit",size:"sm"}),(0,n.jsx)(T.d,{label:"Page Gap Shadow",value:v,onValueChange:O,fieldClass:"w-fit",disabled:!m,size:"sm"})]}),(0,n.jsx)("div",{className:(0,N.cn)(s===x.Oh.LONG_STRIP&&"opacity-30 pointer-events-none"),children:(0,n.jsx)(P.z,{...B,label:"Reading Direction",options:X,value:l,onValueChange:e=>i(e)})}),(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsx)(T.d,{label:"Progress Bar",value:y,onValueChange:I,fieldClass:"w-fit",size:"sm"})})]}),!W&&(0,n.jsx)(k.Zp,{className:"p-4 space-y-4",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:"Editable Keybinds"}),(0,n.jsx)("p",{className:"text-[--muted] text-xs",children:"Click to edit"})]}),[{key:x.LI.kbsChapterLeft,label:l===x.uP.LTR?"Previous chapter":"Next chapter",value:J},{key:x.LI.kbsChapterRight,label:l===x.uP.LTR?"Next chapter":"Previous chapter",value:et},{key:x.LI.kbsPageLeft,label:l===x.uP.LTR?"Previous page":"Next page",value:en},{key:x.LI.kbsPageRight,label:l===x.uP.LTR?"Next page":"Previous page",value:el}].map(e=>(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(d.$n,{onKeyDownCapture:t=>ec(t,e.key),className:"focus:ring-2 focus:ring-[--brand] focus:ring-offset-1 focus-visible:ring-2 focus-visible:ring-[--brand] focus-visible:ring-offset-1",size:"sm",intent:"primary-subtle",id:"chapter-reader-settings-kbs-".concat(e.key),onClick:()=>{let t=document.getElementById("chapter-reader-settings-kbs-".concat(e.key));t&&t.focus()},children:e.value})}),(0,n.jsx)("label",{className:"text-[--gray]",children:(0,n.jsx)("span",{className:"font-semibold",children:e.label})}),e.value!==x.od[e.key]&&(0,n.jsx)(d.$n,{onClick:()=>{eo(e.key)},className:"rounded-full",size:"sm",intent:"warning-subtle",leftIcon:(0,n.jsx)(p.Swo,{}),children:"Reset"})]},e.key)),(0,n.jsx)(M.w,{}),(0,n.jsx)("h4",{children:"Keyboard Shortcuts"}),[{key:"u",label:"Update progress and go to next chapter"},{key:"b",label:"Toggle bottom bar visibility"},{key:"m",label:"Switch reading mode"},{key:"d",label:"Switch reading direction"},{key:"f",label:"Switch page fit"},{key:"s",label:"Switch page stretch"},{key:"shift+right",label:"Increment double page offset"},{key:"shift+left",label:"Decrement double page offset"}].map(e=>(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)(d.$n,{size:"sm",intent:"gray-outline",className:"pointer-events-none",children:e.key})}),(0,n.jsx)("p",{children:e.label})]},e.key))]})})]})})]})}var ee=a(63717),et=a(75435),ea=a(30033),en=a(43994);function er(e){var t,a,r,l,i,s,o,c,u,p;let{children:g,previousChapter:f,nextChapter:m,pageContainer:b,entry:O,goToChapter:A,...D}=e,[E,j]=(0,w.fp)(v.f1),[y,I]=(0,w.fp)(x.h2),C=(0,w.md)(x.xY),R=(0,w.md)(x.DZ),k=(0,w.md)(x.ll),G=(0,w.md)(x.W6),S=(0,w.md)(x.E6),_=(0,w.md)(x.ud),P=(0,w.md)(x.Ai),M=h.useCallback(e=>{let{dir:t}=e;if(S===x.uP.RTL&&(G===x.Oh.PAGED||G===x.Oh.DOUBLE_PAGE))if("left"===t)return(0,n.jsx)(d.K0,{icon:(0,n.jsx)(en.i84,{}),rounded:!0,intent:"white-outline",size:"sm",onClick:()=>{m&&O&&A("next")},disabled:!m,className:"border-transparent"});else return(0,n.jsx)(d.K0,{icon:(0,n.jsx)(en.xCi,{}),rounded:!0,intent:"gray-outline",size:"sm",onClick:()=>{f&&O&&A("previous")},disabled:!f,className:"border-transparent"});return"left"===t?(0,n.jsx)(d.K0,{icon:(0,n.jsx)(en.i84,{}),rounded:!0,intent:"gray-outline",size:"sm",onClick:()=>{f&&O&&A("previous")},disabled:!f,className:"border-transparent"}):(0,n.jsx)(d.K0,{icon:(0,n.jsx)(en.xCi,{}),rounded:!0,intent:"white-outline",size:"sm",onClick:()=>{m&&O&&A("next")},disabled:!m,className:"border-transparent"})},[E,m,f,S,G]),T=h.useMemo(()=>{let e=0;for(let[t,a]of Object.entries(C))C[Number(t)].includes(y)&&(e=a[1]);return isNaN(e)||0===e||e===y?"":"-"+(e+1)},[y,C]),[W,$]=(0,w.fp)(x.uO),q=(0,w.Xr)(L),z=h.useCallback(e=>{G===x.Oh.PAGED?(I(e),$(e)):G===x.Oh.DOUBLE_PAGE?($(t=>{let a=Object.keys(C).find(t=>C[Number(t)].includes(e));return void 0===a?t:Number(a)}),I(e)):(I(e),q(e=>e+1))},[G,C]),{allPagesLoaded:F}=(0,v.Oj)(b);return O?(0,n.jsxs)(n.Fragment,{children:[b&&_&&F&&(0,n.jsx)("div",{"data-manga-reader-bar-container":!0,className:(0,N.cn)("bottom-12 w-full fixed z-10 hidden lg:block group/bp",P&&"bottom-0"),children:(0,n.jsx)("div",{"data-manga-reader-bar-inner-container":!0,className:"flex max-w-full items-center",children:null==(t=b.pages)?void 0:t.map((e,t)=>(0,n.jsx)("div",{"data-manga-reader-bar-pagination":!0,className:(0,N.cn)("w-full h-6 cursor-pointer","transition-all duration-200 bg-gradient-to-t via-transparent from-transparent from-10% to-transparent hover:from-gray-800",t===y&&"from-gray-800",t<y&&"from-[--subtle] from-5%"),onClick:()=>z(t),children:(0,n.jsx)("p",{className:(0,N.cn)("w-full h-full flex items-center rounded-t-md justify-center text-transparent group-hover/bp:text-[--muted] transition","hover:text-white hover:bg-gray-800",t===y&&"text-white hover:text-white group-hover/bp:text-white"),children:t+1})},t))})}),(0,n.jsxs)("div",{"data-manga-reader-bar":!0,className:(0,N.cn)("fixed bottom-0 w-full h-12 gap-4 flex items-center px-4 z-[10] bg-[var(--background)] transition-transform",P&&"translate-y-60"),id:"manga-reader-bar",children:[(0,n.jsx)(d.K0,{icon:(0,n.jsx)(U.Gsv,{}),rounded:!0,intent:"gray-outline",size:"xs",onClick:()=>j(void 0)}),(0,n.jsx)("h4",{"data-manga-reader-bar-title":!0,className:"lg:flex gap-1 items-center hidden",children:(0,n.jsx)("span",{className:"max-w-[180px] text-ellipsis truncate block",children:null==O||null==(r=O.media)||null==(a=r.title)?void 0:a.userPreferred})}),!!E&&(0,n.jsxs)("div",{"data-manga-reader-bar-chapter-nav-container":!0,className:"flex gap-3 items-center flex-none whitespace-nowrap ",children:[(0,n.jsx)(M,{dir:"left"}),(0,n.jsx)("span",{className:"hidden md:inline-block",children:"Chapter "}),"".concat(null==E?void 0:E.chapterNumber),(0,n.jsx)(M,{dir:"right"})]}),(0,n.jsx)("div",{"data-manga-reader-bar-spacer":!0,className:"flex flex-1"}),(0,n.jsxs)("div",{"data-manga-reader-bar-page-container":!0,className:"flex items-center gap-2",children:[b&&(0,n.jsx)(et.A,{trigger:(0,n.jsx)(ee.E,{size:"lg",className:"w-fit cursor-pointer rounded-[--radius-md] z-[5] flex bg-gray-950 items-center bottom-2 focus-visible:outline-none",tabIndex:-1,"data-manga-reader-bar-page-container-badge":!0,children:!!(y+1)&&(0,n.jsxs)("p",{className:"",children:[y+1,T,(0,n.jsxs)("span",{className:"text-[--muted]",children:[" / ",null==b||null==(l=b.pages)?void 0:l.length]})]})}),children:(0,n.jsx)(ea.l,{"data-manga-reader-bar-page-container-select":!0,options:null!=(p=null==(i=b.pages)?void 0:i.map((e,t)=>({label:String(t+1),value:String(t)})))?p:[],value:String(y),onValueChange:e=>{z(Number(e))}})}),(0,n.jsx)("div",{"data-manga-reader-bar-info-container":!0,className:"hidden lg:flex",children:(0,n.jsxs)(et.A,{modal:!0,trigger:(0,n.jsx)(d.K0,{icon:(0,n.jsx)(en.MO8,{}),intent:"gray-basic",className:"opacity-50 outline-0",tabIndex:-1}),className:"text-[--muted] space-y-1",children:[(0,n.jsx)("div",{"data-manga-reader-bar-info-container-provider":!0,className:"hidden lg:block",children:(0,n.jsx)("p",{className:"text-[--muted] text-sm",children:null==E?void 0:E.provider})}),(0,n.jsxs)("div",{"data-manga-reader-bar-info-container-mode":!0,className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"text-white w-6",children:"m:"}),null==(s=K.find(e=>e.value===G))?void 0:s.label]}),(0,n.jsxs)("div",{"data-manga-reader-bar-info-container-fit":!0,className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"text-white w-6",children:"f:"}),null==(o=V.find(e=>e.value===R))?void 0:o.label]}),k!==x.x4.NONE&&(0,n.jsxs)("div",{"data-manga-reader-bar-info-container-stretch":!0,className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"text-white w-6",children:"s:"}),null==(c=H.find(e=>e.value===k))?void 0:c.label]}),G!==x.Oh.LONG_STRIP&&(0,n.jsxs)("div",{"data-manga-reader-bar-info-container-direction":!0,className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"text-white w-6",children:"d:"}),(0,n.jsx)("span",{children:null==(u=X.find(e=>e.value===S))?void 0:u.label})]})]})}),(0,n.jsx)(J,{mediaId:O.mediaId})]})]})]}):null}var el=a(3196),ei=a(78106),es=a(94077);function eo(e){var t,a,o,u,p,g,f,m,b,O,A,j,y;let I,L,R,k,S,_,P,M,T,W,U,$,q,z,Q,B,K,X,V,H,Y,J,ee,et,ea,en,eo,eg,ef,em,eb,ev=(0,r.c)(130),{entry:ex,chapterContainer:eN,chapterIdToNumbersMap:eO}=e,ew=(0,s.v1)();!function(e){var t,a,n,l,i,o,d,c;let u,p,g=(0,r.c)(11),f=(0,s.v1)(),m=(0,w.md)(v.f1),{mutate:b}=(0,el.NM)(),{mutate:x}=(0,el.P6)(),N=h.useRef();g[0]!==x||g[1]!==m||g[2]!==e||g[3]!==b||g[4]!==(null==f?void 0:f.isOffline)||g[5]!==(null==f||null==(a=f.settings)||null==(t=a.discord)?void 0:t.enableMangaRichPresence)||g[6]!==(null==f||null==(l=f.settings)||null==(n=l.discord)?void 0:n.enableRichPresence)?(u=()=>{var t,a,n,r,l,i,s,o,d,c,u,h,p,g,v,O;null!=f&&f.isOffline||((null==f||null==(a=f.settings)||null==(t=a.discord)?void 0:t.enableRichPresence)&&(null==f||null==(r=f.settings)||null==(n=r.discord)?void 0:n.enableMangaRichPresence)&&(m&&e&&e.media&&b({mediaId:null!=(O=null==(l=e.media)?void 0:l.id)?O:0,title:(null==(s=e.media)||null==(i=s.title)?void 0:i.userPreferred)||(null==(d=e.media)||null==(o=d.title)?void 0:o.romaji)||(null==(u=e.media)||null==(c=u.title)?void 0:c.english)||"Reading",image:(null==(p=e.media)||null==(h=p.coverImage)?void 0:h.large)||(null==(v=e.media)||null==(g=v.coverImage)?void 0:g.medium)||"",chapter:m.chapterNumber}),m||x()),N.current=m)},g[0]=x,g[1]=m,g[2]=e,g[3]=b,g[4]=null==f?void 0:f.isOffline,g[5]=null==f||null==(o=f.settings)||null==(i=o.discord)?void 0:i.enableMangaRichPresence,g[6]=null==f||null==(c=f.settings)||null==(d=c.discord)?void 0:d.enableRichPresence,g[7]=u):u=g[7],g[8]!==m||g[9]!==e?(p=[m,e],g[8]=m,g[9]=e,g[10]=p):p=g[10],h.useEffect(u,p)}(ex);let eA=(0,v.I)(),eD=(0,v.sC)(),eE=(0,w.Xr)(x.h2),ej=(0,w.Xr)(x.uO),[ey,eI]=(0,w.fp)(x.W6),eL=(0,w.md)(x.sP),eC=(0,w.md)(x.Ap),eR=(0,w.md)(x.xM),ek=(0,w.md)(x.xY),eG=(0,w.md)(x.E6),[eS,e_]=(0,w.fp)(x.Ai);(0,v.PF)();let{inject:eP,remove:eM}=(0,i.H)(),eT=null==ex||null==(t=ex.media)?void 0:t.id,eW=null==eA?void 0:eA.chapterId,eU=null==eA?void 0:eA.provider,e$=ey===x.Oh.DOUBLE_PAGE;ev[0]!==eT||ev[1]!==eW||ev[2]!==eU||ev[3]!==e$?(I={mediaId:eT,chapterId:eW,provider:eU,doublePage:e$},ev[0]=eT,ev[1]=eW,ev[2]=eU,ev[3]=e$,ev[4]=I):I=ev[4];let{data:eq,isLoading:ez,isError:eF,refetch:eQ}=(0,l.sJ)(I),{mutate:eZ,isPending:eB}=(0,l.WA)(ex.mediaId);ev[5]!==eA||ev[6]!==eq||ev[7]!==eF||ev[8]!==ez||ev[9]!==ey||ev[10]!==eI?(L=()=>{!eA||ey!==x.Oh.DOUBLE_PAGE||ez||eF||(null==eq?void 0:eq.pageDimensions)&&0!==Object.keys(eq.pageDimensions).length||(Z.oR.error("Could not get page dimensions from this provider. Switching to paged mode."),eI(x.Oh.PAGED))},ev[5]=eA,ev[6]=eq,ev[7]=eF,ev[8]=ez,ev[9]=ey,ev[10]=eI,ev[11]=L):L=ev[11],ev[12]!==eA||ev[13]!==eq||ev[14]!==eF||ev[15]!==ez||ev[16]!==ey?(R=[eA,eq,ez,eF,ey],ev[12]=eA,ev[13]=eq,ev[14]=eF,ev[15]=ez,ev[16]=ey,ev[17]=R):R=ev[17],h.useEffect(L,R);let{previousChapter:eK,nextChapter:eX,goToChapter:eV}=(0,v.D0)(ex.mediaId,eN);e:{let e=eO.get((null==eA?void 0:eA.chapterId)||"");if(!e){k=!1;break e}if(!(null==(b=ex.listData)?void 0:b.progress)){k=!0;break e}k=e>ex.listData.progress}let eH=k;ev[18]!==eO||ev[19]!==(null==eA?void 0:eA.chapterId)||ev[20]!==(null==(a=ex.media)?void 0:a.chapters)||ev[21]!==(null==(o=ex.media)?void 0:o.idMal)||ev[22]!==ex.mediaId||ev[23]!==eV||ev[24]!==eB||ev[25]!==eH||ev[26]!==eZ?(S=e=>{let t=void 0===e||e;if(eH&&!eB){var a,n;eZ({chapterNumber:eO.get((null==eA?void 0:eA.chapterId)||"")||0,mediaId:ex.mediaId,malId:(null==(a=ex.media)?void 0:a.idMal)||void 0,totalChapters:(null==(n=ex.media)?void 0:n.chapters)||0},{onSuccess:()=>{t&&eV("next")}})}},ev[18]=eO,ev[19]=null==eA?void 0:eA.chapterId,ev[20]=null==(O=ex.media)?void 0:O.chapters,ev[21]=null==(A=ex.media)?void 0:A.idMal,ev[22]=ex.mediaId,ev[23]=eV,ev[24]=eB,ev[25]=eH,ev[26]=eZ,ev[27]=S):S=ev[27];let eY=S,eJ=h.useRef(null);ev[28]!==(null==eA?void 0:eA.chapterId)||ev[29]!==eY||ev[30]!==eL||ev[31]!==eF||ev[32]!==ez||ev[33]!==(null==ew||null==(p=ew.settings)||null==(u=p.manga)?void 0:u.mangaAutoUpdateProgress)||ev[34]!==eH?(_=()=>{var e,t;(null==ew||null==(t=ew.settings)||null==(e=t.manga)?void 0:e.mangaAutoUpdateProgress)&&(null==eA?void 0:eA.chapterId)&&eH&&!ez&&!eF&&eL&&eJ.current!==(null==eA?void 0:eA.chapterId)&&(eY(!1),eJ.current=null==eA?void 0:eA.chapterId)},ev[28]=null==eA?void 0:eA.chapterId,ev[29]=eY,ev[30]=eL,ev[31]=eF,ev[32]=ez,ev[33]=null==ew||null==(y=ew.settings)||null==(j=y.manga)?void 0:j.mangaAutoUpdateProgress,ev[34]=eH,ev[35]=_):_=ev[35];let e0=null==ew||null==(f=ew.settings)||null==(g=f.manga)?void 0:g.mangaAutoUpdateProgress;ev[36]!==eA||ev[37]!==eL||ev[38]!==eF||ev[39]!==ez||ev[40]!==eH||ev[41]!==e0?(P=[eA,e0,eH,eL,eF,ez],ev[36]=eA,ev[37]=eL,ev[38]=eF,ev[39]=ez,ev[40]=eH,ev[41]=e0,ev[42]=P):P=ev[42],h.useEffect(_,P);let e1=h.useRef(null==eA?void 0:eA.chapterId);ev[43]!==(null==eA?void 0:eA.chapterId)||ev[44]!==eE||ev[45]!==ej?(M=()=>{(null==eA?void 0:eA.chapterId)!==e1.current&&(eE(0),ej(0),e1.current=null==eA?void 0:eA.chapterId)},ev[43]=null==eA?void 0:eA.chapterId,ev[44]=eE,ev[45]=ej,ev[46]=M):M=ev[46];let e2=null==eq?void 0:eq.pages,e4=null==eN?void 0:eN.chapters;ev[47]!==e2||ev[48]!==e4?(T=[e2,e4],ev[47]=e2,ev[48]=e4,ev[49]=T):T=ev[49],h.useEffect(M,T),ev[50]!==eY?(W=()=>(D().bind("u",()=>{eY()}),ep),ev[50]=eY,ev[51]=W):W=ev[51];let e5=null==eq?void 0:eq.pages,e3=null==eN?void 0:eN.chapters;ev[52]!==eL||ev[53]!==eH||ev[54]!==e5||ev[55]!==e3?(U=[e5,e3,eH,eL],ev[52]=eL,ev[53]=eH,ev[54]=e5,ev[55]=e3,ev[56]=U):U=ev[56],h.useEffect(W,U),ev[57]!==e_?($=()=>(D().bind("b",()=>{e_(eh)}),eu),ev[57]=e_,ev[58]=$):$=ev[58],ev[59]===Symbol.for("react.memo_cache_sentinel")?(q=[],ev[59]=q):q=ev[59],h.useEffect($,q),ev[60]!==eV||ev[61]!==eC||ev[62]!==eR||ev[63]!==eG?(z=()=>(D().bind(eC,()=>{eG===x.uP.LTR?eV("previous"):eV("next")}),D().bind(eR,()=>{eG===x.uP.RTL?eV("previous"):eV("next")}),()=>{D().unbind(eC),D().unbind(eR)}),ev[60]=eV,ev[61]=eC,ev[62]=eR,ev[63]=eG,ev[64]=z):z=ev[64],ev[65]!==eN||ev[66]!==eC||ev[67]!==eR||ev[68]!==eX||ev[69]!==ek||ev[70]!==eK||ev[71]!==eG?(Q=[eC,eR,ek,eG,eN,eK,eX],ev[65]=eN,ev[66]=eC,ev[67]=eR,ev[68]=eX,ev[69]=ek,ev[70]=eK,ev[71]=eG,ev[72]=Q):Q=ev[72],h.useEffect(z,Q),ev[73]!==eA||ev[74]!==eP||ev[75]!==eM||ev[76]!==eD?(B=()=>{if(eA)return eP("close-manga-reader",{items:[{id:"close-reader",value:"Close reader",heading:"Reader",priority:100,render:ec,onSelect:()=>eD(void 0)}],filter:ed,priority:105}),()=>eM("close-manga-reader")},ev[73]=eA,ev[74]=eP,ev[75]=eM,ev[76]=eD,ev[77]=B):B=ev[77],ev[78]!==eA?(K=[eA],ev[78]=eA,ev[79]=K):K=ev[79],h.useEffect(B,K);let e6=!!eA;ev[80]!==eD?(X=()=>eD(void 0),ev[80]=eD,ev[81]=X):X=ev[81],ev[82]===Symbol.for("react.memo_cache_sentinel")?(V=(0,N.cn)("p-0 pt-0 !m-0 !rounded-none","w-full inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom"),ev[82]=V):V=ev[82],ev[83]!==eS||ev[84]!==eL||ev[85]!==eF||ev[86]!==ez||ev[87]!==eH?(H=(0,N.cn)("fixed left-0 w-full z-[6] opacity-0 transition-opacity hidden duration-500",!es.X&&"top-0 justify-center",es.X&&(0,N.cn)("bottom-12",eS&&"bottom-0 justify-left"),eH&&eL&&!ez&&!eF&&"flex opacity-100"),ev[83]=eS,ev[84]=eL,ev[85]=eF,ev[86]=ez,ev[87]=eH,ev[88]=H):H=ev[88],ev[89]!==eY?(Y=()=>eY(),ev[89]=eY,ev[90]=Y):Y=ev[90],ev[91]===Symbol.for("react.memo_cache_sentinel")?(J=(0,N.cn)(!es.X&&"rounded-tl-none rounded-tr-none",es.X&&"rounded-bl-none rounded-br-none rounded-tl-none"),ev[91]=J):J=ev[91],ev[92]!==eO||ev[93]!==(null==eA?void 0:eA.chapterId)?(ee=eO.get((null==eA?void 0:eA.chapterId)||""),ev[92]=eO,ev[93]=null==eA?void 0:eA.chapterId,ev[94]=ee):ee=ev[94];let e7=(null==ex||null==(m=ex.media)?void 0:m.chapters)||"-";ev[95]!==eB||ev[96]!==Y||ev[97]!==ee||ev[98]!==e7?(et=(0,n.jsxs)(d.$n,{onClick:Y,className:J,size:"md",intent:"success",loading:eB,disabled:eB,children:["Update progress (",ee," / ",e7,")"]}),ev[95]=eB,ev[96]=Y,ev[97]=ee,ev[98]=e7,ev[99]=et):et=ev[99],ev[100]!==H||ev[101]!==et?(ea=(0,n.jsx)("div",{"data-chapter-reader-drawer-progress-container":!0,className:H,tabIndex:-1,children:et}),ev[100]=H,ev[101]=et,ev[102]=ea):ea=ev[102],ev[103]!==eS||ev[104]!==e_?(en=eS&&(0,n.jsx)("div",{"data-chapter-reader-drawer-exit-fullscreen-button":!0,className:"fixed right-0 bottom-4 group/hiddenBarArea z-[10] px-4",children:(0,n.jsx)(d.K0,{rounded:!0,icon:(0,n.jsx)(F.n0S,{}),intent:"white-outline",size:"sm",onClick:()=>e_(!1),className:"lg:opacity-0 opacity-30 group-hover/hiddenBarArea:opacity-100 transition-opacity duration-200"})}),ev[103]=eS,ev[104]=e_,ev[105]=en):en=ev[105],ev[106]!==ex||ev[107]!==eV||ev[108]!==eX||ev[109]!==eq||ev[110]!==eK?(eo=(0,n.jsx)(er,{previousChapter:eK,nextChapter:eX,goToChapter:eV,pageContainer:eq,entry:ex}),ev[106]=ex,ev[107]=eV,ev[108]=eX,ev[109]=eq,ev[110]=eK,ev[111]=eo):eo=ev[111];let e9=eS&&"max-h-dvh";return ev[112]!==e9?(eg=(0,N.cn)("max-h-[calc(100dvh-3rem)] h-full",e9),ev[112]=e9,ev[113]=eg):eg=ev[113],ev[114]!==eq||ev[115]!==eF||ev[116]!==ez||ev[117]!==ey||ev[118]!==eQ?(ef=eF?(0,n.jsxs)(ei.D,{title:"Failed to load pages",children:[(0,n.jsx)("p",{children:"An error occurred while trying to load pages for this chapter."}),(0,n.jsx)("p",{children:"Reload the page, reload sources or change the source."}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(d.$n,{intent:"white",onClick:()=>eQ(),children:"Retry"})})]}):ez?(0,n.jsx)(c.kt,{containerClass:"h-full"}):ey===x.Oh.LONG_STRIP?(0,n.jsx)(C,{pageContainer:eq}):ey===x.Oh.PAGED||ey===x.Oh.DOUBLE_PAGE?(0,n.jsx)(E,{pageContainer:eq}):null,ev[114]=eq,ev[115]=eF,ev[116]=ez,ev[117]=ey,ev[118]=eQ,ev[119]=ef):ef=ev[119],ev[120]!==eg||ev[121]!==ef?(em=(0,n.jsx)("div",{"data-chapter-reader-drawer-content":!0,className:eg,tabIndex:-1,children:ef}),ev[120]=eg,ev[121]=ef,ev[122]=em):em=ev[122],ev[123]!==e6||ev[124]!==X||ev[125]!==ea||ev[126]!==en||ev[127]!==eo||ev[128]!==em?(eb=(0,n.jsxs)(G._s,{"data-chapter-reader-drawer":!0,open:e6,onOpenChange:X,size:"full",side:"bottom",headerClass:"absolute h-0",contentClass:V,hideCloseButton:!0,borderToBorder:!0,children:[ea,en,eo,em]}),ev[123]=e6,ev[124]=X,ev[125]=ea,ev[126]=en,ev[127]=eo,ev[128]=em,ev[129]=eb):eb=ev[129],eb}function ed(e){let{item:t,input:a}=e;return!a||t.value.toLowerCase().includes(a.toLowerCase())}function ec(){return(0,n.jsx)("div",{className:"flex gap-1 items-center w-full",children:(0,n.jsx)("p",{children:"Close reader"})})}function eu(){D().unbind("b")}function eh(e){return!e}function ep(){D().unbind("u")}},50548:(e,t,a)=>{a.d(t,{Ge:()=>d,HH:()=>o,QO:()=>i,WG:()=>c,Zf:()=>s,hE:()=>h,v0:()=>g});var n=a(19749),r=a(45886),l=a(12115);function i(e){var t;let a=null==(t=e.match(/(\d+(\.\d+)?)/))?void 0:t[0];return a?Math.floor(parseFloat(a)):0}function s(e){var t;let a=null==(t=e.match(/(\d+(\.\d+)?)/))?void 0:t[0];return a?parseFloat(a):0}function o(e,t){return s(e)<s(t)}function d(e,t){return s(e)>s(t)}function c(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={getChapterPageUrl:u},t[0]=e):e=t[0],e}function u(e,t,a){return e.startsWith("{{manga-local-assets}}")?"".concat((0,r.M)(),"/api/v1/manga/local-page/").concat(encodeURIComponent(e)):t?"".concat((0,r.M)(),"/manga-downloads/").concat(e):a&&Object.keys(a).length>0?"".concat((0,r.M)(),"/api/v1/image-proxy?url=").concat(encodeURIComponent(e),"&headers=").concat(encodeURIComponent(JSON.stringify(a))):e}function h(e,t){let a,r,l,i,s=(0,n.c)(11);s[0]!==e?(a=t=>{var a,n;return!!e&&!!t&&(null!=(n=null==e||null==(a=e.downloaded[t.provider])?void 0:a.findIndex(e=>e.chapterId===t.id))?n:-1)!==-1},s[0]=e,s[1]=a):a=s[1];let o=a;s[2]!==e?(r=t=>{var a,n;return!!e&&!!t&&(null!=(n=null==e||null==(a=e.queued[t.provider])?void 0:a.findIndex(e=>e.chapterId===t.id))?n:-1)!==-1},s[2]=e,s[3]=r):r=s[3];let d=r;s[4]!==e?(l=t=>e?Object.keys(e.downloaded[t]||{}).length:0,s[4]=e,s[5]=l):l=s[5];let c=l,u=!t;return s[6]!==c||s[7]!==o||s[8]!==d||s[9]!==u?(i={isChapterDownloaded:o,isChapterQueued:d,getProviderNumberOfDownloadedChapters:c,showActionButtons:u,isChapterLocal:p},s[6]=c,s[7]=o,s[8]=d,s[9]=u,s[10]=i):i=s[10],i}function p(e){return!!e&&"local-manga"===e.provider}function g(){let e,t,a,r,i,s=(0,n.c)(7);s[0]===Symbol.for("react.memo_cache_sentinel")?(e={},s[0]=e):e=s[0];let[o,d]=l.useState(e);s[1]===Symbol.for("react.memo_cache_sentinel")?(t=[],s[1]=t):t=s[1];let[c,u]=l.useState(t);s[2]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{u(e.data)},s[2]=a):a=s[2];let h=a;return s[3]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{d({}),u([])},s[3]=r):r=s[3],s[4]!==o||s[5]!==c?(i={rowSelection:o,setRowSelection:d,rowSelectedChapters:c,onRowSelectionChange:h,resetRowSelection:r},s[4]=o,s[5]=c,s[6]=i):i=s[6],i}},55226:(e,t,a)=>{function n(e){return(navigator.userAgent||"").includes(e)}function r(){return navigator.vendor.includes("Apple")&&!function(){return n("Tizen")}()}a.d(t,{Fr:()=>l,f8:()=>r});function l(){let e="";return navigator.userAgent&&(e=navigator.userAgent),!!/iPhone|iPad|iPod|Android/.test(e)||r()&&navigator.maxTouchPoints>1}}}]);