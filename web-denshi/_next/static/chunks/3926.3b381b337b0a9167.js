"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3926],{33926:(e,t,a)=>{a.r(t),a.d(t,{a:()=>s,b:()=>i,c:()=>d,d:()=>h,g:()=>c,h:()=>l,l:()=>g});var r=a(85594),o=a(7311);function n(){return s().getCastState()===cast.framework.CastState.CONNECTED}function s(){return window.cast.framework.CastContext.getInstance()}function i(){return s().getCurrentSession()}function c(){var e;return null==(e=i())?void 0:e.getSessionObj().media[0]}function l(e){var t;return(null==(t=c())?void 0:t.media.contentId)===(null==e?void 0:e.src)}function d(e){return"Google Cast Error Code: ".concat(e)}function g(e,t){return(0,r.l)(s(),e,t)}class u{get cast(){return s()}mediaType(){return"video"}canPlay(e){return r.d&&!r.e&&(0,r.f)(e)}async prompt(e){let t;try{var a;let r=await this.wm(e);this.ba||(this.ba=new cast.framework.RemotePlayer,new cast.framework.RemotePlayerController(this.ba)),t=e.player.createEvent("google-cast-prompt-open",{trigger:r}),e.player.dispatchEvent(t),this.Nl(e,"connecting",t),await this.xm((0,o.p)(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:null==(a=i())?void 0:a.getCastDevice().friendlyName}),n()&&this.Nl(e,"connected",t)}catch(a){let t=(0,r.g)(a);throw this.Nl(e,n()?"connected":"disconnected",new o.D("google-cast-prompt-error",{detail:t})),t}finally{e.player.dispatch("google-cast-prompt-close",{trigger:t})}}async load(e){if(r.I)throw Error("[vidstack] can not load google cast provider server-side");if(!this.ba)throw Error("[vidstack] google cast player was not initialized");return new(await a.e(6883).then(a.bind(a,86883))).GoogleCastProvider(this.ba,e)}async wm(e){var t,a,o;if(null==(t=window.cast)?void 0:t.framework)return;let n=e.player.createEvent("google-cast-load-start");e.player.dispatch(n),await (0,r.h)("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),await customElements.whenDefined("google-cast-launcher");let s=e.player.createEvent("google-cast-loaded",{trigger:n});if(e.player.dispatch(s),!(null==(o=window.chrome)||null==(a=o.cast)?void 0:a.isAvailable))throw Error("Cast not available.");return s}async xm(e){this.ym(e);let t=await this.cast.requestSession();if(t)throw Error(d(t))}ym(e){var t;null==(t=this.cast)||t.setOptions({...{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0},...e})}Nl(e,t,a){e.delegate.c("remote-playback-change",{type:"google-cast",state:t},a)}constructor(){this.name="google-cast"}}var h=Object.freeze({__proto__:null,GoogleCastLoader:u})}}]);