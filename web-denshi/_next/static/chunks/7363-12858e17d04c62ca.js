(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7363],{32:(e,t,l)=>{"use strict";l.d(t,{f:()=>u});var n=l(95155),i=l(2159),a=l(84127),r=l(91360),s=l(97400),o=l(12115),d=l(70376),c=l(64685);let u=(0,o.memo)(e=>{let{mediaId:t,allFilesLocked:l,size:u="sm"}=e,[m,p]=o.useState(l),{mutate:v,isPending:f}=(0,i.qt)(t);o.useLayoutEffect(()=>{p(l)},[l]);let h=o.useCallback(()=>{v({mediaId:t,action:"toggle-lock"}),p(e=>!e)},[t]);return(0,n.jsx)(s.m_,{trigger:(0,n.jsx)(a.K0,{icon:m?(0,n.jsx)(c.zu7,{}):(0,n.jsx)(d.iXN,{}),intent:m?"success-subtle":"warning-subtle",size:u,className:(0,r.cn)("hover:opacity-60","md"===u&&!m&&"animate-bounce"),loading:f,onClick:h}),children:m?"Unlock all files":"Lock all files"})})},812:(e,t,l)=>{"use strict";l.d(t,{t:()=>g});var n=l(95155),i=l(2159),a=l(9693),r=l(5249),s=l(84127),o=l(91360),d=l(22960),c=l(77717),u=l(29724),m=l(21842),p=l(12115),v=l(78453),f=l(80893),h=l(68090);let x=(0,m.tG)("sea-media-theater-mode",!1);function g(e){let{mediaId:t,title:l,hideBackButton:m,leftHeaderActions:g,rightHeaderActions:y,mediaPlayer:b,episodeList:N,episodes:j,loading:S}=e,[E,w]=(0,u.fp)(x),{media:A,progress:T}=(0,a.od)(),[C,I]=(0,u.fp)(a.Jh),[D,k]=(0,u.fp)(a.tS),{mutate:_,isPending:L,isSuccess:R}=(0,i.iL)(null==A?void 0:A.id,C),{width:M}=(0,h.A)(),O=p.useRef(null),P=p.useRef();p.useEffect(()=>{if(O.current&&!(M<=1536)&&T.currentEpisodeNumber)return P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{let e=document.getElementById("episode-".concat(T.currentEpisodeNumber));E&&(e=document.getElementById("sea-media-player-container")),e&&e.scrollIntoView({behavior:"smooth"})},100),()=>{P.current&&clearTimeout(P.current)}},[M,j,S,T.currentEpisodeNumber,E]);let F=p.useCallback(()=>{A&&D&&!L&&!R&&_({episodeNumber:D.episodeNumber,mediaId:A.id,totalEpisodes:A.episodes||0,malId:A.idMal||void 0},{onSuccess:()=>{k(null),I(D.episodeNumber)}})},[A,D,L,R]);return(0,n.jsxs)("div",{"data-sea-media-player-layout":!0,className:"space-y-4",children:[(0,n.jsxs)("div",{"data-sea-media-player-layout-header":!0,className:"flex flex-col lg:flex-row gap-2 w-full justify-between",children:[!m&&(0,n.jsxs)("div",{className:"flex w-full gap-4 items-center relative",children:[(0,n.jsx)(r.i,{href:"/entry?id=".concat(t),children:(0,n.jsx)(s.K0,{icon:(0,n.jsx)(v.nXt,{}),rounded:!0,intent:"gray-outline",size:"sm"})}),(0,n.jsx)("h3",{className:"max-w-full lg:max-w-[50%] text-ellipsis truncate",children:l})]}),(0,n.jsxs)("div",{"data-sea-media-player-layout-header-actions":!0,className:"flex flex-wrap gap-2 items-center lg:justify-end w-full",children:[g,(0,n.jsx)("div",{className:"flex flex-1"}),!!D&&D.episodeNumber>C&&(0,n.jsx)(s.$n,{className:"animate-pulse",loading:L,disabled:R,onClick:F,children:"Update progress"}),y,(0,n.jsx)(s.K0,{onClick:()=>w(e=>!e),intent:"gray-basic",icon:E?(0,n.jsx)(f.$a0,{}):(0,n.jsx)(f.ykq,{})})]})]}),!1!==S?(0,n.jsxs)("div",{"data-sea-media-player-layout-content":!0,className:(0,o.cn)("flex gap-4 w-full flex-col 2xl:flex-row",E&&"block space-y-4"),children:[(0,n.jsx)("div",{id:"sea-media-player-container","data-sea-media-player-layout-content-player":!0,className:(0,o.cn)("aspect-video relative w-full self-start mx-auto",E&&"max-h-[90vh] !w-auto aspect-video mx-auto"),children:b}),(0,n.jsxs)(d.F,{ref:O,"data-sea-media-player-layout-content-episode-list":!0,className:(0,o.cn)("2xl:max-w-[450px] w-full relative 2xl:sticky h-[75dvh] overflow-y-auto pr-4 pt-0 -mt-3",E&&"2xl:max-w-full"),children:[(0,n.jsx)("div",{"data-sea-media-player-layout-content-episode-list-container":!0,className:"space-y-3",children:N}),(0,n.jsx)("div",{"data-sea-media-player-layout-content-episode-list-bottom-gradient":!0,className:"z-[5] absolute bottom-0 w-full h-[2rem] bg-gradient-to-t from-[--background] to-transparent"})]})]}):(0,n.jsxs)("div",{className:"grid 2xl:grid-cols-[1fr,450px] gap-4 xl:gap-4",children:[(0,n.jsx)("div",{className:"w-full min-h-[70dvh] relative",children:(0,n.jsx)(c.E,{className:"h-full w-full absolute"})}),(0,n.jsx)(c.E,{className:"hidden 2xl:block relative h-[78dvh] overflow-y-auto pr-4 pt-0"})]})]})}},2126:(e,t,l)=>{"use strict";l.d(t,{F:()=>V});var n=l(95155),i=l(2159),a=l(83394),r=l(3196),s=l(83563),o=l(98530),d=l(94077),c=l(12115),u=l(19749),m=l(3820),p=l(60695),v=l(64757),f=l(29724),h=l(78453),x=l(41452),g=l(46753),y=l(21842);let b=(0,y.tG)("sea-media-player-autoplay",!1,void 0,{getOnInit:!0}),N=(0,y.tG)("sea-media-player-autonext",!1,void 0,{getOnInit:!0}),j=(0,y.tG)("sea-media-player-autoskip-intro-outro",!1,void 0,{getOnInit:!0}),S=(0,y.tG)("sea-media-player-discrete-controls",!1,void 0,{getOnInit:!0}),E=(0,y.tG)("sea-media-player-volume",1,void 0,{getOnInit:!0}),w=(0,y.tG)("sea-media-player-muted",!1,void 0,{getOnInit:!0});function A(){let e,t,l,i,a,r,s,o,d,c,y,E,w,A=(0,u.c)(37),[T,C]=(0,f.fp)(b),[I,D]=(0,f.fp)(N),[k,_]=(0,f.fp)(j),[L,R]=(0,f.fp)(S),M=T?"On":"Off";A[0]!==M?(e=(0,n.jsx)(m.F4,{label:"Auto Play",hint:M,disabled:!1,icon:h.G2B}),A[0]=M,A[1]=e):e=A[1],A[2]!==T||A[3]!==C?(t=(0,n.jsx)(v.E.Content,{className:m.Ik,children:(0,n.jsx)(p.d,{label:"Auto play",fieldClass:"py-2 px-2",value:T,onValueChange:C})}),A[2]=T,A[3]=C,A[4]=t):t=A[4],A[5]!==e||A[6]!==t?(l=(0,n.jsxs)(v.E.Root,{children:[e,t]}),A[5]=e,A[6]=t,A[7]=l):l=A[7];let O=I?"On":"Off";A[8]!==O?(i=(0,n.jsx)(m.F4,{label:"Auto Play Next Episode",hint:O,disabled:!1,icon:x.MPv}),A[8]=O,A[9]=i):i=A[9],A[10]!==I||A[11]!==D?(a=(0,n.jsx)(v.E.Content,{className:m.Ik,children:(0,n.jsx)(p.d,{label:"Auto play next episode",fieldClass:"py-2 px-2",value:I,onValueChange:D})}),A[10]=I,A[11]=D,A[12]=a):a=A[12],A[13]!==i||A[14]!==a?(r=(0,n.jsxs)(v.E.Root,{children:[i,a]}),A[13]=i,A[14]=a,A[15]=r):r=A[15];let P=k?"On":"Off";A[16]!==P?(s=(0,n.jsx)(m.F4,{label:"Skip Intro/Outro",hint:P,disabled:!1,icon:x.MPv}),A[16]=P,A[17]=s):s=A[17],A[18]!==k||A[19]!==_?(o=(0,n.jsx)(v.E.Content,{className:m.Ik,children:(0,n.jsx)(p.d,{label:"Skip intro/outro",fieldClass:"py-2 px-2",value:k,onValueChange:_})}),A[18]=k,A[19]=_,A[20]=o):o=A[20],A[21]!==o||A[22]!==s?(d=(0,n.jsxs)(v.E.Root,{children:[s,o]}),A[21]=o,A[22]=s,A[23]=d):d=A[23];let F=L?"On":"Off";return A[24]!==F?(c=(0,n.jsx)(m.F4,{label:"Discrete Controls",hint:F,disabled:!1,icon:g.ax0}),A[24]=F,A[25]=c):c=A[25],A[26]!==L||A[27]!==R?(y=(0,n.jsx)(v.E.Content,{className:m.Ik,children:(0,n.jsx)(p.d,{label:"Discrete controls",help:"Only show the controls when the mouse is over the bottom part. (Large screens only)",fieldClass:"py-2 px-2",value:L,onValueChange:R,fieldHelpTextClass:"max-w-xs"})}),A[26]=L,A[27]=R,A[28]=y):y=A[28],A[29]!==c||A[30]!==y?(E=(0,n.jsxs)(v.E.Root,{children:[c,y]}),A[29]=c,A[30]=y,A[31]=E):E=A[31],A[32]!==d||A[33]!==E||A[34]!==l||A[35]!==r?(w=(0,n.jsxs)(n.Fragment,{children:[l,r,d,E]}),A[32]=d,A[33]=E,A[34]=l,A[35]=r,A[36]=w):w=A[36],w}(0,y.tG)("sea-media-playback-rate",1,void 0,{getOnInit:!0});var T=l(9693),C=l(96826),I=l(78106),D=l(71149),k=l(43994),_=l(40568);let L={...D.g,PlayButton:{Play:_.djq,Pause:_.d5L,Replay:_.RhI},MuteButton:{Mute:k.sRF,VolumeLow:k.l$p,VolumeHigh:k.exc},GoogleCastButton:{Default:k.HhW},PIPButton:{Enter:_.FfK,Exit:_.Ff_},FullscreenButton:{Enter:_.xb0,Exit:_.xHI},Menu:{...D.g.Menu,Settings:_.ZkC},CaptionButton:{On:_.Dmb,Off:_.WuF}};var R=l(84127),M=l(91360),O=l(2091),P=l(77717),F=l(93715),z=l(83846),B=l(82617),K=l(86694),U=l.n(K),G=l(4573),q=l.n(G),H=l(62361);function V(e){var t,l;let{url:u,poster:m,isLoading:p,isPlaybackError:v,playerRef:h,tracks:x=[],chapters:g=[],videoLayoutSlots:y,loadingText:D,onCanPlay:_,onProviderChange:K,onProviderSetup:G,onEnded:V,onTimeUpdate:W,onDurationChange:Y,onGoToNextEpisode:Q,onGoToPreviousEpisode:$,settingsItems:X,mediaInfoDuration:Z}=e,J=(0,C.v1)(),[ee,et]=c.useState(0),{media:el,progress:en}=(0,T.od)(),[ei,ea]=c.useState(0);c.useEffect(()=>{if(!Z)return;let e=Z||0;e&&ea(e)},[Z]);let[er,es]=(0,f.fp)(T.tS),eo=(0,f.md)(b),ed=(0,f.md)(N),ec=(0,f.md)(S),eu=(0,f.md)(j),[em,ep]=(0,f.fp)(E),[ev,ef]=(0,f.fp)(w),[eh,ex]=(0,f.fp)(T.Jh);c.useEffect(()=>{var e;ex(null!=(e=en.currentProgress)?e:0)},[en.currentProgress]);let[eg,ey]=c.useState(!1),[eb,eN]=c.useState(!1),ej=c.useRef(0),eS=c.useRef(0),eE=c.useRef(!1),ew=c.useRef(void 0),eA=c.useRef(null),eT=c.useRef(!1),{data:eC}=(0,o.nI)(null==el?void 0:el.idMal,null!=(l=en.currentEpisodeNumber)?l:-1),{mutate:eI,isPending:eD,isSuccess:ek}=(0,i.iL)(null==el?void 0:el.id,eh),e_=c.useCallback((e,t)=>{null==Y||Y(e,t),et(e)},[]),{handleUpdateWatchHistory:eL}=(0,a.FE)(h,en.currentEpisodeNumber,null==el?void 0:el.id),{mutate:eR}=(0,r.sq)(),{mutate:eM}=(0,r.Bv)(),{mutate:eO}=(0,r.P6)();c.useEffect(()=>{let e=setInterval(()=>{var e,t,l,n,i,a,r,s,o,d;h.current&&eE.current&&(null==J||null==(t=J.settings)||null==(e=t.discord)?void 0:e.enableRichPresence)&&(null==J||null==(n=J.settings)||null==(l=n.discord)?void 0:l.enableAnimeRichPresence)&&eM({progress:Math.floor(null!=(s=null==(i=h.current)?void 0:i.currentTime)?s:0),duration:Math.floor(null!=(o=null==(a=h.current)?void 0:a.duration)?o:0),paused:null!=(d=null==(r=h.current)?void 0:r.paused)&&d})},6e3);return()=>clearInterval(e)},[null==J||null==(t=J.settings)?void 0:t.discord,u,eE.current]),c.useEffect(()=>{ew.current!==u&&(ew.current=u,eE.current=!1)},[u]);let{watchHistory:eP,waitForWatchHistory:eF,getEpisodeContinuitySeekTo:ez}=(0,a.vy)(null==el?void 0:el.id),eB=c.useRef(!1);function eK(e){var t;Object.assign(null!=(t=h.current)?t:{},{currentTime:e})}c.useMemo(()=>{var e,t,l,n,i,a,r,s,o,d,c,u;let m=null!=(o=null==eC||null==(t=eC.op)||null==(e=t.interval)?void 0:e.startTime)?o:0,p=null!=(d=null==eC||null==(n=eC.op)||null==(l=n.interval)?void 0:l.endTime)?d:0,v=null!=(c=null==eC||null==(a=eC.ed)||null==(i=a.interval)?void 0:i.startTime)?c:0,f=null!=(u=null==eC||null==(s=eC.ed)||null==(r=s.interval)?void 0:r.endTime)?u:0,h=[];return p>m&&h.push({startTime:m,endTime:p,text:"Intro"}),f>v&&h.push({startTime:v,endTime:f,text:"Outro"}),h},[]),c.useEffect(()=>(q().bind("f",()=>{(0,F.v)("MEDIA PLAYER").info("Fullscreen key pressed");try{var e,t,l;null==(e=h.current)||e.enterFullscreen(),null==(l=h.current)||null==(t=l.el)||t.focus()}catch(e){}}),()=>{var e,t,l,n;q().unbind("f"),(null==J||null==(t=J.settings)||null==(e=t.discord)?void 0:e.enableRichPresence)&&(null==J||null==(n=J.settings)||null==(l=n.discord)?void 0:l.enableAnimeRichPresence)&&eO()}),[]);let{inject:eU,remove:eG}=(0,s.H)();c.useEffect(()=>(eU("media-player-controls",{items:[{id:"toggle-play",value:"toggle-play",heading:"Controls",priority:100,render:()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{children:"Toggle Play"})}),onSelect:()=>{var e,t,l;(null==(e=h.current)?void 0:e.paused)?null==(t=h.current)||t.play():null==(l=h.current)||l.pause()}},{id:"fullscreen",value:"fullscreen",heading:"Controls",priority:99,render:()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{children:"Fullscreen"})}),onSelect:()=>{var e;null==(e=h.current)||e.enterFullscreen()}},{id:"next-episode",value:"next-episode",heading:"Controls",priority:98,render:()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{children:"Next Episode"})}),onSelect:()=>null==Q?void 0:Q()},{id:"previous-episode",value:"previous-episode",heading:"Controls",priority:97,render:()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{children:"Previous Episode"})}),onSelect:()=>null==$?void 0:$()}]}),()=>eG("media-player-controls")),[u]);let{onMediaEnterFullscreenRequest:eq}=(c.useEffect(()=>{var e,t,l,n,i;let a=null;if(null==(e=window)?void 0:e.__TAURI__){let e=null==(i=window)||null==(n=i.__TAURI__)||null==(l=n.window)||null==(t=l.getCurrentWindow)?void 0:t.call(l);e&&(async()=>{a=await e.listen("macos-activation-policy-accessory-done",()=>{console.log("macos policy accessory event done");try{var e;console.log("requesting fullscreen"),null==(e=h.current)||e.enterFullscreen()}catch(e){console.log("failed to enter fullscreen from 'macos-activation-policy-accessory-done'",e)}})})()}return()=>{null==a||a()}},[]),{onMediaEnterFullscreenRequest:function(e,t){if(d.X)try{var l,n,i,a,r,s,o,c,u;if(null==(l=window)?void 0:l.__TAURI__){let e=null==(r=window)||null==(a=r.__TAURI__)||null==(i=a.os)||null==(n=i.platform)?void 0:n.call(i),l=null==(u=window)||null==(c=u.__TAURI__)||null==(o=c.window)||null==(s=o.getCurrentWindow)?void 0:s.call(o);e&&"macos"===e&&(t.preventDefault(),console.log("native fullscreen event prevented, sending macos policy accessory event"),l.emit("macos-activation-policy-accessory").then(()=>{console.log("macos policy accessory event sent"),t.defaultPrevented}))}}catch(e){}}});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{"data-sea-media-player-container":!0,className:"aspect-video relative w-full self-start mx-auto",children:(null==v?void 0:v.length)?(0,n.jsx)(I.D,{title:"Oops!",children:(0,n.jsx)("p",{className:"max-w-md",children:U()(v)})}):u&&!p?(0,n.jsxs)(z.KJj,{"data-sea-media-player":!0,streamType:"on-demand",playsInline:!0,ref:h,autoPlay:eo,crossOrigin:!0,src:u,poster:m,aspectRatio:"16/9",controlsDelay:ec?500:void 0,className:(0,M.cn)(ec&&"discrete-controls"),onProviderChange:(e,t)=>{null==K||K(e,t)},onMediaEnterFullscreenRequest:eq,onFullscreenChange:(e,t)=>{eT.current=e,e?eA.current=document.activeElement:setTimeout(()=>{var e;null==(e=eA.current)||e.focus()},100)},onProviderSetup:(e,t)=>{null==G||G(e,t)},volume:em,onVolumeChange:e=>ep(e.volume),onTimeUpdate:(e,t)=>{var l,n,i,a,r,s,o,d,c;if(null==W||W(e,t),(null==eC||null==(l=eC.op)?void 0:l.interval)&&(null==e?void 0:e.currentTime)&&(null==e?void 0:e.currentTime)>=eC.op.interval.startTime&&(null==e?void 0:e.currentTime)<=eC.op.interval.endTime?(ey(!0),eu&&eK((null==eC||null==(r=eC.op)||null==(a=r.interval)?void 0:a.endTime)||0)):ey(!1),(null==eC||null==(n=eC.ed)?void 0:n.interval)&&500>Math.abs(eC.ed.interval.startTime-(null==eC||null==(i=eC.ed)?void 0:i.episodeLength))&&(null==e?void 0:e.currentTime)&&(null==e?void 0:e.currentTime)>=eC.ed.interval.startTime&&(null==e?void 0:e.currentTime)<=eC.ed.interval.endTime?(eN(!0),eu&&eK((null==eC||null==(o=eC.ed)||null==(s=o.interval)?void 0:s.endTime)||0)):eN(!1),ej.current>2e3&&(ej.current=0,eL()),ej.current++,eS.current<200)return void eS.current++;eS.current=0;let u=ei||ee;el&&null!=en.currentEpisodeNumber&&en.currentEpisodeNumber>0&&(!er||en.currentEpisodeNumber>er.episodeNumber)&&u>0&&e.currentTime/u>=.8&&en.currentEpisodeNumber>(null!=eh?eh:0)&&((null==J||null==(c=J.settings)||null==(d=c.library)?void 0:d.autoUpdateProgress)?eD||eI({episodeNumber:en.currentEpisodeNumber,mediaId:null==el?void 0:el.id,totalEpisodes:(null==el?void 0:el.episodes)||0,malId:(null==el?void 0:el.idMal)||void 0},{onSuccess:()=>{ex(en.currentEpisodeNumber)}}):es({episodeNumber:en.currentEpisodeNumber}))},onDurationChange:e_,onCanPlay:(e,t)=>{var l,n,i,a,r,s,o,c,u,m,p,v,f,x,g,y,b,N,j,S,E,w,A,T;if(null==_||_(e,t),eE.current=!0,d.X&&eB.current&&eT.current){(0,F.v)("MEDIA PLAYER").info("Restoring fullscreen");try{null==(s=h.current)||s.enterFullscreen(),null==(c=h.current)||null==(o=c.el)||o.focus()}catch(e){}}if(eB.current=!1,en.currentEpisodeNumber&&(null==eP?void 0:eP.found)&&(null==(l=eP.item)?void 0:l.episodeNumber)===en.currentEpisodeNumber){let e=ez(en.currentEpisodeNumber,null==(u=h.current)?void 0:u.currentTime,null==(m=h.current)?void 0:m.duration);(0,F.v)("MEDIA PLAYER").info("Watch continuity: Seeking to last watched time",{lastWatchedTime:e}),e>0&&((0,F.v)("MEDIA PLAYER").info("Watch continuity: Seeking to",e),Object.assign(h.current||{},{currentTime:e}))}if((null==J||null==(i=J.settings)||null==(n=i.discord)?void 0:n.enableRichPresence)&&(null==J||null==(r=J.settings)||null==(a=r.discord)?void 0:a.enableAnimeRichPresence)&&(null==el?void 0:el.id)){let e=null!=(S=null==(p=h.current)?void 0:p.currentTime)?S:0,t=null!=(E=null==(v=h.current)?void 0:v.duration)?E:0;(0,F.v)("MEDIA PLAYER").info("Setting discord activity",{videoProgress:e,videoDuration:t}),eR({mediaId:null!=(w=null==el?void 0:el.id)?w:0,title:(null==el||null==(f=el.title)?void 0:f.userPreferred)||(null==el||null==(x=el.title)?void 0:x.romaji)||(null==el||null==(g=el.title)?void 0:g.english)||"Watching",image:(null==el||null==(y=el.coverImage)?void 0:y.large)||(null==el||null==(b=el.coverImage)?void 0:b.medium)||"",isMovie:(null==el?void 0:el.format)==="MOVIE",episodeNumber:null!=(A=en.currentEpisodeNumber)?A:0,progress:Math.floor(e),duration:Math.floor(t),totalEpisodes:null==el?void 0:el.episodes,currentEpisodeCount:(null==el||null==(N=el.nextAiringEpisode)?void 0:N.episode)?(null==el||null==(j=el.nextAiringEpisode)?void 0:j.episode)-1:null==el?void 0:el.episodes,episodeTitle:(null==en?void 0:en.currentEpisodeTitle)||void 0})}eo&&(null==(T=h.current)||T.play())},onEnded:e=>{null==V||V(e),ed&&!eB.current&&(null==Q||Q(),eB.current=!0)},muted:ev,onMediaMuteRequest:()=>ef(!0),onMediaUnmuteRequest:()=>ef(!1),children:[(0,n.jsx)(z.YE$,{children:x.map((e,t)=>(0,n.jsx)(z.CCl,{...e},"track-".concat(t)))}),(0,n.jsxs)("div",{"data-sea-media-player-skip-intro-outro-container":!0,className:"absolute bottom-24 px-4 w-full justify-between flex items-center",children:[(0,n.jsx)("div",{children:eg&&(0,n.jsx)(R.$n,{intent:"white",size:"sm",onClick:function(){var e,t,l,n;(null==eC||null==(t=eC.op)||null==(e=t.interval)?void 0:e.endTime)&&eK((null==eC||null==(n=eC.op)||null==(l=n.interval)?void 0:l.endTime)||0)},loading:eu,children:"Skip opening"})}),(0,n.jsx)("div",{children:eb&&(0,n.jsx)(R.$n,{intent:"white",size:"sm",onClick:function(){var e,t,l,n;(null==eC||null==(t=eC.ed)||null==(e=t.interval)?void 0:e.endTime)&&eK((null==eC||null==(n=eC.ed)||null==(l=n.interval)?void 0:l.endTime)||0)},loading:eu,children:"Skip ending"})})]}),(0,n.jsx)(B.d,{icons:L,slots:{...y,beforeMuteButton:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[$&&(0,n.jsx)(R.K0,{intent:"white-basic",size:"md",onClick:$,"aria-label":"Previous Episode",icon:(0,n.jsx)(k.iBT,{className:"text-3xl"})}),Q&&(0,n.jsx)(R.K0,{intent:"white-basic",size:"md",onClick:Q,"aria-label":"Next Episode",icon:(0,n.jsx)(k.W$T,{className:"text-3xl"})})]}),settingsMenuEndItems:(0,n.jsxs)(n.Fragment,{children:[X,(0,n.jsx)(A,{})]})}})]}):(0,n.jsxs)(P.E,{"data-sea-media-player-loading-container":!0,className:"w-full h-full absolute flex justify-center items-center flex-col space-y-4",children:[(0,n.jsx)(O.kt,{spinner:(0,n.jsx)(H.kiM,{className:"size-14 lg:size-20 text-white animate-spin"})}),(0,n.jsx)("div",{className:"text-center text-xs lg:text-sm",children:null!=D?D:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{children:"Loading..."})})})]})})})}},3820:(e,t,l)=>{"use strict";l.d(t,{F4:()=>R,Ik:()=>w,V1:()=>k,nO:()=>T,uN:()=>C,xF:()=>M});var n=l(95155),i=l(19749),a=l(61203),r=l(65151),s=l(92161),o=l(84127),d=l(76049),c=l(75435),u=l(52885),m=l(30033),p=l(57073),v=l(50943),f=l(64757),h=l(11356),x=l(90814),g=l(29724),y=l(6066);l(12115);var b=l(58701),N=l(65160),j=l(43994),S=l(41452),E=l(80893);let w="hidden w-full flex-col items-start justify-center outline-none data-[keyboard]:mt-[3px] data-[open]:inline-block",A="px-2 py-1.5 rounded-[--radius-md] hover:bg-[--subtle]";function T(){let e,t,l,a,s=(0,i.c)(13),{customQualities:o,videoSource:d,changeQuality:c}=(0,r.n)(),u=(null==d?void 0:d.quality)||"";s[0]!==u?(e=(0,n.jsx)(R,{label:"Quality ",hint:u,disabled:!1,icon:S.Ryp}),s[0]=u,s[1]=e):e=s[1];let m=(null==d?void 0:d.quality)||"-";if(s[2]!==c||s[3]!==o){let e;s[5]!==c?(e=e=>(0,n.jsx)(L,{value:e,onSelect:t=>{t.target.checked&&c(e)},children:e},e),s[5]=c,s[6]=e):e=s[6],t=o.map(e),s[2]=c,s[3]=o,s[4]=t}else t=s[4];return s[7]!==m||s[8]!==t?(l=(0,n.jsx)(f.E.Content,{className:w,children:(0,n.jsx)(f.E.RadioGroup,{value:m,children:t})}),s[7]=m,s[8]=t,s[9]=l):l=s[9],s[10]!==e||s[11]!==l?(a=(0,n.jsxs)(f.E.Root,{children:[e,l]}),s[10]=e,s[11]=l,s[12]=a):a=s[12],a}function C(e){let t,l,d,c,u,p,v,f,h,x,j,S=(0,i.c)(27),{mediaId:E}=e,{servers:w,providerExtensionOptions:A,changeProvider:T,changeServer:C}=(0,r.n)(),k=(0,y.useRouter)(),[_]=(0,g.fp)(s.kL),[L]=(0,g.fp)(s.Wr),{mutate:R,isPending:M}=(0,a.Cz)(),O=_||"";return S[0]===Symbol.for("react.memo_cache_sentinel")?(t={value:"add-provider",label:"Find other providers"},S[0]=t):t=S[0],S[1]!==A?(l=[...A,t],S[1]=A,S[2]=l):l=S[2],S[3]!==T||S[4]!==k?(d=e=>{if("add-provider"===e)return void k.push("/extensions?tab=marketplace&type=onlinestream-provider");T(e)},S[3]=T,S[4]=k,S[5]=d):d=S[5],S[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(b.Vvz,{}),S[6]=c):c=S[6],S[7]!==O||S[8]!==l||S[9]!==d?(u=(0,n.jsx)(m.l,{value:O,options:l,onValueChange:d,placeholder:"Select provider",size:"sm",leftAddon:c,fieldClass:"w-fit",className:"rounded-full rounded-l-none w-fit",addonClass:"rounded-full rounded-r-none"}),S[7]=O,S[8]=l,S[9]=d,S[10]=u):u=S[10],S[11]!==C||S[12]!==L||S[13]!==w?(p=!!w.length&&(0,n.jsx)(m.l,{size:"sm",value:L,options:w.map(I),onValueChange:e=>{C(e)},fieldClass:"w-fit",className:"rounded-full w-fit !px-4",addonClass:"rounded-full rounded-r-none"}),S[11]=C,S[12]=L,S[13]=w,S[14]=p):p=S[14],S[15]===Symbol.for("react.memo_cache_sentinel")?(v=(0,n.jsx)(o.$n,{intent:"gray-basic",size:"sm",className:"rounded-full",leftIcon:(0,n.jsx)(N.Dsl,{className:"text-xl"}),children:"Cache"}),f=(0,n.jsx)("p",{className:"text-sm text-[--muted]",children:"Empty the cache if you are experiencing issues with the stream."}),S[15]=v,S[16]=f):(v=S[15],f=S[16]),S[17]!==R||S[18]!==E?(h=()=>R({mediaId:E}),S[17]=R,S[18]=E,S[19]=h):h=S[19],S[20]!==M||S[21]!==h?(x=(0,n.jsxs)(D,{title:"Stream",trigger:v,children:[f,(0,n.jsx)(o.$n,{size:"sm",intent:"alert-subtle",onClick:h,loading:M,children:"Empty stream cache"})]}),S[20]=M,S[21]=h,S[22]=x):x=S[22],S[23]!==x||S[24]!==u||S[25]!==p?(j=(0,n.jsxs)(n.Fragment,{children:[u,p,x]}),S[23]=x,S[24]=u,S[25]=p,S[26]=j):j=S[26],j}function I(e){return{label:e,value:e}}function D(e){let t,l,a,r,s=(0,i.c)(11);s[0]!==e?({title:a,children:t,...l}=e,s[0]=e,s[1]=t,s[2]=l,s[3]=a):(t=s[1],l=s[2],a=s[3]);let{width:o}=(0,v.lW)();if(o&&o>1024){let e;return s[4]!==t||s[5]!==l?(e=(0,n.jsx)(c.A,{...l,className:"max-w-xl !w-full overflow-hidden space-y-2",children:t}),s[4]=t,s[5]=l,s[6]=e):e=s[6],e}return s[7]!==t||s[8]!==l||s[9]!==a?(r=(0,n.jsx)(d.a,{...l,title:a,children:t}),s[7]=t,s[8]=l,s[9]=a,s[10]=r):r=s[10],r}function k(e){let t,l,a,o,d,c,m,v,x,y,b=(0,i.c)(21),{changeProvider:N,providerExtensionOptions:j,servers:S,changeServer:w}=(0,r.n)(),[T]=(0,g.fp)(s.kL),[C]=(0,g.fp)(s.Wr);if(!S.length||!C)return null;b[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)(h.t.Root,{children:[(0,n.jsx)(h.t.Trigger,{asChild:!0,children:(0,n.jsx)(f.E.Button,{className:"ring-media-focus group relative mr-0.5 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-[--radius-md] outline-none ring-inset hover:bg-white/20 data-[focus]:ring-4 aria-hidden:hidden",children:(0,n.jsx)(E.c$4,{className:"text-3xl"})})}),(0,n.jsx)(h.t.Content,{className:"animate-out fade-out slide-out-to-bottom-2 data-[visible]:animate-in data-[visible]:fade-in data-[visible]:slide-in-from-bottom-4 z-10 rounded-sm bg-black/90 px-2 py-0.5 text-sm font-medium text-white group-data-[open]/parent:hidden",placement:"top",children:"Provider"})]}),b[0]=t):t=b[0],b[1]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("p",{className:"text-white px-2 py-1",children:"Provider"}),b[1]=l):l=b[1];let I=T||"";return b[2]!==N?(a=e=>{N(e)},b[2]=N,b[3]=a):a=b[3],b[4]!==j||b[5]!==I||b[6]!==a?(o=(0,n.jsx)(u.z,{value:I,options:j,onValueChange:a,itemContainerClass:A}),b[4]=j,b[5]=I,b[6]=a,b[7]=o):o=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(p.w,{className:"my-1"}),c=(0,n.jsx)("p",{className:"text-white px-2 py-1",children:"Server"}),b[8]=d,b[9]=c):(d=b[8],c=b[9]),b[10]!==S?(m=S.map(_),b[10]=S,b[11]=m):m=b[11],b[12]!==w?(v=e=>{w(e)},b[12]=w,b[13]=v):v=b[13],b[14]!==C||b[15]!==m||b[16]!==v?(x=(0,n.jsx)(u.z,{value:C,options:m,onValueChange:v,itemContainerClass:A}),b[14]=C,b[15]=m,b[16]=v,b[17]=x):x=b[17],b[18]!==o||b[19]!==x?(y=(0,n.jsxs)(f.E.Root,{className:"parent",children:[t,(0,n.jsxs)(f.E.Content,{className:"animate-out fade-out slide-out-to-bottom-2 data-[open]:animate-in data-[open]:fade-in data-[open]:slide-in-from-bottom-4 flex h-[var(--menu-height)] max-h-[400px] min-w-[260px] flex-col overflow-y-auto overscroll-y-contain rounded-[--radius-md] border border-white/10 bg-black/95 p-2.5 font-sans text-[15px] font-medium outline-none backdrop-blur-sm transition-[height] duration-300 will-change-[height] data-[resizing]:overflow-hidden",placement:"top",children:[l,o,d,c,x]})]}),b[18]=o,b[19]=x,b[20]=y):y=b[20],y}function _(e){return{label:e,value:e}}function L(e){let t,l,a,r,s,o,d=(0,i.c)(10);return d[0]!==e?({children:t,...l}=e,d[0]=e,d[1]=t,d[2]=l):(t=d[1],l=d[2]),d[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(x.Z,{className:"h-4 w-4 text-white group-data-[checked]:hidden"}),r=(0,n.jsx)(x.AB,{className:"text-media-brand hidden h-4 w-4 group-data-[checked]:block"}),d[3]=a,d[4]=r):(a=d[3],r=d[4]),d[5]!==t?(s=(0,n.jsx)("span",{className:"ml-2",children:t}),d[5]=t,d[6]=s):s=d[6],d[7]!==l||d[8]!==s?(o=(0,n.jsxs)(f.E.Radio,{className:"ring-media-focus group relative flex w-full cursor-pointer select-none items-center justify-start rounded-sm p-2.5 outline-none data-[hocus]:bg-white/10 data-[focus]:ring-[3px]",...l,children:[a,r,s]}),d[7]=l,d[8]=s,d[9]=o):o=d[9],o}function R(e){let t,l,a,r,s,o,d=(0,i.c)(13),{label:c,hint:u,icon:m,disabled:p}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(x.YJ,{className:"vds-menu-button-close-icon"}),d[0]=t):t=d[0],d[1]!==m?(l=(0,n.jsx)(m,{className:"vds-menu-button-icon"}),d[1]=m,d[2]=l):l=d[2],d[3]!==c?(a=(0,n.jsx)("span",{className:"vds-menu-button-label mr-2",children:c}),d[3]=c,d[4]=a):a=d[4],d[5]!==u?(r=(0,n.jsx)("span",{className:"vds-menu-button-hint",children:u}),d[5]=u,d[6]=r):r=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(x.vK,{className:"vds-menu-button-open-icon"}),d[7]=s):s=d[7],d[8]!==p||d[9]!==l||d[10]!==a||d[11]!==r?(o=(0,n.jsxs)(f.E.Button,{className:"vds-menu-button",disabled:p,children:[t,l,a,r,s]}),d[8]=p,d[9]=l,d[10]=a,d[11]=r,d[12]=o):o=d[12],o}function M(){let e,t,l,a=(0,i.c)(8),[d]=(0,g.fp)(s.zw),{selectedExtension:c,toggleDubbed:u}=(0,r.n)();if(!c||!(null==c?void 0:c.supportsDub))return null;a[0]!==d?(e=d?(0,n.jsx)(S.j_E,{className:"text-xl"}):(0,n.jsx)(j.i0$,{className:"text-xl"}),a[0]=d,a[1]=e):e=a[1],a[2]!==u?(t=()=>u(),a[2]=u,a[3]=t):t=a[3];let m=d?"Switch to subs":"Switch to dub";return a[4]!==e||a[5]!==t||a[6]!==m?(l=(0,n.jsx)(o.$n,{className:"",rounded:!0,intent:"gray-basic",size:"sm",leftIcon:e,onClick:t,children:m}),a[4]=e,a[5]=t,a[6]=m,a[7]=l):l=a[7],l}},6472:(e,t,l)=>{"use strict";l.d(t,{e:()=>eD,l:()=>ek});var n=l(95155),i=l(19749),a=l(53540),r=l(37723),s=l(48555),o=l(96826),d=l(6134),c=l(69665),u=l(78106),m=l(84127),p=l(76049),v=l(73832),f=l(29724),h=l(12115),x=l(70376),g=l(80893);function y(e){var t,l,a,s;let d,c,u,v,f,x,y,N=(0,i.c)(19);N[0]!==e?({entry:d,size:u,...c}=e,N[0]=e,N[1]=d,N[2]=c,N[3]=u):(d=N[1],c=N[2],u=N[3]);let j=(0,o.v1)(),{data:S,isLoading:E}=(0,r.aT)(d.mediaId,!!(null==j||null==(l=j.settings)||null==(t=l.autoDownloader)?void 0:t.enabled)),[w,A]=h.useState(!1);if(E||!(null==j||null==(s=j.settings)||null==(a=s.autoDownloader)?void 0:a.enabled)||!d.listData)return null;let T=!!(null==S?void 0:S.length);N[4]!==T?(v=(0,n.jsx)(g.EnF,{}),N[4]=T,N[5]=v):v=N[5];let C=T?"primary-subtle":"gray-subtle";return N[6]!==E||N[7]!==c||N[8]!==u||N[9]!==v||N[10]!==C?(f=(0,n.jsx)(m.K0,{icon:v,loading:E,intent:C,size:u,...c}),N[6]=E,N[7]=c,N[8]=u,N[9]=v,N[10]=C,N[11]=f):f=N[11],N[12]!==d||N[13]!==S?(x=(0,n.jsx)(b,{entry:d,rules:S}),N[12]=d,N[13]=S,N[14]=x):x=N[14],N[15]!==w||N[16]!==f||N[17]!==x?(y=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(p.a,{title:"Auto Downloader",contentClass:"max-w-3xl",open:w,onOpenChange:A,trigger:f,children:x})}),N[15]=w,N[16]=f,N[17]=x,N[18]=y):y=N[18],y}function b(e){let t,l,a,r,o,h,g,y,b,N=(0,i.c)(23),{entry:j,rules:S}=e,E=(0,f.md)(s.Qy),w=(0,v.C)(!1);return N[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("div",{className:"flex-1"}),N[0]=t):t=N[0],N[1]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)(x.Ca6,{}),N[1]=l):l=N[1],N[2]!==w?(a=(0,n.jsx)(m.$n,{className:"rounded-full",intent:"success-subtle",leftIcon:l,onClick:()=>{w.on()},children:"New Rule"}),N[2]=w,N[3]=a):a=N[3],N[4]!==w?(r=()=>w.off(),N[4]=w,N[5]=r):r=N[5],N[6]!==j.mediaId||N[7]!==r?(o=(0,n.jsx)(c.xC,{mediaId:j.mediaId,type:"create",onRuleCreatedOrDeleted:r}),N[6]=j.mediaId,N[7]=r,N[8]=o):o=N[8],N[9]!==w.active||N[10]!==w.set||N[11]!==a||N[12]!==o?(h=(0,n.jsxs)("div",{className:"flex w-full",children:[t,(0,n.jsx)(p.a,{open:w.active,onOpenChange:w.set,title:"Create a new rule",contentClass:"max-w-3xl",trigger:a,children:o})]}),N[9]=w.active,N[10]=w.set,N[11]=a,N[12]=o,N[13]=h):h=N[13],N[14]!==(null==S?void 0:S.length)?(g=!(null==S?void 0:S.length)&&(0,n.jsx)(u.D,{title:null,children:"No rules found for this anime."}),N[14]=null==S?void 0:S.length,N[15]=g):g=N[15],N[16]!==S||N[17]!==E?(y=null==S?void 0:S.map(e=>(0,n.jsx)(d.U,{rule:e,userMedia:E},e.dbId)),N[16]=S,N[17]=E,N[18]=y):y=N[18],N[19]!==h||N[20]!==g||N[21]!==y?(b=(0,n.jsxs)("div",{className:"space-y-4",children:[h,g,y]}),N[19]=h,N[20]=g,N[21]=y,N[22]=b):b=N[22],b}var N=l(32),j=l(78045),S=l(25305),E=l(90168),w=l(37054),A=l(91360),T=l(91332),C=l(44608),I=l(80919),D=l(74500);function k(e){var t,l,a,r,s,o,d;let c,u,m,p,v=(0,i.c)(11);v[0]!==(null==(t=e.media.nextAiringEpisode)?void 0:t.timeUntilAiring)?(c=(0,C.m)((0,I.p)(new Date,(null==(a=e.media.nextAiringEpisode)?void 0:a.timeUntilAiring)||0),{addSuffix:!0}),v[0]=null==(r=e.media.nextAiringEpisode)?void 0:r.timeUntilAiring,v[1]=c):c=v[1];let f=c;v[2]!==(null==(l=e.media.nextAiringEpisode)?void 0:l.timeUntilAiring)?(u=(0,D.GP)((0,I.p)(new Date,(null==(s=e.media.nextAiringEpisode)?void 0:s.timeUntilAiring)||0),"EEEE"),v[2]=null==(o=e.media.nextAiringEpisode)?void 0:o.timeUntilAiring,v[3]=u):u=v[3];let h=u,g=(0,T.Ky)();return v[4]!==h||v[5]!==f||v[6]!==e.media.nextAiringEpisode||v[7]!==g?(m=!!e.media.nextAiringEpisode&&(0,n.jsxs)("div",{className:(0,A.cn)("flex gap-2 items-center justify-center text-lg",g.mediaPageBannerInfoBoxSize===T.Pw.Fluid&&"justify-start"),children:[(0,n.jsxs)("span",{className:"font-semibold",children:["Episode ",null==(d=e.media.nextAiringEpisode)?void 0:d.episode]})," ",f,(0,n.jsx)(x.zBL,{className:"text-lg text-[--muted]"}),(0,n.jsx)("span",{className:"text-[--muted]",children:h})]}),v[4]=h,v[5]=f,v[6]=e.media.nextAiringEpisode,v[7]=g,v[8]=m):m=v[8],v[9]!==m?(p=(0,n.jsx)(n.Fragment,{children:m}),v[9]=m,v[10]=p):p=v[10],p}var _=l(66699),L=l(2159),R=l(7675),M=l(74889);async function O(){}var P=l(41611),F=l(10653),z=l(9478),B=l(63352),K=l(57073),U=l(12556);function G(e){let t,l,a,r,s,o,d,c,u,m,p,v,f,h=(0,i.c)(28);h[0]!==e?({filepaths:a,allFilepaths:t,onFilepathSelected:r,showFullPath:o,className:l,...s}=e,h[0]=e,h[1]=t,h[2]=l,h[3]=a,h[4]=r,h[5]=s,h[6]=o):(t=h[1],l=h[2],a=h[3],r=h[4],s=h[5],o=h[6]);let x=a.length===t.length;h[7]!==l?(d=(0,A.cn)("overflow-y-auto px-2 space-y-1",l),h[7]=l,h[8]=d):d=h[8];let g=!!x||0!==a.length&&"indeterminate";return h[9]!==t||h[10]!==r?(c=e=>{"boolean"==typeof e&&r(e?t:[])},h[9]=t,h[10]=r,h[11]=c):c=h[11],h[12]!==g||h[13]!==c?(u=(0,n.jsx)("div",{className:"",children:(0,n.jsx)(B.Sc,{label:"Select all files",value:g,onValueChange:c,fieldClass:"w-[fit-content]"})}),h[12]=g,h[13]=c,h[14]=u):u=h[14],h[15]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)(K.w,{}),h[15]=m):m=h[15],h[16]!==t||h[17]!==a||h[18]!==r||h[19]!==o?(p=null==t?void 0:t.toSorted(q).map((e,t)=>(0,n.jsx)("div",{className:"py-2",children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(B.Sc,{label:(0,n.jsxs)("span",{className:(0,A.cn)("",o&&"text-[--muted]"),children:[o?e.replace(U.V.basename(e),""):U.V.basename(e),o&&(0,n.jsx)("span",{className:"text-[--foreground]",children:U.V.basename(e)})]}),value:a.includes(e),onValueChange:t=>{"boolean"==typeof t&&r(l=>t?[...l,e]:l.filter(t=>t!==e))},labelClass:"break-all tracking-wide text-sm",fieldLabelClass:"break-all",fieldClass:"w-[fit-content]"})})},"".concat(e,"-").concat(t))),h[16]=t,h[17]=a,h[18]=r,h[19]=o,h[20]=p):p=h[20],h[21]!==p?(v=(0,n.jsx)("div",{className:"divide-[--border] divide-y",children:p}),h[21]=p,h[22]=v):v=h[22],h[23]!==s||h[24]!==d||h[25]!==u||h[26]!==v?(f=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:d,...s,children:[u,m,v]})}),h[23]=s,h[24]=d,h[25]=u,h[26]=v,h[27]=f):f=h[27],f}function q(e,t){return e.localeCompare(t)}var H=l(75733),V=l(42500);let W=(0,V.eU)(!1);function Y(e){let t,l,a,r,s=(0,i.c)(9),{entry:o}=e,[d,c]=(0,f.fp)(W);return s[0]!==c?(t=()=>c(!1),s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("span",{children:"Select files to delete"}),s[2]=l):l=s[2],s[3]!==o?(a=(0,n.jsx)(Q,{entry:o}),s[3]=o,s[4]=a):a=s[4],s[5]!==d||s[6]!==t||s[7]!==a?(r=(0,n.jsx)(p.a,{open:d,onOpenChange:t,contentClass:"max-w-2xl",title:l,titleClass:"text-center",children:a}),s[5]=d,s[6]=t,s[7]=a,s[8]=r):r=s[8],r}function Q(e){let t,l,a,r,s,o,d,c,u,p,v,x,g,y=(0,i.c)(32),{entry:b}=e,[,N]=(0,f.fp)(W);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],y[0]=t):t=y[0];let[j,S]=h.useState(t),E=b.media;y[1]!==b.localFiles?(l=()=>{b.localFiles&&S(b.localFiles.map(X))},a=[b.localFiles],y[1]=b.localFiles,y[2]=l,y[3]=a):(l=y[2],a=y[3]),h.useEffect(l,a);let{mutate:w,isPending:A}=(0,z.dO)();y[4]!==w||y[5]!==j||y[6]!==N?(r={title:"Delete files",description:"This action cannot be undone.",onConfirm:()=>{0!==j.length&&w({paths:j},{onSuccess:()=>{N(!1)}})}},y[4]=w,y[5]=j,y[6]=N,y[7]=r):r=y[7];let T=(0,H.J)(r);if(!E)return null;if(y[8]!==b.localFiles){var C,I;s=null!=(I=null==(C=b.localFiles)?void 0:C.map($))?I:[],y[8]=b.localFiles,y[9]=s}else s=y[9];return y[10]!==j||y[11]!==s?(o=(0,n.jsx)(G,{className:"max-h-96",filepaths:j,allFilepaths:s,onFilepathSelected:S,showFullPath:!0}),y[10]=j,y[11]=s,y[12]=o):o=y[12],y[13]!==T?(d=()=>T.open(),y[13]=T,y[14]=d):d=y[14],y[15]!==A||y[16]!==d?(c=(0,n.jsx)(m.$n,{intent:"alert",onClick:d,loading:A,children:"Delete"}),y[15]=A,y[16]=d,y[17]=c):c=y[17],y[18]!==N?(u=()=>N(!1),y[18]=N,y[19]=u):u=y[19],y[20]!==A||y[21]!==u?(p=(0,n.jsx)(m.$n,{intent:"white",onClick:u,disabled:A,children:"Cancel"}),y[20]=A,y[21]=u,y[22]=p):p=y[22],y[23]!==p||y[24]!==c?(v=(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[c,p]}),y[23]=p,y[24]=c,y[25]=v):v=y[25],y[26]!==T?(x=(0,n.jsx)(H.K,{...T}),y[26]=T,y[27]=x):x=y[27],y[28]!==v||y[29]!==x||y[30]!==o?(g=(0,n.jsxs)("div",{className:"space-y-2 mt-2",children:[o,v,x]}),y[28]=v,y[29]=x,y[30]=o,y[31]=g):g=y[31],g}function $(e){return e.path}function X(e){return e.path}var Z=l(45886),J=l(43756);let ee=(0,V.eU)(!1);function et(e){let t,l,a,r,s=(0,i.c)(9),{entry:o}=e,[d,c]=(0,f.fp)(ee);return s[0]!==c?(t=()=>c(!1),s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("span",{children:"Select files to download"}),s[2]=l):l=s[2],s[3]!==o?(a=(0,n.jsx)(el,{entry:o}),s[3]=o,s[4]=a):a=s[4],s[5]!==d||s[6]!==t||s[7]!==a?(r=(0,n.jsx)(p.a,{open:d,onOpenChange:t,contentClass:"max-w-2xl",title:l,titleClass:"text-center",children:a}),s[5]=d,s[6]=t,s[7]=a,s[8]=r):r=s[8],r}function el(e){let t,l,a,r,s,d,c,u,p=(0,i.c)(17),{entry:v}=e,[,x]=(0,f.fp)(ee);p[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],p[0]=t):t=p[0];let[g,y]=h.useState(t),{getHMACTokenQueryParam:b}=(0,o.OZ)();p[1]!==g||p[2]!==b||p[3]!==x?(l=async function(){for(let e of g){let t="/api/v1/mediastream/file?path="+encodeURIComponent(e),l=await b("/api/v1/mediastream/file","&"),n=(0,Z.M)()+t+l;(0,J.A)(n)}x(!1)},p[1]=g,p[2]=b,p[3]=x,p[4]=l):l=p[4];let N=l;if(!v.media)return null;if(p[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("p",{className:"text-[--muted]",children:"Seanime will open a new tab for each file you download. Make sure your browser allows popups."}),r=(0,n.jsx)(K.w,{}),p[5]=a,p[6]=r):(a=p[5],r=p[6]),p[7]!==v.localFiles){var j,S;s=null!=(S=null==(j=v.localFiles)?void 0:j.map(en))?S:[],p[7]=v.localFiles,p[8]=s}else s=p[8];return p[9]!==g||p[10]!==s?(d=(0,n.jsx)(G,{className:"max-h-96",filepaths:g,allFilepaths:s,onFilepathSelected:y,showFullPath:!0}),p[9]=g,p[10]=s,p[11]=d):d=p[11],p[12]!==N?(c=(0,n.jsx)("div",{className:"flex justify-end gap-2 mt-2",children:(0,n.jsx)(m.$n,{intent:"white",onClick:()=>N(),children:"Download"})}),p[12]=N,p[13]=c):c=p[13],p[14]!==d||p[15]!==c?(u=(0,n.jsxs)("div",{className:"space-y-2 mt-2",children:[a,r,d,c]}),p[14]=d,p[15]=c,p[16]=u):u=p[16],u}function en(e){return e.path}var ei=l(46278),ea=l(69554),er=l(38628);let es=(0,V.eU)(!1);function eo(e){var t,l,a;let r,s,o,d,c,u,v,h,x=(0,i.c)(25),{entry:g}=e,[y,b]=(0,f.fp)(es),{mutate:N,isPending:j}=function(){let e,t,l=(0,i.c)(3),n=(0,ei.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[M.S.METADATA.PopulateFillerData.key],l[0]=e):e=l[0],l[1]!==n?(t={endpoint:M.S.METADATA.PopulateFillerData.endpoint,method:M.S.METADATA.PopulateFillerData.methods[0],mutationKey:e,onSuccess:async()=>{await n.invalidateQueries({queryKey:[M.S.ANIME_ENTRIES.GetAnimeEntry.key]}),ea.oR.success("Filler data fetched"),await n.invalidateQueries({queryKey:[M.S.ANIME.GetAnimeEpisodeCollection.key]})}},l[1]=n,l[2]=t):t=l[2],(0,R.qk)(t)}(),{mutate:S,isPending:E}=function(){let e,t,l=(0,i.c)(3),n=(0,ei.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[M.S.METADATA.RemoveFillerData.key],l[0]=e):e=l[0],l[1]!==n?(t={endpoint:M.S.METADATA.RemoveFillerData.endpoint,method:M.S.METADATA.RemoveFillerData.methods[0],mutationKey:e,onSuccess:async()=>{await n.invalidateQueries({queryKey:[M.S.ANIME_ENTRIES.GetAnimeEntry.key]}),ea.oR.success("Filler data removed"),await n.invalidateQueries({queryKey:[M.S.ANIME.GetAnimeEpisodeCollection.key]})}},l[1]=n,l[2]=t):t=l[2],(0,R.qk)(t)}(),w=(null==(t=g.media)?void 0:t.format)!=="TV"&&(null==(l=g.media)?void 0:l.format)!=="TV_SHORT"&&(null==(a=g.media)?void 0:a.format)!=="ONA";x[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("h3",{className:"text-center",children:"AnimeFillerList"}),x[0]=r):r=x[0],x[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(er.v9M,{className:"text-xl"}),x[1]=s):s=x[1],x[2]!==g.mediaId||x[3]!==N?(o=()=>N({mediaId:g.mediaId}),x[2]=g.mediaId,x[3]=N,x[4]=o):o=x[4];let A=j||E||w,T=j?"Fetching...":"Fetch filler info";x[5]!==j||x[6]!==o||x[7]!==A||x[8]!==T?(d=(0,n.jsx)(m.$n,{className:"w-full",intent:"primary-subtle",leftIcon:s,onClick:o,loading:j,disabled:A,children:T}),x[5]=j,x[6]=o,x[7]=A,x[8]=T,x[9]=d):d=x[9],x[10]!==g.mediaId||x[11]!==S?(c=()=>S({mediaId:g.mediaId}),x[10]=g.mediaId,x[11]=S,x[12]=c):c=x[12];let C=j||E||w,I=E?"Removing...":"Remove filler info";return x[13]!==E||x[14]!==c||x[15]!==C||x[16]!==I?(u=(0,n.jsx)(m.$n,{className:"w-full",intent:"gray-subtle",onClick:c,loading:E,disabled:C,children:I}),x[13]=E,x[14]=c,x[15]=C,x[16]=I,x[17]=u):u=x[17],x[18]!==d||x[19]!==u?(v=(0,n.jsxs)("div",{className:"flex lg:flex-row flex-col gap-2",children:[d,u]}),x[18]=d,x[19]=u,x[20]=v):v=x[20],x[21]!==y||x[22]!==b||x[23]!==v?(h=(0,n.jsxs)(p.a,{open:y,onOpenChange:b,title:"Metadata",contentClass:"max-w-xl",titleClass:"",children:[r,v]}),x[21]=y,x[22]=b,x[23]=v,x[24]=h):h=x[24],h}let ed=(0,V.eU)(!1);function ec(e){let t,l,a,r,s=(0,i.c)(9),{entry:o}=e,[d,c]=(0,f.fp)(ed);return s[0]!==c?(t=()=>c(!1),s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("span",{children:"Select files to unmatch"}),s[2]=l):l=s[2],s[3]!==o?(a=(0,n.jsx)(eu,{entry:o}),s[3]=o,s[4]=a):a=s[4],s[5]!==d||s[6]!==t||s[7]!==a?(r=(0,n.jsx)(p.a,{open:d,onOpenChange:t,contentClass:"max-w-2xl",title:l,titleClass:"text-center",children:a}),s[5]=d,s[6]=t,s[7]=a,s[8]=r):r=s[8],r}function eu(e){let t,l,a,r,s,o,d,c,u,p,v,x,g,y=(0,i.c)(32),{entry:b}=e,[,N]=(0,f.fp)(ed);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],y[0]=t):t=y[0];let[j,S]=h.useState(t),E=b.media;y[1]!==b.localFiles?(l=()=>{b.localFiles&&S(b.localFiles.map(ep))},a=[b.localFiles],y[1]=b.localFiles,y[2]=l,y[3]=a):(l=y[2],a=y[3]),h.useEffect(l,a);let{mutate:w,isPending:A}=(0,z.bU)();y[4]!==j||y[5]!==N||y[6]!==w?(r={title:"Unmatch files",onConfirm:()=>{0!==j.length&&w({paths:j,action:"unmatch"},{onSuccess:()=>{N(!1)}})}},y[4]=j,y[5]=N,y[6]=w,y[7]=r):r=y[7];let T=(0,H.J)(r);if(!E)return null;if(y[8]!==b.localFiles){var C,I;s=null!=(I=null==(C=b.localFiles)?void 0:C.map(em))?I:[],y[8]=b.localFiles,y[9]=s}else s=y[9];return y[10]!==j||y[11]!==s?(o=(0,n.jsx)(G,{className:"max-h-96",filepaths:j,allFilepaths:s,onFilepathSelected:S,showFullPath:!0}),y[10]=j,y[11]=s,y[12]=o):o=y[12],y[13]!==T?(d=()=>T.open(),y[13]=T,y[14]=d):d=y[14],y[15]!==A||y[16]!==d?(c=(0,n.jsx)(m.$n,{intent:"warning",onClick:d,loading:A,children:"Unmatch"}),y[15]=A,y[16]=d,y[17]=c):c=y[17],y[18]!==N?(u=()=>N(!1),y[18]=N,y[19]=u):u=y[19],y[20]!==A||y[21]!==u?(p=(0,n.jsx)(m.$n,{intent:"white",onClick:u,disabled:A,children:"Cancel"}),y[20]=A,y[21]=u,y[22]=p):p=y[22],y[23]!==p||y[24]!==c?(v=(0,n.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[c,p]}),y[23]=p,y[24]=c,y[25]=v):v=y[25],y[26]!==T?(x=(0,n.jsx)(H.K,{...T}),y[26]=T,y[27]=x):x=y[27],y[28]!==v||y[29]!==x||y[30]!==o?(g=(0,n.jsxs)("div",{className:"space-y-2 mt-2",children:[o,v,x]}),y[28]=v,y[29]=x,y[30]=o,y[31]=g):g=y[31],g}function em(e){return e.path}function ep(e){return e.path}var ev=l(17934),ef=l(75780),eh=l(43994),ex=l(41452);function eg(e){var t,l,a;let r,s,d,c,u,p,v,h,g,y,b,N,j,S,E,w=(0,i.c)(42),{entry:A}=e;(0,o.v1)();let T=(0,f.Xr)(es),C=!!A.libraryData,{isLibraryView:I}=(0,_.K9)(),D=(0,i.c)(1);D[0]===Symbol.for("react.memo_cache_sentinel")?(E={endpoint:M.S.MEDIAPLAYER.StartDefaultMediaPlayer.endpoint,method:M.S.MEDIAPLAYER.StartDefaultMediaPlayer.methods[0],mutationKey:[M.S.MEDIAPLAYER.StartDefaultMediaPlayer.key],onSuccess:O},D[0]=E):E=D[0],(0,R.qk)(E);let{mutate:k}=(0,L.wd)(),z=(0,f.Xr)(W),B=(0,f.Xr)(ed),K=(0,f.Xr)(ee),{openDirInLibraryExplorer:U}=(0,P.AP)();return w[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(m.K0,{"data-anime-entry-dropdown-menu-trigger":!0,icon:(0,n.jsx)(x.voe,{}),intent:"gray-basic",size:"md"}),w[0]=r):r=w[0],w[1]!==A._isNakamaEntry||w[2]!==(null==(t=A.libraryData)?void 0:t.sharedPath)||w[3]!==A.mediaId||w[4]!==C||w[5]!==I||w[6]!==U||w[7]!==k?(s=I&&C&&!A._isNakamaEntry&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ev._2,{onClick:()=>k({mediaId:A.mediaId}),children:[(0,n.jsx)(x.gNt,{})," Open directory"]}),!!(null==(l=A.libraryData)?void 0:l.sharedPath)&&(0,n.jsxs)(ev._2,{onClick:()=>{var e;return U((null==(e=A.libraryData)?void 0:e.sharedPath)||"")},children:[(0,n.jsx)(eh.kWS,{})," Open in Library Explorer"]})]}),w[1]=A._isNakamaEntry,w[2]=null==(a=A.libraryData)?void 0:a.sharedPath,w[3]=A.mediaId,w[4]=C,w[5]=I,w[6]=U,w[7]=k,w[8]=s):s=w[8],w[9]!==A.anidbId?(d=!!A.anidbId&&(0,n.jsxs)(ev._2,{onClick:()=>(0,J.A)("https://anidb.net/anime/".concat(A.anidbId)),className:"flex justify-between items-center",children:[(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(eh.LG1,{className:"text-lg"})," Open on AniDB"]}),(0,n.jsx)(ef.qdV,{className:"text-[--muted] text-sm"})]}),w[9]=A.anidbId,w[10]=d):d=w[10],w[11]!==T?(c=()=>T(eb),w[11]=T,w[12]=c):c=w[12],w[13]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(eh.Lmn,{}),w[13]=u):u=w[13],w[14]!==c?(p=(0,n.jsxs)(ev._2,{onClick:c,children:[u," Metadata"]}),w[14]=c,w[15]=p):p=w[15],w[16]!==A._isNakamaEntry||w[17]!==C||w[18]!==I||w[19]!==B||w[20]!==z||w[21]!==K?(v=I&&C&&!A._isNakamaEntry&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ev.mB,{}),(0,n.jsx)(ev.lp,{children:"Bulk actions"}),(0,n.jsxs)(ev._2,{className:"flex justify-between",onClick:()=>K(ey),children:[(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(ef.a4x,{className:"text-lg"})," Download some files"]})," ",(0,n.jsx)(x.OZ6,{})]}),(0,n.jsxs)(ev._2,{className:"text-orange-500 dark:text-orange-200 flex justify-between",onClick:()=>B(!0),children:[(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(ex.eXw,{className:"text-lg"})," Unmatch some files"]}),(0,n.jsx)(x.OZ6,{})]}),(0,n.jsxs)(ev._2,{className:"text-red-500 dark:text-red-200 flex justify-between",onClick:()=>z(!0),children:[(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(ef.Q_v,{className:"text-lg"})," Delete some files"]})," ",(0,n.jsx)(x.OZ6,{})]})]}),w[16]=A._isNakamaEntry,w[17]=C,w[18]=I,w[19]=B,w[20]=z,w[21]=K,w[22]=v):v=w[22],w[23]!==A.media?(h=(0,n.jsx)(F.MF,{media:A.media}),w[23]=A.media,w[24]=h):h=w[24],w[25]!==s||w[26]!==d||w[27]!==p||w[28]!==v||w[29]!==h?(g=(0,n.jsxs)(ev.rI,{"data-anime-entry-dropdown-menu":!0,trigger:r,children:[s,d,p,v,h]}),w[25]=s,w[26]=d,w[27]=p,w[28]=v,w[29]=h,w[30]=g):g=w[30],w[31]!==A?(y=(0,n.jsx)(et,{entry:A}),b=(0,n.jsx)(eo,{entry:A}),N=(0,n.jsx)(Y,{entry:A}),j=(0,n.jsx)(ec,{entry:A}),w[31]=A,w[32]=y,w[33]=b,w[34]=N,w[35]=j):(y=w[32],b=w[33],N=w[34],j=w[35]),w[36]!==y||w[37]!==b||w[38]!==N||w[39]!==j||w[40]!==g?(S=(0,n.jsxs)(n.Fragment,{children:[g,y,b,N,j]}),w[36]=y,w[37]=b,w[38]=N,w[39]=j,w[40]=g,w[41]=S):S=w[41],S}function ey(e){return!e}function eb(e){return!e}var eN=l(97400);function ej(e){let t,l,a,r,s,o,d,c=(0,i.c)(19);c[0]!==e?({mediaId:t,size:a,...l}=e,c[0]=e,c[1]=t,c[2]=l,c[3]=a):(t=c[1],l=c[2],a=c[3]);let u=void 0===a?"lg":a,{isSilenced:p,isLoading:v}=(0,L.bt)(t),{mutate:f,isPending:h}=(0,L.xQ)();c[4]!==t||c[5]!==f?(r=function(){f({mediaId:t})},c[4]=t,c[5]=f,c[6]=r):r=c[6];let x=r;c[7]!==p?(s=p?(0,n.jsx)(eh.yw6,{}):(0,n.jsx)(eh.ZKY,{}),c[7]=p,c[8]=s):s=c[8];let g=v||h,y=p?"warning-subtle":"gray-subtle";c[9]!==x||c[10]!==l||c[11]!==u||c[12]!==s||c[13]!==g||c[14]!==y?(o=(0,n.jsx)(m.K0,{icon:s,onClick:x,loading:g,intent:y,size:u,...l}),c[9]=x,c[10]=l,c[11]=u,c[12]=s,c[13]=g,c[14]=y,c[15]=o):o=c[15];let b=p?"Un-silence notifications":"Silence notifications";return c[16]!==o||c[17]!==b?(d=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(eN.m_,{trigger:o,children:b})}),c[16]=o,c[17]=b,c[18]=d):d=c[18],d}var eS=l(71780),eE=l(5249),ew=l(63717),eA=l(24151),eT=l(80743),eC=l(67187),eI=l(81281);function eD(e){let t,l,a,r,s=(0,i.c)(8);return s[0]!==e?({className:t,...l}=e,s[0]=e,s[1]=t,s[2]=l):(t=s[1],l=s[2]),(0,T.Ky)(),s[3]!==t?(a=(0,A.cn)("w-full","lg:w-full lg:max-w-[280px]",t),s[3]=t,s[4]=a):a=s[4],s[5]!==l||s[6]!==a?(r=(0,n.jsx)(m.$n,{className:a,...l}),s[5]=l,s[6]=a,s[7]=r):r=s[7],r}function ek(e){var t,l,i,r,s,d,c,u,p,v,f,h,g,b,C,I,D,L,R,M,O,P,z,B,K,U,G,q,H,V,W,Y,Q;let $=(0,o.v1)(),{entry:X,details:Z}=e;(0,T.Ky)();let J=(0,eI.zh)();if(!X.media)return null;let{hasTorrentProvider:ee}=(0,o.lJ)(),{hasDebridService:et}=(0,o.bV)(),{currentView:el,isLibraryView:en,isTorrentStreamingView:ei,isDebridStreamingView:ea,isOnlineStreamingView:es}=(0,_.K9)();return X.listData,(0,n.jsx)(E.ZM,{backgroundImage:null==(t=X.media)?void 0:t.bannerImage,coverImage:null==(i=X.media)||null==(l=i.coverImage)?void 0:l.extraLarge,children:(0,n.jsxs)(E.In,{children:[(0,n.jsx)(E.xN,{coverImage:(null==(s=X.media)||null==(r=s.coverImage)?void 0:r.extraLarge)||(null==(c=X.media)||null==(d=c.coverImage)?void 0:d.large),title:null==(p=X.media)||null==(u=p.title)?void 0:u.userPreferred,color:null==(f=X.media)||null==(v=f.coverImage)?void 0:v.color,englishTitle:null==(g=X.media)||null==(h=g.title)?void 0:h.english,romajiTitle:null==(C=X.media)||null==(b=C.title)?void 0:b.romaji,startDate:null==(I=X.media)?void 0:I.startDate,season:null==(D=X.media)?void 0:D.season,progressTotal:null==(L=X.media)?void 0:L.episodes,status:null==(R=X.media)?void 0:R.status,description:null==(M=X.media)?void 0:M.description,listData:X.listData,media:X.media,type:"anime",children:(0,n.jsxs)("div",{"data-anime-meta-section-details":!0,className:(0,A.cn)("flex gap-3 flex-wrap items-center","justify-center lg:justify-start lg:max-w-[65vw]"),children:[(0,n.jsx)(S.H2,{meanScore:null==(O=X.media)?void 0:O.meanScore,badgeClass:"bg-transparent"}),(0,eT.He)(X.mediaId)?(0,n.jsx)(ew.E,{size:"lg",intent:"gray",className:"rounded-full px-0 border-transparent bg-transparent transition-all hover:bg-transparent hover:text-white hover:-translate-y-0.5","data-anime-entry-studio-badge":!0,children:null==Z||null==(B=Z.studios)||null==(z=B.nodes)||null==(P=z[0])?void 0:P.name}):(0,n.jsx)(j.v,{studios:null==Z?void 0:Z.studios}),(0,n.jsx)(S.vZ,{genres:null==Z?void 0:Z.genres}),(0,n.jsx)("div",{"data-anime-meta-section-rankings-container":!0,className:(0,A.cn)("w-full"),children:(0,n.jsx)(S.Kt,{rankings:null==Z?void 0:Z.rankings})})]})}),(0,n.jsxs)("div",{"data-anime-meta-section-buttons-container":!0,className:(0,A.cn)("flex flex-row w-full gap-3 items-center justify-center lg:justify-start lg:max-w-[65vw]","flex-wrap"),children:[(0,eT.He)(X.mediaId)&&(0,n.jsx)(eN.m_,{trigger:(0,n.jsx)("div",{children:(0,n.jsx)(eE.i,{href:"/custom-sources?provider=".concat((0,eT.ns)(X.media)),children:(0,n.jsx)(m.K0,{size:"sm",intent:"gray-link",className:"px-0",icon:(0,n.jsx)(x.DT2,{className:"text-lg"})})})}),children:"Custom source"}),!(0,eT.He)(X.mediaId)&&(0,n.jsx)(eE.i,{href:"https://anilist.co/anime/".concat(X.mediaId),target:"_blank",children:(0,n.jsx)(m.K0,{size:"sm",intent:"gray-link",className:"px-0",icon:(0,n.jsx)(eC.vFL,{className:"text-lg"})})}),(0,eT.He)(X.mediaId)&&!!(0,eT.rj)(X.media)&&(0,n.jsx)(eN.m_,{trigger:(0,n.jsx)("div",{children:(0,n.jsx)(eE.i,{href:(0,eT.rj)(X.media),target:"_blank",children:(0,n.jsx)(m.K0,{size:"sm",intent:"gray-link",className:"px-0",icon:(0,n.jsx)(eh.TdP,{className:"text-lg"})})})}),children:"Open in website"}),!!(null==X||null==(U=X.media)||null==(K=U.trailer)?void 0:K.id)&&(0,n.jsx)(a.f,{trailerId:null==X||null==(q=X.media)||null==(G=q.trailer)?void 0:G.id,trigger:(0,n.jsx)(m.$n,{size:"sm",intent:"gray-link",className:"px-0",children:"Trailer"})}),(0,n.jsx)(y,{entry:X,size:"md"}),en&&!X._isNakamaEntry&&!!X.libraryData&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.p,{mediaId:X.mediaId,type:"anime",size:"md"}),(0,n.jsx)(ej,{mediaId:X.mediaId,size:"md"}),(0,n.jsx)(N.f,{allFilesLocked:X.libraryData.allFilesLocked,mediaId:X.mediaId,size:"md"})]}),(0,n.jsx)(eg,{entry:X}),"NOT_YET_RELEASED"!==X.media.status&&"library"===el&&ee&&((null==$||null==(V=$.settings)||null==(H=V.torrent)?void 0:H.defaultTorrentClient)!==eA.XH.NONE||et)&&!X._isNakamaEntry&&(0,n.jsx)(eS.R,{entry:X}),X._isNakamaEntry&&"library"===el&&(0,n.jsxs)("div",{className:"flex items-center gap-2 h-10 px-4 border rounded-md flex-none",children:[(0,n.jsx)(ex.u67,{className:"size-6 animate-pulse text-[--blue]"}),(0,n.jsxs)("span",{className:"text-sm tracking-wide",children:["Shared by ",null==J||null==(W=J.hostConnectionStatus)?void 0:W.username]})]}),(0,n.jsx)(F.EW,{media:X.media})]}),(0,n.jsx)(_.Uu,{entry:X}),(0,n.jsx)(k,{media:X.media}),(null==(Y=X.downloadInfo)?void 0:Y.hasInaccurateSchedule)&&(0,n.jsxs)("p",{className:(0,A.cn)("text-[--muted] text-sm text-center mb-3","text-left"),"data-anime-meta-section-inaccurate-schedule-message":!0,children:[(0,n.jsx)("span",{className:"block",children:"Could not retrieve accurate scheduling information for this show."}),(0,n.jsx)("span",{className:"block text-[--muted]",children:"Please check the schedule online for more information."})]}),(!X.anidbId||0===X.anidbId)&&!(0,eT.He)(X.mediaId)&&(null==(Q=X.media)?void 0:Q.status)!=="NOT_YET_RELEASED"&&(0,n.jsxs)("p",{className:(0,A.cn)("text-center text-gray-200 opacity-50 text-sm flex gap-1 items-center","text-left"),"data-anime-meta-section-no-metadata-message":!0,children:[(0,n.jsx)(er.TBY,{}),"Episode metadata retrieval not available for this entry."]})]})})}},6708:(e,t,l)=>{"use strict";l.d(t,{FN:()=>f,Wk:()=>x,h1:()=>S,A7:()=>g});var n=l(95155),i=l(19749),a=l(91332),r=l(21335),s=l(32514),o=l(10907),d=l(12115),c=l(84127),u=l(91360);let m=(0,u.u)({root:(0,r.F)(["UI-Carousel__root","relative"]),content:(0,r.F)(["UI-Carousel__content","overflow-hidden"]),innerContent:(0,r.F)(["UI-Carousel__innerContent","flex"],{variants:{gap:{none:null,sm:null,md:null,lg:null,xl:null},orientation:{horizontal:null,vertical:null}},compoundVariants:[{gap:"none",orientation:"horizontal",className:"ml-0"},{gap:"sm",orientation:"horizontal",className:"-ml-2"},{gap:"md",orientation:"horizontal",className:"-ml-4"},{gap:"lg",orientation:"horizontal",className:"-ml-6"},{gap:"xl",orientation:"horizontal",className:"-ml-8"},{gap:"none",orientation:"vertical",className:"-mt-0 flex-col"},{gap:"sm",orientation:"vertical",className:"-mt-2 flex-col"},{gap:"md",orientation:"vertical",className:"-mt-4 flex-col"},{gap:"lg",orientation:"vertical",className:"-mt-6 flex-col"},{gap:"xl",orientation:"vertical",className:"-mt-8 flex-col"}]}),item:(0,r.F)(["UI-Carousel__item","min-w-0 shrink-0 grow-0 basis-full"],{variants:{gap:{none:null,sm:null,md:null,lg:null,xl:null},orientation:{horizontal:null,vertical:null}},compoundVariants:[{gap:"none",orientation:"horizontal",className:"pl-0"},{gap:"sm",orientation:"horizontal",className:"pl-2"},{gap:"md",orientation:"horizontal",className:"pl-4"},{gap:"lg",orientation:"horizontal",className:"pl-6"},{gap:"xl",orientation:"horizontal",className:"pl-8"},{gap:"none",orientation:"vertical",className:"pt-0"},{gap:"sm",orientation:"vertical",className:"pt-2"},{gap:"md",orientation:"vertical",className:"pt-4"},{gap:"lg",orientation:"vertical",className:"pt-6"},{gap:"xl",orientation:"vertical",className:"pt-8"}]}),button:(0,r.F)(["UI-Carousel__button","rounded-full z-[10]"],{variants:{placement:{previous:null,next:null},orientation:{horizontal:null,vertical:null}},compoundVariants:[{placement:"previous",orientation:"horizontal",className:""},{placement:"next",orientation:"horizontal",className:""},{placement:"previous",orientation:"vertical",className:"-top-12 left-1/2 -translate-x-1/2 rotate-90"},{placement:"next",orientation:"vertical",className:"-bottom-12 left-1/2 -translate-x-1/2 rotate-90"}]}),chevronIcon:(0,r.F)(["UI-Carousel__chevronIcon","size-6"])}),p=d.createContext(null);function v(){let e=d.useContext(p);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let f=d.forwardRef((e,t)=>{let{orientation:l="horizontal",opts:i,gap:r="md",setApi:c,plugins:v,className:f,children:x,autoScroll:g,autoScrollDelay:y=5e3,...b}=e,N=(0,a.Ky)(),j=d.useMemo(()=>[...v||[],...g&&!N.disableCarouselAutoScroll?[(0,s.A)({delay:y,stopOnMouseEnter:!0,stopOnInteraction:!1})]:[]],[v,g,N.disableCarouselAutoScroll]),[S,E]=(0,o.A)({...i,axis:"horizontal"===l?"x":"y"},j),[w,A]=d.useState(!1),[T,C]=d.useState(!1),I=d.useCallback(e=>{e&&(A(e.canScrollPrev()),C(e.canScrollNext()))},[]),D=d.useCallback(()=>{null==E||E.scrollPrev()},[E]),k=d.useCallback(()=>{null==E||E.scrollNext()},[E]),_=d.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),D()):"ArrowRight"===e.key&&(e.preventDefault(),k())},[D,k]);return d.useEffect(()=>{E&&c&&c(E)},[E,c]),d.useEffect(()=>{if(E)return I(E),E.on("reInit",I),E.on("select",I),()=>{null==E||E.off("select",I)}},[E,I]),(0,n.jsx)(p.Provider,{value:{carouselRef:S,api:E,opts:i,gap:r,orientation:l||((null==i?void 0:i.axis)==="y"?"vertical":"horizontal"),scrollPrev:D,scrollNext:k,canScrollPrev:w,canScrollNext:T},children:(0,n.jsxs)("div",{ref:t,onKeyDownCapture:_,className:(0,u.cn)(m.root(),f),role:"region","aria-roledescription":"carousel",...b,children:[x,(0,n.jsx)(h,{})]})})});function h(e){let t,l,a=(0,i.c)(4),{scrollSnaps:r}=N();return a[0]!==r.length?(t=r.length>30&&(0,n.jsxs)("div",{className:"flex gap-2 absolute top-[-3.5rem] right-0",children:[(0,n.jsx)(y,{}),(0,n.jsx)(b,{})]}),a[0]=r.length,a[1]=t):t=a[1],a[2]!==t?(l=(0,n.jsx)(n.Fragment,{children:t}),a[2]=t,a[3]=l):l=a[3],l}f.displayName="Carousel";let x=d.forwardRef((e,t)=>{let l,a,r,s,o,d,c,p=(0,i.c)(18);p[0]!==e?({className:l,contentClass:a,...r}=e,p[0]=e,p[1]=l,p[2]=a,p[3]=r):(l=p[1],a=p[2],r=p[3]);let{carouselRef:f,orientation:h,gap:x}=v();return p[4]!==a?(s=(0,u.cn)(m.content(),a),p[4]=a,p[5]=s):s=p[5],p[6]!==l||p[7]!==x||p[8]!==h?(o=(0,u.cn)(m.innerContent({orientation:h,gap:x}),l),p[6]=l,p[7]=x,p[8]=h,p[9]=o):o=p[9],p[10]!==t||p[11]!==r||p[12]!==o?(d=(0,n.jsx)("div",{ref:t,className:o,...r}),p[10]=t,p[11]=r,p[12]=o,p[13]=d):d=p[13],p[14]!==f||p[15]!==s||p[16]!==d?(c=(0,n.jsx)("div",{ref:f,className:s,children:d}),p[14]=f,p[15]=s,p[16]=d,p[17]=c):c=p[17],c});x.displayName="CarouselContent";let g=d.forwardRef((e,t)=>{let l,a,r,s,o=(0,i.c)(11);o[0]!==e?({className:l,...a}=e,o[0]=e,o[1]=l,o[2]=a):(l=o[1],a=o[2]);let{orientation:d,gap:c}=v();return o[3]!==l||o[4]!==c||o[5]!==d?(r=(0,u.cn)(m.item({orientation:d,gap:c}),l),o[3]=l,o[4]=c,o[5]=d,o[6]=r):r=o[6],o[7]!==t||o[8]!==a||o[9]!==r?(s=(0,n.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:r,...a}),o[7]=t,o[8]=a,o[9]=r,o[10]=s):s=o[10],s});g.displayName="CarouselItem";let y=d.forwardRef((e,t)=>{let l,a,r,s,o,d,p,f,h=(0,i.c)(19);if(h[0]!==e){let{className:t,chevronIconClass:n,intent:i,...s}=e;l=n,r=i,a=s,h[0]=e,h[1]=l,h[2]=a,h[3]=r}else l=h[1],a=h[2],r=h[3];let x=void 0===r?"gray-outline":r,{orientation:g,scrollPrev:y,canScrollPrev:b}=v();h[4]!==g?(s=m.button({orientation:g,placement:"previous"}),h[4]=g,h[5]=s):s=h[5];let N=!b;return h[6]!==l?(o=(0,u.cn)(m.chevronIcon(),l),h[6]=l,h[7]=o):o=h[7],h[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)("path",{d:"m15 18-6-6 6-6"}),h[8]=d):d=h[8],h[9]!==o?(p=(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:d}),h[9]=o,h[10]=p):p=h[10],h[11]!==x||h[12]!==t||h[13]!==a||h[14]!==y||h[15]!==s||h[16]!==N||h[17]!==p?(f=(0,n.jsx)(c.K0,{ref:t,intent:x,className:s,disabled:N,onClick:y,icon:p,...a}),h[11]=x,h[12]=t,h[13]=a,h[14]=y,h[15]=s,h[16]=N,h[17]=p,h[18]=f):f=h[18],f});y.displayName="CarouselPrevious";let b=d.forwardRef((e,t)=>{let l,a,r,s,o,d,p,f,h=(0,i.c)(19);if(h[0]!==e){let{className:t,chevronIconClass:n,intent:i,...s}=e;l=n,r=i,a=s,h[0]=e,h[1]=l,h[2]=a,h[3]=r}else l=h[1],a=h[2],r=h[3];let x=void 0===r?"gray-outline":r,{orientation:g,scrollNext:y,canScrollNext:b}=v();h[4]!==g?(s=m.button({orientation:g,placement:"next"}),h[4]=g,h[5]=s):s=h[5];let N=!b;return h[6]!==l?(o=(0,u.cn)(m.chevronIcon(),l),h[6]=l,h[7]=o):o=h[7],h[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)("path",{d:"m9 18 6-6-6-6"}),h[8]=d):d=h[8],h[9]!==o?(p=(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:d}),h[9]=o,h[10]=p):p=h[10],h[11]!==x||h[12]!==t||h[13]!==a||h[14]!==y||h[15]!==s||h[16]!==N||h[17]!==p?(f=(0,n.jsx)(c.K0,{ref:t,intent:x,className:s,disabled:N,onClick:y,icon:p,...a}),h[11]=x,h[12]=t,h[13]=a,h[14]=y,h[15]=s,h[16]=N,h[17]=p,h[18]=f):f=h[18],f});b.displayName="CarouselNext";let N=()=>{let e,t,l,n,a,r,s,o=(0,i.c)(12),{api:c}=v(),[u,m]=d.useState(0);o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0];let[p,f]=d.useState(e);o[1]!==c?(t=e=>{c&&c.scrollTo(e)},o[1]=c,o[2]=t):t=o[2];let h=t;o[3]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{f(e.scrollSnapList())},o[3]=l):l=o[3];let x=l;o[4]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{m(e.selectedScrollSnap())},o[4]=n):n=o[4];let g=n;return o[5]!==c?(a=()=>{c&&(x(c),g(c),c.on("reInit",x),c.on("reInit",g),c.on("select",g))},r=[c,x,g],o[5]=c,o[6]=a,o[7]=r):(a=o[6],r=o[7]),d.useEffect(a,r),o[8]!==h||o[9]!==p||o[10]!==u?(s={selectedIndex:u,scrollSnaps:p,onDotButtonClick:h},o[8]=h,o[9]=p,o[10]=u,o[11]=s):s=o[11],s},j=e=>{let t,l,a,r,s,o,d,c=(0,i.c)(13);if(c[0]!==e){let{children:n,className:i,onClick:r,...s}=e;t=i,l=r,a=s,c[0]=e,c[1]=t,c[2]=l,c[3]=a}else t=c[1],l=c[2],a=c[3];return c[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,u.cn)("rounded-full px-[2.5px] size-5 lg:w-5 lg:h-4 group/dot-button flex items-center justify-center cursor-pointer"),c[4]=r):r=c[4],c[5]!==t?(s=(0,u.cn)("cursor-pointer w-full lg:h-2 lg:group-hover/dot-button:h-3 transition-all duration-300 rounded-full bg-gray-600 dark:bg-opacity-50",t),c[5]=t,c[6]=s):s=c[6],c[7]!==a||c[8]!==s?(o=(0,n.jsx)("div",{className:s,...a}),c[7]=a,c[8]=s,c[9]=o):o=c[9],c[10]!==l||c[11]!==o?(d=(0,n.jsx)("div",{className:r,onClick:l,children:o}),c[10]=l,c[11]=o,c[12]=d):d=c[12],d},S=e=>{let t,l,a,r,s,o=(0,i.c)(19),{selectedIndex:c,scrollSnaps:m,onDotButtonClick:p}=N();if(o[0]!==p?(t=()=>{p(0)},o[0]=p,o[1]=t):t=o[1],o[2]!==p||o[3]!==e.flag||o[4]!==m?(l=[p,m,e.flag],o[2]=p,o[3]=e.flag,o[4]=m,o[5]=l):l=o[5],d.useEffect(t,l),m.length>30)return null;if(o[6]!==e.className?(a=(0,u.cn)("absolute -top-8 right-0 hidden md:flex items-center z-[10]",e.className),o[6]=e.className,o[7]=a):a=o[7],o[8]!==p||o[9]!==m||o[10]!==c){let e;o[12]!==p||o[13]!==m.length||o[14]!==c?(e=(e,t)=>(0,n.jsx)(j,{onClick:()=>p(t),className:(0,u.cn)({"bg-white":t===c},{"size-4 [&:nth-child(odd)]:hidden":m.length>30})},t),o[12]=p,o[13]=m.length,o[14]=c,o[15]=e):e=o[15],r=m.map(e),o[8]=p,o[9]=m,o[10]=c,o[11]=r}else r=o[11];return o[16]!==a||o[17]!==r?(s=(0,n.jsx)("div",{className:a,children:r}),o[16]=a,o[17]=r,o[18]=s):s=o[18],s};var E=l(77717);d.forwardRef((e,t)=>{let l,a,r,s,o,d,c=(0,i.c)(18);if(c[0]!==e?({children:a,itemCount:r,threshold:s,...l}=e,c[0]=e,c[1]=l,c[2]=a,c[3]=r,c[4]=s):(l=c[1],a=c[2],r=c[3],s=c[4]),r<=(void 0===s?10:s)){let e,i;return c[5]!==a?(e=(0,n.jsx)(x,{className:"px-6",children:a}),c[5]=a,c[6]=e):e=c[6],c[7]!==l||c[8]!==t||c[9]!==e?(i=(0,n.jsx)(f,{...l,ref:t,children:e}),c[7]=l,c[8]=t,c[9]=e,c[10]=i):i=c[10],i}return c[11]!==a||c[12]!==r?(o=(0,n.jsx)(w,{itemCount:r,children:a}),c[11]=a,c[12]=r,c[13]=o):o=c[13],c[14]!==l||c[15]!==t||c[16]!==o?(d=(0,n.jsx)(f,{...l,ref:t,children:o}),c[14]=l,c[15]=t,c[16]=o,c[17]=d):d=c[17],d}).displayName="LazyCarousel";let w=d.forwardRef((e,t)=>{let l,a,r,s,o,c,p,f,h,x,g,y,b,N,j,S,E,w=(0,i.c)(41),{children:D,itemCount:k,className:_}=e,L=void 0===_?"px-6":_,{carouselRef:R,orientation:M,gap:O,api:P}=v();w[0]===Symbol.for("react.memo_cache_sentinel")?(l=new Set,w[0]=l):l=w[0];let[F,z]=d.useState(l);w[1]===Symbol.for("react.memo_cache_sentinel")?(a=new Map,w[1]=a):a=w[1];let[B,K]=d.useState(a);w[2]===Symbol.for("react.memo_cache_sentinel")?(r=[],w[2]=r):r=w[2];let U=d.useRef(r),G=d.useRef(null),q=d.useRef(null);w[3]===Symbol.for("react.memo_cache_sentinel")?(s=()=>q.current,o=[],w[3]=s,w[4]=o):(s=w[3],o=w[4]),d.useImperativeHandle(t,s,o);let H=Math.min(Math.ceil(window.innerWidth/250)+2,k);w[5]!==H||w[6]!==k?(p=()=>(z(new Set(Array.from(Array(Math.min(H,k)).keys()))),()=>{K(new Map)}),f=[H,k],w[5]=H,w[6]=k,w[7]=p,w[8]=f):(p=w[7],f=w[8]),d.useEffect(p,f),w[9]!==P||w[10]!==H?(h=()=>{if(q.current&&P)return G.current=new IntersectionObserver(e=>{e.forEach(e=>{var t;let l=parseInt(null!=(t=e.target.getAttribute("data-index"))?t:"-1");e.isIntersecting?z(e=>{let t=new Set(e);return t.add(l),t}):z(e=>{let t=new Set(e);return l>=H&&t.delete(l),t})})},{root:P.rootNode(),rootMargin:"100% 0px",threshold:0}),U.current.forEach(e=>{if(e){var t;null==(t=G.current)||t.observe(e)}}),()=>{var e;null==(e=G.current)||e.disconnect()}},w[9]=P,w[10]=H,w[11]=h):h=w[11],w[12]!==P||w[13]!==H||w[14]!==k?(x=[k,H,P],w[12]=P,w[13]=H,w[14]=k,w[15]=x):x=w[15],d.useEffect(h,x),w[16]===Symbol.for("react.memo_cache_sentinel")?(g=(e,t)=>{K(l=>{let n=new Map(l);return n.set(e,t),n})},w[16]=g):g=w[16];let V=g;e:{let e=Array.from(B.values());if(0===e.length){y=250;break e}y=e.reduce(T,0)/e.length}let W=y;if(w[17]===Symbol.for("react.memo_cache_sentinel")?(b=(0,u.cn)(m.content()),w[17]=b):b=w[17],w[18]!==L||w[19]!==O||w[20]!==M?(N=(0,u.cn)(m.innerContent({orientation:M,gap:O}),L),w[18]=L,w[19]=O,w[20]=M,w[21]=N):N=w[21],w[22]!==D||w[23]!==W||w[24]!==O||w[25]!==B||w[26]!==M||w[27]!==F){let e;w[29]!==W||w[30]!==O||w[31]!==B||w[32]!==M||w[33]!==F?(e=(e,t)=>{let l=F.has(t),i=B.get(t);return(0,n.jsx)("div",{ref:e=>{if(U.current[t]=e,e&&!i&&l){let l=e.offsetWidth;l>0&&V(t,l)}},"data-index":t,className:(0,u.cn)(m.item({orientation:M,gap:O}),l&&d.isValidElement(e)&&e.props.containerClassName?e.props.containerClassName.split(" ").filter(C).join(" "):""),style:{...l?{}:{flexBasis:"auto"}},children:l?d.isValidElement(e)&&e.props.containerClassName?d.cloneElement(e,{containerClassName:e.props.containerClassName.split(" ").filter(I).join(" ")}):e:(0,n.jsx)(A,{width:i||W})},(null==e?void 0:e.key)?null==e?void 0:e.key:t)},w[29]=W,w[30]=O,w[31]=B,w[32]=M,w[33]=F,w[34]=e):e=w[34],j=d.Children.map(D,e),w[22]=D,w[23]=W,w[24]=O,w[25]=B,w[26]=M,w[27]=F,w[28]=j}else j=w[28];return w[35]!==N||w[36]!==j?(S=(0,n.jsx)("div",{ref:q,className:N,children:j}),w[35]=N,w[36]=j,w[37]=S):S=w[37],w[38]!==R||w[39]!==S?(E=(0,n.jsx)("div",{ref:R,className:b,children:S}),w[38]=R,w[39]=S,w[40]=E):E=w[40],E});function A(e){let t,l,a,r=(0,i.c)(5),{width:s}=e;return r[0]!==s?(t={width:s},r[0]=s,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)(E.E,{className:"w-full aspect-[2/3]"}),r[2]=l):l=r[2],r[3]!==t?(a=(0,n.jsx)("div",{className:"animate-pulse",style:t,children:l}),r[3]=t,r[4]=a):a=r[4],a}function T(e,t){return e+t}function C(e){return e.includes("basis-")}function I(e){return!e.includes("basis-")}w.displayName="LazyCarouselContent"},9478:(e,t,l)=>{"use strict";l.d(t,{D2:()=>v,bU:()=>d,dO:()=>u,pZ:()=>o,sS:()=>c,uO:()=>m});var n=l(19749),i=l(7675),a=l(74889),r=l(46278),s=l(69554);function o(){let e,t,l=(0,n.c)(3),s=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.LOCALFILES.LocalFileBulkAction.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:a.S.LOCALFILES.LocalFileBulkAction.endpoint,method:a.S.LOCALFILES.LocalFileBulkAction.methods[0],mutationKey:e,onSuccess:async()=>{s.invalidateQueries({queryKey:[a.S.ANIME_COLLECTION.GetLibraryCollection.key]}),s.invalidateQueries({queryKey:[a.S.ANIME_ENTRIES.GetAnimeEntry.key]}),s.invalidateQueries({queryKey:[a.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key]})}},l[1]=s,l[2]=t):t=l[2],(0,i.qk)(t)}function d(){let e,t,l=(0,n.c)(3),s=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.LOCALFILES.UpdateLocalFiles.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:a.S.LOCALFILES.UpdateLocalFiles.endpoint,method:a.S.LOCALFILES.UpdateLocalFiles.methods[0],mutationKey:e,onSuccess:async()=>{s.invalidateQueries({queryKey:[a.S.ANIME_COLLECTION.GetLibraryCollection.key]}),s.invalidateQueries({queryKey:[a.S.ANIME_ENTRIES.GetAnimeEntry.key]}),s.invalidateQueries({queryKey:[a.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key]})}},l[1]=s,l[2]=t):t=l[2],(0,i.qk)(t)}function c(){let e,t,l,o,d=(0,n.c)(8),c=(0,r.jE)();d[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.LOCALFILES.UpdateLocalFileData.key],d[0]=e):e=d[0],d[1]!==c?(t={endpoint:a.S.LOCALFILES.UpdateLocalFileData.endpoint,method:a.S.LOCALFILES.UpdateLocalFileData.methods[0],mutationKey:e,onSuccess:async()=>{s.oR.success("File metadata updated"),c.invalidateQueries({queryKey:[a.S.ANIME_COLLECTION.GetLibraryCollection.key]}),c.invalidateQueries({queryKey:[a.S.ANIME_ENTRIES.GetAnimeEntry.key]}),c.invalidateQueries({queryKey:[a.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key]})}},d[1]=c,d[2]=t):t=d[2];let u=(0,i.qk)(t);return d[3]!==u?(l=(e,t,l)=>{u.mutate({path:e.path,metadata:e.metadata,locked:e.locked,ignored:e.ignored,mediaId:e.mediaId,...t},{onSuccess:()=>null==l?void 0:l()})},d[3]=u,d[4]=l):l=d[4],d[5]!==u||d[6]!==l?(o={updateLocalFile:l,...u},d[5]=u,d[6]=l,d[7]=o):o=d[7],o}function u(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.LOCALFILES.DeleteLocalFiles.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.LOCALFILES.DeleteLocalFiles.endpoint,method:a.S.LOCALFILES.DeleteLocalFiles.methods[0],mutationKey:e,onSuccess:async()=>{s.oR.success("Files deleted"),o.invalidateQueries({queryKey:[a.S.ANIME_COLLECTION.GetLibraryCollection.key]}),o.invalidateQueries({queryKey:[a.S.ANIME_ENTRIES.GetAnimeEntry.key]}),o.invalidateQueries({queryKey:[a.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key]})}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function m(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.LOCALFILES.RemoveEmptyDirectories.endpoint,method:a.S.LOCALFILES.RemoveEmptyDirectories.methods[0],mutationKey:[a.S.LOCALFILES.RemoveEmptyDirectories.key],onSuccess:p},t[0]=e):e=t[0],(0,i.qk)(e)}async function p(){s.oR.success("Empty directories removed")}function v(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.LOCALFILES.ImportLocalFiles.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.LOCALFILES.ImportLocalFiles.endpoint,method:a.S.LOCALFILES.ImportLocalFiles.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[a.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await o.invalidateQueries({queryKey:[a.S.ANIME_ENTRIES.GetAnimeEntry.key]}),o.invalidateQueries({queryKey:[a.S.LIBRARY_EXPLORER.GetLibraryExplorerFileTree.key]}),s.oR.success("Local files imported")}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}},9693:(e,t,l)=>{"use strict";l.d(t,{Jh:()=>d,Ky:()=>u,od:()=>m,tS:()=>o});var n=l(95155),i=l(19749),a=l(42500),r=l(78259),s=l(12115);let o=(0,a.eU)(null),d=(0,a.eU)(0),c=(0,s.createContext)({media:null,progress:{currentProgress:null,currentEpisodeNumber:null,currentEpisodeTitle:null}});function u(e){let t,l,a,s,u,m,p=(0,i.c)(11);return p[0]!==e?({children:t,...l}=e,p[0]=e,p[1]=t,p[2]=l):(t=p[1],l=p[2]),p[3]!==l?(a={...l},p[3]=l,p[4]=a):a=p[4],p[5]===Symbol.for("react.memo_cache_sentinel")?(s=[o,d],p[5]=s):s=p[5],p[6]!==t?(u=(0,n.jsx)(r.Ui,{atoms:s,children:t}),p[6]=t,p[7]=u):u=p[7],p[8]!==a||p[9]!==u?(m=(0,n.jsx)(c.Provider,{value:a,children:u}),p[8]=a,p[9]=u,p[10]=m):m=p[10],m}function m(){return(0,s.useContext)(c)}},10212:(e,t,l)=>{"use strict";l.d(t,{bj:()=>x,sW:()=>f});var n=l(95155),i=l(19749),a=l(91360),r=l(53712),s=l(14370),o=l(12115),d=l(28718),c=l(75780),u=l(41452);let m=(e,t)=>{if(!t.trim())return e;let l=t.toLowerCase();return e.filter(e=>[e.displayTitle,e.displayPath,e.path].join(" ").toLowerCase().includes(l))},p=e=>{let t={name:"root",type:"directory",path:"",children:[]};return e.toSorted((e,t)=>e.path.localeCompare(t.path)).forEach(e=>{let l=e.path.split("/").filter(e=>""!==e),n=t;l.forEach((t,i)=>{var a,r;let s=i===l.length-1,o=l.slice(0,i+1).join("/"),d=null==(a=n.children)?void 0:a.find(e=>e.name===t);d||(d={name:t,type:s?"file":"directory",path:o,filePreview:s?e:void 0,children:s?void 0:[]},null==(r=n.children)||r.push(d)),s||(n=d)})}),t},v=e=>{var t;let l,r,s,m,p,f,h,x,g,y=(0,i.c)(44),{node:b,selectedValue:N,onFileSelect:j,getFileValue:S,hasLikelyMatch:E,hasOneLikelyMatch:w,likelyMatchRef:A,level:T}=e,C=void 0===T?0:T,[I,D]=o.useState(0===C||1===C);y[0]!==S||y[1]!==I||y[2]!==b.filePreview||y[3]!==b.type||y[4]!==j?(l=e=>{e.stopPropagation(),"file"===b.type&&b.filePreview&&j(S(b.filePreview)),"directory"===b.type&&D(!I)},y[0]=S,y[1]=I,y[2]=b.filePreview,y[3]=b.type,y[4]=j,y[5]=l):l=y[5];let k=l,_="file"===b.type&&b.filePreview&&N===S(b.filePreview),L="file"===b.type&&(null==(t=b.filePreview)?void 0:t.isLikely),R="file"===b.type&&"cursor-pointer",M="file"===b.type&&!_&&"hover:bg-[--subtle]",O=_&&"bg-white dark:bg-gray-950 border border-gray-400",P=E&&!_&&!L&&"file"===b.type&&"opacity-60";y[6]!==R||y[7]!==M||y[8]!==O||y[9]!==P?(r=(0,a.cn)("flex items-center py-1.5 px-2 border border-transparent rounded-[--radius]",R,M,O,P),y[6]=R,y[7]=M,y[8]=O,y[9]=P,y[10]=r):r=y[10];let F=w&&L?A:void 0;return y[11]!==I||y[12]!==b.type?(s="directory"===b.type&&(0,n.jsx)("span",{className:"mr-1 cursor-pointer",children:I?(0,n.jsx)(c.fK4,{className:"size-5"}):(0,n.jsx)(c.fOo,{className:"size-5"})}),y[11]=I,y[12]=b.type,y[13]=s):s=y[13],y[14]!==b.type?(m="directory"===b.type?(0,n.jsx)(d.WNP,{className:"size-5 mr-2 text-[--white] cursor-pointer"}):(0,n.jsx)(c.QuH,{className:"size-5 mr-2 text-[--muted]"}),y[14]=b.type,y[15]=m):m=y[15],y[16]!==m||y[17]!==s?(p=(0,n.jsxs)("div",{className:"flex items-center",children:[s,m]}),y[16]=m,y[17]=s,y[18]=p):p=y[18],y[19]!==L||y[20]!==b.filePreview||y[21]!==b.name||y[22]!==b.type?(f=(0,n.jsx)("div",{className:"flex flex-col flex-1 min-w-0 cursor-pointer",children:"file"===b.type&&b.filePreview?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"mb-1 line-clamp-1 font-medium",children:b.filePreview.displayTitle}),L&&(0,n.jsxs)("p",{className:"flex items-center",children:[(0,n.jsx)(u._IM,{className:"text-[--green] mr-1"}),(0,n.jsx)("span",{className:"text-white text-sm",children:"Likely match"})]}),(0,n.jsx)("p",{className:"font-normal line-clamp-2 text-sm text-[--muted]",children:b.filePreview.displayPath})]}):(0,n.jsx)("span",{className:(0,a.cn)("font-medium","directory"===b.type?"text-[--white]":"cursor-pointer"),children:b.name})}),y[19]=L,y[20]=b.filePreview,y[21]=b.name,y[22]=b.type,y[23]=f):f=y[23],y[24]!==k||y[25]!==p||y[26]!==f||y[27]!==r||y[28]!==F?(h=(0,n.jsxs)("div",{className:r,onClick:k,ref:F,children:[p,f]}),y[24]=k,y[25]=p,y[26]=f,y[27]=r,y[28]=F,y[29]=h):h=y[29],y[30]!==S||y[31]!==E||y[32]!==w||y[33]!==I||y[34]!==C||y[35]!==A||y[36]!==b.children||y[37]!==b.type||y[38]!==j||y[39]!==N?(x="directory"===b.type&&I&&b.children&&(0,n.jsx)("div",{className:"ml-4 border-l pl-2",children:b.children.map((e,t)=>(0,n.jsx)(v,{node:e,selectedValue:N,onFileSelect:j,getFileValue:S,hasLikelyMatch:E,hasOneLikelyMatch:w,likelyMatchRef:A,level:C+1},t))}),y[30]=S,y[31]=E,y[32]=w,y[33]=I,y[34]=C,y[35]=A,y[36]=b.children,y[37]=b.type,y[38]=j,y[39]=N,y[40]=x):x=y[40],y[41]!==h||y[42]!==x?(g=(0,n.jsxs)("div",{children:[h,x]}),y[41]=h,y[42]=x,y[43]=g):g=y[43],g},f=e=>{let t,l,a,d,u,f,h=(0,i.c)(22),{filePreviews:x,selectedValue:g,onFileSelect:y,getFileValue:b,hasLikelyMatch:N,hasOneLikelyMatch:j,likelyMatchRef:S}=e,[E,w]=o.useState(""),A=(0,s.d)(E,300);if(!x||0===x.length)return null;if(h[0]!==A||h[1]!==x||h[2]!==b||h[3]!==N||h[4]!==j||h[5]!==S||h[6]!==y||h[7]!==E||h[8]!==g){let e=p(m(x,A));a="flex flex-col gap-3",h[13]!==E?(d=(0,n.jsx)(r.k,{value:E,onValueChange:w,placeholder:"Search files...",className:"focus:ring-0 active:ring-0"}),h[13]=E,h[14]=d):d=h[14],t="flex flex-col gap-1",l=e.children&&e.children.length>0?e.children.map((e,t)=>(0,n.jsx)(v,{node:e,selectedValue:g,onFileSelect:y,getFileValue:b,hasLikelyMatch:N||!1,hasOneLikelyMatch:j||!1,likelyMatchRef:S,level:0},t)):A.trim()?(0,n.jsxs)("div",{className:"text-center py-8 text-[--muted]",children:[(0,n.jsx)(c.CKj,{className:"mx-auto mb-2 size-8 opacity-50"}),(0,n.jsxs)("p",{children:['No files found matching "',A,'"']})]}):null,h[0]=A,h[1]=x,h[2]=b,h[3]=N,h[4]=j,h[5]=S,h[6]=y,h[7]=E,h[8]=g,h[9]=t,h[10]=l,h[11]=a,h[12]=d}else t=h[9],l=h[10],a=h[11],d=h[12];return h[15]!==t||h[16]!==l?(u=(0,n.jsx)("div",{className:t,children:l}),h[15]=t,h[16]=l,h[17]=u):u=h[17],h[18]!==a||h[19]!==d||h[20]!==u?(f=(0,n.jsxs)("div",{className:a,children:[d,u]}),h[18]=a,h[19]=d,h[20]=u,h[21]=f):f=h[21],f},h=e=>{let{node:t,selectedIndices:l,onSelectionChange:i,getFileValue:r,level:s=0}=e,[u,m]=o.useState(0===s||1===s),p=e=>{e.stopPropagation(),m(!u)},v=o.useCallback(e=>{if("file"===t.type&&t.filePreview){let n,a=r(t.filePreview);i(e?l.includes(a)?l:[...l,a]:l.filter(e=>e!==a))}},[t,l,i,r]),f=o.useCallback(e=>{if("directory"===t.type&&t.children){let n=e=>{let t=[];return"file"===e.type&&e.filePreview?t.push(r(e.filePreview)):e.children&&e.children.forEach(e=>{t.push(...n(e))}),t},a=n(t);if(e){let e=[...l];a.forEach(t=>{e.includes(t)||e.push(t)}),i(e)}else i(l.filter(e=>!a.includes(e)))}},[t,l,i,r]),x="file"===t.type&&t.filePreview&&l.includes(r(t.filePreview)),g=o.useMemo(()=>{if("file"===t.type)return{isSelected:x,isPartial:!1};let e=t=>{let l=[];return"file"===t.type&&t.filePreview?l.push(r(t.filePreview)):t.children&&t.children.forEach(t=>{l.push(...e(t))}),l},n=e(t),i=n.filter(e=>l.includes(e)).length;return{isSelected:i===n.length&&n.length>0,isPartial:i>0&&i<n.length}},[t,l,r]);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:(0,a.cn)("flex items-center py-1.5 px-2 border rounded-[--radius] cursor-pointer transition-colors","file"===t.type&&x&&"border bg-gray-900 text-white","file"===t.type&&!x&&"border-transparent","directory"===t.type&&g.isSelected&&"border bg-gray-900","directory"===t.type&&g.isPartial&&"bg-gray-900","directory"===t.type&&!g.isSelected&&!g.isPartial&&"border-transparent"),onClick:e=>{e.stopPropagation(),"file"===t.type?v(!x):f(!g.isSelected)},children:[(0,n.jsxs)("div",{className:"flex items-center",children:["directory"===t.type&&(0,n.jsx)("span",{className:"mr-1 cursor-pointer",onClick:e=>{e.stopPropagation(),p(e)},children:u?(0,n.jsx)(c.fK4,{className:"size-5"}):(0,n.jsx)(c.fOo,{className:"size-5"})}),"directory"===t.type?(0,n.jsx)(d.WNP,{className:"size-5 mr-2 text-[--white] cursor-pointer",onClick:e=>{e.stopPropagation(),p(e)}}):(0,n.jsx)(c.QuH,{className:"size-5 mr-2 text-[--muted]"})]}),(0,n.jsx)("div",{className:"flex flex-col flex-1 min-w-0",children:"file"===t.type&&t.filePreview?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"mb-1 line-clamp-1 font-medium",children:t.filePreview.displayTitle}),(0,n.jsx)("p",{className:"font-normal line-clamp-2 text-sm text-[--muted]",children:t.filePreview.displayPath})]}):(0,n.jsx)("span",{className:"font-medium text-[--white]",children:t.name})}),(0,n.jsxs)("div",{className:"ml-2 flex items-center",children:["file"===t.type&&x&&(0,n.jsx)("div",{className:"w-2 h-2 bg-brand rounded-full"}),"directory"===t.type&&g.isSelected&&(0,n.jsx)("div",{className:"w-2 h-2 bg-brand rounded-full"}),"directory"===t.type&&g.isPartial&&(0,n.jsx)("div",{className:"w-2 h-2 bg-brand/60 rounded-full"})]})]}),"directory"===t.type&&u&&t.children&&(0,n.jsx)("div",{className:"ml-4 border-l pl-2",children:t.children.map((e,t)=>(0,n.jsx)(h,{node:e,selectedIndices:l,onSelectionChange:i,getFileValue:r,level:s+1},t))})]})},x=e=>{let t,l,a,d,u,v,f=(0,i.c)(19),{filePreviews:x,selectedIndices:g,onSelectionChange:y,getFileValue:b}=e,[N,j]=o.useState(""),S=(0,s.d)(N,300);if(!x||0===x.length)return null;if(f[0]!==S||f[1]!==x||f[2]!==b||f[3]!==y||f[4]!==N||f[5]!==g){let e=p(m(x,S));a="flex flex-col gap-3",f[10]!==N?(d=(0,n.jsx)(r.k,{value:N,onValueChange:j,placeholder:"Search files...",className:"focus:ring-0 active:ring-0"}),f[10]=N,f[11]=d):d=f[11],t="flex flex-col gap-2",l=e.children&&e.children.length>0?e.children.map((e,t)=>(0,n.jsx)(h,{node:e,selectedIndices:g,onSelectionChange:y,getFileValue:b,level:0},t)):S.trim()?(0,n.jsxs)("div",{className:"text-center py-8 text-[--muted]",children:[(0,n.jsx)(c.CKj,{className:"mx-auto mb-2 size-8 opacity-50"}),(0,n.jsxs)("p",{children:['No files found matching "',S,'"']})]}):null,f[0]=S,f[1]=x,f[2]=b,f[3]=y,f[4]=N,f[5]=g,f[6]=t,f[7]=l,f[8]=a,f[9]=d}else t=f[6],l=f[7],a=f[8],d=f[9];return f[12]!==t||f[13]!==l?(u=(0,n.jsx)("div",{className:t,children:l}),f[12]=t,f[13]=l,f[14]=u):u=f[14],f[15]!==a||f[16]!==d||f[17]!==u?(v=(0,n.jsxs)("div",{className:a,children:[d,u]}),f[15]=a,f[16]=d,f[17]=u,f[18]=v):v=f[18],v}},13029:(e,t,l)=>{"use strict";l.d(t,{U:()=>j});var n=l(95155),i=l(47601),a=l(18292),r=l(32754),s=l(29694),o=l(96826),d=l(35656),c=l(14680),u=l(47342),m=l(91360),p=l(6773),v=l(90711),f=l(91332),h=l(6066),x=l(12115),g=l(78453),y=l(70376),b=l(43994),N=l(10653);function j(e){var t,l,j;let{children:S,actionIcon:E=null!==e.actionIcon?(0,n.jsx)(g.G2B,{className:"opacity-50"}):void 0,image:w,onClick:A,topTitle:T,meta:C,title:I,type:D="carousel",isInvalid:k,className:_,containerClass:L,mRef:R,episodeNumber:M,progressTotal:O,progressNumber:P,hasDiscrepancy:F,length:z,imageClass:B,badge:K,percentageComplete:U,minutesRemaining:G,allowAnimeInfo:q,forceSingleContainer:H,anime:V,episode:W,...Y}=e,Q=(0,h.useRouter)(),$=(0,h.usePathname)(),X=(0,o.v1)(),Z=(0,f.Ky)(),{setPreviewModalMediaId:J}=(0,r.D)(),{selectEpisodeToAddAndOpenEditor:ee}=(0,s.e)(),et=Z.showEpisodeCardAnimeInfo&&!!V&&q,el=x.useMemo(()=>!!O&&O>1,[O]),en=x.useMemo(()=>+!!F,[F]),ei=Z.useLegacyEpisodeCard||H,ea=()=>(0,n.jsxs)("div",{"data-episode-card-info-container":!0,className:"relative z-[3] w-full space-y-0",children:[(0,n.jsx)("p",{"data-episode-card-title":!0,className:(0,m.cn)("w-[80%] line-clamp-1 text-md md:text-lg transition-colors duration-200 text-[--foreground] font-semibold",ei&&"text-sm max-w-[80%] text-white/60"),children:null==T?void 0:T.replaceAll("`","'")}),(0,n.jsxs)("div",{"data-episode-card-info-content":!0,className:"w-full justify-between flex flex-none items-center",children:[(0,n.jsxs)("p",{"data-episode-card-subtitle":!0,className:"line-clamp-1 flex items-center",children:[(0,n.jsxs)("span",{className:"flex-none text-base md:text-xl font-medium",children:[I,el?(0,n.jsxs)("span",{className:"opacity-40",children:[" / ",O-en]}):""]}),(0,n.jsx)("span",{className:"text-[--muted] text-base md:text-lg ml-2 font-normal line-clamp-1",children:et?"- "+V.title:""})]}),(!!C||!!z)&&(!ei||!G)&&(0,n.jsxs)("p",{"data-episode-card-meta-text":!0,className:"text-[--muted] flex-none ml-2 text-sm md:text-base line-clamp-2 text-right",children:[C,!!C&&!!z&&"   ",z?"".concat(z,"m"):""]})]})]});return(0,n.jsx)(i.i,{hideMenuIf:!(null==V?void 0:V.id),content:(0,n.jsxs)(u.Q2,{children:[(0,n.jsx)(u.F7,{className:"text-[--muted] line-clamp-1 py-0 my-2",children:null==V?void 0:V.title}),"/entry"!==$&&(0,n.jsxs)(n.Fragment,{children:[!(null==X?void 0:X.isOffline)&&(0,n.jsxs)(u.kt,{onClick:()=>{J((null==V?void 0:V.id)||0,"anime")},children:[(0,n.jsx)(b.ZT8,{})," Preview"]}),(0,n.jsxs)(u.kt,{onClick:()=>{(null==X?void 0:X.isOffline)?Q.push("/offline/entry/anime?id=".concat(null==V?void 0:V.id)):Q.push("/entry?id=".concat(null==V?void 0:V.id))},children:[(0,n.jsx)(b.$Jm,{})," Open page"]})]}),e.episode&&(null==V?void 0:V.id)&&(null==(t=e.episode)?void 0:t.aniDBEpisode)&&(0,n.jsxs)(u.kt,{onClick:()=>{var t;ee(V.id,null==(t=e.episode)?void 0:t.aniDBEpisode)},children:[(0,n.jsx)(y.toN,{})," Add to Playlist"]}),(0,n.jsx)(N.tq,{episode:e.episode})]}),children:(0,n.jsx)(u.Rc,{children:(0,n.jsxs)("div",{ref:R,className:(0,m.cn)("rounded-xl overflow-hidden space-y-2 flex-none group/episode-card cursor-pointer","select-none","carousel"===D&&"w-full","grid"===D&&"aspect-[4/2] w-72 lg:w-[26rem]",_,L),onClick:A,"data-episode-card":!0,"data-episode-number":M,"data-media-id":null==V?void 0:V.id,"data-progress-total":O,"data-progress-number":P,...Y,children:[(0,n.jsxs)("div",{"data-episode-card-image-container":!0,className:"w-full h-full rounded-xl overflow-hidden z-[1] aspect-[4/2] relative bg-[--background]",children:[w?(0,n.jsx)(c.r,{"data-episode-card-image":!0,src:(0,v.VG)(w),alt:"",fill:!0,quality:100,placeholder:(0,d.r)(700,475),sizes:"20rem",className:(0,m.cn)("object-cover rounded-xl object-center transition lg:group-hover/episode-card:scale-[1.02] duration-500",B)}):(0,n.jsx)("div",{"data-episode-card-image-bottom-gradient":!0,className:"h-full block rounded-xl absolute w-full bg-gradient-to-t from-gray-800 to-transparent z-[2]"}),(0,n.jsx)(a._,{isSingleContainer:ei,className:"rounded-b-xl"}),ei&&(0,n.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-fit z-[3] p-3",children:(0,n.jsx)(ea,{})}),(null==X||null==(j=X.settings)||null==(l=j.library)?void 0:l.enableWatchContinuity)&&!!U&&(0,n.jsxs)("div",{"data-episode-card-progress-bar-container":!0,className:"absolute bottom-0 left-0 w-full z-[3]","data-episode-number":M,"data-media-id":null==V?void 0:V.id,"data-progress-total":O,"data-progress-number":P,children:[(0,n.jsx)(p.z,{value:U,size:"xs"}),G&&(0,n.jsx)("div",{className:(0,m.cn)("absolute bottom-2 right-2 text-[--muted]",ei&&"right-4 bottom-4 "),children:(0,n.jsxs)("span",{children:[G,"m left"]})})]}),(0,n.jsx)("div",{"data-episode-card-action-icon":!0,className:(0,m.cn)("group-hover/episode-card:opacity-100 text-6xl text-gray-200","cursor-pointer opacity-0 transition-opacity bg-gray-950 bg-opacity-60 z-[2] absolute w-[105%] h-[105%] items-center justify-center","hidden md:flex"),children:E&&E}),k&&(0,n.jsx)("p",{"data-episode-card-invalid-metadata":!0,className:"text-red-300 opacity-50 absolute left-2 bottom-2 z-[2]",children:"No metadata found"})]}),et&&!ei?(0,n.jsxs)("div",{"data-episode-card-anime-info-container":!0,className:"flex gap-3 items-center",children:[(0,n.jsx)("div",{"data-episode-card-anime-image-container":!0,className:"flex-none w-12 aspect-[5/6] rounded-lg overflow-hidden z-[1] relative hidden",children:!!(null==V?void 0:V.image)&&(0,n.jsx)(c.r,{"data-episode-card-anime-image":!0,src:(0,v.VG)(V.image),alt:"",fill:!0,quality:100,placeholder:(0,d.r)(700,475),sizes:"20rem",className:(0,m.cn)("object-cover rounded-lg object-center transition lg:group-hover/episode-card:scale-105 duration-200",B)})}),(0,n.jsx)(ea,{})]}):ei?null:(0,n.jsx)(ea,{})]})})})}},18292:(e,t,l)=>{"use strict";l.d(t,{H:()=>s,_:()=>o});var n=l(95155),i=l(19749),a=l(91360),r=l(91332);function s(){let e,t=(0,i.c)(2),l=(0,r.Ky)();if(l.libraryScreenCustomBackgroundImage||l.hasCustomBackgroundColor){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{"data-media-card-body-bottom-gradient":!0,className:"z-[5] absolute inset-x-0 bottom-0 w-full h-[40%] opacity-80 bg-gradient-to-t from-[#0c0c0c] to-transparent"}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{"data-media-card-body-bottom-gradient":!0,className:"z-[5] absolute inset-x-0 bottom-0 w-full opacity-90 to-40% h-[50%] bg-gradient-to-t from-[#0c0c0c] to-transparent"}),t[1]=e):e=t[1],e}function o(e){let t,l,s=(0,i.c)(8),{isSingleContainer:o,className:d}=e;if((0,r.Ky)(),o){let e,t;return s[0]!==d?(e=(0,a.cn)("z-[1] absolute inset-x-0 bottom-0 w-full h-full opacity-90 md:h-[80%] bg-gradient-to-t from-[#0c0c0c] to-transparent",d),s[0]=d,s[1]=e):e=s[1],s[2]!==e?(t=(0,n.jsx)("div",{"data-episode-item-bottom-gradient":!0,className:e}),s[2]=e,s[3]=t):t=s[3],t}return s[4]!==d?(t=(0,a.cn)("z-[1] absolute inset-x-0 bottom-0 w-full h-full opacity-50 md:h-[70%] bg-gradient-to-t from-[#0c0c0c] to-transparent",d),s[4]=d,s[5]=t):t=s[5],s[6]!==t?(l=(0,n.jsx)("div",{"data-episode-item-bottom-gradient":!0,className:t}),s[6]=t,s[7]=l):l=s[7],l}l(12115)},20051:(e,t,l)=>{"use strict";l.d(t,{$N:()=>c,Q4:()=>v,RH:()=>h,S2:()=>u,Uf:()=>b,bA:()=>g,hf:()=>p,hs:()=>o,mi:()=>d,pn:()=>f,ys:()=>x});var n=l(19749),i=l(7675),a=l(74889),r=l(46278),s=l(69554);function o(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.LOCAL.LocalGetTrackedMediaItems.endpoint,method:a.S.LOCAL.LocalGetTrackedMediaItems.methods[0],queryKey:[a.S.LOCAL.LocalGetTrackedMediaItems.key],enabled:!0,gcTime:0},t[0]=e):e=t[0],(0,i.fl)(e)}function d(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.LOCAL.LocalAddTrackedMedia.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.LOCAL.LocalAddTrackedMedia.endpoint,method:a.S.LOCAL.LocalAddTrackedMedia.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetTrackedMediaItems.key]}),await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetSyncQueueState.key]}),await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetIsMediaTracked.key]}),await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetLocalStorageSize]}),s.oR.success("Added media for offline syncing")}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function c(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.LOCAL.LocalRemoveTrackedMedia.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.LOCAL.LocalRemoveTrackedMedia.endpoint,method:a.S.LOCAL.LocalRemoveTrackedMedia.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetTrackedMediaItems.key]}),await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetSyncQueueState.key]}),await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetIsMediaTracked.key]}),await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetLocalStorageSize]}),s.oR.success("Removed offline data")}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function u(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.LOCAL.LocalSyncData.endpoint,method:a.S.LOCAL.LocalSyncData.methods[0],mutationKey:[a.S.LOCAL.LocalSyncData.key],onSuccess:m},t[0]=e):e=t[0],(0,i.qk)(e)}async function m(){s.oR.info("Syncing local data...")}function p(e,t){let l,r,s,o=(0,n.c)(9);return o[0]!==e||o[1]!==t?(l=a.S.LOCAL.LocalGetIsMediaTracked.endpoint.replace("{id}",String(e)).replace("{type}",String(t)),o[0]=e,o[1]=t,o[2]=l):l=o[2],o[3]!==e||o[4]!==t?(r=[a.S.LOCAL.LocalGetIsMediaTracked.key,e,t],o[3]=e,o[4]=t,o[5]=r):r=o[5],o[6]!==l||o[7]!==r?(s={endpoint:l,method:a.S.LOCAL.LocalGetIsMediaTracked.methods[0],queryKey:r,enabled:!0},o[6]=l,o[7]=r,o[8]=s):s=o[8],(0,i.fl)(s)}function v(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.LOCAL.LocalSyncAnilistData.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.LOCAL.LocalSyncAnilistData.endpoint,method:a.S.LOCAL.LocalSyncAnilistData.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetTrackedMediaItems.key]}),await o.invalidateQueries({queryKey:[a.S.ANILIST.GetAnimeCollection.key]}),await o.invalidateQueries({queryKey:[a.S.ANILIST.GetRawAnimeCollection.key]}),await o.invalidateQueries({queryKey:[a.S.MANGA.GetAnilistMangaCollection.key]}),await o.invalidateQueries({queryKey:[a.S.MANGA.GetRawAnilistMangaCollection.key]}),await o.invalidateQueries({queryKey:[a.S.MANGA.GetMangaCollection.key]}),await o.invalidateQueries({queryKey:[a.S.ANIME_COLLECTION.GetLibraryCollection.key]}),await o.invalidateQueries({queryKey:[a.S.ANIME_ENTRIES.GetAnimeEntry.key]}),await o.invalidateQueries({queryKey:[a.S.MANGA.GetMangaEntry.key]}),await o.invalidateQueries({queryKey:[a.S.ANIME_ENTRIES.GetMissingEpisodes]}),await o.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetLocalStorageSize]}),s.oR.success("Updated Anilist data")}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function f(){let e,t,l=(0,n.c)(3),s=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.LOCAL.LocalSetHasLocalChanges.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:a.S.LOCAL.LocalSetHasLocalChanges.endpoint,method:a.S.LOCAL.LocalSetHasLocalChanges.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[a.S.LOCAL.LocalGetHasLocalChanges.key]})}},l[1]=s,l[2]=t):t=l[2],(0,i.qk)(t)}function h(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.LOCAL.LocalGetHasLocalChanges.endpoint,method:a.S.LOCAL.LocalGetHasLocalChanges.methods[0],queryKey:[a.S.LOCAL.LocalGetHasLocalChanges.key],enabled:!0},t[0]=e):e=t[0],(0,i.fl)(e)}function x(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.LOCAL.LocalGetLocalStorageSize.endpoint,method:a.S.LOCAL.LocalGetLocalStorageSize.methods[0],queryKey:[a.S.LOCAL.LocalGetLocalStorageSize.key],enabled:!0},t[0]=e):e=t[0],(0,i.fl)(e)}function g(){let e,t=(0,n.c)(1);return(0,r.jE)(),t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.LOCAL.LocalSyncSimulatedDataToAnilist.endpoint,method:a.S.LOCAL.LocalSyncSimulatedDataToAnilist.methods[0],mutationKey:[a.S.LOCAL.LocalSyncSimulatedDataToAnilist.key],onSuccess:y},t[0]=e):e=t[0],(0,i.qk)(e)}async function y(){s.oR.success("Updated Anilist data")}function b(){return(0,i.qk)({endpoint:a.S.LOCAL.SetOfflineMode.endpoint,method:a.S.LOCAL.SetOfflineMode.methods[0],mutationKey:[a.S.LOCAL.SetOfflineMode.key],onSuccess:async e=>{e?(s.oR.success("Offline mode enabled"),window.location.href="/offline"):(s.oR.success("Offline mode disabled"),window.location.href="/")}})}},22264:(e,t,l)=>{"use strict";l.d(t,{L:()=>r});var n=l(19749),i=l(7675),a=l(74889);function r(e){let t,l,r,s=(0,n.c)(8);s[0]!==e?(t=a.S.ANIME.GetAnimeEpisodeCollection.endpoint.replace("{id}",String(e)),s[0]=e,s[1]=t):t=s[1];let o=String(e);s[2]!==o?(l=[a.S.ANIME.GetAnimeEpisodeCollection.key,o],s[2]=o,s[3]=l):l=s[3];let d=!!e;return s[4]!==t||s[5]!==l||s[6]!==d?(r={endpoint:t,method:a.S.ANIME.GetAnimeEpisodeCollection.methods[0],queryKey:l,enabled:d},s[4]=t,s[5]=l,s[6]=d,s[7]=r):r=s[7],(0,i.fl)(r)}},24038:(e,t,l)=>{"use strict";l.d(t,{Z:()=>o});var n=l(95155),i=l(19749),a=l(88580),r=l(12115),s=l(91360);let o=(0,r.memo)(e=>{let t,l,o,d,c,u,m,p,v,f,h,x=(0,i.c)(32),{blur:g,inactiveZone:y,proximity:b,spread:N,variant:j,glow:S,className:E,movementDuration:w,borderWidth:A,disabled:T}=e,C=void 0===g?0:g,I=void 0===y?.7:y,D=void 0===b?0:b,k=void 0===N?20:N,_=void 0===j?"default":j,L=void 0!==S&&S,R=void 0===w?2:w,M=void 0===T||T,O=(0,r.useRef)(null);x[0]===Symbol.for("react.memo_cache_sentinel")?(t={x:0,y:0},x[0]=t):t=x[0];let P=(0,r.useRef)(t),F=(0,r.useRef)(0);x[1]!==I||x[2]!==R||x[3]!==D?(l=e=>{O.current&&(F.current&&cancelAnimationFrame(F.current),F.current=requestAnimationFrame(()=>{var t,l;let n=O.current;if(!n)return;let{left:i,top:r,width:s,height:o}=n.getBoundingClientRect(),d=null!=(t=null==e?void 0:e.x)?t:P.current.x,c=null!=(l=null==e?void 0:e.y)?l:P.current.y;e&&(P.current={x:d,y:c});let u=[i+.5*s,r+.5*o];if(Math.hypot(d-u[0],c-u[1])<.5*Math.min(s,o)*I)return void n.style.setProperty("--active","0");let m=d>i-D&&d<i+s+D&&c>r-D&&c<r+o+D;if(n.style.setProperty("--active",m?"1":"0"),!m)return;let p=parseFloat(n.style.getPropertyValue("--start"))||0,v=(180*Math.atan2(c-u[1],d-u[0])/Math.PI+90-p+180)%360-180;(0,a.i)(p,p+v,{duration:R,ease:[.16,1,.3,1],onUpdate:e=>{n.style.setProperty("--start",String(e))}})}))},x[1]=I,x[2]=R,x[3]=D,x[4]=l):l=x[4];let z=l;x[5]!==M||x[6]!==z?(o=()=>{if(M)return;let e=()=>z(),t=e=>z(e);return window.addEventListener("scroll",e,{passive:!0}),document.body.addEventListener("pointermove",t,{passive:!0}),()=>{F.current&&cancelAnimationFrame(F.current),window.removeEventListener("scroll",e),document.body.removeEventListener("pointermove",t)}},d=[z,M],x[5]=M,x[6]=z,x[7]=o,x[8]=d):(o=x[7],d=x[8]),(0,r.useEffect)(o,d);let B=L&&"opacity-100",K="white"===_&&"border-white",U=M&&"!block";x[9]!==B||x[10]!==K||x[11]!==U?(c=(0,s.cn)("pointer-events-none absolute -inset-px hidden rounded-[inherit] border opacity-0 transition-opacity",B,K,U),x[9]=B,x[10]=K,x[11]=U,x[12]=c):c=x[12],x[13]!==c?(u=(0,n.jsx)("div",{className:c}),x[13]=c,x[14]=u):u=x[14];let G="".concat(C,"px"),q="".concat(void 0===A?1:A,"px"),H="white"===_?"repeating-conic-gradient(\n                  from 236.84deg at 50% 50%,\n                  var(--black),\n                  var(--black) calc(25% / var(--repeating-conic-gradient-times))\n                )":"classic"===_?"radial-gradient(circle, #dd7bbb 10%, #dd7bbb00 20%),\n                radial-gradient(circle at 40% 40%, #d79f1e 5%, #d79f1e00 15%),\n                radial-gradient(circle at 60% 60%, #5a922c 10%, #5a922c00 20%), \n                radial-gradient(circle at 40% 60%, #4c7894 10%, #4c789400 20%),\n                repeating-conic-gradient(\n                  from 236.84deg at 50% 50%,\n                  rgb(167, 123, 221) 0%,\n                  #d79f1e calc(25% / var(--repeating-conic-gradient-times)),\n                  #5a922c calc(50% / var(--repeating-conic-gradient-times)), \n                  #4c7894 calc(75% / var(--repeating-conic-gradient-times)),\nrgb(167, 123, 221) calc(100% / var(--repeating-conic-gradient-times))\n                )":"radial-gradient(circle, rgb(var(--color-brand-500)) 10%, rgb(var(--color-brand-500) / 0) 20%),\n                radial-gradient(circle at 40% 40%, rgb(var(--color-brand-400)) 5%, rgb(var(--color-brand-400) / 0) 15%),\n                radial-gradient(circle at 60% 60%, rgb(var(--color-brand-600)) 10%, rgb(var(--color-brand-600) / 0) 20%), \n                radial-gradient(circle at 40% 60%, rgb(var(--color-brand-300)) 10%, rgb(var(--color-brand-300) / 0) 20%),\n                repeating-conic-gradient(\n                  from 236.84deg at 50% 50%,\n                  rgb(var(--color-brand-500)) 0%,\n                  rgb(var(--color-brand-400)) calc(25% / var(--repeating-conic-gradient-times)),\n                  rgb(var(--color-brand-600)) calc(50% / var(--repeating-conic-gradient-times)), \n                  rgb(var(--color-brand-300)) calc(75% / var(--repeating-conic-gradient-times)),\n                  rgb(var(--color-brand-500)) calc(100% / var(--repeating-conic-gradient-times))\n                )";x[15]!==k||x[16]!==G||x[17]!==q||x[18]!==H?(m={"--blur":G,"--spread":k,"--start":"0","--active":"0","--glowingeffect-border-width":q,"--repeating-conic-gradient-times":"5","--gradient":H},x[15]=k,x[16]=G,x[17]=q,x[18]=H,x[19]=m):m=x[19];let V=m,W=L&&"opacity-100",Y=C>0&&"blur-[var(--blur)] ",Q=M&&"!hidden";return x[20]!==E||x[21]!==W||x[22]!==Y||x[23]!==Q?(p=(0,s.cn)("pointer-events-none absolute inset-0 rounded-[inherit] opacity-100 transition-opacity lg:block hidden",W,Y,E,Q),x[20]=E,x[21]=W,x[22]=Y,x[23]=Q,x[24]=p):p=x[24],x[25]===Symbol.for("react.memo_cache_sentinel")?(v=(0,n.jsx)("div",{className:(0,s.cn)("glow","rounded-[inherit]",'after:content-[""] after:rounded-[inherit] after:absolute after:inset-[calc(-1*var(--glowingeffect-border-width))]',"after:[border:var(--glowingeffect-border-width)_solid_transparent]","after:[background:var(--gradient)] after:[background-attachment:fixed]","after:opacity-[var(--active)] after:transition-opacity after:duration-300","after:[mask-clip:padding-box,border-box]","after:[mask-composite:intersect]","after:[mask-image:linear-gradient(#0000,#0000),conic-gradient(from_calc((var(--start)-var(--spread))*1deg),#00000000_0deg,#fff,#00000000_calc(var(--spread)*2deg))]")}),x[25]=v):v=x[25],x[26]!==V||x[27]!==p?(f=(0,n.jsx)("div",{ref:O,style:V,className:p,children:v}),x[26]=V,x[27]=p,x[28]=f):f=x[28],x[29]!==u||x[30]!==f?(h=(0,n.jsxs)(n.Fragment,{children:[u,f]}),x[29]=u,x[30]=f,x[31]=h):h=x[31],h});o.displayName="GlowingEffect"},24449:(e,t,l)=>{"use strict";l.d(t,{v:()=>d});var n=l(95155),i=l(19749),a=l(36945),r=l(61585),s=l(86694),o=l.n(s);function d(e){let t,l,r,s,o,d,f=(0,i.c)(13),{entry:h,details:x,maxCol:g}=e;if(f[0]!==x||f[1]!==h||f[2]!==g){o=Symbol.for("react.early_return_sentinel");t:{var y,b,N,j,S,E,w,A;let e=null==x||null==(j=x.relations)||null==(N=j.edges)||null==(b=N.filter(Boolean))||null==(y=b.filter(v))?void 0:y.slice(0,3),i=(null==x||null==(A=x.recommendations)||null==(w=A.edges)||null==(E=w.map(p))||null==(S=E.filter(Boolean))?void 0:S.slice(0,6))||[];if(!h||!x){o=null;break t}t="space-y-4",l=!0,r=!!(null==e?void 0:e.length)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Relations"}),(0,n.jsx)(a.Ln,{maxCol:g,children:null==e?void 0:e.toSorted(m).map(u)})]}),s=i.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Recommendations"}),(0,n.jsx)(a.Ln,{maxCol:g,children:i.map(c)})]})}f[0]=x,f[1]=h,f[2]=g,f[3]=t,f[4]=l,f[5]=r,f[6]=s,f[7]=o}else t=f[3],l=f[4],r=f[5],s=f[6],o=f[7];return o!==Symbol.for("react.early_return_sentinel")?o:(f[8]!==t||f[9]!==l||f[10]!==r||f[11]!==s?(d=(0,n.jsxs)("div",{className:t,"data-manga-recommendations-container":l,children:[r,s]}),f[8]=t,f[9]=l,f[10]=r,f[11]=s,f[12]=d):d=f[12],d)}function c(e){return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(r.V,{media:e,type:"manga"})},e.id)}function u(e){var t,l;return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(r.V,{media:null==e?void 0:e.node,showLibraryBadge:!0,showTrailer:!0,overlay:(0,n.jsxs)("p",{className:"font-semibold text-white bg-gray-950 z-[-1] absolute right-0 w-fit px-4 py-1.5 text-center !bg-opacity-90 text-sm lg:text-base rounded-none rounded-bl-lg",children:[o()(e.relationType||"").replace("_"," "),(null==e||null==(t=e.node)?void 0:t.format)==="MOVIE"?" (Movie)":""]}),type:"anime"})},null==e||null==(l=e.node)?void 0:l.id)}function m(e,t){var l,n,i,a;return(null==(l=e.node)?void 0:l.format)==="TV"&&(null==(n=t.node)?void 0:n.format)!=="TV"?-1:+((null==(i=e.node)?void 0:i.format)!=="TV"&&(null==(a=t.node)?void 0:a.format)==="TV")}function p(e){var t;return null==e||null==(t=e.node)?void 0:t.mediaRecommendation}function v(e){var t,l,n,i;return(null==e||null==(t=e.node)?void 0:t.type)==="ANIME"&&((null==e||null==(l=e.node)?void 0:l.format)==="TV"||(null==e||null==(n=e.node)?void 0:n.format)==="MOVIE"||(null==e||null==(i=e.node)?void 0:i.format)==="TV_SHORT")}l(12115)},24685:(e,t,l)=>{"use strict";l.d(t,{m:()=>eZ,l:()=>eX});var n=l(95155),i=l(19749),a=l(55014),r=l(13029),s=l(73499),o=l(96826),d=l(51441),c=l(98802),u=l(52029),m=l(47363),p=l(41963),v=l(10212),f=l(244),h=l(84127),x=l(2091),g=l(22960),y=l(77022),b=l(93715),N=l(24151),j=l(29724),S=l(12115),E=l(38628);let w=(0,b.v)("DEBRID STREAM FILE SELECTION");function A(e){let{entry:t}=e,[,l]=(0,j.fp)(m.N7),[i,a]=(0,j.fp)(p.p),[r,b]=S.useState(""),{torrentSearchStreamEpisode:A}=(0,u.U)(),{selectedDebridService:T}=(0,o.S5)(),{data:C,isLoading:I}=(0,c.R5)({torrent:i,media:t.media,episodeNumber:null==A?void 0:A.episodeNumber},!!i),{setAutoPlayTorrent:D}=(0,s.K1)(),{handleStreamSelection:k}=(0,d.u)();function _(e){let n;""!=e&&i&&A&&A.aniDBEpisode&&(T!==N.bY.TORBOX&&(n={current:parseInt(e),files:(null==C?void 0:C.map(e=>({index:e.index,name:e.displayPath,path:e.path})))||[],currentEpisodeNumber:A.episodeNumber,currentAniDBEpisode:A.aniDBEpisode},w.info("Saving torrent for auto play",{batchFiles:n}),D(i,t,n)),k({torrent:i,mediaId:t.mediaId,aniDBEpisode:A.aniDBEpisode,episodeNumber:A.episodeNumber,chosenFileId:e,batchEpisodeFiles:n}),a(void 0),b(""),l(void 0))}S.useEffect(()=>{C&&1===C.length&&(b(String(C[0].fileId)),S.startTransition(()=>{_(String(C[0].fileId))}))},[C]);let L=null==C?void 0:C.some(e=>e.isLikely),R=L&&(null==C?void 0:C.filter(e=>e.isLikely).length)===1,M=S.useRef(null),O=S.useCallback(e=>{b(String(e))},[]),P=S.useCallback(e=>String(e.fileId),[]),F=S.useRef(null);return S.useEffect(()=>{if(R&&M.current&&F.current){let e=setTimeout(()=>{let e=M.current,t=F.current;if(e&&t){let l=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=l.top-n.top+t.scrollTop-16;t.scrollTo({top:i,behavior:"smooth"})}},1e3);return()=>clearTimeout(e)}},[R,M.current]),(0,n.jsx)(y.Tr,{open:!!i,onOpenChange:e=>{e||(a(void 0),b(""))},children:(0,n.jsx)(y.Cz,{className:"max-w-5xl mx-auto",children:(0,n.jsx)(f.KZ,{className:"mt-4 p-3 lg:p-6",children:I||(null==C?void 0:C.length)===1?(0,n.jsx)(x.kt,{title:(null==C?void 0:C.length)===1?"Launching stream...":"Fetching torrent info..."}):(0,n.jsxs)(f.KZ,{className:"mt-4",children:[(0,n.jsx)(g.F,{viewportRef:F,className:"h-[75dvh] overflow-y-auto p-4 border rounded-[--radius-md]",children:(0,n.jsx)(v.sW,{filePreviews:C||[],selectedValue:r,onFileSelect:O,getFileValue:P,hasLikelyMatch:L||!1,hasOneLikelyMatch:R||!1,likelyMatchRef:M})}),(0,n.jsx)(h.$n,{intent:"primary",className:"w-full",rightIcon:(0,n.jsx)(E.HI7,{className:"text-xl"}),disabled:""===r||I,onClick:()=>_(r),children:"Stream"})]})})})})}var T=l(63717),C=l(91360),I=l(97400),D=l(42732),k=l.n(D),_=l(2311),L=l(43994),R=l(28002);function M(e){let t,l=(0,i.c)(3),{resolution:a}=e;if(!a)return null;let r=(null==a?void 0:a.includes("1080"))?"indigo":(null==a?void 0:a.includes("2160"))||(null==a?void 0:a.toLowerCase().includes("4k"))?"blue":(null==a?void 0:a.includes("720"))?"success":"gray";return l[0]!==a||l[1]!==r?(t=(0,n.jsx)(T.E,{"data-torrent-item-resolution-badge":!0,className:"rounded-[--radius-md] border-transparent bg-gray-900/50 px-1 text-md",intent:r,children:a}),l[0]=a,l[1]=r,l[2]=t):t=l[2],t}function O(e){let t,l,a,r,s,o,d=(0,i.c)(16),{seeders:c}=e,u=c>=50?R.SB3:c>=20?R.puD:c>=10||c>=5?R.olP:c>0?R.Xd$:R.RHd;if(-1===c)return null;let m=c>=50?"text-[--indigo]":c>=10?"text-[--green]":c>=5?"text-orange-300":"text-[--red]";d[0]!==m?(t=(0,C.cn)("text-xl mr-0.5",m),d[0]=m,d[1]=t):t=d[1],d[2]!==u||d[3]!==t?(l=(0,n.jsx)(u,{className:t}),d[2]=u,d[3]=t,d[4]=l):l=d[4];let p=c>=50?"text-[--indigo]":c>=10?"text-[--green]":c>=5?"text-orange-300":"text-[--red]";d[5]!==p?(a=(0,C.cn)("text-[.9rem] font-normal",p),d[5]=p,d[6]=a):a=d[6];let v=c||"No";d[7]!==a||d[8]!==v?(r=(0,n.jsx)("span",{className:a,children:v}),d[7]=a,d[8]=v,d[9]=r):r=d[9];let f=1!=c?"s":"";return d[10]!==f?(s=(0,n.jsxs)("span",{className:"text-[--muted] text-[.9rem]",children:["seeder",f]}),d[10]=f,d[11]=s):s=d[11],d[12]!==l||d[13]!==r||d[14]!==s?(o=(0,n.jsxs)(T.E,{"data-torrent-item-seeders-badge":!0,className:"rounded-[--radius-md] border-transparent bg-transparent px-0 gap-1 font-normal opacity-80",intent:"gray",leftIcon:l,children:[r,s]}),d[12]=l,d[13]=r,d[14]=s,d[15]=o):o=d[15],o}function P(e){var t,l,a,r,s,o,d;let c,u,m,p,v,f,h,x,g,y,b,N,j=(0,i.c)(31),{metadata:S}=e;if(!S)return null;j[0]!==(null==S?void 0:S.subtitles)?(c=null==S||null==(t=S.subtitles)?void 0:t.some(V),j[0]=null==S?void 0:S.subtitles,j[1]=c):c=j[1];let E=c;j[2]!==(null==S?void 0:S.subtitles)?(u=null==S||null==(l=S.subtitles)?void 0:l.some(H),j[2]=null==S?void 0:S.subtitles,j[3]=u):u=j[3];let w=u;j[4]!==(null==S?void 0:S.language)?(m=(null==S||null==(a=S.language)?void 0:a.length)?[...new Set(null==S?void 0:S.language)]:[],j[4]=null==S?void 0:S.language,j[5]=m):m=j[5];let A=m;j[6]!==(null==S?void 0:S.video_term)?(p=e=>{var t;return!(e.toLocaleLowerCase().includes("265")&&(null==S||null==(t=S.video_term)?void 0:t.map(q).includes("hevc")))},j[6]=null==S?void 0:S.video_term,j[7]=p):p=j[7];let C=p;return j[8]!==A?(v=(null==A?void 0:A.length)&&2==A.length?null==(r=A.slice(0,2))?void 0:r.map(G):null,j[8]=A,j[9]=v):v=j[9],j[10]!==C||j[11]!==(null==S?void 0:S.video_term)?(f=null==S||null==(s=S.video_term)?void 0:s.filter(C).map(U),j[10]=C,j[11]=null==S?void 0:S.video_term,j[12]=f):f=j[12],j[13]!==(null==S?void 0:S.audio_term)?(h=null==S||null==(o=S.audio_term)?void 0:o.filter(K).map(B),j[13]=null==S?void 0:S.audio_term,j[14]=h):h=j[14],j[15]!==A?(x=(null==A?void 0:A.length)&&A.length>2?(0,n.jsx)(I.m_,{trigger:(0,n.jsxs)(T.E,{className:"rounded-md bg-transparent border-transparent px-1",children:[(0,n.jsx)(R.BuS,{className:"text-lg text-[--blue]"})," Languages"]}),children:(0,n.jsx)("span",{children:A.join(", ")})}):null,j[15]=A,j[16]=x):x=j[16],j[17]!==(null==S?void 0:S.audio_term)?(g=null==S||null==(d=S.audio_term)?void 0:d.filter(z).map(F),j[17]=null==S?void 0:S.audio_term,j[18]=g):g=j[18],j[19]!==E?(y=E&&(0,n.jsxs)(T.E,{className:"rounded-md border-transparent bg-indigo-300 px-1",children:[(0,n.jsx)(_.MlR,{className:"text-lg text-[--red]"})," Dubbed"]}),j[19]=E,j[20]=y):y=j[20],j[21]!==w?(b=w&&(0,n.jsxs)(T.E,{className:"rounded-md border-transparent bg-indigo-300 px-1",children:[(0,n.jsx)(R.A1T,{className:"text-lg text-[--blue]"})," Multi Subs"]}),j[21]=w,j[22]=b):b=j[22],j[23]!==y||j[24]!==b||j[25]!==v||j[26]!==f||j[27]!==h||j[28]!==x||j[29]!==g?(N=(0,n.jsxs)("div",{className:"flex flex-row gap-1 flex-wrap justify-end w-full lg:absolute top-0 right-0",children:[v,f,h,x,g,y,b]}),j[23]=y,j[24]=b,j[25]=v,j[26]=f,j[27]=h,j[28]=x,j[29]=g,j[30]=N):N=j[30],N}function F(e){return(0,n.jsxs)(T.E,{className:"rounded-md border-transparent bg-[--subtle] text-[.8rem] px-1",children:[(0,n.jsx)(_.MlR,{className:"text-lg text-[--rose]"})," ",e.toLowerCase().includes("dual")?"Original + Dub":k()(e)]},e)}function z(e){return e.toLowerCase().includes("dual")||e.toLowerCase().includes("multi")}function B(e){return(0,n.jsx)(T.E,{className:"rounded-md border-transparent bg-transparent text-[.8rem] text-[--foreground] px-1 opacity-60",children:e},e)}function K(e){return!e.toLowerCase().includes("dual")&&!e.toLowerCase().includes("multi")}function U(e){return(0,n.jsx)(T.E,{className:"rounded-md border-transparent bg-transparent text-[.8rem] text-[--foreground] px-1",children:e},e)}function G(e){return(0,n.jsxs)(T.E,{className:"rounded-md bg-transparent border-transparent px-1",children:[(0,n.jsx)(R.T2_,{className:"text-lg text-[--blue]"})," ",e]},e)}function q(e){return e.toLocaleLowerCase()}function H(e){return e.toLocaleLowerCase().includes("multi")}function V(e){return e.toLocaleLowerCase().includes("dub")}function W(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(I.m_,{trigger:(0,n.jsx)(T.E,{"data-torrent-item-debrid-instant-availability-badge":!0,className:"rounded-[--radius-md] bg-transparent border-transparent dark:text-[--indigo] animate-pulse p-0",intent:"white",children:(0,n.jsx)(L.FY8,{className:"text-xl"})}),children:"Instantly available on Debrid service"}),t[0]=e):e=t[0],e}var Y=l(14680),Q=l(43756),$=l(13544),X=l(85420),Z=l.n(X),J=l(78453),ee=l(70376),et=l(79858),el=l(28718);let en=e=>{let t,l=(0,i.c)(2),{children:a}=e;return l[0]!==a?(t=(0,n.jsx)("div",{className:"grid grid-cols-1 gap-3",children:a}),l[0]=a,l[1]=t):t=l[1],t},ei=e=>{var t,l,a,r,s,o,d,c,u,m,p,v,f,h,x,g,y,b,N,j,S;let E,w,A,C,I,D,k,_=(0,i.c)(34),{torrent:R,metadata:M,debridCached:F,onClick:z,isSelected:B,episode:K,media:U,overrideProps:G}=e,q=null!=(c=null==G?void 0:G.link)?c:null==R?void 0:R.link,H=null!=(u=null==G?void 0:G.confirmed)?u:null==R?void 0:R.confirmed,V=null!=(m=null==G?void 0:G.displayName)?m:(null==K?void 0:K.displayTitle)||(null==K||null==(l=K.baseAnime)||null==(t=l.title)?void 0:t.userPreferred)||"",W=null!=(p=null==G?void 0:G.releaseGroup)?p:R.releaseGroup||"",Y=null!=(v=null==G?void 0:G.torrentName)?v:R.name,Q=null!=(h=null!=(f=null==G?void 0:G.isBatch)?f:R.isBatch)&&h,X=null!=(x=null==G?void 0:G.isBestRelease)?x:R.isBestRelease,Z=null!=(g=null==G?void 0:G.image)?g:(null==K||null==(a=K.episodeMetadata)?void 0:a.image)||(null==K||null==(s=K.baseAnime)||null==(r=s.coverImage)?void 0:r.large)||(R.confirmed?(null==U||null==(o=U.coverImage)?void 0:o.large)||(null==U?void 0:U.bannerImage):null),J=null!=(y=null==G?void 0:G.fallbackImage)?y:(null==U||null==(d=U.coverImage)?void 0:d.large)||(null==U?void 0:U.bannerImage),et=null!=(b=null==G?void 0:G.isSelected)?b:B,el=null!=(N=null==G?void 0:G.metadata)?N:M,en=null!=(j=null==G?void 0:G.resolution)?j:R.resolution,ei=null!=(S=null==G?void 0:G.debridCached)?S:F;return _[0]!==R.isBestRelease?(E=R.isBestRelease&&(0,n.jsx)(T.E,{className:"rounded-[--radius-md] text-[0.8rem] bg-pink-800 border-transparent border",intent:"success-solid",leftIcon:(0,n.jsx)(L.PVI,{className:"text-md"}),children:"Highest quality"}),_[0]=R.isBestRelease,_[1]=E):E=_[1],_[2]!==R.seeders?(w=(0,n.jsx)(O,{seeders:R.seeders}),_[2]=R.seeders,_[3]=w):w=_[3],_[4]!==R.formattedSize||_[5]!==R.size?(A=!!R.size&&(0,n.jsx)("p",{className:"text-gray-300 text-sm flex items-center gap-1",children:R.formattedSize}),_[4]=R.formattedSize,_[5]=R.size,_[6]=A):A=_[6],_[7]!==R.date?(C=R.date&&(0,n.jsxs)("p",{className:"text-[--muted] text-sm flex items-center gap-1",children:[(0,n.jsx)(ee.zBL,{})," ",(0,$.dU)(R.date)]}),_[7]=R.date,_[8]=C):C=_[8],_[9]!==E||_[10]!==w||_[11]!==A||_[12]!==C?(I=(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 items-center lg:absolute bottom-0 left-0 right-0",children:[E,w,A,C]}),_[9]=E,_[10]=w,_[11]=A,_[12]=C,_[13]=I):I=_[13],_[14]!==M?(D=M&&(0,n.jsx)(P,{metadata:M}),_[14]=M,_[15]=D):D=_[15],_[16]!==z||_[17]!==q||_[18]!==et||_[19]!==el||_[20]!==en||_[21]!==ei||_[22]!==I||_[23]!==D||_[24]!==H||_[25]!==V||_[26]!==W||_[27]!==Y||_[28]!==Q||_[29]!==X||_[30]!==Z||_[31]!==J||_[32]!==R.link?(k=(0,n.jsxs)(ea,{link:q,confirmed:H,displayName:V,releaseGroup:W,torrentName:Y,isBatch:Q,isBestRelease:X,image:Z,fallbackImage:J,isSelected:et,metadata:el,resolution:en,debridCached:ei,onClick:z,children:[I,D]},R.link),_[16]=z,_[17]=q,_[18]=et,_[19]=el,_[20]=en,_[21]=ei,_[22]=I,_[23]=D,_[24]=H,_[25]=V,_[26]=W,_[27]=Y,_[28]=Q,_[29]=X,_[30]=Z,_[31]=J,_[32]=R.link,_[33]=k):k=_[33],k},ea=(0,S.memo)(e=>{let t,l,a,r,s,o,d,c,u,m,p,v,f,x,g,y,b,N,j,S,E,w,A=(0,i.c)(78),{link:T,isSelected:D,isInvalid:k,className:_,onClick:R,releaseGroup:O,isBatch:P,torrentName:F,displayName:z,children:B,action:K,image:U,fallbackImage:G,isBestRelease:q,confirmed:H,addon:V,metadata:$,resolution:X,debridCached:en}=e,ei=X||(null==$?void 0:$.video_resolution);t:{let e,l=null==$?void 0:$.episode_number;if(!P){if(z){t=z;break t}if((null==l?void 0:l.length)===1){t="Episode ".concat(parseInt(l[0]));break t}if((null==l?void 0:l.length)===0){t="Batch";break t}if(null==$?void 0:$.formatted_title){t=$.formatted_title;break t}t="";break t}let n=null==$?void 0:$.season_number,i=null==$?void 0:$.part_number;if((null==i?void 0:i.length)&&i.length>1){let l=parseInt(i[0]),n=parseInt(i[i.length-1]);if(l!=n){t=e=2===Z()(i,er).length&&n-l==1?"Part ".concat(l," and ").concat(n):"Parts ".concat(l," to ").concat(n);break t}t="Part ".concat(l);break t}if((null==n?void 0:n.length)&&n.length>1){let l=parseInt(n[0]),i=parseInt(n[n.length-1]);if(l!=i){t=e=2===Z()(n,es).length&&i-l==1?"Season ".concat(l," and ").concat(i):"Seasons ".concat(l," to ").concat(i);break t}t="Season ".concat(l);break t}if((null==l?void 0:l.length)&&(null==l?void 0:l.length)>1){e="Episodes ".concat(parseInt(l[0])," to ").concat(parseInt(l[l.length-1])),(null==n?void 0:n.length)===1&&(e+=" (Season ".concat(parseInt(n[0]),")")),t=e;break t}if((null==n?void 0:n.length)&&1===n.length){t="Season ".concat(parseInt(n[0]));break t}t="Batch"}let ea=t,eo=D&&"sticky top-2 bottom-2 z-10",ed=!D;A[0]!==_||A[1]!==k||A[2]!==D||A[3]!==eo||A[4]!==ed?(l=(0,C.cn)("border p-3 pr-12 rounded-lg relative transition group/torrent-preview-item overflow-hidden","max-w-full bg-[--background]",eo,{"border-brand-200":D,"hover:border-gray-500":ed,"border-red-700":k},_),A[0]=_,A[1]=k,A[2]=D,A[3]=eo,A[4]=ed,A[5]=l):l=A[5],A[6]!==G||A[7]!==U||A[8]!==D?(a=(U||G)&&(0,n.jsxs)("div",{className:"absolute left-0 top-0 w-full h-full max-w-[200px] overflow-hidden","data-torrent-preview-item-image-container":!0,children:[(U||G)&&(0,n.jsx)(Y.r,{"data-torrent-preview-item-image":!0,src:U||G,alt:"episode image",fill:!0,className:(0,C.cn)("object-cover object-center absolute w-full h-full group-hover/torrent-preview-item:blur-0 transition-opacity opacity-25 group-hover/torrent-preview-item:opacity-60 z-[0] select-none pointer-events-none",!U&&G&&"opacity-10 group-hover/torrent-preview-item:opacity-30",D&&"opacity-50")}),(0,n.jsx)("div",{"data-torrent-preview-item-image-end-gradient":!0,className:"transition-colors absolute w-full h-full -right-2 bg-gradient-to-l from-[--background] via-[--background] via-30% hover:from-[var(--hover-from-background-color)] to-transparent z-[1] select-none pointer-events-none"})]}),A[6]=G,A[7]=U,A[8]=D,A[9]=a):a=A[9],A[10]!==U||A[11]!==P||A[12]!==D?(r=U&&P&&(0,n.jsxs)("div",{className:"absolute right-0 top-0 w-full h-full max-w-[200px] overflow-hidden","data-torrent-preview-item-image-container":!0,children:[U&&(0,n.jsx)(Y.r,{"data-torrent-preview-item-image":!0,src:U,alt:"episode image",fill:!0,className:(0,C.cn)("object-cover object-center absolute w-full h-full group-hover/torrent-preview-item:blur-0 transition-opacity opacity-25 z-[0] select-none pointer-events-none",U&&"opacity-10",D&&"opacity-10")}),(0,n.jsx)("div",{"data-torrent-preview-item-image-end-gradient":!0,className:"transition-colors absolute w-full h-full -left-2 bg-gradient-to-r from-[--background] via-[--background] via-30% hover:from-[var(--hover-from-background-color)] to-transparent z-[1] select-none pointer-events-none"})]}),A[10]=U,A[11]=P,A[12]=D,A[13]=r):r=A[13];let ec=!!R;A[14]!==ec?(s=(0,C.cn)("flex gap-4 relative z-[2]",{"cursor-pointer":ec}),A[14]=ec,A[15]=s):s=A[15],A[16]!==P||A[17]!==D?(o=P&&(0,n.jsx)(el.NVk,{className:(0,C.cn)("text-7xl absolute opacity-30 rotate-12 -left-8 -bottom-8 transform-gpu transition-all skew-x-2 group-hover/torrent-preview-item:skew-x-0 group-hover/torrent-preview-item:opacity-60",D&&"hover:opacity-80 opacity-80")}),A[16]=P,A[17]=D,A[18]=o):o=A[18],A[19]!==en?(d=en&&(0,n.jsx)("div",{className:"absolute -left-1.5 -top-1.5 z-[2]","data-torrent-preview-item-debrid-cached-badge":!0,children:(0,n.jsx)(W,{})}),A[19]=en,A[20]=d):d=A[20],A[21]===Symbol.for("react.memo_cache_sentinel")?(c=(0,C.cn)("h-24 w-24 lg:w-28 flex-none rounded-[--radius-md] object-cover object-center relative overflow-hidden","flex flex-col items-center justify-center","text-xs"),u=(0,C.cn)("z-[1] font-medium truncate flex items-center max-w-full w-fit px-0 py-1 rounded-[--radius-md] text-[.9rem]","border-transparent bg-transparent"),A[21]=c,A[22]=u):(c=A[21],u=A[22]),A[23]!==O?(m=(0,n.jsx)("p",{className:u,"data-torrent-preview-item-release-group":!0,children:(0,n.jsx)("span",{className:"truncate",children:O})}),A[23]=O,A[24]=m):m=A[24],A[25]!==ei?(p=ei&&(0,n.jsx)("div",{className:"",children:(0,n.jsx)(M,{resolution:ei})}),A[25]=ei,A[26]=p):p=A[26],A[27]!==G||A[28]!==U||A[29]!==P?(v=!(U||G)&&!P&&(0,n.jsx)(et.KJ,{className:"text-7xl absolute opacity-10"}),A[27]=G,A[28]=U,A[29]=P,A[30]=v):v=A[30],A[31]!==m||A[32]!==p||A[33]!==v?(f=(0,n.jsxs)("div",{"data-torrent-preview-item-release-info-container":!0,className:c,children:[m,p,v]}),A[31]=m,A[32]=p,A[33]=v,A[34]=f):f=A[34],A[35]!==k?(x=k&&(0,n.jsxs)("p",{className:"flex gap-2 text-red-300 items-center",children:[(0,n.jsx)(J.mRc,{className:"text-lg text-red-500"})," Unidentified"]}),A[35]=k,A[36]=x):x=A[36],A[37]!==H||A[38]!==q||A[39]!==ea?(g=ea&&(0,n.jsxs)("p",{className:(0,C.cn)("font-normal text-[1.1rem] transition line-clamp-1 tracking-wide flex gap-2 items-center max-w-[20rem]"),"data-torrent-preview-item-title":!0,children:[ea," ",H&&(0,n.jsx)("span",{className:"","data-torrent-preview-item-confirmed-badge":!0,children:(0,n.jsx)(L.e8Y,{className:(0,C.cn)("text-[--gray] text-sm",q?"text-[--pink] opacity-70":"opacity-30")})})]}),A[37]=H,A[38]=q,A[39]=ea,A[40]=g):g=A[40],A[41]!==F?(y=!!F&&(0,n.jsx)("p",{className:(0,C.cn)("text-[.8rem] tracking-wide group-hover/torrent-preview-item:opacity-60 line-clamp-2 break-all","opacity-30"),"data-torrent-preview-item-subtitle":!0,children:F}),A[41]=F,A[42]=y):y=A[42];let eu=B&&B;return A[43]!==eu?(b=(0,n.jsx)("div",{className:"flex flex-col gap-2","data-torrent-preview-item-subcontent":!0,children:eu}),A[43]=eu,A[44]=b):b=A[44],A[45]!==x||A[46]!==g||A[47]!==y||A[48]!==b?(N=(0,n.jsxs)("div",{className:"relative overflow-hidden space-y-1 w-full","data-torrent-preview-item-metadata":!0,children:[x,g,y,b]}),A[45]=x,A[46]=g,A[47]=y,A[48]=b,A[49]=N):N=A[49],A[50]!==R||A[51]!==f||A[52]!==N||A[53]!==s||A[54]!==o||A[55]!==d?(j=(0,n.jsxs)("div",{"data-torrent-preview-item-content":!0,className:s,onClick:R,children:[o,d,f,N]}),A[50]=R,A[51]=f,A[52]=N,A[53]=s,A[54]=o,A[55]=d,A[56]=j):j=A[56],A[57]!==T?(S=T&&(0,n.jsx)(I.m_,{side:"left",trigger:(0,n.jsx)(h.K0,{"data-torrent-preview-item-open-in-browser-button":!0,icon:(0,n.jsx)(ee.zaF,{className:"text-[--muted]"}),intent:"gray-basic",size:"sm",onClick:()=>(0,Q.A)(T)}),children:"Open in browser"}),A[57]=T,A[58]=S):S=A[58],A[59]!==K||A[60]!==S?(E=(0,n.jsxs)("div",{className:"absolute right-1 top-1 flex flex-col items-center","data-torrent-preview-item-actions":!0,children:[S,K]}),A[59]=K,A[60]=S,A[61]=E):E=A[61],A[62]!==V||A[63]!==H||A[64]!==z||A[65]!==P||A[66]!==q||A[67]!==k||A[68]!==D||A[69]!==T||A[70]!==O||A[71]!==j||A[72]!==E||A[73]!==l||A[74]!==a||A[75]!==r||A[76]!==F?(w=(0,n.jsxs)("div",{"data-torrent-preview-item":!0,"data-torrent-name":F,"data-display-name":z,"data-release-group":O,"data-is-batch":P,"data-is-best-release":q,"data-confirmed":H,"data-is-invalid":k,"data-is-selected":D,"data-link":T,className:l,tabIndex:0,children:[V,a,r,j,E]}),A[62]=V,A[63]=H,A[64]=z,A[65]=P,A[66]=q,A[67]=k,A[68]=D,A[69]=T,A[70]=O,A[71]=j,A[72]=E,A[73]=l,A[74]=a,A[75]=r,A[76]=F,A[77]=w):w=A[77],w});function er(e){return parseInt(e)}function es(e){return parseInt(e)}var eo=l(63352),ed=l(75435),ec=l(57073),eu=l(80893);let em=(e,t,l)=>e!==t?(0,n.jsx)(eu.vRG,{className:"opacity-50 text-lg"}):"asc"===l?(0,n.jsx)(eu.dFm,{className:"text-brand-200 text-lg"}):(0,n.jsx)(eu.RE7,{className:"text-brand-200 text-lg"}),ep=e=>e?(0,n.jsx)(eu.XPy,{className:"text-brand-200 animate-bounce text-lg"}):(0,n.jsx)(eu.XPy,{className:"opacity-50 text-lg"}),ev=(e,t,l,n,i)=>{t===e?"desc"===l?i("asc"):"asc"===l?(n(null),i(null)):i("desc"):(n(e),i("desc"))},ef=e=>{var t,l;return!!e&&!!(null==(l=e.metadata)||null==(t=l.subtitles)?void 0:t.some(e=>e.toLocaleLowerCase().includes("multi")))},eh=e=>{var t,l;return!!e&&!!(null==(l=e.metadata)||null==(t=l.audio_term)?void 0:t.some(e=>e.toLowerCase().includes("dual")||e.toLowerCase().includes("multi")))},ex=e=>{var t,l;return!!e&&!!(null==(l=e.metadata)||null==(t=l.subtitles)?void 0:t.some(e=>e.toLocaleLowerCase().includes("dub")))},eg=(e,t)=>{var l,n;if(!t)return!1;let i=null==(n=t.metadata)||null==(l=n.video_term)?void 0:l.map(e=>e.toLocaleLowerCase());switch(e.toLocaleLowerCase()){case"avc":return(null==i?void 0:i.some(e=>/264|avc|h264/mi.test(e)))||!1;case"hevc":return(null==i?void 0:i.some(e=>/265|hevc|h265/mi.test(e)))||!1;case"av1":return(null==i?void 0:i.some(e=>/av1|vp8/mi.test(e)))||!1;default:return!1}},ey=(e,t)=>{var l,n;if(!t)return!1;let i=null==(n=t.metadata)||null==(l=n.audio_term)?void 0:l.map(e=>e.toLocaleLowerCase());switch(e.toLocaleLowerCase()){case"aac":return(null==i?void 0:i.some(e=>/aac|aac_latm/mi.test(e)))||!1;case"ac3":return(null==i?void 0:i.some(e=>/ac3|ac-3/mi.test(e)))||!1;case"dts":return(null==i?void 0:i.some(e=>/dts|dca/mi.test(e)))||!1;case"opus":return(null==i?void 0:i.some(e=>/opus|vorbis/mi.test(e)))||!1;case"eac3":return(null==i?void 0:i.some(e=>/(eac3|e-ac3|e-ac-3)/mi.test(e)))||!1;case"flac":return(null==i?void 0:i.some(e=>/flac|alac/mi.test(e)))||!1;default:return!1}};function eb(e,t,l){return t&&l?[...e].sort((e,n)=>{let i,a,r="torrent"in e?e.torrent:e,s="torrent"in n?n.torrent:n;if(!r||!s)return 0;switch(t){case"seeders":i=r.seeders||0,a=s.seeders||0;break;case"size":i=r.size||0,a=s.size||0;break;case"date":i=new Date(r.date).getTime(),a=new Date(s.date).getTime();break;case"resolution":i=r.resolution?parseInt(r.resolution.replace(/[^\d]/g,"")||"0"):0,a=s.resolution?parseInt(s.resolution.replace(/[^\d]/g,"")||"0"):0;break;default:return 0}return"asc"===l?i-a:a-i}):e}function eN(e){return Object.values(e).some(e=>!0===e)}function ej(e,t,l){return t&&eN(l)?e.filter(e=>{let n="torrent"in e?e.torrent:e;if(!(null==n?void 0:n.infoHash)||!t[n.infoHash])return!0;let i=t[n.infoHash];return(!l.multiSubs||!!ef(i))&&(!l.videoHevc||!!eg("hevc",i))&&(!l.videoAvc||!!eg("avc",i))&&(!l.videoAv1||!!eg("av1",i))&&(!l.audioAc3||!!ey("ac3",i))&&(!l.audioEac3||!!ey("eac3",i))&&(!l.audioAac||!!ey("aac",i))&&(!l.audioDts||!!ey("dts",i))&&(!l.audioFlac||!!ey("flac",i))&&(!l.audioOpus||!!ey("opus",i))&&(!l.dubbed||!!ex(i)||!!eh(i))&&!0}):e}function eS(){let e,t,l=(0,i.c)(7),[n,a]=(0,S.useState)("seeders"),[r,s]=(0,S.useState)("desc");l[0]!==r||l[1]!==n?(e=e=>{ev(e,n,r,a,s)},l[0]=r,l[1]=n,l[2]=e):e=l[2];let o=e;return l[3]!==o||l[4]!==r||l[5]!==n?(t={sortField:n,sortDirection:r,handleSortChange:o},l[3]=o,l[4]=r,l[5]=n,l[6]=t):t=l[6],t}function eE(){let e,t,l,n,a=(0,i.c)(7);a[0]===Symbol.for("react.memo_cache_sentinel")?(e={multiSubs:!1,dubbed:!1,videoAvc:!1,videoHevc:!1,videoAv1:!1,audioOpus:!1,audioFlac:!1,audioDts:!1,audioAac:!1,audioEac3:!1,audioAc3:!1},a[0]=e):e=a[0];let[r,s]=(0,S.useState)(e);a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(e,t)=>{"boolean"==typeof t&&s(l=>({...l,[e]:t}))},a[1]=t):t=a[1];let o=t;a[2]!==r?(l=eN(r),a[2]=r,a[3]=l):l=a[3];let d=l;return a[4]!==r||a[5]!==d?(n={filters:r,handleFilterChange:o,isAnyFilterActive:d},a[4]=r,a[5]=d,a[6]=n):n=a[6],n}let ew=e=>{let t,l,a,r,s,o,d,c,u,m,p,v,f,x,g,y,b,N,j,S,E,w,A,T,C,I,D,k,L,M,O,P,F,z,B,K,U,G,q,H,V,W,Y,Q,$,X,Z,J,ee,et,el,en,ei,ea,er,es,eu,ev,ef,eh,ex,eg,ey,eb=(0,i.c)(149),{resultCount:ej,sortField:eS,sortDirection:eE,filters:ew,onSortChange:eA,onFilterChange:eT}=e;if(eb[0]!==ew||eb[1]!==ej){let e=eN(ew);d="flex items-center justify-between gap-4",eb[10]!==ej?(c=(0,n.jsxs)("p",{className:"text-sm text-[--muted] flex-none",children:[ej," results"]}),eb[10]=ej,eb[11]=c):c=eb[11],o="flex items-center gap-1 flex-wrap",l=ed.A,t=h.$n,r="xs",s="gray-basic",a=ep(e),eb[0]=ew,eb[1]=ej,eb[2]=t,eb[3]=l,eb[4]=a,eb[5]=r,eb[6]=s,eb[7]=o,eb[8]=d,eb[9]=c}else t=eb[2],l=eb[3],a=eb[4],r=eb[5],s=eb[6],o=eb[7],d=eb[8],c=eb[9];return eb[12]!==a?(u=(0,n.jsx)(n.Fragment,{children:a}),eb[12]=a,eb[13]=u):u=eb[13],eb[14]!==t||eb[15]!==r||eb[16]!==s||eb[17]!==u?(m=(0,n.jsx)(t,{size:r,intent:s,leftIcon:u,children:"Filters"}),eb[14]=t,eb[15]=r,eb[16]=s,eb[17]=u,eb[18]=m):m=eb[18],eb[19]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)("p",{className:"text-xs text-[--muted] flex-none pb-2",children:"Filters are based on torrent names and can miss some results."}),eb[19]=p):p=eb[19],eb[20]===Symbol.for("react.memo_cache_sentinel")?(v=(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(R.A1T,{className:"text-lg text-[--blue]"})," Multi Subs"]}),eb[20]=v):v=eb[20],eb[21]!==eT?(f=e=>eT("multiSubs",e),eb[21]=eT,eb[22]=f):f=eb[22],eb[23]!==ew.multiSubs||eb[24]!==f?(x=(0,n.jsx)(eo.Sc,{label:v,value:ew.multiSubs,onValueChange:f}),eb[23]=ew.multiSubs,eb[24]=f,eb[25]=x):x=eb[25],eb[26]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(_.MlR,{className:"text-lg text-[--red]"})," Dubbed"]}),eb[26]=g):g=eb[26],eb[27]!==eT?(y=e=>eT("dubbed",e),eb[27]=eT,eb[28]=y):y=eb[28],eb[29]!==ew.dubbed||eb[30]!==y?(b=(0,n.jsx)(eo.Sc,{label:g,value:ew.dubbed,onValueChange:y}),eb[29]=ew.dubbed,eb[30]=y,eb[31]=b):b=eb[31],eb[32]===Symbol.for("react.memo_cache_sentinel")?(N=(0,n.jsx)(ec.w,{className:"!my-2"}),eb[32]=N):N=eb[32],eb[33]===Symbol.for("react.memo_cache_sentinel")?(j=(0,n.jsx)("div",{className:"flex items-center gap-1",children:"HEVC/H.265"}),eb[33]=j):j=eb[33],eb[34]!==eT?(S=e=>eT("videoHevc",e),eb[34]=eT,eb[35]=S):S=eb[35],eb[36]!==ew.videoHevc||eb[37]!==S?(E=(0,n.jsx)(eo.Sc,{label:j,value:ew.videoHevc,onValueChange:S,size:"sm"}),eb[36]=ew.videoHevc,eb[37]=S,eb[38]=E):E=eb[38],eb[39]===Symbol.for("react.memo_cache_sentinel")?(w=(0,n.jsx)("div",{className:"flex items-center gap-1",children:"AV1"}),eb[39]=w):w=eb[39],eb[40]!==eT?(A=e=>eT("videoAv1",e),eb[40]=eT,eb[41]=A):A=eb[41],eb[42]!==ew.videoAv1||eb[43]!==A?(T=(0,n.jsx)(eo.Sc,{label:w,value:ew.videoAv1,onValueChange:A,size:"sm"}),eb[42]=ew.videoAv1,eb[43]=A,eb[44]=T):T=eb[44],eb[45]===Symbol.for("react.memo_cache_sentinel")?(C=(0,n.jsx)("div",{className:"flex items-center gap-1",children:"AAC"}),eb[45]=C):C=eb[45],eb[46]!==eT?(I=e=>eT("audioAac",e),eb[46]=eT,eb[47]=I):I=eb[47],eb[48]!==ew.audioAac||eb[49]!==I?(D=(0,n.jsx)(eo.Sc,{label:C,value:ew.audioAac,onValueChange:I,size:"sm"}),eb[48]=ew.audioAac,eb[49]=I,eb[50]=D):D=eb[50],eb[51]===Symbol.for("react.memo_cache_sentinel")?(k=(0,n.jsx)("div",{className:"flex items-center gap-1",children:"AC3/AC-3"}),eb[51]=k):k=eb[51],eb[52]!==eT?(L=e=>eT("audioAc3",e),eb[52]=eT,eb[53]=L):L=eb[53],eb[54]!==ew.audioAc3||eb[55]!==L?(M=(0,n.jsx)(eo.Sc,{label:k,value:ew.audioAc3,onValueChange:L,size:"sm"}),eb[54]=ew.audioAc3,eb[55]=L,eb[56]=M):M=eb[56],eb[57]===Symbol.for("react.memo_cache_sentinel")?(O=(0,n.jsx)("div",{className:"flex items-center gap-1",children:"DTS/DCA"}),eb[57]=O):O=eb[57],eb[58]!==eT?(P=e=>eT("audioDts",e),eb[58]=eT,eb[59]=P):P=eb[59],eb[60]!==ew.audioDts||eb[61]!==P?(F=(0,n.jsx)(eo.Sc,{label:O,value:ew.audioDts,onValueChange:P,size:"sm"}),eb[60]=ew.audioDts,eb[61]=P,eb[62]=F):F=eb[62],eb[63]===Symbol.for("react.memo_cache_sentinel")?(z=(0,n.jsx)("div",{className:"flex items-center gap-1",children:"EAC3"}),eb[63]=z):z=eb[63],eb[64]!==eT?(B=e=>eT("audioEac3",e),eb[64]=eT,eb[65]=B):B=eb[65],eb[66]!==ew.audioEac3||eb[67]!==B?(K=(0,n.jsx)(eo.Sc,{label:z,value:ew.audioEac3,onValueChange:B,size:"sm"}),eb[66]=ew.audioEac3,eb[67]=B,eb[68]=K):K=eb[68],eb[69]===Symbol.for("react.memo_cache_sentinel")?(U=(0,n.jsx)("div",{className:"flex items-center gap-1",children:"Opus/Vorbis"}),eb[69]=U):U=eb[69],eb[70]!==eT?(G=e=>eT("audioOpus",e),eb[70]=eT,eb[71]=G):G=eb[71],eb[72]!==ew.audioOpus||eb[73]!==G?(q=(0,n.jsx)(eo.Sc,{label:U,value:ew.audioOpus,onValueChange:G,size:"sm"}),eb[72]=ew.audioOpus,eb[73]=G,eb[74]=q):q=eb[74],eb[75]===Symbol.for("react.memo_cache_sentinel")?(H=(0,n.jsx)("div",{className:"flex items-center gap-1",children:"FLAC/ALAC"}),eb[75]=H):H=eb[75],eb[76]!==eT?(V=e=>eT("audioFlac",e),eb[76]=eT,eb[77]=V):V=eb[77],eb[78]!==ew.audioFlac||eb[79]!==V?(W=(0,n.jsx)(eo.Sc,{label:H,value:ew.audioFlac,onValueChange:V,size:"sm"}),eb[78]=ew.audioFlac,eb[79]=V,eb[80]=W):W=eb[80],eb[81]!==E||eb[82]!==T||eb[83]!==D||eb[84]!==M||eb[85]!==F||eb[86]!==K||eb[87]!==q||eb[88]!==W?(Y=(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[E,T,D,M,F,K,q,W]}),eb[81]=E,eb[82]=T,eb[83]=D,eb[84]=M,eb[85]=F,eb[86]=K,eb[87]=q,eb[88]=W,eb[89]=Y):Y=eb[89],eb[90]!==x||eb[91]!==b||eb[92]!==Y?(Q=(0,n.jsxs)("div",{className:"space-y-1",children:[x,b,N,Y]}),eb[90]=x,eb[91]=b,eb[92]=Y,eb[93]=Q):Q=eb[93],eb[94]!==l||eb[95]!==Q||eb[96]!==m?($=(0,n.jsxs)(l,{trigger:m,children:[p,Q]}),eb[94]=l,eb[95]=Q,eb[96]=m,eb[97]=$):$=eb[97],eb[98]!==eE||eb[99]!==eS?(X=em(eS,"seeders",eE),eb[98]=eE,eb[99]=eS,eb[100]=X):X=eb[100],eb[101]!==X?(Z=(0,n.jsx)(n.Fragment,{children:X}),eb[101]=X,eb[102]=Z):Z=eb[102],eb[103]!==eA?(J=()=>eA("seeders"),eb[103]=eA,eb[104]=J):J=eb[104],eb[105]!==Z||eb[106]!==J?(ee=(0,n.jsx)(h.$n,{size:"xs",intent:"gray-basic",leftIcon:Z,onClick:J,children:"Seeders"}),eb[105]=Z,eb[106]=J,eb[107]=ee):ee=eb[107],eb[108]!==eE||eb[109]!==eS?(et=em(eS,"size",eE),eb[108]=eE,eb[109]=eS,eb[110]=et):et=eb[110],eb[111]!==et?(el=(0,n.jsx)(n.Fragment,{children:et}),eb[111]=et,eb[112]=el):el=eb[112],eb[113]!==eA?(en=()=>eA("size"),eb[113]=eA,eb[114]=en):en=eb[114],eb[115]!==el||eb[116]!==en?(ei=(0,n.jsx)(h.$n,{size:"xs",intent:"gray-basic",leftIcon:el,onClick:en,children:"Size"}),eb[115]=el,eb[116]=en,eb[117]=ei):ei=eb[117],eb[118]!==eE||eb[119]!==eS?(ea=em(eS,"date",eE),eb[118]=eE,eb[119]=eS,eb[120]=ea):ea=eb[120],eb[121]!==ea?(er=(0,n.jsx)(n.Fragment,{children:ea}),eb[121]=ea,eb[122]=er):er=eb[122],eb[123]!==eA?(es=()=>eA("date"),eb[123]=eA,eb[124]=es):es=eb[124],eb[125]!==er||eb[126]!==es?(eu=(0,n.jsx)(h.$n,{size:"xs",intent:"gray-basic",leftIcon:er,onClick:es,children:"Date"}),eb[125]=er,eb[126]=es,eb[127]=eu):eu=eb[127],eb[128]!==eE||eb[129]!==eS?(ev=em(eS,"resolution",eE),eb[128]=eE,eb[129]=eS,eb[130]=ev):ev=eb[130],eb[131]!==ev?(ef=(0,n.jsx)(n.Fragment,{children:ev}),eb[131]=ev,eb[132]=ef):ef=eb[132],eb[133]!==eA?(eh=()=>eA("resolution"),eb[133]=eA,eb[134]=eh):eh=eb[134],eb[135]!==ef||eb[136]!==eh?(ex=(0,n.jsx)(h.$n,{size:"xs",intent:"gray-basic",leftIcon:ef,onClick:eh,children:"Resolution"}),eb[135]=ef,eb[136]=eh,eb[137]=ex):ex=eb[137],eb[138]!==o||eb[139]!==$||eb[140]!==ee||eb[141]!==ei||eb[142]!==eu||eb[143]!==ex?(eg=(0,n.jsxs)("div",{className:o,children:[$,ee,ei,eu,ex]}),eb[138]=o,eb[139]=$,eb[140]=ee,eb[141]=ei,eb[142]=eu,eb[143]=ex,eb[144]=eg):eg=eb[144],eb[145]!==d||eb[146]!==c||eb[147]!==eg?(ey=(0,n.jsxs)("div",{className:d,children:[c,eg]}),eb[145]=d,eb[146]=c,eb[147]=eg,eb[148]=ey):ey=eb[148],ey};var eA=l(78106);function eT(e){let t,l,a,r,s,o,d,c,u=(0,i.c)(14);if(u[0]!==e){let{listClass:n,className:i,children:r,...s}=e;l=i,t=r,a=s,u[0]=e,u[1]=t,u[2]=l,u[3]=a}else t=u[1],l=u[2],a=u[3];return u[4]!==l?(r=(0,C.cn)("h-[calc(100dvh_-_25rem)] min-h-52 relative border rounded-[--radius]",l),u[4]=l,u[5]=r):r=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("div",{className:"z-[5] absolute bottom-0 w-full h-8 bg-gradient-to-t from-[--background] to-transparent"}),o=(0,n.jsx)("div",{className:"z-[5] absolute top-0 w-full h-8 bg-gradient-to-b from-[--background] to-transparent"}),u[6]=s,u[7]=o):(s=u[6],o=u[7]),u[8]!==t?(d=(0,n.jsx)("div",{className:"space-y-2 p-6",children:t}),u[8]=t,u[9]=d):d=u[9],u[10]!==a||u[11]!==r||u[12]!==d?(c=(0,n.jsxs)(g.F,{className:r,...a,children:[s,o,d]}),u[10]=a,u[11]=r,u[12]=d,u[13]=c):c=u[13],c}var eC=l(77717);let eI=S.memo(e=>{let t,l,a,r,s,o,d,c,u,m,p=(0,i.c)(47),{entry:v,previews:f,isLoading:h,selectedTorrents:x,onToggleTorrent:g,debridInstantAvailability:y,type:b,torrentMetadata:N}=e,{sortField:j,sortDirection:S,handleSortChange:E}=eS(),{filters:w,handleFilterChange:A}=eE();if(h){let e;return p[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(eC.E,{className:"h-[96px]"}),(0,n.jsx)(eC.E,{className:"h-[96px]"}),(0,n.jsx)(eC.E,{className:"h-[96px]"}),(0,n.jsx)(eC.E,{className:"h-[96px]"})]}),p[0]=e):e=p[0],e}if(!h&&!(null==f?void 0:f.length)){let e;return p[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(eA.D,{title:"Nothing found"}),p[1]=e):e=p[1],e}if(p[2]!==y||p[3]!==v||p[4]!==w||p[5]!==A||p[6]!==E||p[7]!==g||p[8]!==f||p[9]!==x||p[10]!==S||p[11]!==j||p[12]!==N||p[13]!==b){let e,i=eb(ej(f,N,w),j,S);s="space-y-2",o=!0;let c=(null==i?void 0:i.length)||0;p[21]!==w||p[22]!==A||p[23]!==E||p[24]!==S||p[25]!==j||p[26]!==c?(d=(0,n.jsx)(ew,{resultCount:c,sortField:j,sortDirection:S,filters:w,onSortChange:E,onFilterChange:A}),p[21]=w,p[22]=A,p[23]=E,p[24]=S,p[25]=j,p[26]=c,p[27]=d):d=p[27],l=eT,r="h-[calc(100dvh_-_25rem)] bg-gray-950/60",t=en,p[28]!==y||p[29]!==v||p[30]!==g||p[31]!==x||p[32]!==N||p[33]!==b?(e=e=>{var t;return e.torrent?(0,n.jsx)(ei,{torrent:e.torrent,media:v.media,episode:e.episode,metadata:null==N||null==(t=N[e.torrent.infoHash])?void 0:t.metadata,debridCached:("download"===b||"debridstream-select"===b||"debridstream-select-file"===b)&&!!e.torrent.infoHash&&!!y[e.torrent.infoHash],isSelected:-1!==x.findIndex(t=>t.link===e.torrent.link),onClick:()=>g(e.torrent)},e.torrent.link):null},p[28]=y,p[29]=v,p[30]=g,p[31]=x,p[32]=N,p[33]=b,p[34]=e):e=p[34],a=i.filter(Boolean).map(e),p[2]=y,p[3]=v,p[4]=w,p[5]=A,p[6]=E,p[7]=g,p[8]=f,p[9]=x,p[10]=S,p[11]=j,p[12]=N,p[13]=b,p[14]=t,p[15]=l,p[16]=a,p[17]=r,p[18]=s,p[19]=o,p[20]=d}else t=p[14],l=p[15],a=p[16],r=p[17],s=p[18],o=p[19],d=p[20];return p[35]!==t||p[36]!==a?(c=(0,n.jsx)(t,{children:a}),p[35]=t,p[36]=a,p[37]=c):c=p[37],p[38]!==l||p[39]!==r||p[40]!==c?(u=(0,n.jsx)(l,{className:r,children:c}),p[38]=l,p[39]=r,p[40]=c,p[41]=u):u=p[41],p[42]!==s||p[43]!==o||p[44]!==d||p[45]!==u?(m=(0,n.jsxs)("div",{className:s,"data-torrent-preview-list":o,children:[d,u]}),p[42]=s,p[43]=o,p[44]=d,p[45]=u,p[46]=m):m=p[46],m});var eD=l(99288);let ek=(0,S.memo)(e=>{let t,l=(0,i.c)(16),{entry:a,torrents:r,selectedTorrents:s,isFetching:o,isLoading:d,onToggleTorrent:c,debridInstantAvailability:u,animeMetadata:m,torrentMetadata:p,type:v}=e,{sortField:f,sortDirection:h,handleSortChange:x}=eS(),{filters:g,handleFilterChange:y}=eE();if(l[0]!==m||l[1]!==u||l[2]!==(null==a?void 0:a.media)||l[3]!==g||l[4]!==y||l[5]!==x||l[6]!==o||l[7]!==d||l[8]!==c||l[9]!==s||l[10]!==h||l[11]!==f||l[12]!==p||l[13]!==r||l[14]!==v){let e=eb(ej(r,p,g),f,h);t=(0,n.jsx)(n.Fragment,{children:d||o?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(eC.E,{className:"h-[96px]"}),(0,n.jsx)(eC.E,{className:"h-[96px]"}),(0,n.jsx)(eC.E,{className:"h-[96px]"}),(0,n.jsx)(eC.E,{className:"h-[96px]"})]}):(null==r?void 0:r.length)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ew,{resultCount:(null==e?void 0:e.length)||0,sortField:f,sortDirection:h,filters:g,onSortChange:x,onFilterChange:y}),(0,n.jsx)(eT,{className:"h-[calc(100dvh_-_25rem)]",children:(0,n.jsx)(en,{children:e.map(e=>{var t,l,i,r,o,d,f,h,x,g,y,b,N,j,S,E,w,A,T,C,I,D,k;let _,L=null==p?void 0:p[e.infoHash],R=null==L||null==(l=L.metadata)||null==(t=l.episode_number)?void 0:t[0],M=R?parseInt(R):void 0,O=e.releaseGroup||(null==L||null==(i=L.metadata)?void 0:i.release_group)||"",P=null!=(A=null!=(w=e.episodeNumber)?w:M)?A:-1;if(P>((null==a||null==(r=a.media)?void 0:r.episodes)||((null==a||null==(d=a.media)||null==(o=d.nextAiringEpisode)?void 0:o.episode)?null==a||null==(h=a.media)||null==(f=h.nextAiringEpisode)?void 0:f.episode:0)))for(let e in null==m?void 0:m.episodes){let t=null==m||null==(T=m.episodes)?void 0:T[e];(null==t?void 0:t.absoluteEpisodeNumber)===P&&(P=t.episodeNumber)}let F=null!=(D=e.isBatch)?D:!(0,eD.Do)(null==a?void 0:a.media)&&(null!=(C=null==L||null==(g=L.metadata)||null==(x=g.episode_number)?void 0:x.length)?C:0)>1||(null!=(I=null==L||null==(b=L.metadata)||null==(y=b.episode_number)?void 0:y.length)?I:0)==0;if(m&&(null!=P?P:-1)>=0){let e=null==(k=m.episodes)?void 0:k[P.toString()];e&&(_=e.image)}let z=9999;return p&&e.infoHash&&L&&(z=L.distance),z>20&&(_=void 0),(0,n.jsx)(ei,{torrent:e,metadata:null==p||null==(N=p[e.infoHash])?void 0:N.metadata,media:null==a?void 0:a.media,episode:void 0,debridCached:("download"===v||"debridstream-select"===v||"debridstream-select-file"===v)&&!!e.infoHash&&!!u[e.infoHash],isSelected:-1!==s.findIndex(t=>t.link===e.link),onClick:()=>c(e),overrideProps:{releaseGroup:O,displayName:(null!=P?P:-1)>=0?"Episode ".concat(P):"",isBatch:!!e.isBestRelease||F,image:z<=20?_:void 0,fallbackImage:(null==a||null==(S=a.media)||null==(j=S.coverImage)?void 0:j.large)||(null==a||null==(E=a.media)?void 0:E.bannerImage),confirmed:0===z}},e.link)})})})]}):(0,n.jsx)("div",{children:(0,n.jsx)(eA.D,{title:"Nothing found"})})}),l[0]=m,l[1]=u,l[2]=null==a?void 0:a.media,l[3]=g,l[4]=y,l[5]=x,l[6]=o,l[7]=d,l[8]=c,l[9]=s,l[10]=h,l[11]=f,l[12]=p,l[13]=r,l[14]=v,l[15]=t}else t=l[15];return t});var e_=l(17946),eL=l(7675),eR=l(74889),eM=l(14370);let eO=function(e){return e.SMART="smart",e.SIMPLE="simple",e}({});var eP=l(90355),eF=l(67487),ez=l(82449),eB=l(5249),eK=l(50558),eU=l(81036),eG=l(76136),eq=l(30033),eH=l(60695),eV=l(53712),eW=l(5883),eY=l(47947),eQ=l(42500),e$=l(75780);let eX=(0,eQ.eU)([]);function eZ(e){var t,l,a,s,d,c,v,x,g,y,E,w,T,I,D,k,_,R,M,O,P,F,z,B,K,U,G,q,H,V,W,Y,Q,$,X,Z,J,ee,et,el,en,ei,ea,er,es,eo,ed,ec,eu,em,ep,ev,ef,eh,ex,eg,ey,eb,eN,ej,eS,eE,ew,eT,eD,ez,eQ,eZ,e2,e3,e4,e5,e6,e7,e9,e8,te,tt,tl,tn,ti,ta,tr,ts,to,td,tc,tu,tm,tp;let tv,tf,th,tx,tg,ty,tb,tN,tj,tS,tE,tw,tA,tT,tC,tI,tD,tk,t_,tL,tR,tM,tO,tP,tF,tz,tB,tK,tU,tG,tq,tH,tV,tW,tY=(0,i.c)(132),{type:tQ,entry:t$}=e;tv=t$.downloadInfo;let tX=(0,o.v1)();tY[0]!==(null==tv?void 0:tv.canBatch)||tY[1]!==(null==tv||null==(t=tv.episodesToDownload)?void 0:t.length)||tY[2]!==(null==(a=t$.media)||null==(l=a.endDate)?void 0:l.day)||tY[3]!==(null==(d=t$.media)||null==(s=d.endDate)?void 0:s.month)||tY[4]!==(null==(v=t$.media)||null==(c=v.endDate)?void 0:c.year)||tY[5]!==tQ?(tf=()=>{var e,t,l,n,i,a,r,s,o,d,c;let u=(null==(t=t$.media)||null==(e=t.endDate)?void 0:e.year)?new Date(null==(n=t$.media)||null==(l=n.endDate)?void 0:l.year,(null==(a=t$.media)||null==(i=a.endDate)?void 0:i.month)?(null==(s=t$.media)||null==(r=s.endDate)?void 0:r.month)-1:0,(null==(d=t$.media)||null==(o=d.endDate)?void 0:o.day)||0):null,m=new Date,p=!0;return"download"===tQ?(u&&(0,eW.e)(m,6)<u&&(p=!1),!!(null==tv?void 0:tv.canBatch)&&!!(null==tv||null==(c=tv.episodesToDownload)?void 0:c.length)&&p):(u&&(0,eY.a)(m,1)<u&&(p=!1),!!(null==tv?void 0:tv.canBatch)&&p)},tY[0]=null==tv?void 0:tv.canBatch,tY[1]=null==tv||null==(H=tv.episodesToDownload)?void 0:H.length,tY[2]=null==(W=t$.media)||null==(V=W.endDate)?void 0:V.day,tY[3]=null==(Q=t$.media)||null==(Y=Q.endDate)?void 0:Y.month,tY[4]=null==(X=t$.media)||null==($=X.endDate)?void 0:$.year,tY[5]=tQ,tY[6]=tf):tf=tY[6],null==tv||tv.canBatch,null==tv||null==(x=tv.episodesToDownload)||x.length,null==(g=t$.media)||g.endDate;let tZ=tf();null==tv||null==(y=tv.episodesToDownload)||y.length,th=!!(null==tv||null==(E=tv.episodesToDownload)?void 0:E.length);let[tJ,t0]=S.useState((null==(w=t$.media)?void 0:w.isAdult)===!0);tY[7]!==tv||tY[8]!==t$||tY[9]!==th||tY[10]!==tJ||tY[11]!==tZ||tY[12]!==tQ?(tx={isAdult:tJ,hasEpisodesToDownload:th,shouldLookForBatches:tZ,downloadInfo:tv,entry:t$,type:tQ},tY[7]=tv,tY[8]=t$,tY[9]=th,tY[10]=tJ,tY[11]=tZ,tY[12]=tQ,tY[13]=tx):tx=tY[13];let{warnings:t1,hasOneWarning:t2,selectedProviderExtension:t3,selectedProviderExtensionId:t4,setSelectedProviderExtensionId:t5,providerExtensions:t6,globalFilter:t7,setGlobalFilter:t9,selectedTorrents:t8,setSelectedTorrents:le,searchType:lt,setSearchType:ll,smartSearchBatch:ln,setSmartSearchBatch:li,smartSearchEpisode:la,setSmartSearchEpisode:lr,smartSearchResolution:ls,setSmartSearchResolution:lo,smartSearchBest:ld,setSmartSearchBest:lc,data:lu,isLoading:lm,isFetching:lp}=function(e){var t,l,n,a,r,s,d,c,u,p,v,f,h,x;let{hasEpisodesToDownload:g,shouldLookForBatches:y,downloadInfo:N,entry:E,isAdult:w}=e,A=(0,o.v1)(),{data:T}=(0,e_.N2)(),C=S.useMemo(()=>null==T?void 0:T.find(e=>{var t,l;return e.id===(null==A||null==(l=A.settings)||null==(t=l.library)?void 0:t.torrentProvider)}),[null==A||null==(l=A.settings)||null==(t=l.library)?void 0:t.torrentProvider,T]),[I,D]=S.useState((null==C?void 0:C.id)||"none");S.useLayoutEffect(()=>{D((null==C?void 0:C.id)||"none")},[C]);let k=S.useMemo(()=>null==T?void 0:T.find(e=>e.id===I),[I,T]),[_,L]=(0,j.fp)(m.Io),[R,M]=S.useState(w?eO.SIMPLE:eO.SMART),[O,P,F]=(0,eM.H)(g?"":(null==E||null==(a=E.media)||null==(n=a.title)?void 0:n.romaji)||"",500),[z,B]=(0,j.fp)(eX),[K,U]=S.useState(y||!1),[G,q]=S.useState(""),[H,V]=S.useState(!1),[W,Y,Q]=(0,eM.H)((null==N||null==(d=N.episodesToDownload)||null==(s=d[0])||null==(r=s.episode)?void 0:r.episodeNumber)||1,500),$={noProvider:!k,extensionDoesNotSupportAdult:w&&k&&!(null==k||null==(c=k.settings)?void 0:c.supportsAdult),extensionDoesNotSupportSmartSearch:R===eO.SMART&&k&&!(null==k||null==(u=k.settings)?void 0:u.canSmartSearch),extensionDoesNotSupportBestRelease:H&&k&&!(null==k||null==(v=k.settings)||null==(p=v.smartSearchFilters)?void 0:p.includes("bestReleases")),extensionDoesNotSupportBatchSearch:K&&k&&!(null==k||null==(h=k.settings)||null==(f=h.smartSearchFilters)?void 0:f.includes("batch"))};S.useLayoutEffect(()=>{var e;R===eO.SIMPLE&&(null==k||null==(e=k.settings)?void 0:e.canSmartSearch)&&M(eO.SMART)},[R&&$.extensionDoesNotSupportSmartSearch,null==k||null==(x=k.settings)?void 0:x.canSmartSearch,I]),S.useLayoutEffect(()=>{R===eO.SMART&&$.extensionDoesNotSupportSmartSearch&&M(eO.SIMPLE)},[$.extensionDoesNotSupportSmartSearch,I,R]),S.useLayoutEffect(()=>{H&&$.extensionDoesNotSupportBestRelease&&V(!1)},[$.extensionDoesNotSupportBestRelease,I,H]),S.useLayoutEffect(()=>{K&&$.extensionDoesNotSupportBatchSearch&&U(!1)},[$.extensionDoesNotSupportBatchSearch,I,K]),S.useEffect(()=>{console.log("globalFilter",O)},[O]),console.log("smartSearchResolution",G);let{data:X,isLoading:Z,isFetching:J}=function(e,t){let l,n,a,r=(0,i.c)(9);r[0]!==e?(l=JSON.stringify(e),r[0]=e,r[1]=l):l=r[1],r[2]!==l?(n=[eR.S.TORRENT_SEARCH.SearchTorrent.key,l],r[2]=l,r[3]=n):n=r[3];let s=0===e.episodeNumber?0:void 0;return r[4]!==t||r[5]!==n||r[6]!==s||r[7]!==e?(a={endpoint:eR.S.TORRENT_SEARCH.SearchTorrent.endpoint,method:eR.S.TORRENT_SEARCH.SearchTorrent.methods[0],data:e,queryKey:n,enabled:t,gcTime:s},r[4]=t,r[5]=n,r[6]=s,r[7]=e,r[8]=a):a=r[8],(0,eL.fl)(a)}({query:P.trim().toLowerCase(),episodeNumber:Y,batch:K,media:null==E?void 0:E.media,absoluteOffset:(null==N?void 0:N.absoluteOffset)||0,resolution:G,type:R,provider:null==k?void 0:k.id,bestRelease:R===eO.SMART&&H},(R!==eO.SIMPLE||0!==P.length)&&!$.noProvider&&!$.extensionDoesNotSupportAdult&&!$.extensionDoesNotSupportSmartSearch&&!$.extensionDoesNotSupportBestRelease&&!!T);return S.useLayoutEffect(()=>{void 0!==_&&(Q(_),(0,S.startTransition)(()=>{L(void 0)}))},[_]),S.useEffect(()=>{(0,b.v)("TORRENT SEARCH").info({warnings:$})},[$]),S.useEffect(()=>{(0,b.v)("TORRENT SEARCH").info({selectedProviderExtension:k})},[$]),S.useEffect(()=>{(0,b.v)("TORRENT SEARCH").info({globalFilter:O,searchType:R,smartSearchBatch:K,smartSearchEpisode:W,smartSearchResolution:G,smartSearchBest:H,debouncedSmartSearchEpisode:Y})},[O,R,K,W,G,H,Y]),{warnings:$,hasOneWarning:Object.values($).some(e=>e),providerExtensions:T,selectedProviderExtension:k,selectedProviderExtensionId:I,setSelectedProviderExtensionId:D,globalFilter:O,setGlobalFilter:F,selectedTorrents:z,setSelectedTorrents:B,searchType:R,setSearchType:M,smartSearchBatch:K,setSmartSearchBatch:U,smartSearchEpisode:W,setSmartSearchEpisode:Q,smartSearchResolution:G,setSmartSearchResolution:q,smartSearchBest:H,setSmartSearchBest:V,debouncedSmartSearchEpisode:Y,soughtEpisode:_,data:X,isLoading:Z,isFetching:J}}(tx);tY[14]!==le?(tg=()=>{le([])},tY[14]=le,tY[15]=tg):tg=tY[15],tY[16]===Symbol.for("react.memo_cache_sentinel")?(ty=[],tY[16]=ty):ty=tY[16],S.useEffect(tg,ty),tY[17]!==(null==(I=t$.media)||null==(T=I.title)?void 0:T.english)||tY[18]!==(null==(k=t$.media)||null==(D=k.title)?void 0:D.romaji)||tY[19]!==(null==(R=t$.media)||null==(_=R.title)?void 0:_.userPreferred)||tY[20]!==lt||tY[21]!==t9?(tb=()=>{if(lt===eO.SMART)t9("");else if(lt===eO.SIMPLE){var e,t,l,n,i,a;let r=(null==(t=t$.media)||null==(e=t.title)?void 0:e.romaji)||(null==(n=t$.media)||null==(l=n.title)?void 0:l.english)||(null==(a=t$.media)||null==(i=a.title)?void 0:i.userPreferred);t9((null==r?void 0:r.replaceAll(":","").replaceAll("-",""))||"")}},tY[17]=null==(J=t$.media)||null==(Z=J.title)?void 0:Z.english,tY[18]=null==(et=t$.media)||null==(ee=et.title)?void 0:ee.romaji,tY[19]=null==(en=t$.media)||null==(el=en.title)?void 0:el.userPreferred,tY[20]=lt,tY[21]=t9,tY[22]=tb):tb=tY[22];let lv=null==(M=t$.media)?void 0:M.title;tY[23]!==lt||tY[24]!==lv?(tN=[lt,lv],tY[23]=lt,tY[24]=lv,tY[25]=tN):tN=tY[25],S.useLayoutEffect(tb,tN),null==lu||lu.torrents,tY[26]!==(null==lu?void 0:lu.torrents)?(tS=null!=(ei=null==lu?void 0:lu.torrents)?ei:[],tY[26]=null==lu?void 0:lu.torrents,tY[27]=tS):tS=tY[27],tj=tS,tY[28]!==(null==lu?void 0:lu.previews)?(tE=()=>{var e;return null!=(e=null==lu?void 0:lu.previews)?e:[]},tY[28]=null==lu?void 0:lu.previews,tY[29]=tE):tE=tY[29],null==lu||lu.previews,tY[30]!==tE?(tw=tE(),tY[30]=tE,tY[31]=tw):tw=tY[31];let lf=tw;null==lu||lu.debridInstantAvailability,null==tX||null==(O=tX.debridSettings)||O.enabled,tY[32]!==(null==lu?void 0:lu.debridInstantAvailability)||tY[33]!==(null==tX||null==(P=tX.debridSettings)?void 0:P.enabled)?(tT=(null==tX||null==(ea=tX.debridSettings)?void 0:ea.enabled)&&null!=(es=null==lu?void 0:lu.debridInstantAvailability)?es:{},tY[32]=null==lu?void 0:lu.debridInstantAvailability,tY[33]=null==tX||null==(er=tX.debridSettings)?void 0:er.enabled,tY[34]=tT):tT=tY[34],tA=tT,tY[35]!==le||tY[36]!==tQ?(tC=e=>{"download"===tQ?le(t=>-1!==t.findIndex(t=>t.link===e.link)?t.filter(t=>t.link!==e.link):[...t,e]):le(t=>-1!==t.findIndex(t=>t.link===e.link)?[]:[e])},tY[35]=le,tY[36]=tQ,tY[37]=tC):tC=tY[37];let lh=tC,{torrentSearchStreamEpisode:lx}=(0,u.U)(),lg="download"!==tQ&&"xl:space-y-0 xl:grid xl:grid-cols-[35%,1fr] xl:gap-4";tY[38]!==lg?(tI=(0,C.cn)("space-y-4",lg),tY[38]=lg,tY[39]=tI):tI=tY[39],tY[40]!==lx||tY[41]!==tQ?(tD="download"!==tQ&&lx&&(0,n.jsxs)("div",{className:"hidden xl:block space-y-3","data-torrent-search-container-stream-episode":!0,children:[(0,n.jsx)("h4",{className:"!mb-4",children:"Select a torrent to stream"}),(0,n.jsx)(r.U,{image:(null==(eo=lx.episodeMetadata)?void 0:eo.image)||(null==(ed=lx.baseAnime)?void 0:ed.bannerImage)||(null==(eu=lx.baseAnime)||null==(ec=eu.coverImage)?void 0:ec.extraLarge),topTitle:lx.episodeTitle||(null==lx||null==(ep=lx.baseAnime)||null==(em=ep.title)?void 0:em.userPreferred),title:lx.displayTitle,isInvalid:lx.isInvalid,progressTotal:null==(ev=lx.baseAnime)?void 0:ev.episodes,progressNumber:lx.progressNumber,episodeNumber:lx.episodeNumber,length:null==(ef=lx.episodeMetadata)?void 0:ef.length,actionIcon:null,anime:{id:null==(eh=lx.baseAnime)?void 0:eh.id,image:null==(eg=lx.baseAnime)||null==(ex=eg.coverImage)?void 0:ex.large,title:null==(eb=lx.baseAnime)||null==(ey=eb.title)?void 0:ey.userPreferred}})]}),tY[40]=lx,tY[41]=tQ,tY[42]=tD):tD=tY[42];let ly=null!=(eN=null==t3?void 0:t3.id)?eN:N.xF.NONE;if(tY[43]===Symbol.for("react.memo_cache_sentinel")?(tk=(0,n.jsx)(L.mgw,{}),tY[43]=tk):tk=tY[43],tY[44]!==t6){let e;tY[46]===Symbol.for("react.memo_cache_sentinel")?(e={label:"None",value:N.xF.NONE},tY[46]=e):e=tY[46],t_=[...(null!=(ej=null==t6?void 0:t6.map(e0))?ej:[]).sort(eJ),e],tY[44]=t6,tY[45]=t_}else t_=tY[45];tY[47]!==t5||tY[48]!==ly||tY[49]!==t_?(tL=(0,n.jsx)("div",{className:"w-[200px]","data-torrent-search-container-param-container-provider-select-container":!0,children:(0,n.jsx)(eq.l,{name:"torrentProvider",value:ly,onValueChange:t5,leftIcon:tk,options:t_})}),tY[47]=t5,tY[48]=ly,tY[49]=t_,tY[50]=tL):tL=tY[50];let lb=(null==t3||null==(F=t3.settings)?void 0:F.canSmartSearch)?"Automatically search based on given parameters":"This provider does not support smart search",lN=lt===eO.SMART;tY[51]!==ll?(tR=e=>ll(e?eO.SMART:eO.SIMPLE),tY[51]=ll,tY[52]=tR):tR=tY[52];let lj=!(null==t3||null==(z=t3.settings)?void 0:z.canSmartSearch);return tY[53]!==lb||tY[54]!==lN||tY[55]!==tR||tY[56]!==lj?(tM=(0,n.jsx)("div",{className:"h-10 rounded-[--radius] px-2 flex items-center","data-torrent-search-container-param-container-smart-search-switch-container":!0,children:(0,n.jsx)(eH.d,{label:"Smart search",moreHelp:lb,value:lN,onValueChange:tR,disabled:lj,containerClass:"flex-row-reverse gap-1"})}),tY[53]=lb,tY[54]=lN,tY[55]=tR,tY[56]=lj,tY[57]=tM):tM=tY[57],tY[58]!==(null==(B=t$.media)?void 0:B.isAdult)||tY[59]!==tJ?(tO=(null==(eS=t$.media)?void 0:eS.isAdult)===!1&&(0,n.jsx)("div",{className:"h-10 rounded-[--radius] px-2 flex items-center","data-torrent-search-container-param-container-adult-switch-container":!0,children:(0,n.jsx)(eH.d,{label:"Adult",moreHelp:"If enabled, the adult content flag will be passed to the provider.",value:tJ,onValueChange:t0,containerClass:"flex-row-reverse gap-1"})}),tY[58]=null==(eE=t$.media)?void 0:eE.isAdult,tY[59]=tJ,tY[60]=tO):tO=tY[60],tY[61]!==tL||tY[62]!==tM||tY[63]!==tO?(tP=(0,n.jsxs)("div",{className:"flex flex-wrap gap-3 items-center w-full","data-torrent-search-main-params":!0,children:[tL,tM,tO]}),tY[61]=tL,tY[62]=tM,tY[63]=tO,tY[64]=tP):tP=tY[64],tY[65]!==(null==tv?void 0:tv.canBatch)||tY[66]!==(null==(K=t$.media)?void 0:K.format)||tY[67]!==(null==(G=t$.media)||null==(U=G.title)?void 0:U.romaji)||tY[68]!==t7||tY[69]!==t2||tY[70]!==lt||tY[71]!==(null==t3||null==(q=t3.settings)?void 0:q.smartSearchFilters)||tY[72]!==t4||tY[73]!==t9||tY[74]!==li||tY[75]!==lc||tY[76]!==lr||tY[77]!==lo||tY[78]!==ln||tY[79]!==ld||tY[80]!==la||tY[81]!==ls?(tF="none"!==t4&&""!==t4&&(0,n.jsxs)(n.Fragment,{children:[lt===eO.SMART&&(0,n.jsxs)(f.KZ,{className:"w-full","data-torrent-search-smart-search-container":!0,children:[(0,n.jsxs)("div",{"data-torrent-search-smart-search-provider-param-container":!0,className:(0,C.cn)("Sea-TorrentSearchContainer__providerParamContainer flex flex-col items-center flex-wrap justify-around gap-3 md:flex-row w-full border rounded-xl p-3",{hidden:!(null==t3||null==(eT=t3.settings)||null==(ew=eT.smartSearchFilters)?void 0:ew.includes("episodeNumber"))&&!(null==t3||null==(ez=t3.settings)||null==(eD=ez.smartSearchFilters)?void 0:eD.includes("resolution"))&&!(null==t3||null==(eZ=t3.settings)||null==(eQ=eZ.smartSearchFilters)?void 0:eQ.includes("batch"))&&!(null==t3||null==(e3=t3.settings)||null==(e2=e3.smartSearchFilters)?void 0:e2.includes("bestReleases"))&&!(null==t3||null==(e5=t3.settings)||null==(e4=e5.smartSearchFilters)?void 0:e4.includes("search"))}),children:[(null==t3||null==(e7=t3.settings)||null==(e6=e7.smartSearchFilters)?void 0:e6.includes("episodeNumber"))&&(0,n.jsx)(eG.Q,{"data-torrent-search-smart-search-episode-number-input":!0,label:"Episode number",value:la,disabled:(null==t$||null==(e9=t$.media)?void 0:e9.format)==="MOVIE"||ld,onValueChange:e=>{(0,S.startTransition)(()=>{lr(e)})},formatOptions:{useGrouping:!1},size:"sm",fieldClass:(0,C.cn)("flex flex-none w-fit md:justify-end gap-3 space-y-0",{"opacity-50 cursor-not-allowed pointer-events-none":ln||lt!=eO.SMART}),fieldLabelClass:(0,C.cn)("flex-none self-center font-normal !text-md sm:text-md lg:text-md"),className:"max-w-[4rem]"}),(null==t3||null==(te=t3.settings)||null==(e8=te.smartSearchFilters)?void 0:e8.includes("batch"))&&(0,n.jsx)(eH.d,{"data-torrent-search-smart-search-batch-switch":!0,label:"Batches",value:ln,onValueChange:li,disabled:ld||!(null==tv?void 0:tv.canBatch),fieldClass:(0,C.cn)("flex flex-none w-fit",{"opacity-50 cursor-not-allowed pointer-events-none":!(null==tv?void 0:tv.canBatch)||ld}),size:"sm",containerClass:"flex-row-reverse gap-1"}),(null==t3||null==(tl=t3.settings)||null==(tt=tl.smartSearchFilters)?void 0:tt.includes("resolution"))&&(0,n.jsx)(eq.l,{"data-torrent-search-smart-search-resolution-select":!0,label:"Resolution",value:ls||"-",onValueChange:e=>lo("-"!=e?e:""),options:[{value:"-",label:"Any"},{value:"1080",label:"1080p"},{value:"720",label:"720p"},{value:"540",label:"540p"},{value:"480",label:"480p"},{value:"2160",label:"2160p"}],disabled:ld||lt!=eO.SMART,size:"sm",fieldClass:(0,C.cn)("flex flex-none w-fit md:justify-center gap-3 space-y-0",{"opacity-50 cursor-not-allowed pointer-events-none":lt!=eO.SMART||ld}),fieldLabelClass:"flex-none self-center font-normal !text-md sm:text-md lg:text-md",className:"w-[6rem]"}),(null==t3||null==(ti=t3.settings)||null==(tn=ti.smartSearchFilters)?void 0:tn.includes("bestReleases"))&&(0,n.jsx)(eH.d,{"data-torrent-search-smart-search-best-releases-switch":!0,label:"Best releases",value:ld,onValueChange:lc,fieldClass:(0,C.cn)("flex flex-none w-fit",{"opacity-50 cursor-not-allowed pointer-events-none":!(null==tv?void 0:tv.canBatch)}),size:"sm",containerClass:"flex-row-reverse gap-1"})]}),!t2&&(null==t3||null==(tr=t3.settings)||null==(ta=tr.smartSearchFilters)?void 0:ta.includes("query"))&&(0,n.jsx)("div",{className:"py-1","data-torrent-search-smart-search-query-input-container":!0,children:(0,n.jsx)(eU.xd,{value:null!=t7?t7:"",onChange:e=>t9(e),placeholder:lt===eO.SMART?"Refine the title (".concat(null==(to=t$.media)||null==(ts=to.title)?void 0:ts.romaji,")"):"Search",fieldClass:"md:max-w-full w-full"})})]}),lt===eO.SIMPLE&&(0,n.jsx)(eV.k,{value:t7,onValueChange:t9,leftIcon:(0,n.jsx)(e$.CKj,{className:"text-lg"})})]}),tY[65]=null==tv?void 0:tv.canBatch,tY[66]=null==(td=t$.media)?void 0:td.format,tY[67]=null==(tu=t$.media)||null==(tc=tu.title)?void 0:tc.romaji,tY[68]=t7,tY[69]=t2,tY[70]=lt,tY[71]=null==t3||null==(tm=t3.settings)?void 0:tm.smartSearchFilters,tY[72]=t4,tY[73]=t9,tY[74]=li,tY[75]=lc,tY[76]=lr,tY[77]=lo,tY[78]=ln,tY[79]=ld,tY[80]=la,tY[81]=ls,tY[82]=tF):tF=tY[82],tY[83]!==t4||tY[84]!==t1?(tz="none"!==t4&&""!==t4&&(null==(tp=Object.keys(t1))?void 0:tp.map(e=>t1[e]?(0,n.jsx)(eK.F,{"data-torrent-search-container-warning":!0,intent:"warning",description:(0,n.jsxs)(n.Fragment,{children:["extensionDoesNotSupportAdult"===e&&"This provider does not support adult content","extensionDoesNotSupportSmartSearch"===e&&"This provider does not support smart search","extensionDoesNotSupportBestRelease"===e&&"This provider does not support best release search"]})},e):null)),tY[83]=t4,tY[84]=t1,tY[85]=tz):tz=tY[85],tY[86]!==tD||tY[87]!==tP||tY[88]!==tF||tY[89]!==tz?(tB=(0,n.jsxs)("div",{className:"space-y-3","data-torrent-search-container-param-container":!0,children:[tD,tP,tF,tz]}),tY[86]=tD,tY[87]=tP,tY[88]=tF,tY[89]=tz,tY[90]=tB):tB=tY[90],tY[91]!==(null==lu?void 0:lu.animeMetadata)||tY[92]!==(null==lu?void 0:lu.torrentMetadata)||tY[93]!==tA||tY[94]!==t$||tY[95]!==t7||tY[96]!==lh||tY[97]!==t2||tY[98]!==lp||tY[99]!==lm||tY[100]!==lf||tY[101]!==t6||tY[102]!==lt||tY[103]!==t4||tY[104]!==t8||tY[105]!==t9||tY[106]!==tj||tY[107]!==tQ?(tK="none"!==t4&&""!==t4?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"space-y-3","data-torrent-search-container-torrents-container":!0,children:[("torrentstream-select"===tQ||"torrentstream-select-file"===tQ||"debridstream-select-file"===tQ||"debridstream-select"===tQ)&&(0,n.jsx)(e1,{type:tQ,entry:t$,debridInstantAvailability:tA}),t2&&(0,n.jsx)(eA.D,{}),lt===eO.SMART&&!t2&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(eI,{entry:t$,previews:lf,isLoading:lm||lp,selectedTorrents:t8,onToggleTorrent:lh,debridInstantAvailability:tA,type:tQ,torrentMetadata:null==lu?void 0:lu.torrentMetadata})}),lt!==eO.SMART&&!t2&&!(null==lf?void 0:lf.length)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ek,{entry:t$,type:tQ,torrents:tj,globalFilter:t7,setGlobalFilter:t9,smartSearch:!1,supportsQuery:!0,isLoading:lm,isFetching:lp,selectedTorrents:t8,onToggleTorrent:lh,debridInstantAvailability:tA,animeMetadata:null==lu?void 0:lu.animeMetadata,torrentMetadata:null==lu?void 0:lu.torrentMetadata})})]})}):t6?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(eA.D,{title:"No extension selected"}),!t6.length&&(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(eB.i,{href:"/extensions",children:(0,n.jsx)(h.$n,{intent:"white",leftIcon:(0,n.jsx)(L._rf,{}),children:"Add extensions"})})})]}):(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(eC.E,{className:"h-[96px]"}),(0,n.jsx)(eC.E,{className:"h-[96px]"}),(0,n.jsx)(eC.E,{className:"h-[96px]"}),(0,n.jsx)(eC.E,{className:"h-[96px]"})]}),tY[91]=null==lu?void 0:lu.animeMetadata,tY[92]=null==lu?void 0:lu.torrentMetadata,tY[93]=tA,tY[94]=t$,tY[95]=t7,tY[96]=lh,tY[97]=t2,tY[98]=lp,tY[99]=lm,tY[100]=lf,tY[101]=t6,tY[102]=lt,tY[103]=t4,tY[104]=t8,tY[105]=t9,tY[106]=tj,tY[107]=tQ,tY[108]=tK):tK=tY[108],tY[109]!==tI||tY[110]!==tB||tY[111]!==tK?(tU=(0,n.jsxs)(f.KZ,{className:tI,"data-torrent-search-container":!0,children:[tB,tK]}),tY[109]=tI,tY[110]=tB,tY[111]=tK,tY[112]=tU):tU=tY[112],tY[113]!==t$||tY[114]!==lh||tY[115]!==tQ?(tG="download"===tQ&&(0,n.jsx)(eF.W,{onToggleTorrent:lh,media:t$.media,entry:t$}),tY[113]=t$,tY[114]=lh,tY[115]=tQ,tY[116]=tG):tG=tY[116],tY[117]!==t$||tY[118]!==tQ?(tq="download"===tQ&&(0,n.jsx)(eP.h3,{entry:t$}),tY[117]=t$,tY[118]=tQ,tY[119]=tq):tq=tY[119],tY[120]!==t$||tY[121]!==tQ?(tH="torrentstream-select-file"===tQ&&(0,n.jsx)(p.I,{entry:t$}),tY[120]=t$,tY[121]=tQ,tY[122]=tH):tH=tY[122],tY[123]!==t$||tY[124]!==tQ?(tV="debridstream-select-file"===tQ&&(0,n.jsx)(A,{entry:t$}),tY[123]=t$,tY[124]=tQ,tY[125]=tV):tV=tY[125],tY[126]!==tU||tY[127]!==tG||tY[128]!==tq||tY[129]!==tH||tY[130]!==tV?(tW=(0,n.jsxs)(n.Fragment,{children:[tU,tG,tq,tH,tV]}),tY[126]=tU,tY[127]=tG,tY[128]=tq,tY[129]=tH,tY[130]=tV,tY[131]=tW):tW=tY[131],tW}function eJ(e,t){var l,n;return null!=(n=null==e||null==(l=e.label)?void 0:l.localeCompare(null==t?void 0:t.label))?n:0}function e0(e){return{label:e.name,value:e.id}}function e1(e){let t,l,r,o=(0,i.c)(17),{entry:c,type:v,debridInstantAvailability:h}=e,{data:x}=(0,a.iz)(null==c?void 0:c.mediaId,!0),{handleStreamSelection:g}=(0,ez.w)(),{handleStreamSelection:y}=(0,d.u)(),{torrentSearchStreamEpisode:b}=(0,u.U)(),N=(0,j.Xr)(p.p),S=(0,j.Xr)(m.N7),{setAutoPlayTorrent:E}=(0,s.K1)();if(!(null==x?void 0:x.torrent)||!c)return null;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)("h5",{className:"text-center flex gap-2 items-center",children:[(0,n.jsx)(L.YcD,{className:"mt-1"})," Previous selection"]}),o[0]=t):t=o[0];let w=null==x?void 0:x.torrent,A=null==x?void 0:x.metadata,T=("download"===v||"debridstream-select"===v||"debridstream-select-file"===v)&&!!x.torrent.infoHash&&!!h[x.torrent.infoHash];return o[1]!==x||o[2]!==c||o[3]!==y||o[4]!==g||o[5]!==E||o[6]!==N||o[7]!==S||o[8]!==b||o[9]!==v?(l=()=>{(null==x?void 0:x.torrent)&&(null==b?void 0:b.aniDBEpisode)&&("torrentstream-select"===v?(E(x.torrent,c),g({torrent:null==x?void 0:x.torrent,mediaId:c.mediaId,aniDBEpisode:b.aniDBEpisode,episodeNumber:b.episodeNumber,chosenFileIndex:void 0,batchEpisodeFiles:void 0}),S(void 0)):"debridstream-select"===v?(E(x.torrent,c),y({torrent:null==x?void 0:x.torrent,mediaId:c.mediaId,aniDBEpisode:b.aniDBEpisode,episodeNumber:b.episodeNumber,chosenFileId:"",batchEpisodeFiles:void 0}),S(void 0)):("torrentstream-select-file"===v||"debridstream-select-file"===v)&&N(null==x?void 0:x.torrent))},o[1]=x,o[2]=c,o[3]=y,o[4]=g,o[5]=E,o[6]=N,o[7]=S,o[8]=b,o[9]=v,o[10]=l):l=o[10],o[11]!==c.media||o[12]!==w||o[13]!==A||o[14]!==T||o[15]!==l?(r=(0,n.jsxs)(f.KZ,{children:[t,(0,n.jsx)(ei,{torrent:w,metadata:A,media:c.media,episode:void 0,debridCached:T,isSelected:!1,onClick:l})]}),o[11]=c.media,o[12]=w,o[13]=A,o[14]=T,o[15]=l,o[16]=r):r=o[16],r}},25264:(e,t,l)=>{"use strict";l.d(t,{LT:()=>y,bp:()=>g,d5:()=>b});var n=l(95155),i=l(19749),a=l(55014),r=l(46383),s=l(14490),o=l(84127),d=l(91360),c=l(2091),u=l(97400),m=l(23862),p=l(42500),v=l(29724),f=l(12115),h=l(70376),x=function(e){return e.TorrentLoading="loading",e.TorrentLoadingFailed="loading-failed",e.TorrentLoadingStatus="loading-status",e.TorrentLoaded="loaded",e.TorrentStartedPlaying="started-playing",e.TorrentStatus="status",e.TorrentStopped="stopped",e}(x||{});let g=(0,p.eU)(null),y=(0,p.eU)(!1);function b(e){let t,l=(0,i.c)(35),{isNativePlayerComponent:p,show:b}=e,[N]=(0,v.fp)(r.k),[j,S]=(0,v.fp)(g),[E,w]=(0,v.fp)(y),[A,T]=(0,f.useState)(null),[C,I]=(0,f.useState)(null),[,D]=(0,f.useState)(!1),{mutate:k,isPending:_}=(0,a.W9)();if(l[0]!==w||l[1]!==S?(t={type:m.c.TORRENTSTREAM_STATE,onMessage:e=>{let{state:t,data:l}=e;switch(t){case x.TorrentLoading:l?(S(l.state),I(l.torrentBeingLoaded),D(!1)):setTimeout(()=>{S("SEARCHING_TORRENTS"),T(null),D(!1)},500);break;case x.TorrentLoadingFailed:S(null),T(null),D(!1);break;case x.TorrentLoaded:S("SENDING_STREAM_TO_MEDIA_PLAYER"),w(!0),D(!1);break;case x.TorrentStartedPlaying:S(null),w(!0),D(!0);break;case x.TorrentStopped:S(null),w(!1),T(null),D(!1);break;case x.TorrentStatus:w(!0),T(l)}}},l[0]=w,l[1]=S,l[2]=t):t=l[2],(0,s.oA)(t),p){let e,t,i;return l[3]!==E||l[4]!==p||l[5]!==_||l[6]!==N||l[7]!==b||l[8]!==A||l[9]!==k?(e=E&&N.active&&A&&(0,n.jsx)("div",{className:(0,d.cn)("absolute left-0 top-8 w-full flex justify-center z-[100] pointer-events-none","overlay"===p&&"fixed left-0 top-8 w-full flex justify-center z-[100] pointer-events-none","control-bar"===p&&"relative justify-left w-fit top-0 h-full flex items-center px-2 truncate",!1===b&&"hidden"),children:(0,n.jsxs)("div",{className:(0,d.cn)(("control-bar"===p||"top-section"===p)&&"flex-wrap w-fit h-14 flex gap-3 items-center text-sm pointer-events-auto","overlay"===p&&"bg-gray-950 flex-wrap rounded-full border lg:max-w-[50%] w-fit h-14 px-6 flex gap-3 items-center text-sm lg:text-base pointer-events-auto"),children:[(0,n.jsxs)("div",{className:"space-x-1",children:[(0,n.jsx)(h.hTi,{className:"inline-block text-lg"}),(0,n.jsx)("span",{children:A.seeders})]}),(0,n.jsxs)("div",{className:"space-x-1",children:[(0,n.jsx)(h.nfB,{className:"inline-block mr-2"}),""!==A.downloadSpeed?A.downloadSpeed:"0 B/s"]}),(0,n.jsxs)("span",{className:(0,d.cn)("text-[--muted]",{"text-[--muted] animate-pulse":A.progressPercentage<5}),children:[A.progressPercentage.toFixed(2),"%"]}),(0,n.jsxs)("div",{className:"space-x-1",children:[(0,n.jsx)(h.yL8,{className:"inline-block mr-2"}),""!==A.uploadSpeed?A.uploadSpeed:"0 B/s"]}),"overlay"===p&&(0,n.jsx)(u.m_,{trigger:(0,n.jsx)(o.K0,{onClick:()=>k(),loading:_,intent:"alert-basic",icon:(0,n.jsx)(h.yQ,{})}),children:"Stop stream"})]})}),l[3]=E,l[4]=p,l[5]=_,l[6]=N,l[7]=b,l[8]=A,l[9]=k,l[10]=e):e=l[10],l[11]!==E||l[12]!==j||l[13]!==b||l[14]!==A||l[15]!==C?(t=!(E&&A)&&!!j&&"SENDING_STREAM_TO_MEDIA_PLAYER"!==j&&(0,n.jsx)("div",{className:(0,d.cn)("fixed left-0 top-8 w-full flex justify-center z-[100] pointer-events-none",!1===b&&"hidden"),children:(0,n.jsxs)("div",{className:"lg:max-w-[50%] w-fit h-14 px-6 flex gap-2 items-center text-sm lg:text-base pointer-events-auto",children:[(0,n.jsx)(c.y$,{className:"w-4 h-4"}),(0,n.jsxs)("div",{className:"truncate max-w-[500px]",children:["LOADING"===j?"Loading...":"","SEARCHING_TORRENTS"===j?"Selecting file...":"","ADDING_TORRENT"===j?'Adding torrent "'.concat(C,'"'):"","CHECKING_TORRENT"===j?'Checking torrent "'.concat(C,'"'):"","SELECTING_FILE"===j?"Selecting file...":"","SENDING_STREAM_TO_MEDIA_PLAYER"===j?"Getting metadata...":""]})]})}),l[11]=E,l[12]=j,l[13]=b,l[14]=A,l[15]=C,l[16]=t):t=l[16],l[17]!==e||l[18]!==t?(i=(0,n.jsxs)(n.Fragment,{children:[e,t]}),l[17]=e,l[18]=t,l[19]=i):i=l[19],i}if(E&&A){let e,t;return l[20]!==_||l[21]!==N.active||l[22]!==A||l[23]!==k?(e=!N.active&&(0,n.jsx)("div",{className:"fixed left-0 top-8 w-full flex justify-center z-[100] pointer-events-none",children:(0,n.jsxs)("div",{className:"bg-gray-950 flex-wrap rounded-full border lg:max-w-[50%] w-fit h-14 px-6 flex gap-3 items-center text-sm lg:text-base pointer-events-auto",children:[(0,n.jsxs)("span",{className:(0,d.cn)("text-green-300",{"text-[--muted] animate-pulse":A.progressPercentage<70}),children:[A.progressPercentage.toFixed(2),"%"]}),(0,n.jsxs)("div",{className:"space-x-1",children:[(0,n.jsx)(h.hTi,{className:"inline-block text-lg"}),(0,n.jsx)("span",{children:A.seeders})]}),(0,n.jsxs)("div",{className:"space-x-1",children:[(0,n.jsx)(h.nfB,{className:"inline-block mr-2"}),""!==A.downloadSpeed?A.downloadSpeed:"0 B/s"]}),(0,n.jsxs)("div",{className:"space-x-1",children:[(0,n.jsx)(h.yL8,{className:"inline-block mr-2"}),""!==A.uploadSpeed?A.uploadSpeed:"0 B/s"]}),(0,n.jsx)(u.m_,{trigger:(0,n.jsx)(o.K0,{onClick:()=>k(),loading:_,intent:"alert-basic",icon:(0,n.jsx)(h.yQ,{})}),children:"Stop stream"})]})}),l[20]=_,l[21]=N.active,l[22]=A,l[23]=k,l[24]=e):e=l[24],l[25]!==e?(t=(0,n.jsx)(n.Fragment,{children:e}),l[25]=e,l[26]=t):t=l[26],t}if(j&&!N.active){let e,t;l[27]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(c.y$,{className:"w-4 h-4"}),l[27]=e):e=l[27];let i="LOADING"===j?"Loading...":"",a="SEARCHING_TORRENTS"===j?"Selecting file...":"",r="ADDING_TORRENT"===j?'Adding torrent "'.concat(C,'"'):"",s="CHECKING_TORRENT"===j?'Checking torrent "'.concat(C,'"'):"",o="SELECTING_FILE"===j?"Selecting file...":"",d="SENDING_STREAM_TO_MEDIA_PLAYER"===j?"Sending stream to media player":"";return l[28]!==i||l[29]!==a||l[30]!==r||l[31]!==s||l[32]!==o||l[33]!==d?(t=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"fixed left-0 top-8 w-full flex justify-center z-[100] pointer-events-none",children:(0,n.jsxs)("div",{className:"bg-gray-950 rounded-full border lg:max-w-[50%] w-fit h-14 px-6 flex gap-2 items-center text-sm lg:text-base pointer-events-auto",children:[e,(0,n.jsxs)("div",{className:"truncate max-w-[500px]",children:[i,a,r,s,o,d]})]})})}),l[28]=i,l[29]=a,l[30]=r,l[31]=s,l[32]=o,l[33]=d,l[34]=t):t=l[34],t}return null}},29694:(e,t,l)=>{"use strict";l.d(t,{e:()=>c});var n=l(19749),i=l(42500),a=l(29724),r=l(12115);let s=(0,i.eU)(!1),o=(0,i.eU)(null),d=(0,i.eU)(null);function c(){let e,t,l,i=(0,n.c)(16),[c,u]=(0,a.fp)(s),[m,p]=(0,a.fp)(o),[v,f]=(0,a.fp)(d);i[0]!==u||i[1]!==p?(e=function(e){p(e),r.startTransition(()=>{u(!0)})},i[0]=u,i[1]=p,i[2]=e):e=i[2];let h=e;i[3]!==f||i[4]!==u||i[5]!==p?(t=function(e,t){p(e),f(t),r.startTransition(()=>{u(!0)})},i[3]=f,i[4]=u,i[5]=p,i[6]=t):t=i[6];let x=t;return i[7]!==v||i[8]!==c||i[9]!==x||i[10]!==h||i[11]!==m||i[12]!==f||i[13]!==u||i[14]!==p?(l={selectedMedia:m,setSelectedMedia:p,episodeToAdd:v,setEpisodeToAdd:f,isModalOpen:c,setModalOpen:u,selectMediaAndOpenEditor:h,selectEpisodeToAddAndOpenEditor:x},i[7]=v,i[8]=c,i[9]=x,i[10]=h,i[11]=m,i[12]=f,i[13]=u,i[14]=p,i[15]=l):l=i[15],l}},31775:(e,t,l)=>{"use strict";l.d(t,{X:()=>f});var n=l(95155),i=l(83394),a=l(13029),r=l(26589),s=l(77166),o=l(10653),d=l(65539),c=l(67236),u=l(59271),m=l(6708),p=l(91332),v=l(12115);function f(e){var t,l,f,h;let x=(0,p.Ky)(),{entry:g,episodeCollection:y,onEpisodeClick:b,onPlayNextEpisodeOnMount:N,bottomSection:j,...S}=e,{data:E}=(0,i.H_)(),w=(0,v.useMemo)(()=>{var e,t,l,n,i,a;if(!(null==y?void 0:y.episodes))return[];let r=[...null==y?void 0:y.episodes];return(null==(e=(null==(t=g.listData)?void 0:t.progress)&&(null==(l=g.media)?void 0:l.episodes)&&(null==(n=g.listData)?void 0:n.progress)===(null==(i=g.media)?void 0:i.episodes)?null==r?void 0:r.reverse():null==r?void 0:r.slice((null==(a=g.listData)?void 0:a.progress)||0))?void 0:e.slice(0,30))||[]},[null==y?void 0:y.episodes,g.nextEpisode,null==(t=g.listData)?void 0:t.progress]);return((0,c.k)({onPlay:()=>{N(w[0])}},!!w[0]),g&&y)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.FN,{className:"w-full max-w-full",gap:"md",opts:{align:"start"},children:[(0,n.jsx)(m.h1,{}),(0,n.jsx)(m.Wk,{children:w.map((e,t)=>{var l,r,s,o,d,c,p,v,f,h,N,j,S,w,A;return(0,n.jsx)(m.A7,{className:(0,u.pF)(x.smallerEpisodeCarouselSize),children:(0,n.jsx)(a.U,{episode:e,image:(null==(l=e.episodeMetadata)?void 0:l.image)||(null==(r=e.baseAnime)?void 0:r.bannerImage)||(null==(o=e.baseAnime)||null==(s=o.coverImage)?void 0:s.extraLarge),topTitle:e.episodeTitle||(null==e||null==(c=e.baseAnime)||null==(d=c.title)?void 0:d.userPreferred),title:e.displayTitle,isInvalid:e.isInvalid,progressTotal:null==(p=e.baseAnime)?void 0:p.episodes,progressNumber:e.progressNumber,episodeNumber:e.episodeNumber,length:null==(v=e.episodeMetadata)?void 0:v.length,percentageComplete:(0,i.hH)(E,g.mediaId,e.episodeNumber),minutesRemaining:(0,i.pj)(E,g.mediaId,e.episodeNumber),hasDiscrepancy:(null==y||null==(f=y.episodes)?void 0:f.findIndex(e=>"special"===e.type))!==-1,onClick:()=>{b(e)},anime:{id:g.mediaId,image:null==(N=e.baseAnime)||null==(h=N.coverImage)?void 0:h.medium,title:null==e||null==(S=e.baseAnime)||null==(j=S.title)?void 0:j.userPreferred}},(null==(w=e.localFile)?void 0:w.path)||"")},(null==e||null==(A=e.localFile)?void 0:A.path)||t)})})]}),(0,n.jsx)(d.n,{length:(null==y||null==(l=y.episodes)?void 0:l.length)||0,shouldDefaultToPageWithEpisode:(null==(f=g.listData)?void 0:f.progress)?(null==(h=g.listData)?void 0:h.progress)+1:void 0,renderItem:e=>{var t,l,i,a,d,c,u,m,p,v,f,h,x,N;let j=null==y||null==(t=y.episodes)?void 0:t[e];return(0,n.jsx)(r.X,{media:null==j?void 0:j.baseAnime,title:(null==j?void 0:j.displayTitle)||(null==j||null==(i=j.baseAnime)||null==(l=i.title)?void 0:l.userPreferred)||"",image:(null==j||null==(a=j.episodeMetadata)?void 0:a.image)||(null==j||null==(c=j.baseAnime)||null==(d=c.coverImage)?void 0:d.large),episodeTitle:null==j?void 0:j.episodeTitle,onClick:()=>{b(j)},description:null==j||null==(u=j.episodeMetadata)?void 0:u.overview,isFiller:null==j||null==(m=j.episodeMetadata)?void 0:m.isFiller,length:null==j||null==(p=j.episodeMetadata)?void 0:p.length,isWatched:!!(null==(v=g.listData)?void 0:v.progress)&&g.listData.progress>=((null==j?void 0:j.progressNumber)||0),className:"flex-none w-full",episodeNumber:null==j?void 0:j.episodeNumber,progressNumber:null==j?void 0:j.progressNumber,action:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.H,{title:null==j?void 0:j.displayTitle,image:null==j||null==(f=j.episodeMetadata)?void 0:f.image,episodeTitle:null==j?void 0:j.episodeTitle,airDate:null==j||null==(h=j.episodeMetadata)?void 0:h.airDate,length:null==j||null==(x=j.episodeMetadata)?void 0:x.length,summary:null==j||null==(N=j.episodeMetadata)?void 0:N.overview,isInvalid:null==j?void 0:j.isInvalid}),(0,n.jsx)(o.bv,{isDropdownMenu:!0,type:"torrentstream",episode:j})]})},(null==j?void 0:j.episodeNumber)+((null==j?void 0:j.displayTitle)||""))}}),j]}):null}},32754:(e,t,l)=>{"use strict";l.d(t,{D:()=>B,M:()=>K});var n=l(95155),i=l(19749),a=l(42094),r=l(2159),s=l(38900),o=l(53540),d=l(78045),c=l(25305),u=l(90168),m=l(96826),p=l(76968),v=l(87466),f=l(71780),h=l(24685),x=l(47363),g=l(24449),y=l(14680),b=l(5249),N=l(84127),j=l(91360),S=l(2091),E=l(76049),w=l(77717),A=l(90711),T=l(24151),C=l(80743),I=l(91332),D=l(50943),k=l(42500),_=l(78259),L=l(29724),R=l(6066),M=l(12115),O=l(70376),P=l(19705),F=l(67187);let z=(0,k.eU)(void 0);function B(){let e,t=(0,i.c)(2),l=(0,L.Xr)(z);return t[0]!==l?(e={setPreviewModalMediaId:(e,t)=>{l({mediaId:e,type:t})}},t[0]=l,t[1]=e):e=t[1],e}function K(e){let t,l,a,r,s,o,d,c,u=(0,i.c)(23);if(u[0]!==e){let{children:l,...n}=e;t=n,u[0]=e,u[1]=t}else t=u[1];let[m,p]=(0,L.fp)(z),v=(0,D.ZC)(m),f=(0,R.usePathname)();u[2]!==p?(l=()=>{p(void 0)},u[2]=p,u[3]=l):l=u[3],u[4]!==f?(a=[f],u[4]=f,u[5]=a):a=u[5],M.useEffect(l,a);let h=!!m;return u[6]!==p?(r=e=>p(t=>e?t:void 0),u[6]=p,u[7]=r):r=u[7],u[8]!==m||u[9]!==v||u[10]!==p?(s=m&&(0,n.jsxs)("div",{className:"z-[12] absolute right-2 top-2 flex gap-2 items-center",children:[!!v&&v.mediaId!==m.mediaId&&(0,n.jsx)(N.K0,{intent:"white-subtle",size:"sm",className:"rounded-full",icon:(0,n.jsx)(P.JWD,{}),onClick:()=>{p(v)}}),(0,n.jsx)(N.K0,{intent:"alert",size:"sm",className:"rounded-full",icon:(0,n.jsx)(O.Gsv,{}),onClick:()=>{p(void 0)}})]}),u[8]=m,u[9]=v,u[10]=p,u[11]=s):s=u[11],u[12]!==m?(o=(null==m?void 0:m.type)==="anime"&&(0,n.jsx)(U,{mediaId:m.mediaId}),u[12]=m,u[13]=o):o=u[13],u[14]!==m?(d=(null==m?void 0:m.type)==="manga"&&(0,n.jsx)(G,{mediaId:m.mediaId}),u[14]=m,u[15]=d):d=u[15],u[16]!==t||u[17]!==h||u[18]!==r||u[19]!==s||u[20]!==o||u[21]!==d?(c=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(E.a,{open:h,onOpenChange:r,contentClass:"max-w-7xl relative",hideCloseButton:!0,...t,children:[s,o,d]})}),u[16]=t,u[17]=h,u[18]=r,u[19]=s,u[20]=o,u[21]=d,u[22]=c):c=u[22],c}function U(e){let t,l=(0,i.c)(5),{mediaId:s}=e,{data:o,isLoading:d}=(0,r._8)(s),{data:c,isLoading:u}=(0,a.yg)(s);return l[0]!==c||l[1]!==u||l[2]!==o||l[3]!==d?(t=(0,n.jsx)(q,{entry:o,details:c,entryLoading:d,detailsLoading:u,type:"anime"}),l[0]=c,l[1]=u,l[2]=o,l[3]=d,l[4]=t):t=l[4],t}function G(e){let t,l=(0,i.c)(5),{mediaId:a}=e,{data:r,isLoading:o}=(0,s.Kq)(a),{data:d,isLoading:c}=(0,s.Or)(a);return l[0]!==d||l[1]!==c||l[2]!==r||l[3]!==o?(t=(0,n.jsx)(q,{entry:r,details:d,entryLoading:o,detailsLoading:c,type:"manga"}),l[0]=d,l[1]=c,l[2]=r,l[3]=o,l[4]=t):t=l[4],t}function q(e){var t,l,a,r,s,E,D,k,L,R,M,O,P,z,B,K,U,G,q,H,V,W,Y,Q,$,X,Z,J,ee,et;let el,en,ei,ea,er,es,eo,ed,ec,eu,em,ep,ev,ef,eh,ex=(0,i.c)(38),{entry:eg,entryLoading:ey,detailsLoading:eb,details:eN,type:ej}=e,eS=(0,m.v1)(),eE=(0,I.Ky)(),ew=null==eg?void 0:eg.media,eA=(null==ew?void 0:ew.bannerImage)||(null==ew||null==(t=ew.coverImage)?void 0:t.extraLarge),{hasTorrentProvider:eT}=(0,m.lJ)(),{hasDebridService:eC}=(0,m.bV)();ex[0]===Symbol.for("react.memo_cache_sentinel")?(el=[x.N7,x.Io,h.l],ex[0]=el):el=ex[0];let eI=eE.mediaPageBannerSize===I.kE.Small?"lg:h-[23rem]":"h-[12rem] lg:h-[22rem] 2xl:h-[30rem]";return ex[1]!==eI?(en=(0,j.cn)("absolute z-[0] opacity-30 w-full rounded-t-[--radius] overflow-hidden","w-full flex-none object-cover object-center z-[3] bg-[--background] h-[12rem]",eI),ex[1]=eI,ex[2]=en):en=ex[2],ex[3]===Symbol.for("react.memo_cache_sentinel")?(ei=(0,n.jsx)("div",{className:(0,j.cn)("w-full z-[2] absolute bottom-[-5rem] h-[5rem] bg-gradient-to-b from-[--background] via-transparent via-100% to-transparent")}),ea=(0,j.cn)("absolute top-0 left-0 w-full h-full"),ex[3]=ei,ex[4]=ea):(ei=ex[3],ea=ex[4]),ex[5]!==eA?(er=!!eA&&(0,n.jsx)(y.r,{src:(0,A.VG)(eA||""),alt:"banner image",fill:!0,quality:100,priority:!0,sizes:"100vw",className:(0,j.cn)("object-cover object-center z-[1]")}),ex[5]=eA,ex[6]=er):er=ex[6],ex[7]===Symbol.for("react.memo_cache_sentinel")?(es=(0,n.jsx)("div",{className:(0,j.cn)("hidden lg:block max-w-[60rem] xl:max-w-[100rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background]  transition-opacity to-transparent","opacity-85 duration-1000")}),eo=(0,n.jsx)("div",{className:(0,j.cn)("hidden lg:block max-w-[60rem] xl:max-w-[80rem] w-full z-[2] h-full absolute left-0 bg-gradient-to-r from-[--background] from-25% transition-opacity to-transparent","opacity-50 duration-500")}),ex[7]=es,ex[8]=eo):(es=ex[7],eo=ex[8]),ex[9]!==er?(ed=(0,n.jsxs)("div",{className:ea,children:[er,es,eo]}),ex[9]=er,ex[10]=ed):ed=ex[10],ex[11]===Symbol.for("react.memo_cache_sentinel")?(ec=(0,n.jsx)("div",{className:(0,j.cn)("w-full z-[3] absolute bottom-0 h-[50%] bg-gradient-to-t from-[--background] via-transparent via-100% to-transparent")}),eu=(0,n.jsx)("div",{className:(0,j.cn)("absolute h-full w-full block lg:hidden bg-[--background] opacity-70 z-[2]")}),ex[11]=ec,ex[12]=eu):(ec=ex[11],eu=ex[12]),ex[13]!==en||ex[14]!==ed?(em=(0,n.jsxs)("div",{className:en,children:[ei,ed,ec,eu]}),ex[13]=en,ex[14]=ed,ex[15]=em):em=ex[15],ex[16]!==ey||ex[17]!==eE.mediaPageBannerSize?(ep=ey&&(0,n.jsx)("div",{className:"space-y-4 relative z-[5]",children:(0,n.jsx)(w.E,{className:(0,j.cn)("h-[12rem]",eE.mediaPageBannerSize===I.kE.Small?"lg:h-[23rem]":"h-[12rem] lg:h-[22rem] 2xl:h-[30rem]")})}),ex[16]=ey,ex[17]=eE.mediaPageBannerSize,ex[18]=ep):ep=ex[18],ex[19]!==eN||ex[20]!==eb||ex[21]!==eg||ex[22]!==ey||ex[23]!==eC||ex[24]!==eT||ex[25]!==(null==ew?void 0:ew.id)||ex[26]!==(null==eS||null==(a=eS.settings)||null==(l=a.torrent)?void 0:l.defaultTorrentClient)||ex[27]!==eE.mediaPageBannerInfoBoxSize||ex[28]!==ej?(ev=!ey&&eg&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"z-[5] relative",children:[(0,n.jsx)(u.xN,{coverImage:(null==(s=eg.media)||null==(r=s.coverImage)?void 0:r.extraLarge)||(null==(D=eg.media)||null==(E=D.coverImage)?void 0:E.large),title:null==(L=eg.media)||null==(k=L.title)?void 0:k.userPreferred,color:null==(M=eg.media)||null==(R=M.coverImage)?void 0:R.color,englishTitle:null==(P=eg.media)||null==(O=P.title)?void 0:O.english,romajiTitle:null==(B=eg.media)||null==(z=B.title)?void 0:z.romaji,startDate:null==(K=eg.media)?void 0:K.startDate,season:null==(U=eg.media)?void 0:U.season,progressTotal:null==(G=eg.media)?void 0:G.episodes,status:null==(q=eg.media)?void 0:q.status,description:null==(H=eg.media)?void 0:H.description,listData:eg.listData,media:eg.media,smallerTitle:!0,type:"anime",children:(0,n.jsxs)("div",{className:(0,j.cn)("flex gap-3 flex-wrap items-center relative z-[10]",eE.mediaPageBannerInfoBoxSize===I.Pw.Fluid&&"justify-center lg:justify-start lg:max-w-[65vw]"),children:[(0,n.jsx)(c.H2,{meanScore:null==eg||null==(V=eg.media)?void 0:V.meanScore,badgeClass:"bg-transparent"}),(null==eN?void 0:eN.studios)&&(0,n.jsx)(d.v,{studios:null==eN?void 0:eN.studios}),(0,n.jsx)(c.vZ,{genres:null==eN?void 0:eN.genres}),(0,n.jsx)("div",{className:(0,j.cn)(eE.mediaPageBannerInfoBoxSize===I.Pw.Fluid?"w-full":"contents"),children:(0,n.jsx)(c.Kt,{rankings:null==eN?void 0:eN.rankings})})]})}),(0,n.jsxs)("div",{className:"mt-6 flex gap-3 items-center",children:[(0,n.jsx)(b.i,{href:"anime"===ej?"/entry?id=".concat(null==ew?void 0:ew.id):"/manga/entry?id=".concat(null==ew?void 0:ew.id),children:(0,n.jsx)(N.$n,{className:"px-0",intent:"gray-link",children:"Open page"})}),"anime"===ej&&!!(null==eg||null==(Y=eg.media)||null==(W=Y.trailer)?void 0:W.id)&&(0,n.jsx)(o.f,{trailerId:null==eg||null==($=eg.media)||null==(Q=$.trailer)?void 0:Q.id,trigger:(0,n.jsx)(N.$n,{intent:"gray-link",className:"px-0",children:"Trailer"})}),(0,C.He)(null==ew?void 0:ew.id)&&(0,n.jsx)(b.i,{href:"https://anilist.co/".concat(ej,"/").concat(eg.mediaId),target:"_blank",children:(0,n.jsx)(N.K0,{intent:"gray-link",className:"px-0",icon:(0,n.jsx)(F.vFL,{className:"text-lg"})})}),"anime"===ej&&(null==eg||null==(X=eg.media)?void 0:X.status)!=="NOT_YET_RELEASED"&&eT&&((null==eS||null==(J=eS.settings)||null==(Z=J.torrent)?void 0:Z.defaultTorrentClient)!==T.XH.NONE||eC)&&(0,n.jsx)(f.R,{entry:eg})]}),eb?(0,n.jsx)(S.kt,{}):(0,n.jsxs)("div",{className:"space-y-6 pt-6",children:["anime"===ej&&eg.libraryData&&(0,n.jsx)(v.B,{entry:eg,details:eN,bottomSection:(0,n.jsx)(n.Fragment,{}),hideCarousel:!0,maxCol:2}),"anime"===ej&&(0,n.jsx)(p.P,{entry:eg,details:eN,maxCol:5}),"manga"===ej&&(0,n.jsx)(g.v,{entry:eg,details:eN,maxCol:5})]})]})}),ex[19]=eN,ex[20]=eb,ex[21]=eg,ex[22]=ey,ex[23]=eC,ex[24]=eT,ex[25]=null==ew?void 0:ew.id,ex[26]=null==eS||null==(et=eS.settings)||null==(ee=et.torrent)?void 0:ee.defaultTorrentClient,ex[27]=eE.mediaPageBannerInfoBoxSize,ex[28]=ej,ex[29]=ev):ev=ex[29],ex[30]!==eg||ex[31]!==ej?(ef="anime"===ej&&!!eg&&(0,n.jsx)(x.qM,{entry:eg}),ex[30]=eg,ex[31]=ej,ex[32]=ef):ef=ex[32],ex[33]!==em||ex[34]!==ep||ex[35]!==ev||ex[36]!==ef?(eh=(0,n.jsxs)(_.Ui,{atoms:el,children:[em,ep,ev,ef]}),ex[33]=em,ex[34]=ep,ex[35]=ev,ex[36]=ef,ex[37]=eh):eh=ex[37],eh}},32931:(e,t,l)=>{"use strict";l.d(t,{k:()=>g,k3:()=>h,ke:()=>x,ul:()=>f});var n=l(17946),i=l(38900),a=l(85210),r=l(91332),s=l(47555),o=l(29724),d=l(21842),c=l(6066),u=l(12115),m=l(24780);let p={...a.Qg,sorting:"TITLE",unreadOnly:!1},v=(0,d.tG)("sea-manga-library-unread-only",!1,void 0,{getOnInit:!0}),f=(0,s.E)(p),h=(0,s.E)(p),x=(0,s.E)({latestChapterNumbers:{},storedProviders:{},storedFilters:{}});function g(){var e;let t=(0,c.useRouter)(),{data:l,isLoading:s,isError:d}=(0,i.QJ)(),{data:h}=(0,i.MT)(),{data:g}=(0,n.LW)(),{mangaLibraryCollectionDefaultSorting:y}=(0,r.Ky)();u.useEffect(()=>{d&&t.push("/")},[d]);let{storedProviders:b}=(0,m.L$)(g),{storedFilters:N}=(0,m.Ef)(g,b),[,j]=(0,o.fp)(x);u.useEffect(()=>{h&&j({latestChapterNumbers:h,storedProviders:b,storedFilters:N})},[b,N,h]);let[S,E]=(0,o.fp)(f),[w,A]=(0,o.fp)(v),T=u.useRef(!1);u.useEffect(()=>{T.current||(E(e=>{e.unreadOnly=w}),setTimeout(()=>{T.current=!0},500))},[]),u.useEffect(()=>{l&&E({...p,unreadOnly:w})},[l,w]),u.useEffect(()=>{T.current&&S.unreadOnly!==w&&A(S.unreadOnly)},[S.unreadOnly]);let C=u.useMemo(()=>{var e,t;let n=new Set;return null==l||null==(e=l.lists)||e.forEach(e=>{var t;null==(t=e.entries)||t.forEach(e=>{var t,l;null==(l=e.media)||null==(t=l.genres)||t.forEach(e=>{n.add(e)})})}),null==(t=Array.from(n))?void 0:t.sort((e,t)=>e.localeCompare(t))},[l]),I=u.useMemo(()=>{if(!l||!l.lists)return l;let e=l.lists.map(e=>{if(!e)return e;let t={...S,sorting:y},l=(0,a.ns)(e.entries,t,!0,b,N,h);if(0===l.length&&t.unreadOnly){let t={...S,unreadOnly:!1,sorting:y};l=(0,a.ns)(e.entries,t,!0,b,N,h)}return{type:e.type,status:e.status,entries:l}});return{lists:[e.find(e=>"CURRENT"===e.type),e.find(e=>"PAUSED"===e.type),e.find(e=>"PLANNING"===e.type)].filter(Boolean)}},[l,S,b,N,h]),D=u.useMemo(()=>{if(!l||!l.lists)return l;let e=l.lists.map(e=>{if(!e)return e;let t={...S,sorting:y},l=(0,a.dw)("manga",e.entries,t,!0);return{type:e.type,status:e.status,entries:l}});return{lists:[e.find(e=>"CURRENT"===e.type),e.find(e=>"PAUSED"===e.type),e.find(e=>"PLANNING"===e.type)].filter(Boolean)}},[l,S]),k=u.useMemo(()=>{var e,t;return null==(t=[...new Set(null==D||null==(e=D.lists)?void 0:e.flatMap(e=>{var t,l;return null!=(l=null==(t=e.entries)?void 0:t.flatMap(e=>{var t;return null==(t=e.media)?void 0:t.genres}))?l:[]}))].filter(Boolean))?void 0:t.sort((e,t)=>e.localeCompare(t))},[D]);return{genres:C,hasManga:!!(null==l||null==(e=l.lists)?void 0:e.some(e=>{var t;return!!(null==(t=e.entries)?void 0:t.length)})),mangaCollection:I,filteredMangaCollection:D,mangaCollectionGenres:k,mangaCollectionLoading:s,storedFilters:N,storedProviders:b}}},36945:(e,t,l)=>{"use strict";l.d(t,{Ln:()=>v,xt:()=>f});var n=l(95155),i=l(19749),a=l(78106),r=l(91360),s=l(77717),o=l(12115);let d=(0,r.cn)("grid grid-cols-2 min-[768px]:grid-cols-3 min-[1080px]:grid-cols-4 min-[1320px]:grid-cols-5 min-[1750px]:grid-cols-6 min-[1850px]:grid-cols-7 min-[2000px]:grid-cols-8 gap-4"),c=(0,r.cn)("grid grid-cols-2 min-[768px]:grid-cols-3 min-[1080px]:grid-cols-4 min-[1320px]:grid-cols-5 min-[1750px]:grid-cols-6 min-[1850px]:grid-cols-7 min-[2000px]:grid-cols-7 gap-4"),u=(0,r.cn)("grid grid-cols-2 min-[768px]:grid-cols-3 min-[1080px]:grid-cols-4 min-[1320px]:grid-cols-5 min-[1750px]:grid-cols-6 min-[1850px]:grid-cols-6 min-[2000px]:grid-cols-6 gap-4"),m=(0,r.cn)("grid grid-cols-2 min-[768px]:grid-cols-3 min-[1080px]:grid-cols-4 min-[1320px]:grid-cols-5 min-[1750px]:grid-cols-5 min-[1850px]:grid-cols-5 min-[2000px]:grid-cols-5 gap-4"),p=(0,r.cn)("grid grid-cols-2 min-[768px]:grid-cols-3 min-[1080px]:grid-cols-4 min-[1320px]:grid-cols-4 min-[1750px]:grid-cols-4 min-[1850px]:grid-cols-4 min-[2000px]:grid-cols-4 gap-4");function v(e){let t,l,s,v,f,h=(0,i.c)(11);h[0]!==e?({children:t,maxCol:s,...l}=e,h[0]=e,h[1]=t,h[2]=l,h[3]=s):(t=h[1],l=h[2],s=h[3]);let x=void 0===s?8:s;if(0===o.Children.toArray(t).length){let e;return h[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(a.D,{title:null,children:(0,n.jsx)("p",{children:"Nothing to see"})}),h[4]=e):e=h[4],e}let g=7===x?c:6===x?u:5===x?m:4===x?p:d;return h[5]!==g?(v=(0,r.cn)(g),h[5]=g,h[6]=v):v=h[6],h[7]!==t||h[8]!==l||h[9]!==v?(f=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{"data-media-card-grid":!0,className:v,...l,children:t})}),h[7]=t,h[8]=l,h[9]=v,h[10]=f):f=h[10],f}function f(e){let t,l,r,s,o=(0,i.c)(12);if(o[0]!==e?({children:t,itemCount:l,...r}=e,o[0]=e,o[1]=t,o[2]=l,o[3]=r):(t=o[1],l=o[2],r=o[3]),0===l){let e;return o[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(a.D,{title:null,children:(0,n.jsx)("p",{children:"Nothing to see"})}),o[4]=e):e=o[4],e}if(l<=48){let e;return o[5]!==t||o[6]!==r?(e=(0,n.jsx)(v,{...r,children:t}),o[5]=t,o[6]=r,o[7]=e):e=o[7],e}return o[8]!==t||o[9]!==l||o[10]!==r?(s=(0,n.jsx)(x,{itemCount:l,...r,children:t}),o[8]=t,o[9]=l,o[10]=r,o[11]=s):s=o[11],s}let h=[{min:0,cols:2},{min:768,cols:3},{min:1080,cols:4},{min:1320,cols:5},{min:1750,cols:6},{min:1850,cols:7},{min:2e3,cols:8}];function x(e){let t,l,a,v,f,x,y,b,N,j,S,E,w,A,T,C,I,D=(0,i.c)(35);D[0]!==e?({children:t,itemCount:l,maxCol:v,...a}=e,D[0]=e,D[1]=t,D[2]=l,D[3]=a,D[4]=v):(t=D[1],l=D[2],a=D[3],v=D[4]);let k=void 0===v?8:v;D[5]===Symbol.for("react.memo_cache_sentinel")?(f=new Set,D[5]=f):f=D[5];let[_,L]=o.useState(f);D[6]===Symbol.for("react.memo_cache_sentinel")?(x=new Map,D[6]=x):x=D[6];let[R,M]=o.useState(x),O=o.useRef(null);D[7]===Symbol.for("react.memo_cache_sentinel")?(y=[],D[7]=y):y=D[7];let P=o.useRef(y),F=o.useRef(null);if(D[8]!==k){var z,B;b=null!=(B=null==(z=h.map(e=>({min:e.min,cols:e.cols>k?k:e.cols})).find(g))?void 0:z.cols)?B:8,D[8]=k,D[9]=b}else b=D[9];let K=b;D[10]!==K||D[11]!==l?(N=()=>(L(new Set(Array.from(Array(Math.min(K,l)).keys()))),()=>{M(new Map)}),j=[K,l],D[10]=K,D[11]=l,D[12]=N,D[13]=j):(N=D[12],j=D[13]),o.useEffect(N,j),D[14]!==K?(S=()=>{if(O.current)return F.current=new IntersectionObserver(e=>{e.forEach(e=>{var t;let l=parseInt(null!=(t=e.target.getAttribute("data-index"))?t:"-1");e.isIntersecting?L(e=>{let t=new Set(e);return t.add(l),t}):L(e=>{let t=new Set(e);return l>=K&&t.delete(l),t})})},{root:null,rootMargin:"200px 0px",threshold:0}),P.current.forEach(e=>{if(e){var t;null==(t=F.current)||t.observe(e)}}),()=>{var e;null==(e=F.current)||e.disconnect()}},D[14]=K,D[15]=S):S=D[15],D[16]!==K||D[17]!==l?(E=[l,K],D[16]=K,D[17]=l,D[18]=E):E=D[18],o.useEffect(S,E),D[19]===Symbol.for("react.memo_cache_sentinel")?(w=(e,t)=>{M(l=>{let n=new Map(l);return n.set(e,t),n})},D[19]=w):w=D[19];let U=w,G=7===k?c:6===k?u:5===k?m:4===k?p:d;if(D[20]!==G?(A=(0,r.cn)(G),D[20]=G,D[21]=A):A=D[21],D[22]!==t||D[23]!==R||D[24]!==_){let e;D[26]!==R||D[27]!==_?(e=(e,t)=>{let l=_.has(t),i=R.get(t);return(0,n.jsx)("div",{"data-media-card-lazy-grid-item":!0,ref:e=>{P.current[t]=e},"data-index":t,className:"transition-all duration-300 ease-in-out",children:l?(0,n.jsx)("div",{"data-media-card-lazy-grid-item-content":!0,ref:e=>{e&&!i&&U(t,e.offsetHeight)},children:e}):(0,n.jsx)(s.E,{"data-media-card-lazy-grid-item-skeleton":!0,className:"w-full",style:{height:i||"300px"}})},(null==e?void 0:e.key)?null==e?void 0:e.key:t)},D[26]=R,D[27]=_,D[28]=e):e=D[28],T=o.Children.map(t,e),D[22]=t,D[23]=R,D[24]=_,D[25]=T}else T=D[25];return D[29]!==A||D[30]!==T?(C=(0,n.jsx)("div",{"data-media-card-lazy-grid":!0,className:A,ref:O,children:T}),D[29]=A,D[30]=T,D[31]=C):C=D[31],D[32]!==a||D[33]!==C?(I=(0,n.jsx)("div",{"data-media-card-lazy-grid-renderer":!0,...a,children:C}),D[32]=a,D[33]=C,D[34]=I):I=D[34],I}function g(e){return window.innerWidth>=e.min}},37054:(e,t,l)=>{"use strict";l.d(t,{p:()=>c});var n=l(95155),i=l(19749),a=l(20051),r=l(75733),s=l(84127),o=l(97400);l(12115);var d=l(41452);function c(e){let t,l,c,u,m,p,v,f,h,x,g,y,b=(0,i.c)(34);b[0]!==e?({mediaId:t,type:u,size:c,...l}=e,b[0]=e,b[1]=t,b[2]=l,b[3]=c,b[4]=u):(t=b[1],l=b[2],c=b[3],u=b[4]);let{data:N,isLoading:j}=(0,a.hf)(t,u),{mutate:S,isPending:E}=(0,a.mi)(),{mutate:w,isPending:A}=(0,a.$N)();b[5]!==S||b[6]!==N||b[7]!==t||b[8]!==w||b[9]!==u?(m=function(){N?w({mediaId:t,type:u}):S({media:[{mediaId:t,type:u}]})},b[5]=S,b[6]=N,b[7]=t,b[8]=w,b[9]=u,b[10]=m):m=b[10];let T=m;b[11]!==T?(p={title:"Remove offline data",description:"This action will remove the offline data for this media entry. Are you sure you want to proceed?",onConfirm:()=>{T()}},b[11]=T,b[12]=p):p=b[12];let C=(0,r.J)(p);b[13]!==N?(v=N?(0,n.jsx)(d.uyw,{}):(0,n.jsx)(d.Qpb,{}),b[13]=N,b[14]=v):v=b[14],b[15]!==C||b[16]!==T||b[17]!==N?(f=()=>N?C.open():T(),b[15]=C,b[16]=T,b[17]=N,b[18]=f):f=b[18];let I=j||E||A,D=N?"primary-subtle":"gray-subtle";b[19]!==l||b[20]!==c||b[21]!==v||b[22]!==f||b[23]!==I||b[24]!==D?(h=(0,n.jsx)(s.K0,{icon:v,onClick:f,loading:I,intent:D,size:c,...l}),b[19]=l,b[20]=c,b[21]=v,b[22]=f,b[23]=I,b[24]=D,b[25]=h):h=b[25];let k=N?"Remove offline data":"Save locally";return b[26]!==h||b[27]!==k?(x=(0,n.jsx)(o.m_,{trigger:h,children:k}),b[26]=h,b[27]=k,b[28]=x):x=b[28],b[29]!==C?(g=(0,n.jsx)(r.K,{...C}),b[29]=C,b[30]=g):g=b[30],b[31]!==x||b[32]!==g?(y=(0,n.jsxs)(n.Fragment,{children:[x,g]}),b[31]=x,b[32]=g,b[33]=y):y=b[33],y}},37614:(e,t,l)=>{"use strict";l.d(t,{z:()=>Y,n:()=>W});var n=l(95155),i=l(19749),a=l(2159),r=l(78216),s=l(73499),o=l(46383),d=l(84127),c=l(91360),u=l(94077),m=l(12115),p=l(70376),v=l(40568);let f={dimensions:{sm:"sm:max-w-sm sm:max-h-[500px]",md:"sm:max-w-md sm:max-h-[600px]",lg:"sm:max-w-lg sm:max-h-[700px]",xl:"sm:max-w-xl sm:max-h-[800px]",full:"sm:w-full sm:h-full"},positions:{"bottom-right":"bottom-5 right-5","bottom-left":"bottom-5 left-5"},containerPositions:{"bottom-right":"sm:bottom-[calc(100%+10px)] sm:right-0","bottom-left":"sm:bottom-[calc(100%+10px)] sm:left-0"},states:{open:"pointer-events-auto opacity-100 visible scale-100 translate-y-0",closed:"pointer-events-none opacity-0 invisible scale-100 sm:translate-y-5"}},h=e=>{let t,l,a,r,s,o,v,h,g,y,b,N,j,S,E,w=(0,i.c)(34);w[0]!==e?({className:l,position:s,size:o,icon:a,children:t,...r}=e,w[0]=e,w[1]=t,w[2]=l,w[3]=a,w[4]=r,w[5]=s,w[6]=o):(t=w[1],l=w[2],a=w[3],r=w[4],s=w[5],o=w[6]);let A=void 0===s?"bottom-right":s,T=void 0===o?"md":o,[C,I]=(0,m.useState)(!1),D=(0,m.useRef)(null);w[7]!==C?(v=()=>I(!C),w[7]=C,w[8]=v):v=w[8];let k=v,_="fixed ".concat(f.positions[A]," z-[25]");w[9]!==l||w[10]!==_?(h=(0,c.cn)(_,l),w[9]=l,w[10]=_,w[11]=h):h=w[11];let L=f.containerPositions[A],R=f.dimensions[T],M=C?f.states.open:f.states.closed;return w[12]!==l||w[13]!==L||w[14]!==R||w[15]!==M?(g=(0,c.cn)("flex flex-col bg-[--paper] overflow-hidden border sm:rounded-2xl shadow-md transition-all duration-250 ease-out sm:absolute sm:w-[90vw] sm:h-[80vh] fixed inset-0 w-full h-full sm:inset-auto",L,R,M,u.X&&"pt-8 sm:pt-0",l),w[12]=l,w[13]=L,w[14]=R,w[15]=M,w[16]=g):g=w[16],w[17]===Symbol.for("react.memo_cache_sentinel")?(y=(0,c.cn)("absolute top-2 right-2 sm:hidden rounded-full",u.X&&"top-8"),w[17]=y):y=w[17],w[18]===Symbol.for("react.memo_cache_sentinel")?(b=(0,n.jsx)(p.Gsv,{className:"h-6 w-6"}),w[18]=b):b=w[18],w[19]!==k?(N=(0,n.jsx)(d.K0,{intent:"white",size:"sm",className:y,onClick:k,icon:b}),w[19]=k,w[20]=N):N=w[20],w[21]!==t||w[22]!==N||w[23]!==g?(j=(0,n.jsxs)("div",{ref:D,className:g,children:[t,N]}),w[21]=t,w[22]=N,w[23]=g,w[24]=j):j=w[24],w[25]!==a||w[26]!==C||w[27]!==k?(S=(0,n.jsx)(x,{icon:a,isOpen:C,toggleContainer:k}),w[25]=a,w[26]=C,w[27]=k,w[28]=S):S=w[28],w[29]!==r||w[30]!==j||w[31]!==S||w[32]!==h?(E=(0,n.jsxs)("div",{className:h,...r,children:[j,S]}),w[29]=r,w[30]=j,w[31]=S,w[32]=h,w[33]=E):E=w[33],E};h.displayName="PlaylistManagerPopup";let x=e=>{let t,l,a,r,s,o,u,m,f=(0,i.c)(16);return f[0]!==e?({className:t,icon:l,isOpen:a,toggleContainer:s,...r}=e,f[0]=e,f[1]=t,f[2]=l,f[3]=a,f[4]=r,f[5]=s):(t=f[1],l=f[2],a=f[3],r=f[4],s=f[5]),f[6]!==t?(o=(0,c.cn)("shadow-xl w-14 h-14 rounded-full flex items-center justify-center hover:shadow-lg hover:shadow-black/30 transition-all duration-300",t),f[6]=t,f[7]=o):o=f[7],f[8]!==l||f[9]!==a?(u=a?(0,n.jsx)(p.Gsv,{className:(0,c.cn)("h-6 w-6")}):l||(0,n.jsx)(v.xU9,{className:"h-6 w-6"}),f[8]=l,f[9]=a,f[10]=u):u=f[10],f[11]!==r||f[12]!==o||f[13]!==u||f[14]!==s?(m=(0,n.jsx)(d.$n,{intent:"white",onClick:s,className:o,...r,children:u}),f[11]=r,f[12]=o,f[13]=u,f[14]=s,f[15]=m):m=f[15],m};x.displayName="PlaylistManagerPopupToggle";var g=l(62024),y=l(14490),b=l(96826),N=l(51441),j=l(40845),S=l(52029),E=l(47363),w=l(82449),A=l(75385),T=l(93319),C=l(71689),I=l(26603),D=l(35656),k=l(14680),_=l(76049),L=l(97400),R=l(93715),M=l(90711),O=l(23862),P=l(42500),F=l(29724),z=l(6066),B=l(43994),K=l(41452),U=l(69554);let G=(0,R.v)("PLAYLIST MANAGER"),q=(0,P.eU)(null),H=(0,P.eU)(null),V=(0,P.eU)(null);function W(){var e,t,l,n;let a,s,o,d,c,m,p=(0,i.c)(27),{sendMessage:v}=(0,y.Y0)(),f=(0,F.md)(I.O1),[h]=(0,F.fp)(q),[x]=(0,F.fp)(H),[b,N]=(0,F.fp)(V),{downloadedMediaPlayback:j,torrentStreamingPlayback:S,electronPlaybackMethod:E}=(0,r.zw)(),{activeOnDevice:w}=(0,C.NY)();p[0]!==w||p[1]!==f||p[2]!==j||p[3]!==E||p[4]!==v||p[5]!==S?(a=function(e){U.oR.info("Starting playlist..."),v({type:O.c.PLAYLIST,payload:{type:"start-playlist",payload:{clientId:f,dbId:e.dbId,localFilePlaybackMethod:u.nH&&"default"!==E?E:w?"transcode":j,streamPlaybackMethod:u.nH&&"default"!==E?E:S}}})},p[0]=w,p[1]=f,p[2]=j,p[3]=E,p[4]=v,p[5]=S,p[6]=a):a=p[6];let A=a;p[7]!==v?(s=function(){G.info("Sending stop playlist event"),v({type:O.c.PLAYLIST,payload:{type:"stop-playlist"}})},p[7]=v,p[8]=s):s=p[8];let T=s;p[9]!==v?(o=function(){G.info("Sending reopen episode event"),v({type:O.c.PLAYLIST,payload:{type:"reopen-episode"}})},p[9]=v,p[10]=o):o=p[10];let D=o;p[11]!==v||p[12]!==N?(d=function(e,t){G.info("Sending play episode event",e,t),t?v({type:O.c.PLAYLIST,payload:{type:"play-episode",payload:{which:e,isCurrentCompleted:!1}}}):(G.info("Awaiting confirmation to update progress for",e),N(e))},p[11]=v,p[12]=N,p[13]=d):d=p[13];let k=d;p[14]!==b||p[15]!==v||p[16]!==N?(c=function(e){b&&(N(null),G.info("Sending play episode event",b,e),v({type:O.c.PLAYLIST,payload:{type:"play-episode",payload:{which:b,isCurrentCompleted:e}}}))},p[14]=b,p[15]=v,p[16]=N,p[17]=c):c=p[17];let _=c,L=null!=(n=null==h||null==(e=h.episodes)?void 0:e.findIndex(e=>(0,g.vK)(e,x)))?n:-1,R=null==h||null==(t=h.episodes)?void 0:t[L+1],M=null==h||null==(l=h.episodes)?void 0:l[L-1];return p[18]!==h||p[19]!==R||p[20]!==_||p[21]!==k||p[22]!==M||p[23]!==D||p[24]!==A||p[25]!==T?(m={currentPlaylist:h,startPlaylist:A,stopPlaylist:T,reopenEpisode:D,playEpisode:k,nextPlaylistEpisode:R,prevPlaylistEpisode:M,onConfirmedProgress:_},p[18]=h,p[19]=R,p[20]=_,p[21]=k,p[22]=M,p[23]=D,p[24]=A,p[25]=T,p[26]=m):m=p[26],m}function Y(){var e,t,l,r;let c,u,v,f,x,g,C,D,k,R,M,P,Y,$=(0,i.c)(51),{sendMessage:X}=(0,y.Y0)(),Z=(0,F.md)(I.ST),J=(0,b.v1)(),ee=(0,z.useRouter)(),et=(0,F.md)(o.k),{stopPlaylist:el,reopenEpisode:en,playEpisode:ei,nextPlaylistEpisode:ea,prevPlaylistEpisode:er,onConfirmedProgress:es}=W(),[eo,ed]=(0,F.fp)(q),[,ec]=(0,F.fp)(H);$[0]!==X?(c=()=>{X({type:O.c.PLAYLIST,payload:{type:"current-playlist"}})},$[0]=X,$[1]=c):c=$[1],$[2]!==Z?(u=[Z],$[2]=Z,$[3]=u):u=$[3],m.useEffect(c,u);let{handleStreamSelection:eu,handleAutoSelectStream:em}=(0,w.w)(),{handleStreamSelection:ep,handleAutoSelectStream:ev}=(0,N.u)(),{playMediaFile:ef}=(0,T.g)(),eh=null==J||null==(e=J.torrentstreamSettings)?void 0:e.autoSelect,ex=null==J||null==(t=J.debridSettings)?void 0:t.streamAutoSelect,[eg]=(0,F.fp)(A.q6),[ey]=(0,F.fp)(j.mF),{torrentSearchStreamEpisode:eb,setTorrentSearchStreamEpisode:eN}=(0,S.U)(),ej=(0,F.Xr)(E.N7),eS=(0,F.Xr)(E.Io),{data:eE}=(0,a._8)(null==eb||null==(l=eb.baseAnime)?void 0:l.id),{autoPlayTorrent:ew}=(0,s.K1)();$[4]===Symbol.for("react.memo_cache_sentinel")?(v=function(e,t){var l,n;return!!e&&e.entry.mediaId==(null==(n=t.episode)||null==(l=n.baseAnime)?void 0:l.id)},$[4]=v):v=$[4];let eA=v;$[5]!==ew||$[6]!==ey||$[7]!==ex||$[8]!==ev||$[9]!==ep||$[10]!==em||$[11]!==eu||$[12]!==ef||$[13]!==ee||$[14]!==ed||$[15]!==ec||$[16]!==ej||$[17]!==eS||$[18]!==eN||$[19]!==eg||$[20]!==eh?(f={type:O.c.PLAYLIST,onMessage:e=>{var t,l,n,i,a,r,s,o,d,c,u,m,p,v,f,h,x,g,y,b,N,j,S,E,w,A,T,C,I,D,k,_,L,R,M,O;switch(e.type){case"current-playlist":{let n=e.payload;ed(null!=(t=n.playlist)?t:null),ec(null!=(l=n.playlistEpisode)?l:null);break}case"playing-episode":eN(null),ej(void 0);break;case"play-episode":{G.info("Received play episode event",e.payload);let t=e.payload,l=t.playlistEpisode;switch(U.oR.info("Playing episode ".concat(null==(n=l.episode)?void 0:n.aniDBEpisode," of ").concat(null==(r=l.episode)||null==(a=r.baseAnime)||null==(i=a.title)?void 0:i.userPreferred)),t.playlistEpisode.watchType){case"nakama":case"localfile":G.info("Playing local file. Is Nakama: ",null==(s=t.playlistEpisode.episode)?void 0:s._isNakamaEpisode),(null==(d=t.playlistEpisode.episode)||null==(o=d.localFile)?void 0:o.path)&&ef({path:null==(u=t.playlistEpisode.episode)||null==(c=u.localFile)?void 0:c.path,mediaId:null==(p=t.playlistEpisode.episode)||null==(m=p.baseAnime)?void 0:m.id,episode:t.playlistEpisode.episode});break;case"torrent":if(eh){G.info("Auto select is enabled, auto-selecting torrent for streaming"),em({mediaId:null==(f=l.episode)||null==(v=f.baseAnime)?void 0:v.id,episodeNumber:null==(h=l.episode)?void 0:h.episodeNumber,aniDBEpisode:null==(x=l.episode)?void 0:x.aniDBEpisode});return}if((null==ew||null==(g=ew.torrent)?void 0:g.isBatch)&&eg&&eA(ew,l)){G.info("Previous selection matches, auto-selecting file for torrent stream"),eu({mediaId:null==(b=l.episode)||null==(y=b.baseAnime)?void 0:y.id,episodeNumber:null==(N=l.episode)?void 0:N.episodeNumber,aniDBEpisode:null==(j=l.episode)?void 0:j.aniDBEpisode,torrent:ew.torrent,chosenFileIndex:void 0,batchEpisodeFiles:void 0});return}G.info("No previous torrent found, opening torrent search"),eS(null==(S=l.episode)?void 0:S.episodeNumber),eN(l.episode),ej(eg?"torrentstream-select":"torrentstream-select-file");return;case"debrid":if(ex){G.info("Auto select is enabled, auto-selecting torrent for debrid stream"),ev({mediaId:null==(w=l.episode)||null==(E=w.baseAnime)?void 0:E.id,episodeNumber:null==(A=l.episode)?void 0:A.episodeNumber,aniDBEpisode:null==(T=l.episode)?void 0:T.aniDBEpisode});return}if((null==ew||null==(C=ew.torrent)?void 0:C.isBatch)&&ey&&eA(ew,l)){G.info("Previous selection matches, auto-selecting file for debrid stream"),ep({mediaId:null==(D=l.episode)||null==(I=D.baseAnime)?void 0:I.id,episodeNumber:null==(k=l.episode)?void 0:k.episodeNumber,aniDBEpisode:null==(_=l.episode)?void 0:_.aniDBEpisode,torrent:ew.torrent,chosenFileId:"",batchEpisodeFiles:void 0});return}G.info("No previous debrid found, opening debrid search"),eS(null==(L=l.episode)?void 0:L.episodeNumber),eN(l.episode),ej(ey?"debridstream-select":"debridstream-select-file");return;case"online":{let e={mediaId:null==(M=l.episode)||null==(R=M.baseAnime)?void 0:R.id,episodeNumber:null==(O=l.episode)?void 0:O.episodeNumber};ee.push("/entry?id="+e.mediaId+"&tab=onlinestream&episode="+e.episodeNumber)}}}}}},$[5]=ew,$[6]=ey,$[7]=ex,$[8]=ev,$[9]=ep,$[10]=em,$[11]=eu,$[12]=ef,$[13]=ee,$[14]=ed,$[15]=ec,$[16]=ej,$[17]=eS,$[18]=eN,$[19]=eg,$[20]=eh,$[21]=f):f=$[21],(0,y.oA)(f);let[eT,eC]=(0,F.fp)(V);if(!eo)return null;$[22]!==eE?(x=eE&&(0,n.jsx)(E.qM,{entry:eE,isPlaylistDrawer:!0}),$[22]=eE,$[23]=x):x=$[23];let eI=null!==eT;return $[24]!==es||$[25]!==eC?(g=e=>{e||(es(!1),eC(null))},$[24]=es,$[25]=eC,$[26]=g):g=$[26],$[27]===Symbol.for("react.memo_cache_sentinel")?(C=(0,n.jsx)("p",{children:"Do you want to update the progress of the current episode?"}),$[27]=C):C=$[27],$[28]!==es?(D=(0,n.jsx)(d.$n,{intent:"primary",onClick:()=>es(!0),children:"Yes"}),$[28]=es,$[29]=D):D=$[29],$[30]!==es?(k=(0,n.jsx)(d.$n,{intent:"white-subtle",onClick:()=>es(!1),children:"No"}),$[30]=es,$[31]=k):k=$[31],$[32]!==D||$[33]!==k?(R=(0,n.jsxs)("div",{className:"flex gap-2 mt-4 justify-end",children:[D,k]}),$[32]=D,$[33]=k,$[34]=R):R=$[34],$[35]!==R||$[36]!==eI||$[37]!==g?(M=(0,n.jsxs)(_.a,{open:eI,onOpenChange:g,title:"Update progress?",children:[C,R]}),$[35]=R,$[36]=eI,$[37]=g,$[38]=M):M=$[38],$[39]!==eo||$[40]!==et.active||$[41]!==ea||$[42]!==ei||$[43]!==er||$[44]!==en||$[45]!==el?(P=!et.active&&(0,n.jsxs)(h,{position:"bottom-right",children:[(0,n.jsxs)("p",{className:"p-3 text-sm font-semibold",children:["Playlist: ",eo.name]}),(0,n.jsx)("div",{className:"p-3 space-y-2 overflow-auto",children:(0,n.jsx)("div",{className:"space-y-2 relative",children:null==(r=eo.episodes)?void 0:r.map(Q)})}),(0,n.jsxs)("div",{className:"p-3 bg-[--paper] relative",children:[(0,n.jsx)("div",{className:"absolute top-[-2rem] h-[2rem] left-0 right-0 bg-gradient-to-t from-[--paper] to-transparent"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(d.K0,{icon:(0,n.jsx)(K.wM5,{}),intent:"white-subtle",className:"rounded-full",disabled:!er,onClick:()=>ei("previous",!1)}),(0,n.jsx)("div",{className:"flex flex-1"}),(0,n.jsx)(L.m_,{className:"z-[99999]",trigger:(0,n.jsx)("span",{children:(0,n.jsx)(d.K0,{icon:(0,n.jsx)(B.JbZ,{}),intent:"gray-basic",className:"rounded-full",onClick:()=>en()})}),children:"Reopen episode"}),(0,n.jsx)(L.m_,{className:"z-[99999]",trigger:(0,n.jsx)("span",{children:(0,n.jsx)(d.K0,{icon:(0,n.jsx)(p.Gsv,{}),intent:"alert-basic",className:"rounded-full",onClick:()=>el()})}),children:"Stop playlist"}),(0,n.jsx)("div",{className:"flex flex-1"}),(0,n.jsx)(d.K0,{icon:(0,n.jsx)(K.ivF,{}),intent:"white-subtle",className:"rounded-full",disabled:!ea,onClick:()=>ei("next",!1)})]})]})]}),$[39]=eo,$[40]=et.active,$[41]=ea,$[42]=ei,$[43]=er,$[44]=en,$[45]=el,$[46]=P):P=$[46],$[47]!==M||$[48]!==P||$[49]!==x?(Y=(0,n.jsxs)(n.Fragment,{children:[x,M,P]}),$[47]=M,$[48]=P,$[49]=x,$[50]=Y):Y=$[50],Y}function Q(e){return(0,n.jsx)($,{episode:e},(0,g.iG)(e))}function $(e){var t,l,a,r,s,o,d,u,m,p,v;let f,h,x,y,b,N,j,S,E=(0,i.c)(22),{episode:w}=e,A=(0,F.md)(H);E[0]!==A||E[1]!==w?(f=(0,c.cn)("px-2.5 py-2 bg-[--background] rounded-md border flex gap-3 relative","opacity-50 hover:opacity-70",(0,g.vK)(A,w)&&"opacity-100 hover:opacity-100 border-[rgba(255,255,255,0.5)] sticky top-0 bottom-0 z-10 shadow-xl"),E[0]=A,E[1]=w,E[2]=f):f=E[2],E[3]!==(null==(t=w.episode.episodeMetadata)?void 0:t.image)||E[4]!==w.isCompleted?(h=(null==(m=w.episode.episodeMetadata)?void 0:m.image)&&(0,n.jsx)(k.r,{"data-episode-card-image":!0,src:(0,M.VG)(null==(p=w.episode.episodeMetadata)?void 0:p.image),alt:"",fill:!0,quality:100,placeholder:(0,D.r)(700,475),sizes:"20rem",className:(0,c.cn)("object-cover rounded-lg object-center transition lg:group-hover/episode-card:scale-105 duration-200",w.isCompleted&&"opacity-10")}),E[3]=null==(v=w.episode.episodeMetadata)?void 0:v.image,E[4]=w.isCompleted,E[5]=h):h=E[5],E[6]!==h?(x=(0,n.jsx)("div",{className:"size-20 aspect-square flex-none rounded-md overflow-hidden relative transition bg-[--background]",children:h}),E[6]=h,E[7]=x):x=E[7];let T=null==(r=w.episode)||null==(a=r.baseAnime)||null==(l=a.title)?void 0:l.userPreferred;E[8]!==T?(y=(0,n.jsx)("p",{className:"text-sm text-[--muted]",children:T}),E[8]=T,E[9]=y):y=E[9];let C=(null==(o=w.episode)||null==(s=o.baseAnime)?void 0:s.format)!=="MOVIE"?"Episode ".concat(w.episode.episodeNumber):"Movie";E[10]!==C?(b=(0,n.jsx)("p",{className:"",children:C}),E[10]=C,E[11]=b):b=E[11];let I="torrent"===w.watchType?"Torrent streaming":"debrid"===w.watchType?"Debrid streaming":"online"===w.watchType?"Online streaming":null==(u=w.episode)||null==(d=u.localFile)?void 0:d.name;return E[12]!==I?(N=(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"text-xs text-[--muted] line-clamp-1 tracking-wide",children:I})}),E[12]=I,E[13]=N):N=E[13],E[14]!==y||E[15]!==b||E[16]!==N?(j=(0,n.jsxs)("div",{className:"max-w-full space-y-1",children:[y,b,N]}),E[14]=y,E[15]=b,E[16]=N,E[17]=j):j=E[17],E[18]!==f||E[19]!==j||E[20]!==x?(S=(0,n.jsxs)("div",{className:f,children:[x,j]}),E[18]=f,E[19]=j,E[20]=x,E[21]=S):S=E[21],S}},40845:(e,t,l)=>{"use strict";l.d(t,{RP:()=>C,mF:()=>T,wZ:()=>I});var n=l(95155),i=l(19749),a=l(22264),r=l(55014),s=l(73499),o=l(96826),d=l(51441),c=l(52029),u=l(47363),m=l(31775),p=l(45754),v=l(244),f=l(84127),h=l(2091),x=l(60695),g=l(97400),y=l(93715),b=l(24151),N=l(42500),j=l(29724),S=l(21842),E=l(12115),w=l(78453),A=l(70376);let T=(0,S.tG)("sea-debridstream-manually-select-file",!1),C=(0,N.eU)(!1);function I(e){var t,l,N,S,I,D;let k,_,L,R,M,O,P,F,z,B,K,U,G,q,H,V,W,Y=(0,i.c)(51),{entry:Q,bottomSection:$}=e,X=(0,o.v1)(),[Z,J]=E.useState(null!=(S=null==X||null==(t=X.debridSettings)?void 0:t.streamAutoSelect)&&S),[ee,et]=(0,j.fp)(T),[,el]=(0,j.fp)(C);Y[0]!==Z||Y[1]!==el?(k=()=>{el(Z)},Y[0]=Z,Y[1]=el,Y[2]=k):k=Y[2],Y[3]!==Z?(_=[Z],Y[3]=Z,Y[4]=_):_=Y[4],E.useEffect(k,_);let{data:en,isLoading:ei}=(0,a.L)(Q.mediaId);Y[5]!==(null==en?void 0:en.hasMappingError)||Y[6]!==(null==X||null==(l=X.debridSettings)?void 0:l.streamAutoSelect)?(L=()=>{if(null==en?void 0:en.hasMappingError)J(!1);else{var e,t;J(null!=(t=null==X||null==(e=X.debridSettings)?void 0:e.streamAutoSelect)&&t)}},Y[5]=null==en?void 0:en.hasMappingError,Y[6]=null==X||null==(I=X.debridSettings)?void 0:I.streamAutoSelect,Y[7]=L):L=Y[7];let ea=null==X||null==(N=X.torrentstreamSettings)?void 0:N.autoSelect;Y[8]!==en||Y[9]!==ea?(R=[ea,en],Y[8]=en,Y[9]=ea,Y[10]=R):R=Y[10],E.useLayoutEffect(L,R);let[,er]=(0,j.fp)(u.N7),[,es]=(0,j.fp)(u.Io),{setTorrentSearchStreamEpisode:eo}=(0,c.U)(),ed=function(e){Z?eg(Q,e):ey(e)},{handleAutoSelectStream:ec,handleStreamSelection:eu}=(0,d.u)(),{setDebridstreamAutoplayInfo:em}=(0,s.Lw)(),{data:ep}=(0,r.iz)(null==Q?void 0:Q.mediaId,!0),[ev,ef]=E.useState(!1),{selectedDebridService:eh}=(0,o.S5)();Y[11]!==(null==ep?void 0:ep.torrent)||Y[12]!==ef?(M=()=>{ef(!!(null==ep?void 0:ep.torrent))},Y[11]=null==ep?void 0:ep.torrent,Y[12]=ef,Y[13]=M):M=Y[13],Y[14]!==ep?(O=[ep],Y[14]=ep,Y[15]=O):O=Y[15],E.useEffect(M,O),Y[16]!==Q||Y[17]!==(null==en?void 0:en.episodes)||Y[18]!==em?(P=function(e){var t;if(!e||!e.aniDBEpisode||!(null==en?void 0:en.episodes))return;let l=null==en||null==(t=en.episodes)?void 0:t.find(t=>t.episodeNumber===e.episodeNumber+1);(0,y.v)("TORRENTSTREAM").info("Auto select, Next episode",l),l&&l.aniDBEpisode?em({allEpisodes:null==en?void 0:en.episodes,entry:Q,episodeNumber:l.episodeNumber,aniDBEpisode:l.aniDBEpisode,type:"debridstream"}):em(null)},Y[16]=Q,Y[17]=null==en?void 0:en.episodes,Y[18]=em,Y[19]=P):P=Y[19];let ex=P;function eg(e,t){t&&t.aniDBEpisode&&(null==en?void 0:en.episodes)&&(ec({mediaId:e.mediaId,episodeNumber:t.episodeNumber,aniDBEpisode:t.aniDBEpisode}),ex(t))}let ey=e=>{if(e&&e.aniDBEpisode)if(eo(e),Z)eg(Q,e);else{let l=!1;if(ev&&(null==ep?void 0:ep.torrent)&&e.aniDBEpisode){if(ee)eu({mediaId:Q.mediaId,episodeNumber:e.episodeNumber,aniDBEpisode:e.aniDBEpisode,torrent:ep.torrent,chosenFileId:"",batchEpisodeFiles:void 0}),l=!0;else if((null==ep?void 0:ep.batchEpisodeFiles)&&eh!==b.bY.TORBOX){let n;if(console.log("handleEpisodeClick (batchHistory)",null==ep?void 0:ep.batchEpisodeFiles,e.aniDBEpisode,e.episodeNumber),(null==ep?void 0:ep.batchEpisodeFiles.currentAniDBEpisode)===e.aniDBEpisode)n=ep.batchEpisodeFiles.current;else{var t;let l=e.episodeNumber-ep.batchEpisodeFiles.currentEpisodeNumber,i=null==(t=ep.batchEpisodeFiles.files)?void 0:t.find(e=>{var t;return e.index===((null==(t=ep.batchEpisodeFiles)?void 0:t.current)||0)+l});i&&(n=i.index,console.log("handleEpisodeClick (batchHistory) found file",i))}void 0!==n&&(eu({mediaId:Q.mediaId,episodeNumber:e.episodeNumber,aniDBEpisode:e.aniDBEpisode,torrent:ep.torrent,chosenFileId:String(n),batchEpisodeFiles:ep.batchEpisodeFiles?{...ep.batchEpisodeFiles,files:ep.batchEpisodeFiles.files,current:n,currentAniDBEpisode:e.aniDBEpisode,currentEpisodeNumber:e.episodeNumber}:void 0}),l=!0)}}l||(es(e.episodeNumber),E.startTransition(()=>{ee?(er("debridstream-select"),ex(e)):er("debridstream-select-file")})),eh!==b.bY.TORBOX&&ex(e)}};if(!Q.media)return null;if(ei){let e;return Y[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(h.kt,{}),Y[20]=e):e=Y[20],e}return Y[21]===Symbol.for("react.memo_cache_sentinel")?(F={initial:{opacity:0,y:60},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.35}},z=(0,n.jsx)("div",{className:"h-10 lg:h-0"}),Y[21]=F,Y[22]=z):(F=Y[21],z=Y[22]),Y[23]===Symbol.for("react.memo_cache_sentinel")?(B=e=>{J(e)},Y[23]=B):B=Y[23],Y[24]!==Z?(K=(0,n.jsx)(x.d,{label:"Auto-select",value:Z,onValueChange:B,fieldClass:"w-fit flex-none"}),Y[24]=Z,Y[25]=K):K=Y[25],Y[26]!==Z||Y[27]!==ee||Y[28]!==et?(U=!Z&&(0,n.jsx)(x.d,{label:"Auto-select file",value:ee,onValueChange:e=>{et(e)},moreHelp:"The episode file will be automatically selected from your chosen batch torrent",fieldClass:"w-fit flex-none"}),Y[26]=Z,Y[27]=ee,Y[28]=et,Y[29]=U):U=Y[29],Y[30]!==Z||Y[31]!==ep||Y[32]!==ef||Y[33]!==ev?(G=!Z&&ev&&ep&&(0,n.jsx)("div",{className:"relative w-full xl:max-w-[20rem] group/torrent-stream-batch-history",children:(0,n.jsx)("div",{className:"rounded-full max-w-[20rem]",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"flex flex-none items-center justify-center",children:(0,n.jsx)(f.K0,{intent:"alert-basic",icon:(0,n.jsx)(A.Gsv,{}),size:"sm",onClick:()=>ef(!1),className:"rounded-full"})}),(0,n.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center flex-none gap-1",children:["Using previous selection",(0,n.jsx)(g.m_,{className:"text-sm",trigger:(0,n.jsx)(w.ExT,{className:"transition-opacity opacity-45 hover:opacity-90"}),children:"The next episode will be played from this batch."})]}),(0,n.jsx)("p",{className:"line-clamp-1 text-[--muted] text-xs tracking-wide w-0 transition-all duration-300 ease-in-out group-hover/torrent-stream-batch-history:w-[20rem]",children:null==(D=ep.torrent)?void 0:D.name})]})]})})}),Y[30]=Z,Y[31]=ep,Y[32]=ef,Y[33]=ev,Y[34]=G):G=Y[34],Y[35]!==K||Y[36]!==U||Y[37]!==G?(q=(0,n.jsxs)("div",{className:"flex flex-col flex-wrap lg:flex-nowrap items-start md:items-center md:flex-row gap-2 md:gap-6 2xl:py-0 lg:h-12","data-debrid-stream-page-content-actions-container":!0,children:[K,U,G]}),Y[35]=K,Y[36]=U,Y[37]=G,Y[38]=q):q=Y[38],Y[39]!==(null==en?void 0:en.hasMappingError)?(H=(null==en?void 0:en.hasMappingError)&&(0,n.jsx)("div",{"data-debrid-stream-page-no-metadata-message-container":!0,children:(0,n.jsx)("p",{className:"text-red-200 opacity-50",children:"No metadata info available for this anime. You may need to manually select the file to stream."})}),Y[39]=null==en?void 0:en.hasMappingError,Y[40]=H):H=Y[40],Y[41]!==$||Y[42]!==Q||Y[43]!==en||Y[44]!==ey||Y[45]!==ed?(V=(0,n.jsx)(m.X,{episodeCollection:en,entry:Q,onEpisodeClick:ey,onPlayNextEpisodeOnMount:ed,bottomSection:$}),Y[41]=$,Y[42]=Q,Y[43]=en,Y[44]=ey,Y[45]=ed,Y[46]=V):V=Y[46],Y[47]!==q||Y[48]!==H||Y[49]!==V?(W=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(p.f,{"data-anime-entry-page-debrid-stream-view":!0,className:"relative 2xl:order-first pb-10 lg:pt-0",...F,children:[z,(0,n.jsxs)(v.KZ,{"data-debrid-stream-page":!0,children:[q,H,V]})]},"debrid-streaming-episodes")}),Y[47]=q,Y[48]=H,Y[49]=V,Y[50]=W):W=Y[50],W}},41422:(e,t,l)=>{"use strict";l.d(t,{Ce:()=>i,QG:()=>r,TH:()=>a});var n=l(42500);let i=(0,n.eU)([]),a=(0,n.eU)([]),r=(0,n.eU)(e=>e(i).length)},41611:(e,t,l)=>{"use strict";l.d(t,{AP:()=>p,Ob:()=>d,_J:()=>u,_S:()=>s,fR:()=>o,m7:()=>c,qE:()=>r,yl:()=>m});var n=l(19749),i=l(42500),a=l(29724);let r=(0,i.eU)(!1),s=(0,i.eU)(null),o=(0,i.eU)(!1),d=(0,i.eU)(new Set);(0,i.eU)(void 0);let c=(0,i.eU)([]);(0,i.eU)([]);let u=(0,i.eU)(null),m=(0,i.eU)(!1);function p(){let e,t=(0,n.c)(3),[,l]=(0,a.fp)(r),[,i]=(0,a.fp)(u);return t[0]!==l||t[1]!==i?(e={openDirInLibraryExplorer:e=>{i(e),setTimeout(()=>{l(!0)},200)}},t[0]=l,t[1]=i,t[2]=e):e=t[2],e}},41963:(e,t,l)=>{"use strict";l.d(t,{I:()=>j,p:()=>N});var n=l(95155),i=l(55014),a=l(73499),r=l(52029),s=l(47363),o=l(82449),d=l(10212),c=l(244),u=l(84127),m=l(2091),p=l(22960),v=l(77022),f=l(93715),h=l(42500),x=l(29724),g=l(12115),y=l(38628);let b=(0,f.v)("TORRENT STREAM FILE SELECTION"),N=(0,h.eU)(void 0);function j(e){let{entry:t}=e,[,l]=(0,x.fp)(s.N7),[f,h]=(0,x.fp)(N),[j,S]=g.useState(-1),{torrentSearchStreamEpisode:E}=(0,r.U)(),{data:w,isLoading:A}=(0,i.Dg)({torrent:f,episodeNumber:null==E?void 0:E.episodeNumber,media:t.media},!!f),{handleStreamSelection:T}=(0,o.w)(),{setAutoPlayTorrent:C}=(0,a.K1)(),I=null==w?void 0:w.some(e=>e.isLikely),D=(null==w?void 0:w.filter(e=>e.isLikely).length)===1,k=g.useRef(null),_=g.useCallback(e=>{S(Number(e))},[]),L=g.useCallback(e=>e.index,[]),R=g.useRef(null);return g.useEffect(()=>{if(D&&k.current&&R.current){let e=setTimeout(()=>{let e=k.current,t=R.current;if(e&&t){let l=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=l.top-n.top+t.scrollTop-16;t.scrollTo({top:i,behavior:"smooth"})}},500);return()=>clearTimeout(e)}},[D,k.current]),(0,n.jsx)(v.Tr,{open:!!f,onOpenChange:e=>{e||(h(void 0),S(-1))},children:(0,n.jsx)(v.Cz,{className:"max-w-5xl mx-auto",children:(0,n.jsx)(c.KZ,{className:"mt-4 p-3 lg:p-6",children:A?(0,n.jsx)(m.kt,{}):(0,n.jsxs)(c.KZ,{className:"pb-0",children:[(0,n.jsx)(p.F,{viewportRef:R,className:"h-[80dvh] lg:h-[60dvh] overflow-y-auto p-4 border rounded-[--radius-md]",children:(0,n.jsx)(d.sW,{filePreviews:w||[],selectedValue:j,onFileSelect:_,getFileValue:L,hasLikelyMatch:I||!1,hasOneLikelyMatch:D||!1,likelyMatchRef:k})}),(0,n.jsx)(u.$n,{intent:"primary",className:"w-full",rightIcon:(0,n.jsx)(y.HI7,{className:"text-xl"}),disabled:-1===j||A,onClick:function(){if(-1==j||!f||!E||!E.aniDBEpisode)return;let e={current:j,files:(null==w?void 0:w.map(e=>({index:e.index,name:e.displayPath,path:e.path})))||[],currentEpisodeNumber:E.episodeNumber,currentAniDBEpisode:E.aniDBEpisode};b.info("Saving torrent for auto play",{batchFiles:e}),C(f,t,e),T({torrent:f,mediaId:t.mediaId,aniDBEpisode:E.aniDBEpisode,episodeNumber:E.episodeNumber,chosenFileIndex:j,batchEpisodeFiles:e}),h(void 0),S(-1),l(void 0)},children:"Stream"})]})})})})}},46383:(e,t,l)=>{"use strict";l.d(t,{k:()=>n});let n=(0,l(47555).E)({active:!1,playbackInfo:null,playbackError:null,loadingState:null})},47363:(e,t,l)=>{"use strict";l.d(t,{Io:()=>y,N7:()=>g,qM:()=>b});var n=l(95155),i=l(19749),a=l(37614),r=l(52029),s=l(67487),o=l(24685),d=l(24038),c=l(244),u=l(91360),m=l(77022),p=l(91332),v=l(42500),f=l(29724),h=l(6066),x=l(12115);let g=(0,v.eU)(void 0),y=(0,v.eU)(void 0);function b(e){let t,l,v,y,b,j,S,E,w,A,T,C,I,D,k,_,L=(0,i.c)(47),{entry:R,isPlaylistDrawer:M}=e;(0,p.Ky)();let[O,P]=(0,f.fp)(g),F=(0,h.useSearchParams)(),z=(0,h.useRouter)(),B=(0,h.usePathname)();L[0]!==F?(t=F.get("id"),L[0]=F,L[1]=t):t=L[1];let K=t;L[2]!==F?(l=F.get("download"),L[2]=F,L[3]=l):l=L[3];let U=l,{currentPlaylist:G}=(0,a.n)();L[4]!==U||L[5]!==K||L[6]!==B||L[7]!==z||L[8]!==P?(v=()=>{U&&(P("download"),z.replace(B+"?id=".concat(K)))},L[4]=U,L[5]=K,L[6]=B,L[7]=z,L[8]=P,L[9]=v):v=L[9],L[10]!==U?(y=[U],L[10]=U,L[11]=y):y=L[11],(0,x.useEffect)(v,y),L[12]!==R||L[13]!==O?(b={entry:R,type:O},L[12]=R,L[13]=O,L[14]=b):b=L[14];let{onTorrentValidated:q}=(0,r.M)(b);if(G&&!M)return null;let H=void 0!==O;L[15]!==P?(j=()=>P(void 0),L[15]=P,L[16]=j):j=L[16];let V="download"===O&&"lg:h-[92.5%] xl:mx-[10rem] 2xl:mx-[20rem]",W=void 0===O&&"lg:h-[80%] xl:mx-[10rem] 2xl:mx-[20rem]";if(L[17]!==V||L[18]!==W?(S=(0,u.cn)("bg-gray-950 h-[90%] lg:h-[80%] bg-opacity-85 firefox:bg-opacity-100 lg:mx-[2rem]",V,W),L[17]=V,L[18]=W,L[19]=S):S=L[19],L[20]===Symbol.for("react.memo_cache_sentinel")?(E=(0,n.jsx)(d.Z,{spread:40,glow:!0,disabled:!1,proximity:100,inactiveZone:.01,className:"opacity-30"}),L[20]=E):E=L[20],L[21]!==R||L[22]!==O){var Y;w="download"===O&&(0,n.jsx)(N,{episodes:null==(Y=R.downloadInfo)?void 0:Y.episodesToDownload}),L[21]=R,L[22]=O,L[23]=w}else w=L[23];L[24]!==R||L[25]!==O?(A=!!O&&(0,n.jsx)(o.m,{type:O,entry:R}),L[24]=R,L[25]=O,L[26]=A):A=L[26],L[27]!==w||L[28]!==A?(T=(0,n.jsxs)(c.KZ,{className:"relative z-[1]","data-torrent-search-drawer-content":!0,children:[w,A]}),L[27]=w,L[28]=A,L[29]=T):T=L[29];let Q=O||"download";L[30]!==q||L[31]!==Q?(C=(0,n.jsx)(s.V,{type:Q,onTorrentValidated:q}),L[30]=q,L[31]=Q,L[32]=C):C=L[32];let $=O||"download";return L[33]!==q||L[34]!==$?(I=(0,n.jsx)(s.V,{type:$,onTorrentValidated:q}),L[33]=q,L[34]=$,L[35]=I):I=L[35],L[36]!==T||L[37]!==C||L[38]!==I?(D=(0,n.jsxs)("div",{className:"p-4 lg:p-8 flex-1 overflow-y-auto",children:[T,C,I]}),L[36]=T,L[37]=C,L[38]=I,L[39]=D):D=L[39],L[40]!==D||L[41]!==S?(k=(0,n.jsxs)(m.Cz,{className:S,children:[E,D]}),L[40]=D,L[41]=S,L[42]=k):k=L[42],L[43]!==k||L[44]!==H||L[45]!==j?(_=(0,n.jsx)(m.Tr,{open:H,onOpenChange:j,children:k}),L[43]=k,L[44]=H,L[45]=j,L[46]=_):_=L[46],_}function N(e){let t,l,a,r,s,o,d,c,u=(0,i.c)(18),{episodes:m}=e;if(!m||!m.length)return null;if(u[0]!==m){t=m.sort(S),s="space-y-2",o=!0;let e=t.length>1?"s":"";u[7]!==e?(l=(0,n.jsxs)("span",{className:"font-semibold",children:["Missing episode",e]}),u[7]=e,u[8]=l):l=u[8],a=": ",r=t.slice(0,5).map(j).join(", "),u[0]=m,u[1]=t,u[2]=l,u[3]=a,u[4]=r,u[5]=s,u[6]=o}else t=u[1],l=u[2],a=u[3],r=u[4],s=u[5],o=u[6];let p=t.length>5?", ..., ".concat(t[t.length-1].episodeNumber):"";return u[9]!==l||u[10]!==a||u[11]!==r||u[12]!==p?(d=(0,n.jsxs)("p",{children:[l,a,r,p]}),u[9]=l,u[10]=a,u[11]=r,u[12]=p,u[13]=d):d=u[13],u[14]!==s||u[15]!==o||u[16]!==d?(c=(0,n.jsx)("div",{className:s,"data-torrent-search-drawer-episode-list":o,children:d}),u[14]=s,u[15]=o,u[16]=d,u[17]=c):c=u[17],c}function j(e){return e.episodeNumber}function S(e,t){return e.episodeNumber-t.episodeNumber}},47601:(e,t,l)=>{"use strict";l.d(t,{i:()=>o});var n=l(95155),i=l(19749),a=l(96826),r=l(47342),s=l(62816);function o(e){let t,l,o,d,c,u,m,p,v=(0,i.c)(17);v[0]!==e?({content:l,children:t,availableWhenOffline:u,hideMenuIf:o,onOpenChange:d,...c}=e,v[0]=e,v[1]=t,v[2]=l,v[3]=o,v[4]=d,v[5]=c,v[6]=u):(t=v[1],l=v[2],o=v[3],d=v[4],c=v[5],u=v[6]);let f=void 0===u||u,h=(0,a.v1)();return v[7]!==f||v[8]!==l||v[9]!==o||v[10]!==(null==h?void 0:h.isOffline)?(m=((null==h?void 0:h.isOffline)&&f||!(null==h?void 0:h.isOffline))&&!o&&(0,n.jsx)(r.Ip,{className:"max-w-xs","data-sea-context-menu-content":!0,children:l}),v[7]=f,v[8]=l,v[9]=o,v[10]=null==h?void 0:h.isOffline,v[11]=m):m=v[11],v[12]!==t||v[13]!==d||v[14]!==c||v[15]!==m?(p=(0,n.jsxs)(s.tz,{"data-sea-context-menu":!0,onOpenChange:d,...c,children:[t,m]}),v[12]=t,v[13]=d,v[14]=c,v[15]=m,v[16]=p):p=v[16],p}},48751:(e,t,l)=>{"use strict";l.d(t,{Fq:()=>o,LC:()=>r,cg:()=>m,sA:()=>v,ys:()=>c,zm:()=>h});var n=l(19749),i=l(7675),a=l(74889);function r(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.NAKAMA.NakamaReconnectToHost.endpoint,method:a.S.NAKAMA.NakamaReconnectToHost.methods[0],mutationKey:[a.S.NAKAMA.NakamaReconnectToHost.key],onSuccess:s},t[0]=e):e=t[0],(0,i.qk)(e)}async function s(){}function o(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.NAKAMA.NakamaRemoveStaleConnections.endpoint,method:a.S.NAKAMA.NakamaRemoveStaleConnections.methods[0],mutationKey:[a.S.NAKAMA.NakamaRemoveStaleConnections.key],onSuccess:d},t[0]=e):e=t[0],(0,i.qk)(e)}async function d(){}function c(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.NAKAMA.NakamaPlayVideo.endpoint,method:a.S.NAKAMA.NakamaPlayVideo.methods[0],mutationKey:[a.S.NAKAMA.NakamaPlayVideo.key],onSuccess:u},t[0]=e):e=t[0],(0,i.qk)(e)}async function u(){}function m(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.NAKAMA.NakamaCreateWatchParty.endpoint,method:a.S.NAKAMA.NakamaCreateWatchParty.methods[0],mutationKey:[a.S.NAKAMA.NakamaCreateWatchParty.key],onSuccess:p},t[0]=e):e=t[0],(0,i.qk)(e)}async function p(){}function v(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.NAKAMA.NakamaJoinWatchParty.endpoint,method:a.S.NAKAMA.NakamaJoinWatchParty.methods[0],mutationKey:[a.S.NAKAMA.NakamaJoinWatchParty.key],onSuccess:f},t[0]=e):e=t[0],(0,i.qk)(e)}async function f(){}function h(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.NAKAMA.NakamaLeaveWatchParty.endpoint,method:a.S.NAKAMA.NakamaLeaveWatchParty.methods[0],mutationKey:[a.S.NAKAMA.NakamaLeaveWatchParty.key],onSuccess:x},t[0]=e):e=t[0],(0,i.qk)(e)}async function x(){}},51441:(e,t,l)=>{"use strict";l.d(t,{u:()=>m});var n=l(98802),i=l(78216),a=l(55340),r=l(26603),s=l(93715),o=l(94077),d=l(46278),c=l(29724),u=l(12115);function m(){let{mutate:e,isPending:t}=(0,n.O9)();(0,d.jE)();let{torrentStreamingPlayback:l,electronPlaybackMethod:m}=(0,i.zw)(),{externalPlayerLink:p}=(0,i._V)(),v=(0,c.md)(r.O1),[f,h]=(0,c.fp)(a.q),x=u.useMemo(()=>o.nH&&m===i.Ft.NativePlayer?"nativeplayer":(null==p?void 0:p.length)&&l===i.kG.ExternalPlayerLink?"externalPlayerLink":"default",[l,p,m]);return{handleStreamSelection:u.useCallback(t=>{(0,s.v)("DEBRID STREAM SELECTION").info("Starting debrid stream",t),e({mediaId:t.mediaId,episodeNumber:t.episodeNumber,torrent:t.torrent,aniDBEpisode:t.aniDBEpisode,fileId:t.chosenFileId,playbackType:x,clientId:v||"",autoSelect:!1,batchEpisodeFiles:t.batchEpisodeFiles},{onSuccess:()=>{},onError:()=>{h(null)}})},[x,v]),handleAutoSelectStream:u.useCallback(t=>{e({mediaId:t.mediaId,episodeNumber:t.episodeNumber,torrent:void 0,aniDBEpisode:t.aniDBEpisode,fileId:"",playbackType:x,clientId:v||"",autoSelect:!0},{onSuccess:()=>{},onError:()=>{h(null)}})},[x,v]),isPending:t}}},52029:(e,t,l)=>{"use strict";l.d(t,{M:()=>f,U:()=>v});var n=l(19749),i=l(73499),a=l(51441),r=l(24685),s=l(47363),o=l(82449),d=l(41963),c=l(42500),u=l(29724),m=l(12115);let p=(0,c.eU)(null);function v(){let e,t=(0,n.c)(3),[l,i]=(0,u.fp)(p);return t[0]!==i||t[1]!==l?(e={torrentSearchStreamEpisode:l,setTorrentSearchStreamEpisode:i},t[0]=i,t[1]=l,t[2]=e):e=t[2],e}function f(e){let t,l,c=(0,n.c)(13),{type:p,entry:f}=e,h=void 0===p?"download":p,{handleStreamSelection:x}=(0,o.w)(),{handleStreamSelection:g}=(0,a.u)(),[y,b]=(0,u.fp)(r.l),{torrentSearchStreamEpisode:N}=v(),j=(0,u.Xr)(d.p),{setAutoPlayTorrent:S}=(0,i.K1)(),E=(0,u.Xr)(s.N7);c[0]!==f||c[1]!==g||c[2]!==x||c[3]!==y||c[4]!==S||c[5]!==b||c[6]!==E||c[7]!==j||c[8]!==N||c[9]!==h?(t=()=>{let e=y[0];console.log("onTorrentValidated",N),"torrentstream-select"===h?e&&(null==N?void 0:N.aniDBEpisode)&&(S(e,f),x({torrent:e,mediaId:f.mediaId,aniDBEpisode:N.aniDBEpisode,episodeNumber:N.episodeNumber,chosenFileIndex:void 0,batchEpisodeFiles:void 0}),E(void 0),m.startTransition(()=>{b([])})):"torrentstream-select-file"===h?e&&(null==N?void 0:N.aniDBEpisode)&&(j(e),m.startTransition(()=>{b([])})):"debridstream-select"===h?y.length&&(null==N?void 0:N.aniDBEpisode)&&(S(e,f),g({torrent:e,mediaId:f.mediaId,aniDBEpisode:N.aniDBEpisode,episodeNumber:N.episodeNumber,chosenFileId:"",batchEpisodeFiles:void 0}),E(void 0),m.startTransition(()=>{b([])})):"debridstream-select-file"===h&&y.length&&(null==N?void 0:N.aniDBEpisode)&&(j(e),m.startTransition(()=>{b([])}))},c[0]=f,c[1]=g,c[2]=x,c[3]=y,c[4]=S,c[5]=b,c[6]=E,c[7]=j,c[8]=N,c[9]=h,c[10]=t):t=c[10];let w=t;return c[11]!==w?(l={onTorrentValidated:w},c[11]=w,c[12]=l):l=c[12],l}},52116:(e,t,l)=>{"use strict";l.d(t,{Wk:()=>d,Y2:()=>c,v7:()=>u});var n=l(19749),i=l(2159),a=l(41422),r=l(29724),s=l(6066),o=l(12115);function d(){return(0,r.md)(a.QG)}function c(){return(0,r.md)(a.Ce)}function u(){let e,t,l=(0,n.c)(7),d=(0,s.usePathname)(),c=(0,r.Xr)(a.Ce),u=(0,r.Xr)(a.TH),{data:m}=(0,i.Cf)("/schedule"!==d);return l[0]!==(null==m?void 0:m.episodes)||l[1]!==(null==m?void 0:m.silencedEpisodes)||l[2]!==c||l[3]!==u?(e=()=>{var e,t;c(null!=(e=null==m?void 0:m.episodes)?e:[]),u(null!=(t=null==m?void 0:m.silencedEpisodes)?t:[])},l[0]=null==m?void 0:m.episodes,l[1]=null==m?void 0:m.silencedEpisodes,l[2]=c,l[3]=u,l[4]=e):e=l[4],l[5]!==m?(t=[m],l[5]=m,l[6]=t):t=l[6],(0,o.useEffect)(e,t),null}},53540:(e,t,l)=>{"use strict";l.d(t,{f:()=>c});var n=l(95155),i=l(19749),a=l(78106),r=l(91360),s=l(15388),o=l(2091),d=l(12115);function c(e){let t,l,a,r,o=(0,i.c)(10),{trigger:d,trailerId:c,isOpen:m,setIsOpen:p}=e;return o[0]!==p?(t=e=>null==p?void 0:p(e),o[0]=p,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("div",{className:"!mt-0 bg-[url(/pattern-2.svg)] z-[-1] w-full h-[5rem] absolute opacity-30 top-0 left-0 bg-no-repeat bg-right bg-cover",children:(0,n.jsx)("div",{className:"w-full absolute top-0 h-full bg-gradient-to-t from-[--background] to-transparent z-[-2]"})}),o[2]=l):l=o[2],o[3]!==c?(a=(0,n.jsx)(u,{trailerId:c}),o[3]=c,o[4]=a):a=o[4],o[5]!==m||o[6]!==t||o[7]!==a||o[8]!==d?(r=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s._s,{open:m,onOpenChange:t,trigger:d,size:"xl",side:"right",contentClass:"flex items-center justify-center",children:[l,a]})}),o[5]=m,o[6]=t,o[7]=a,o[8]=d,o[9]=r):r=o[9],r}function u(e){let t,l,s,c,u,m=(0,i.c)(13),{trailerId:p}=e,[v]=d.useState(!0);if(d.useState(!0),!p){let e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(a.D,{title:"No trailer found"}),m[0]=e):e=m[0],e}m[1]!==v?(t=!v&&(0,n.jsx)(o.kt,{className:""}),m[1]=v,m[2]=t):t=m[2];let f=!v&&"hidden";m[3]!==f?(l=(0,r.cn)("relative aspect-video h-[85dvh] flex items-center overflow-hidden rounded-xl",f),m[3]=f,m[4]=l):l=m[4];let h="https://www.youtube.com/embed/".concat(p);return m[5]!==h?(s=(0,n.jsx)("iframe",{src:h,title:"YouTube Video",className:"w-full aspect-video rounded-xl",allowFullScreen:!0,loading:"lazy"}),m[5]=h,m[6]=s):s=m[6],m[7]!==l||m[8]!==s?(c=(0,n.jsx)("div",{className:l,children:s}),m[7]=l,m[8]=s,m[9]=c):c=m[9],m[10]!==t||m[11]!==c?(u=(0,n.jsxs)(n.Fragment,{children:[t,c]}),m[10]=t,m[11]=c,m[12]=u):u=m[12],u}},55014:(e,t,l)=>{"use strict";l.d(t,{Dg:()=>h,T2:()=>v,UW:()=>c,W9:()=>m,c3:()=>d,iz:()=>x,xN:()=>o});var n=l(19749),i=l(7675),a=l(74889),r=l(46278),s=l(69554);function o(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.TORRENTSTREAM.GetTorrentstreamSettings.endpoint,method:a.S.TORRENTSTREAM.GetTorrentstreamSettings.methods[0],queryKey:[a.S.TORRENTSTREAM.GetTorrentstreamSettings.key],enabled:!0},t[0]=e):e=t[0],(0,i.fl)(e)}function d(){let e,t,l=(0,n.c)(3),s=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.TORRENTSTREAM.SaveTorrentstreamSettings.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:a.S.TORRENTSTREAM.SaveTorrentstreamSettings.endpoint,method:a.S.TORRENTSTREAM.SaveTorrentstreamSettings.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[a.S.TORRENTSTREAM.GetTorrentstreamSettings.key]}),await s.invalidateQueries({queryKey:[a.S.STATUS.GetStatus.key]})}},l[1]=s,l[2]=t):t=l[2],(0,i.qk)(t)}function c(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.TORRENTSTREAM.TorrentstreamStartStream.endpoint,method:a.S.TORRENTSTREAM.TorrentstreamStartStream.methods[0],mutationKey:[a.S.TORRENTSTREAM.TorrentstreamStartStream.key],onSuccess:u},t[0]=e):e=t[0],(0,i.qk)(e)}async function u(){}function m(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.TORRENTSTREAM.TorrentstreamStopStream.endpoint,method:a.S.TORRENTSTREAM.TorrentstreamStopStream.methods[0],mutationKey:[a.S.TORRENTSTREAM.TorrentstreamStopStream.key],onSuccess:p},t[0]=e):e=t[0],(0,i.qk)(e)}async function p(){s.oR.success("Stream stopped")}function v(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.TORRENTSTREAM.TorrentstreamDropTorrent.endpoint,method:a.S.TORRENTSTREAM.TorrentstreamDropTorrent.methods[0],mutationKey:[a.S.TORRENTSTREAM.TorrentstreamDropTorrent.key],onSuccess:f},t[0]=e):e=t[0],(0,i.qk)(e)}async function f(){s.oR.success("Torrent dropped")}function h(e,t){let l,r,s=(0,n.c)(6);return s[0]!==e?(l=[a.S.TORRENTSTREAM.GetTorrentstreamTorrentFilePreviews.key,e],s[0]=e,s[1]=l):l=s[1],s[2]!==t||s[3]!==l||s[4]!==e?(r={endpoint:a.S.TORRENTSTREAM.GetTorrentstreamTorrentFilePreviews.endpoint,method:a.S.TORRENTSTREAM.GetTorrentstreamTorrentFilePreviews.methods[0],queryKey:l,data:e,enabled:t},s[2]=t,s[3]=l,s[4]=e,s[5]=r):r=s[5],(0,i.fl)(r)}function x(e,t){let l,r,s,o=(0,n.c)(9),d=String(e);o[0]!==t||o[1]!==d?(l=[a.S.TORRENTSTREAM.GetTorrentstreamBatchHistory.key,d,t],o[0]=t,o[1]=d,o[2]=l):l=o[2];let c=Number(e);o[3]!==c?(r={mediaId:c},o[3]=c,o[4]=r):r=o[4];let u=!!e;return o[5]!==l||o[6]!==r||o[7]!==u?(s={endpoint:a.S.TORRENTSTREAM.GetTorrentstreamBatchHistory.endpoint,method:a.S.TORRENTSTREAM.GetTorrentstreamBatchHistory.methods[0],queryKey:l,data:r,enabled:u},o[5]=l,o[6]=r,o[7]=u,o[8]=s):s=o[8],(0,i.fl)(s)}},55340:(e,t,l)=>{"use strict";l.d(t,{q:()=>g,r:()=>y});var n=l(95155),i=l(19749),a=l(98802),r=l(14490),s=l(75733),o=l(244),d=l(84127),c=l(2091),u=l(76049),m=l(23862),p=l(42500),v=l(29724),f=l(12115),h=l(65160),x=l(69554);let g=(0,p.eU)(null);function y(){let e,t,l,p,y,b,N,j,S,E,w,A,T,C,I,D,k,_,L,R,M,O,P=(0,i.c)(53),[F,z]=(0,v.fp)(g),{mutate:B,isPending:K}=(0,a.AH)(),[U,G]=f.useState(!0),[q,H]=f.useState(!1);P[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=setTimeout(()=>{H(!1)},12e4);return()=>clearTimeout(e)},P[0]=e):e=P[0],P[1]!==q?(t=[q],P[1]=q,P[2]=t):t=P[2],f.useEffect(e,t),P[3]!==z?(l={type:m.c.DEBRID_STREAM_STATE,onMessage:e=>{if(e){if("downloading"===e.status||"started"===e.status){z(e),H(!1);return}if("failed"===e.status){z(null),x.oR.error(e.message),H(!1);return}if("ready"===e.status){z(null),x.oR.info("Sending stream to player...",{duration:1}),H(!0);return}}}},P[3]=z,P[4]=l):l=P[4],(0,r.oA)(l),P[5]===Symbol.for("react.memo_cache_sentinel")?(p={type:m.c.PLAYBACK_MANAGER_PROGRESS_TRACKING_STARTED,onMessage:e=>{e&&H(!1)}},P[5]=p):p=P[5],(0,r.oA)(p),P[6]!==B||P[7]!==z?(y={title:"Cancel and remove torrent",description:"Are you sure you want to cancel the stream and remove the torrent?",onConfirm:()=>{B({options:{removeTorrent:!0}},{onSuccess:()=>{z(null)}})}},P[6]=B,P[7]=z,P[8]=y):y=P[8];let V=(0,s.J)(y);P[9]!==B||P[10]!==z?(b={title:"Cancel stream",description:"Are you sure you want to cancel the stream?",onConfirm:()=>{B({options:{removeTorrent:!1}},{onSuccess:()=>{z(null)}})}},P[9]=B,P[10]=z,P[11]=b):b=P[11];let W=(0,s.J)(b);if(!F){let e;return P[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(n.Fragment,{}),P[12]=e):e=P[12],e}P[13]!==U||P[14]!==(null==F?void 0:F.message)?(N=U&&(0,n.jsx)("div",{className:"fixed z-[100] bottom-8 w-full h-fit flex justify-center",children:(0,n.jsx)("div",{className:"shadow-2xl p-4 bg-gray-900 border text-white rounded-3xl cursor-pointer hover:border-gray-600",onClick:()=>G(!1),children:(0,n.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,n.jsx)(h.hgf,{className:"text-2xl text-[--brand]"}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("p",{children:"Awaiting stream from Debrid service"}),(0,n.jsx)("p",{className:"text-[--muted] text-sm",children:null==F?void 0:F.message})]}),(0,n.jsx)(c.y$,{className:"size-5"})]})})}),P[13]=U,P[14]=null==F?void 0:F.message,P[15]=N):N=P[15];let Y=!U&&!!F;P[16]===Symbol.for("react.memo_cache_sentinel")?(j=e=>G(!e),P[16]=j):j=P[16],P[17]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsx)("p",{className:"text-[--muted] italic text-sm",children:"Closing this modal will not cancel the stream"}),P[17]=S):S=P[17];let Q=null==F?void 0:F.torrentName;P[18]!==Q?(E=(0,n.jsx)("p",{className:"text-center text-sm line-clamp-1 tracking-wide",children:Q}),P[18]=Q,P[19]=E):E=P[19];let $=null==F?void 0:F.message;P[20]!==$?(w=(0,n.jsx)(c.kt,{title:$}),P[20]=$,P[21]=w):w=P[21],P[22]!==E||P[23]!==w?(A=(0,n.jsxs)("div",{className:"p-4 pb-0",children:[E,w]}),P[22]=E,P[23]=w,P[24]=A):A=P[24],P[25]!==W?(T=()=>W.open(),P[25]=W,P[26]=T):T=P[26];let X=K||(null==F?void 0:F.status)!=="downloading"||(null==F?void 0:F.message)==="Downloading torrent...";P[27]!==T||P[28]!==X?(C=(0,n.jsx)(d.$n,{onClick:T,intent:"alert-basic",disabled:X,size:"sm",children:"Cancel"}),P[27]=T,P[28]=X,P[29]=C):C=P[29],P[30]!==V?(I=()=>V.open(),P[30]=V,P[31]=I):I=P[31];let Z=K||(null==F?void 0:F.status)!=="downloading"||(null==F?void 0:F.message)==="Downloading torrent...";return P[32]!==I||P[33]!==Z?(D=(0,n.jsx)(d.$n,{onClick:I,intent:"alert-basic",disabled:Z,size:"sm",children:"Cancel and remove torrent"}),P[32]=I,P[33]=Z,P[34]=D):D=P[34],P[35]!==C||P[36]!==D?(k=(0,n.jsxs)("div",{className:"flex justify-center gap-1 mt-4",children:[C,D]}),P[35]=C,P[36]=D,P[37]=k):k=P[37],P[38]!==A||P[39]!==k?(_=(0,n.jsxs)(o.KZ,{children:[S,A,k]}),P[38]=A,P[39]=k,P[40]=_):_=P[40],P[41]!==_||P[42]!==Y?(L=(0,n.jsx)(u.a,{contentClass:"max-w-xl sm:rounded-3xl",open:Y,onOpenChange:j,children:_}),P[41]=_,P[42]=Y,P[43]=L):L=P[43],P[44]!==W?(R=(0,n.jsx)(s.K,{...W}),P[44]=W,P[45]=R):R=P[45],P[46]!==V?(M=(0,n.jsx)(s.K,{...V}),P[46]=V,P[47]=M):M=P[47],P[48]!==L||P[49]!==R||P[50]!==M||P[51]!==N?(O=(0,n.jsxs)(n.Fragment,{children:[N,L,R,M]}),P[48]=L,P[49]=R,P[50]=M,P[51]=N,P[52]=O):O=P[52],O}},56222:(e,t,l)=>{"use strict";l.d(t,{F6:()=>u,PY:()=>d,Wy:()=>m,_X:()=>o,pZ:()=>c});var n=l(19749),i=l(7675),a=l(74889),r=l(46278),s=l(69554);function o(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.PLAYLIST.CreatePlaylist.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.PLAYLIST.CreatePlaylist.endpoint,method:a.S.PLAYLIST.CreatePlaylist.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[a.S.PLAYLIST.GetPlaylists.key]}),s.oR.success("Playlist created")}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function d(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.PLAYLIST.GetPlaylists.endpoint,method:a.S.PLAYLIST.GetPlaylists.methods[0],queryKey:[a.S.PLAYLIST.GetPlaylists.key],enabled:!0},t[0]=e):e=t[0],(0,i.fl)(e)}function c(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.PLAYLIST.UpdatePlaylist.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.PLAYLIST.UpdatePlaylist.endpoint,method:a.S.PLAYLIST.UpdatePlaylist.methods[0],mutationKey:e,onSuccess:async()=>{await o.refetchQueries({queryKey:[a.S.PLAYLIST.GetPlaylists.key]}),s.oR.success("Playlist updated")}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function u(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.PLAYLIST.DeletePlaylist.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.PLAYLIST.DeletePlaylist.endpoint,method:a.S.PLAYLIST.DeletePlaylist.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[a.S.PLAYLIST.GetPlaylists.key]}),s.oR.success("Playlist deleted")}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function m(e){let t,l,r,s=(0,n.c)(8);s[0]!==e?(t=a.S.PLAYLIST.GetPlaylistEpisodes.endpoint.replace("{id}",String(e)),s[0]=e,s[1]=t):t=s[1];let o=String(e);s[2]!==o?(l=[a.S.PLAYLIST.GetPlaylistEpisodes.key,o],s[2]=o,s[3]=l):l=s[3];let d=!!e;return s[4]!==t||s[5]!==l||s[6]!==d?(r={endpoint:t,method:a.S.PLAYLIST.GetPlaylistEpisodes.methods[0],queryKey:l,enabled:d},s[4]=t,s[5]=l,s[6]=d,s[7]=r):r=s[7],(0,i.fl)(r)}},58092:(e,t,l)=>{"use strict";l.d(t,{E:()=>r});var n=l(19749),i=l(7675),a=l(74889);function r(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.EXPLORER.OpenInExplorer.endpoint,method:a.S.EXPLORER.OpenInExplorer.methods[0],mutationKey:[a.S.EXPLORER.OpenInExplorer.key],onSuccess:s},t[0]=e):e=t[0],(0,i.qk)(e)}async function s(){}},61203:(e,t,l)=>{"use strict";l.d(t,{Cz:()=>c,JF:()=>v,Ww:()=>o,Xj:()=>u,j3:()=>d,n6:()=>f,vf:()=>p});var n=l(19749),i=l(7675),a=l(74889),r=l(46278),s=l(69554);function o(e,t,l){let r,s,o,d=(0,n.c)(12),c=String(e);d[0]!==l||d[1]!==t||d[2]!==c?(r=[a.S.ONLINESTREAM.GetOnlineStreamEpisodeList.key,c,t,l],d[0]=l,d[1]=t,d[2]=c,d[3]=r):r=d[3];let u=Number(e);d[4]!==l||d[5]!==t||d[6]!==u?(s={mediaId:u,provider:t,dubbed:l},d[4]=l,d[5]=t,d[6]=u,d[7]=s):s=d[7];let m=!!e;return d[8]!==r||d[9]!==s||d[10]!==m?(o={endpoint:a.S.ONLINESTREAM.GetOnlineStreamEpisodeList.endpoint,method:a.S.ONLINESTREAM.GetOnlineStreamEpisodeList.methods[0],queryKey:r,data:s,enabled:m,muteError:!0},d[8]=r,d[9]=s,d[10]=m,d[11]=o):o=d[11],(0,i.fl)(o)}function d(e,t,l,r,s){let o,d,c,u=(0,n.c)(14),m=String(e);u[0]!==r||u[1]!==l||u[2]!==t||u[3]!==m?(o=[a.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.key,m,t,l,r],u[0]=r,u[1]=l,u[2]=t,u[3]=m,u[4]=o):o=u[4];let p=Number(e);u[5]!==r||u[6]!==l||u[7]!==t||u[8]!==p?(d={mediaId:p,episodeNumber:l,dubbed:r,provider:t},u[5]=r,u[6]=l,u[7]=t,u[8]=p,u[9]=d):d=u[9];let v=s&&!!t;return u[10]!==o||u[11]!==d||u[12]!==v?(c={endpoint:a.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.endpoint,method:a.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.methods[0],queryKey:o,data:d,enabled:v,muteError:!0},u[10]=o,u[11]=d,u[12]=v,u[13]=c):c=u[13],(0,i.fl)(c)}function c(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.ONLINESTREAM.OnlineStreamEmptyCache.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.ONLINESTREAM.OnlineStreamEmptyCache.endpoint,method:a.S.ONLINESTREAM.OnlineStreamEmptyCache.methods[0],mutationKey:e,onSuccess:async()=>{await o.invalidateQueries({queryKey:[a.S.ONLINESTREAM.GetOnlineStreamEpisodeList.key]}),await o.invalidateQueries({queryKey:[a.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.key]}),s.oR.info("Stream cache emptied")}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function u(e,t){let l,r=(0,n.c)(1);return r[0]===Symbol.for("react.memo_cache_sentinel")?(l={endpoint:a.S.ONLINESTREAM.OnlinestreamManualSearch.endpoint,method:a.S.ONLINESTREAM.OnlinestreamManualSearch.methods[0],mutationKey:[a.S.ONLINESTREAM.OnlinestreamManualSearch.key],onSuccess:m},r[0]=l):l=r[0],(0,i.qk)(l)}async function m(){}function p(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.ONLINESTREAM.OnlinestreamManualMapping.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.ONLINESTREAM.OnlinestreamManualMapping.endpoint,method:a.S.ONLINESTREAM.OnlinestreamManualMapping.methods[0],mutationKey:e,onSuccess:async()=>{s.oR.success("Mapping added"),await o.invalidateQueries({queryKey:[a.S.ONLINESTREAM.GetOnlinestreamMapping.key]}),await o.invalidateQueries({queryKey:[a.S.ONLINESTREAM.GetOnlineStreamEpisodeList.key]}),await o.invalidateQueries({queryKey:[a.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.key]})}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function v(e){let t,l,r=(0,n.c)(7),s=String(e.mediaId);r[0]!==s||r[1]!==e.provider?(t=[a.S.ONLINESTREAM.GetOnlinestreamMapping.key,s,e.provider],r[0]=s,r[1]=e.provider,r[2]=t):t=r[2];let o=!!e.provider&&!!e.mediaId;return r[3]!==t||r[4]!==e||r[5]!==o?(l={endpoint:a.S.ONLINESTREAM.GetOnlinestreamMapping.endpoint,method:a.S.ONLINESTREAM.GetOnlinestreamMapping.methods[0],queryKey:t,data:e,enabled:o},r[3]=t,r[4]=e,r[5]=o,r[6]=l):l=r[6],(0,i.fl)(l)}function f(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.ONLINESTREAM.RemoveOnlinestreamMapping.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.ONLINESTREAM.RemoveOnlinestreamMapping.endpoint,method:a.S.ONLINESTREAM.RemoveOnlinestreamMapping.methods[0],mutationKey:e,onSuccess:async()=>{s.oR.info("Mapping removed"),await o.invalidateQueries({queryKey:[a.S.ONLINESTREAM.GetOnlinestreamMapping.key]}),await o.invalidateQueries({queryKey:[a.S.ONLINESTREAM.GetOnlineStreamEpisodeList.key]}),await o.invalidateQueries({queryKey:[a.S.ONLINESTREAM.GetOnlineStreamEpisodeSource.key]})}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}},61585:(e,t,l)=>{"use strict";l.d(t,{V:()=>ec});var n=l(95155),i=l(75006),a=l(78216),r=l(19749),s=l(63717),o=l(91360),d=l(99288),c=l(91332),u=l(12115),m=l(41452);function p(e){var t,l;let i,a,u,p=(0,r.c)(4),{media:v,libraryData:f,progress:h,nakamaLibraryData:x}=e,{showAnimeUnwatchedCount:g}=(0,c.Ky)();if(!g)return null;let y=(0,d.DH)(v),b=null!=(l=null!=(t=null==x?void 0:x.unwatchedCount)?t:null==f?void 0:f.unwatchedCount)?l:0,N=(null==x?void 0:x.mainFileCount)||(null==f?void 0:f.mainFileCount)?b:y-(null!=h?h:0);return N<=0?null:(p[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.cn)("flex w-full z-[5]"),p[0]=i):i=p[0],p[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(m.EER,{className:"text-lg"}),p[1]=a):a=p[1],p[2]!==N?(u=(0,n.jsx)("div",{"data-anime-entry-card-unwatched-badge-container":!0,className:i,children:(0,n.jsxs)(s.E,{intent:"unstyled",size:"lg",className:"text-sm tracking-wide flex gap-1 items-center rounded-[--radius-md] border-0 bg-transparent px-1.5","data-anime-entry-card-unwatched-badge":!0,children:[a,(0,n.jsx)("span",{className:"text-[--foreground] font-normal",children:N})]})}),p[2]=N,p[3]=u):u=p[3],u)}var v=l(32),f=l(47601),h=l(41611),x=l(18292);let g=e=>{let t,l,i,a=(0,r.c)(10),{progress:d,progressTotal:c,forceShowTotal:u,forceShowProgress:m,top:p}=e;return a[0]!==p?(t=p&&(0,n.jsx)("span",{"data-media-entry-progress-badge-top":!0,className:"block",children:p}),a[0]=p,a[1]=t):t=a[1],a[2]!==m||a[3]!==u||a[4]!==d||a[5]!==c?(l=(!!d||m)&&(0,n.jsxs)("span",{"data-media-entry-progress-badge-progress":!0,className:"block","data-progress":d,"data-progress-total":c,"data-force-show-total":u,children:[d||0,(!!c||u)&&(0,n.jsxs)("span",{"data-media-entry-progress-badge-progress-total":!0,className:(0,o.cn)("text-[--muted]"),children:["/",c||"-"]})]}),a[2]=m,a[3]=u,a[4]=d,a[5]=c,a[6]=l):l=a[6],a[7]!==t||a[8]!==l?(i=(0,n.jsxs)(s.E,{intent:"unstyled",size:"lg",className:"font-semibold tracking-wide flex-col rounded-[--radius-md] rounded-tl-none rounded-br-none border-0 bg-zinc-950/40 px-1.5 py-0.5 gap-0 !h-auto","data-media-entry-progress-badge":!0,children:[t,l]}),a[7]=t,a[8]=l,a[9]=i):i=a[9],i};var y=l(24038),b=l(35656),N=l(14680),j=l(5249),S=l(97400),E=l(90711),w=l(44608),A=l(80919),T=l(42500),C=l(29724),I=l(86694),D=l.n(I),k=l(42732),_=l.n(k),L=l(70376),R=l(38628),M=l(40568);function O(e){let t,l,i,a,s,d,c=(0,r.c)(12);return c[0]!==e?({children:t,className:l,mRef:i,...a}=e,c[0]=e,c[1]=t,c[2]=l,c[3]=i,c[4]=a):(t=c[1],l=c[2],i=c[3],a=c[4]),c[5]!==l?(s=(0,o.cn)("h-full col-span-1 group/media-entry-card relative flex flex-col place-content-stretch focus-visible:outline-0 flex-none",l),c[5]=l,c[6]=s):s=c[6],c[7]!==t||c[8]!==i||c[9]!==a||c[10]!==s?(d=(0,n.jsx)("div",{"data-media-entry-card-container":!0,ref:i,className:s,...a,children:t}),c[7]=t,c[8]=i,c[9]=a,c[10]=s,c[11]=d):d=c[11],d}function P(e){let t,l,i=(0,r.c)(3),{overlay:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.cn)("absolute z-[14] top-0 left-0 w-full"),i[0]=t):t=i[0],i[1]!==a?(l=(0,n.jsx)("div",{"data-media-entry-card-overlay":!0,className:t,children:a}),i[1]=a,i[2]=l):l=i[2],l}function F(e){let t,l,i,a,s,d,u,m=(0,r.c)(15);if(m[0]!==e){let{children:n,className:i,coverImage:a,...r}=e;t=n,l=r,m[0]=e,m[1]=t,m[2]=l}else t=m[1],l=m[2];let p=(0,c.Ky)(),v=p.enableMediaCardBlurredBackground?"bg-gray-950/90 backdrop-blur-sm":"bg-[--media-card-popup-background]";return m[3]!==v?(i=(0,o.cn)(v,"absolute z-[15] opacity-0 scale-100 border border-[rgb(255_255_255_/_5%)] duration-150","group-hover/media-entry-card:opacity-100 group-hover/media-entry-card:scale-100","group-focus-visible/media-entry-card:opacity-100 group-focus-visible/media-entry-card:scale-100","focus-visible:opacity-100 focus-visible:scale-100","h-[105%] w-[100%] -top-[5%] rounded-[0.7rem] transition ease-in-out","focus-visible:ring-2 ring-brand-400 focus-visible:outline-0","hidden lg:block","w-[103%] -left-[1.5%]"),m[3]=v,m[4]=i):i=m[4],m[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(y.Z,{spread:50,glow:!0,disabled:!1,proximity:100,inactiveZone:.01,className:"opacity-15"}),m[5]=a):a=m[5],m[6]!==p.enableMediaCardBlurredBackground?(s=p.enableMediaCardBlurredBackground&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-image-blur-gradient":!0,className:"w-full absolute top-0 h-[50%] opacity-60 bg-gradient-to-b from-30% from-[--background] to-transparent z-[2] rounded-[--radius]"}),m[6]=p.enableMediaCardBlurredBackground,m[7]=s):s=m[7],m[8]!==t?(d=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-content":!0,className:"p-2 h-full w-full flex flex-col justify-between relative z-[2]",children:t}),m[8]=t,m[9]=d):d=m[9],m[10]!==l||m[11]!==i||m[12]!==s||m[13]!==d?(u=(0,n.jsxs)("div",{"data-media-entry-card-hover-popup":!0,className:i,...l,children:[a,s,d]}),m[10]=l,m[11]=i,m[12]=s,m[13]=d,m[14]=u):u=m[14],u}function z(e){let t,l,i,a,s,d=(0,r.c)(10);return d[0]!==e?({children:t,className:l,...i}=e,d[0]=e,d[1]=t,d[2]=l,d[3]=i):(t=d[1],l=d[2],i=d[3]),d[4]!==l?(a=(0,o.cn)("space-y-1 select-none",l),d[4]=l,d[5]=a):a=d[5],d[6]!==t||d[7]!==i||d[8]!==a?(s=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-body":!0,className:a,...i,children:t}),d[6]=t,d[7]=i,d[8]=a,d[9]=s):s=d[9],s}function B(e){let t,l,i,a,s,d=(0,r.c)(10);return d[0]!==e?({children:t,className:l,...i}=e,d[0]=e,d[1]=t,d[2]=l,d[3]=i):(t=d[1],l=d[2],i=d[3]),d[4]!==l?(a=(0,o.cn)("flex gap-2 items-center",l),d[4]=l,d[5]=a):a=d[5],d[6]!==t||d[7]!==i||d[8]!==a?(s=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-footer":!0,className:a,...i,children:t}),d[6]=t,d[7]=i,d[8]=a,d[9]=s):s=d[9],s}function K(e){let t,l,i,a=(0,r.c)(11),{link:s,title:o,season:d,year:c,format:u,onClick:m}=e,p=m?void 0:s;return a[0]!==m||a[1]!==p||a[2]!==o?(t=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-title":!0,className:"select-none",children:(0,n.jsx)(j.i,{href:p,className:"text-center text-pretty font-medium text-sm lg:text-base px-4 leading-0 line-clamp-2 hover:text-brand-100",onClick:m,children:o})}),a[0]=m,a[1]=p,a[2]=o,a[3]=t):t=a[3],a[4]!==u||a[5]!==d||a[6]!==c?(l=!!c&&(0,n.jsx)("div",{children:(0,n.jsxs)("p",{"data-media-entry-card-hover-popup-title-section-year-season":!0,className:"justify-center text-sm text-[--muted] flex w-full gap-1 items-center",children:[_()(u||"")," - ",(0,n.jsx)(L.zBL,{})," ",D()(null!=d?d:"")," ",c]})}),a[4]=u,a[5]=d,a[6]=c,a[7]=l):l=a[7],a[8]!==t||a[9]!==l?(i=(0,n.jsxs)(n.Fragment,{children:[t,l]}),a[8]=t,a[9]=l,a[10]=i):i=a[10],i}function U(e){let t,l,i,a=(0,r.c)(7),{nextAiring:s}=e;if(!s)return null;let o=null==s?void 0:s.episode;return a[0]!==o?(t=(0,n.jsx)("span",{className:"font-semibold",children:o}),a[0]=o,a[1]=t):t=a[1],a[2]!==(null==s?void 0:s.timeUntilAiring)?(l=(0,w.m)((0,A.p)(new Date,null==s?void 0:s.timeUntilAiring),{addSuffix:!0}),a[2]=null==s?void 0:s.timeUntilAiring,a[3]=l):l=a[3],a[4]!==t||a[5]!==l?(i=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{"data-anime-entry-card-next-airing-container":!0,className:"flex gap-1 items-center justify-center",children:(0,n.jsxs)("p",{"data-anime-entry-card-next-airing":!0,className:"text-justify font-normal text-xs min-[2000px]:text-md",children:["Episode ",t," ",l]})})}),a[4]=t,a[5]=l,a[6]=i):i=a[6],i}function G(e){let t,l,i,a,d,c,u,m,p,v,f,h,g=(0,r.c)(33),{link:y,listStatus:S,status:w,showProgressBar:A,progress:T,progressTotal:C,bannerImage:I,isAdult:D,showLibraryBadge:k,children:_,blurAdultContent:L,onClick:O}=e,P=O?void 0:y;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.cn)("media-entry-card__body aspect-[6/8] flex-none rounded-[--radius] object-cover object-center relative overflow-hidden select-none"),l=(0,n.jsx)(x.H,{}),g[0]=t,g[1]=l):(t=g[0],l=g[1]),g[2]!==S||g[3]!==T||g[4]!==C||g[5]!==A?(i=A&&T&&C&&(0,n.jsx)("div",{"data-media-entry-card-body-progress-bar-container":!0,className:(0,o.cn)("absolute top-0 w-full h-1 z-[2] bg-gray-700 left-0","COMPLETED"===S&&"hidden"),children:(0,n.jsx)("div",{"data-media-entry-card-body-progress-bar":!0,className:(0,o.cn)("h-1 absolute z-[2] left-0 bg-gray-200 transition-all","CURRENT"===S?"bg-brand-400":"bg-gray-400"),style:{width:"".concat(String(Math.ceil(T/C*100)),"%")}})}),g[2]=S,g[3]=T,g[4]=C,g[5]=A,g[6]=i):i=g[6],g[7]!==k?(a=k&&(0,n.jsx)("div",{"data-media-entry-card-body-library-badge":!0,className:"absolute z-[1] left-0 top-0",children:(0,n.jsx)(s.E,{size:"xl",intent:"warning-solid",className:"rounded-[--radius] rounded-bl-none rounded-tr-none text-orange-900",children:(0,n.jsx)(R.Q9o,{})})}),g[7]=k,g[8]=a):a=g[8],g[9]!==w?(d=("RELEASING"===w||"NOT_YET_RELEASED"===w)&&(0,n.jsx)("div",{"data-media-entry-card-body-releasing-badge-container":!0,className:"absolute z-[10] right-1 top-2",children:(0,n.jsx)(s.E,{intent:"RELEASING"===w?"primary-solid":"zinc-solid",size:"lg",children:(0,n.jsx)(M.PgI,{})})}),g[9]=w,g[10]=d):d=g[10];let F=I||"";g[11]!==F?(c=(0,E.VG)(F),g[11]=F,g[12]=c):c=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(u=(0,b.r)(700,475),g[13]=u):u=g[13];let z=L&&D&&"opacity-80";return g[14]!==z?(m=(0,o.cn)("object-cover object-center transition-transform","group-hover/media-entry-card:scale-110",z),g[14]=z,g[15]=m):m=g[15],g[16]!==m||g[17]!==c?(p=(0,n.jsx)(N.r,{"data-media-entry-card-body-image":!0,src:c,alt:"",fill:!0,placeholder:u,quality:100,sizes:"20rem",className:m}),g[16]=m,g[17]=c,g[18]=p):p=g[18],g[19]!==L||g[20]!==D?(v=L&&D&&(0,n.jsx)("div",{"data-media-entry-card-body-blur-adult-content-overlay":!0,className:"absolute top-0 w-[125%] h-[125%] -translate-x-[10%] -translate-y-[10%] backdrop-blur-xl z-[3] rounded-[--radius]"}),g[19]=L,g[20]=D,g[21]=v):v=g[21],g[22]!==_||g[23]!==p||g[24]!==v||g[25]!==i||g[26]!==a||g[27]!==d?(f=(0,n.jsxs)("div",{"data-media-entry-card-body":!0,className:t,children:[l,i,a,d,_,p,v]}),g[22]=_,g[23]=p,g[24]=v,g[25]=i,g[26]=a,g[27]=d,g[28]=f):f=g[28],g[29]!==O||g[30]!==P||g[31]!==f?(h=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(j.i,{href:P,onClick:O,className:"w-full relative focus-visible:ring-2 ring-[--brand]","data-media-entry-card-body-link":!0,children:f})}),g[29]=O,g[30]=P,g[31]=f,g[32]=h):h=g[32],h}function q(e){let t,l,i,a=(0,r.c)(8),{title:s,season:o,year:d}=e;return a[0]!==s?(t=(0,n.jsx)("div",{children:(0,n.jsx)("p",{"data-media-entry-card-title-section-title":!0,className:"text-pretty font-medium min-[2000px]:font-semibold text-sm lg:text-[1rem] min-[2000px]:text-lg line-clamp-2",children:s})}),a[0]=s,a[1]=t):t=a[1],a[2]!==o||a[3]!==d?(l=(!!o||!!d)&&(0,n.jsx)("div",{children:(0,n.jsxs)("p",{"data-media-entry-card-title-section-year-season":!0,className:"text-sm text-[--muted] inline-flex gap-1 items-center",children:[D()(null!=o?o:"")," ",d]})}),a[2]=o,a[3]=d,a[4]=l):l=a[4],a[5]!==t||a[6]!==l?(i=(0,n.jsxs)("div",{"data-media-entry-card-title-section":!0,className:"pt-2 space-y-1 flex flex-col justify-between h-full select-none",children:[t,l]}),a[5]=t,a[6]=l,a[7]=i):i=a[7],i}let H=(0,T.eU)(void 0),V=(0,u.memo)(e=>{let t,l,i,a,d,m,p,v,f,h,x,y,w=(0,r.c)(45),{trailerId:A,showProgressBar:T,mediaId:I,progress:D,progressTotal:k,showTrailer:_,disableAnimeCardTrailers:L,bannerImage:R,isAdult:O,blurAdultContent:P,link:F,listStatus:z,status:B,onClick:K}=e,[U,G]=u.useState(!1),[q]=(0,C.fp)(H),V=q===I,[W,Y]=u.useState(!!A&&!L&&_),Q=(0,c.Ky)();w[0]!==L||w[1]!==_||w[2]!==A?(t=()=>{Y(!!A&&!L&&_)},w[0]=L,w[1]=_,w[2]=A,w[3]=t):t=w[3];let $=!!A,X=!L;w[4]!==_||w[5]!==$||w[6]!==X?(l=[$,X,_],w[4]=_,w[5]=$,w[6]=X,w[7]=l):l=w[7],u.useEffect(t,l);let Z=K?void 0:F;w[8]!==z||w[9]!==D||w[10]!==k||w[11]!==T?(i=T&&D&&z&&k&&D!==k&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-progress-bar-container":!0,className:"absolute rounded-[--radius] overflow-hidden top-0 w-full h-1 z-[2] bg-gray-700 left-0",children:(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-progress-bar":!0,className:(0,o.cn)("h-1 absolute z-[2] left-0 bg-gray-200 transition-all","CURRENT"===z||"COMPLETED"===z?"bg-brand-400":"bg-gray-400"),style:{width:"".concat(String(Math.ceil(D/k*100)),"%")}})}),w[8]=z,w[9]=D,w[10]=k,w[11]=T,w[12]=i):i=w[12],w[13]!==B?(a=("RELEASING"===B||"NOT_YET_RELEASED"===B)&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-releasing-badge-container":!0,className:"absolute z-[10] right-1 top-2",children:(0,n.jsx)(S.m_,{trigger:(0,n.jsx)(s.E,{intent:"RELEASING"===B?"primary-solid":"zinc-solid",size:"lg",children:(0,n.jsx)(M.PgI,{})}),children:"RELEASING"===B?"Releasing":"Not yet released"})}),w[13]=B,w[14]=a):a=w[14],w[15]!==R||w[16]!==U?(d=R?(0,n.jsx)("div",{className:"absolute object-cover top-0 object-center w-full h-full rounded-[--radius] overflow-hidden",children:(0,n.jsx)(N.r,{"data-media-entry-card-hover-popup-banner-image":!0,src:(0,E.VG)(R||""),alt:"banner",fill:!0,placeholder:(0,b.r)(700,475),quality:100,sizes:"20rem",className:(0,o.cn)("object-cover top-0 object-center rounded-[--radius] transition scale-[1.04] duration-200","group-hover/media-entry-card:scale-100",U&&"hidden")})}):(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-image-gradient":!0,className:"h-full block absolute w-full bg-gradient-to-t from-gray-800 to-transparent"}),w[15]=R,w[16]=U,w[17]=d):d=w[17],w[18]!==P||w[19]!==O?(m=P&&O&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-blur-adult-content-overlay":!0,className:"absolute top-0 w-full h-full backdrop-blur-xl z-[3] rounded-[--radius]"}),w[18]=P,w[19]=O,w[20]=m):m=w[20],w[21]!==D||w[22]!==k?(p=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-progress-badge-container":!0,className:"absolute z-[4] left-0 bottom-0",children:(0,n.jsx)(g,{progress:D,progressTotal:k,forceShowTotal:!0})}),w[21]=D,w[22]=k,w[23]=p):p=w[23],w[24]!==V||w[25]!==W||w[26]!==A||w[27]!==U?(v=W&&V&&(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-trailer-container":!0,className:(0,o.cn)("absolute w-full h-full overflow-hidden rounded-[--radius]",!U&&"hidden"),children:(0,n.jsx)("iframe",{"data-media-entry-card-hover-popup-banner-trailer":!0,src:"https://www.youtube-nocookie.com/embed/".concat(A,"?autoplay=1&controls=0&mute=1&disablekb=1&loop=1&vq=medium&playlist=").concat(A,"&cc_lang_pref=ja&enablejsapi=true"),className:(0,o.cn)("aspect-video w-full absolute left-0 h-[calc(100%+120px)] top-[50%] -translate-y-1/2"),allow:"autoplay",onLoad:()=>setTimeout(()=>G(!0),1e3),onError:()=>Y(!1)})}),w[24]=V,w[25]=W,w[26]=A,w[27]=U,w[28]=v):v=w[28];let J=Q.enableMediaCardBlurredBackground&&"from-[--background] from-0% bottom-0 rounded-[--radius] opacity-60";return w[29]!==J?(f=(0,o.cn)("w-full absolute -bottom-1 h-[80%] from-10% bg-gradient-to-t from-[--media-card-popup-background] to-transparent z-[2]",J),w[29]=J,w[30]=f):f=w[30],w[31]!==f?(h=(0,n.jsx)("div",{"data-media-entry-card-hover-popup-banner-gradient":!0,className:f}),w[31]=f,w[32]=h):h=w[32],w[33]!==p||w[34]!==v||w[35]!==h||w[36]!==i||w[37]!==a||w[38]!==d||w[39]!==m?(x=(0,n.jsxs)("div",{"data-media-entry-card-hover-popup-banner-container":!0,className:"aspect-[4/2] relative rounded-[--radius] mb-2 cursor-pointer",children:[i,a,d,m,p,v,h]}),w[33]=p,w[34]=v,w[35]=h,w[36]=i,w[37]=a,w[38]=d,w[39]=m,w[40]=x):x=w[40],w[41]!==K||w[42]!==x||w[43]!==Z?(y=(0,n.jsx)(j.i,{tabIndex:-1,href:Z,onClick:K,"data-media-entry-card-hover-popup-banner-link":!0,children:x}),w[41]=K,w[42]=x,w[43]=Z,w[44]=y):y=w[44],y});var W=l(25305),Y=l(41966);let Q=e=>{let t,l,i,a=(0,r.c)(9),{score:s,isMediaCard:d}=e;if(!s)return null;let c=d&&"rounded-none rounded-tl-lg border-none";a[0]!==s||a[1]!==c?(t=(0,o.cn)("backdrop-blur-lg inline-flex items-center justify-center border gap-1 w-14 h-7 rounded-full font-bold bg-opacity-70 drop-shadow-sm shadow-lg",c,(0,Y.O)(s,"user")),a[0]=s,a[1]=c,a[2]=t):t=a[2],a[3]!==s?(l=s>=90?(0,n.jsx)(L.$iZ,{className:"text-sm"}):(0,n.jsx)(L.kpv,{className:"text-sm"}),a[3]=s,a[4]=l):l=a[4];let u=0===s?"-":s/10;return a[5]!==t||a[6]!==l||a[7]!==u?(i=(0,n.jsxs)("div",{"data-media-entry-score-badge":!0,className:t,children:[l," ",u]}),a[5]=t,a[6]=l,a[7]=u,a[8]=i):i=a[8],i};var $=l(59899),X=l(32754),Z=l(29694),J=l(96876),ee=l(52116),et=l(96826),el=l(32931),en=l(24780);function ei(e){let t,l,i,a,o=(0,r.c)(8),{mediaId:d,progress:m,progressTotal:p}=e,{showMangaUnreadCount:v}=(0,c.Ky)(),[f]=(0,C.fp)(el.ke),[h,x]=u.useState(p||0);if(o[0]!==f||o[1]!==d?(t=()=>{let e=(0,en.em)(d,f.latestChapterNumbers,f.storedProviders,f.storedFilters);e&&x(e)},o[0]=f,o[1]=d,o[2]=t):t=o[2],o[3]!==f?(l=[f],o[3]=f,o[4]=l):l=o[4],u.useEffect(t,l),!v)return null;let g=h-(m||0);return g<=0?null:(o[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(R.cg8,{className:"text-sm"}),o[5]=i):i=o[5],o[6]!==g?(a=(0,n.jsx)("div",{className:"flex w-full z-[5]","data-manga-entry-card-unread-badge-container":!0,children:(0,n.jsxs)(s.E,{intent:"unstyled",size:"lg",className:"text-sm tracking-wide rounded-[--radius-md] flex gap-1 items-center rounded-tr-none rounded-bl-none border-0 px-1.5","data-manga-entry-card-unread-badge":!0,children:[i,(0,n.jsx)("span",{className:"text-[--foreground] font-normal",children:g})]})}),o[6]=g,o[7]=a):a=o[7],a)}var ea=l(84127),er=l(47342),es=l(6066),eo=l(43994),ed=l(10653);function ec(e){var t,l,r,o,d,c,m,x,y,b,N,S,E,w,A,T,I,k,_;let{media:Y,listData:el,libraryData:en,nakamaLibraryData:ec,overlay:eu,showListDataButton:em,showTrailer:ep,type:ev,withAudienceScore:ef=!0,hideUnseenCountBadge:eh=!1,hideAnilistEntryEditButton:ex=!1,onClick:eg}=e,ey=(0,es.useRouter)(),eb=(0,et.v1)(),{hasStreamingEnabled:eN}=(0,et.hK)(),ej=(0,ee.Y2)(),[eS,eE]=(0,u.useState)(el),[ew,eA]=(0,u.useState)(en),eT=(0,C.Xr)(H),{selectMediaAndOpenEditor:eC}=(0,Z.e)(),eI=u.useRef(null),[eD,ek]=(0,C.fp)(i.cU),e_=!!ew&&!!e.showLibraryBadge,eL=u.useMemo(()=>(null==eS?void 0:eS.progress)&&"anime"===ev?!!(null==Y?void 0:Y.episodes):!!(null==Y?void 0:Y.chapters)&&(null==eS?void 0:eS.status)!=="COMPLETED",[null==eS?void 0:eS.progress,Y,null==eS?void 0:eS.status]),eR=u.useMemo(()=>ep&&!ew&&!(null==Y?void 0:Y.isAdult),[ep,ew,Y]),eM=(null==eb?void 0:eb.isOffline)?"/offline/entry/manga?id=".concat(Y.id):"/manga/entry?id=".concat(Y.id),eO=(null==eb?void 0:eb.isOffline)?"/offline/entry/anime?id=".concat(Y.id):"/entry?id=".concat(Y.id),eP=u.useMemo(()=>"anime"===ev?eO:eM,[null==eb?void 0:eb.isOffline,ev]),eF="anime"===ev?null==Y?void 0:Y.episodes:null==Y?void 0:Y.chapters,ez=(0,es.usePathname)();u.useEffect(()=>{if("/"!==ez){let e=ek(Y.id);el||eE(null==e?void 0:e.listData),en||eA(null==e?void 0:e.libraryData)}},[ez,eD]),u.useLayoutEffect(()=>{eE(el)},[el]),u.useLayoutEffect(()=>{eA(en)},[en]);let eB=(0,J.X_)(Y.id);u.useEffect(()=>{eB&&!el&&eE(eB)},[eB,el]);let{setPlayNext:eK}=(0,a.p$)(),eU=u.useCallback(()=>{(null==eS?void 0:eS.progress)&&(null==eS?void 0:eS.status)!=="COMPLETED"?eK(Y.id,()=>{ey.push(eO)}):ey.push(eO)},[null==eS?void 0:eS.progress,null==eS?void 0:eS.status,Y.id]),eG=u.useCallback(()=>{eT(Y.id)},[Y.id]),eq=u.useCallback(()=>{eT(void 0)},[Y.id]),{setPreviewModalMediaId:eH}=(0,X.D)(),{openDirInLibraryExplorer:eV}=(0,h.AP)();return Y?(0,n.jsxs)(O,{"data-media-id":Y.id,"data-media-mal-id":Y.idMal,"data-media-type":ev,mRef:eI,className:e.containerClassName,"data-list-data":JSON.stringify(eS),children:[(0,n.jsx)(P,{overlay:eu}),(0,n.jsx)(f.i,{content:(0,n.jsxs)(er.Q2,{children:[(0,n.jsx)(er.F7,{className:"text-[--muted] line-clamp-1 py-0 my-2",children:null==(t=Y.title)?void 0:t.userPreferred}),!(null==eb?void 0:eb.isOffline)&&(0,n.jsxs)(er.kt,{onClick:()=>{eH(Y.id,ev)},children:[(0,n.jsx)(eo.ZT8,{})," Preview"]}),(ew||ec||eS&&eN)&&(0,n.jsxs)(er.kt,{onClick:()=>{eC(Y.id)},children:[(0,n.jsx)(L.toN,{})," Add to Playlist"]}),!!ew&&(0,n.jsxs)(er.kt,{onClick:()=>{eV(null==ew?void 0:ew.sharedPath)},children:[(0,n.jsx)(eo.kWS,{})," Open in Library Explorer"]}),(0,n.jsx)(ed.Ml,{for:ev,media:Y})]}),children:(0,n.jsx)(er.Rc,{children:(0,n.jsxs)(F,{onMouseEnter:eG,onMouseLeave:eq,coverImage:Y.bannerImage||(null==(l=Y.coverImage)?void 0:l.extraLarge)||"",children:[(0,n.jsxs)(z,{children:[(0,n.jsx)(V,{trailerId:null==Y||null==(r=Y.trailer)?void 0:r.id,showProgressBar:eL,mediaId:Y.id,progress:null==eS?void 0:eS.progress,progressTotal:eF,showTrailer:eR,disableAnimeCardTrailers:null==eb||null==(d=eb.settings)||null==(o=d.library)?void 0:o.disableAnimeCardTrailers,bannerImage:Y.bannerImage||(null==(c=Y.coverImage)?void 0:c.extraLarge),isAdult:Y.isAdult,blurAdultContent:null==eb||null==(x=eb.settings)||null==(m=x.anilist)?void 0:m.blurAdultContent,link:eP,listStatus:null==eS?void 0:eS.status,status:Y.status,onClick:eg}),(0,n.jsx)(K,{title:(null==(y=Y.title)?void 0:y.userPreferred)||"",year:null!=(I=Y.seasonYear)?I:null==(b=Y.startDate)?void 0:b.year,season:Y.season,format:Y.format,link:eP,onClick:eg}),"anime"===ev&&(0,n.jsx)(U,{nextAiring:Y.nextAiringEpisode}),"anime"===ev&&(0,n.jsx)("div",{className:"py-1",children:(0,n.jsx)(ea.$n,{leftIcon:(0,n.jsx)(L.UIR,{className:"text-2xl"}),intent:"gray-subtle",size:"sm",className:"w-full text-sm",tabIndex:-1,onClick:eU,children:(null==eS?void 0:eS.progress)&&((null==eS?void 0:eS.status)==="CURRENT"||(null==eS?void 0:eS.status)==="PAUSED")?"Continue watching":"Watch"})}),"manga"===ev&&(0,n.jsx)(j.i,{href:eg?void 0:eM,onClick:eg,children:(0,n.jsx)(ea.$n,{leftIcon:(0,n.jsx)(R.Q9o,{}),intent:"gray-subtle",size:"sm",className:"w-full text-sm mt-2",tabIndex:-1,children:"Read"})}),(null==eS?void 0:eS.status)&&(0,n.jsx)("p",{className:"text-center text-sm text-[--muted]",children:(null==eS?void 0:eS.status)==="CURRENT"?"anime"===ev?"Watching":"Reading":D()(null!=(k=null==eS?void 0:eS.status)?k:"")})]}),(0,n.jsxs)(B,{children:["anime"===ev&&!!ew&&(0,n.jsx)(v.f,{mediaId:Y.id,allFilesLocked:ew.allFilesLocked}),!ex&&(0,n.jsx)($.e,{listData:eS,media:Y,type:ev,forceModal:!0}),ef&&(0,n.jsx)(W.H2,{meanScore:Y.meanScore})]})]})})}),(0,n.jsxs)(G,{link:eP,type:ev,title:(null==(N=Y.title)?void 0:N.userPreferred)||"",season:Y.season,listStatus:null==eS?void 0:eS.status,status:Y.status,showProgressBar:eL,progress:null==eS?void 0:eS.progress,progressTotal:eF,startDate:Y.startDate,bannerImage:(null==(S=Y.coverImage)?void 0:S.extraLarge)||"",isAdult:Y.isAdult,showLibraryBadge:e_,blurAdultContent:null==eb||null==(w=eb.settings)||null==(E=w.anilist)?void 0:E.blurAdultContent,onClick:eg,children:[(0,n.jsx)("div",{"data-media-entry-card-body-progress-badge-container":!0,className:"absolute z-[10] left-0 bottom-0 flex items-end",children:(0,n.jsx)(g,{progress:null==eS?void 0:eS.progress,progressTotal:eF,forceShowTotal:"manga"===ev,top:eh?null:(0,n.jsxs)(n.Fragment,{children:["anime"===ev&&((null==eS?void 0:eS.status)==="CURRENT"||(null==eS?void 0:eS.status)==="REPEATING")&&(0,n.jsx)(p,{progress:(null==eS?void 0:eS.progress)||0,media:Y,libraryData:ew,nakamaLibraryData:ec}),"manga"===ev&&(0,n.jsx)(ei,{mediaId:Y.id,progress:null==eS?void 0:eS.progress,progressTotal:eF})]})})}),(0,n.jsx)("div",{"data-media-entry-card-body-score-badge-container":!0,className:"absolute z-[10] right-0 bottom-0",children:(0,n.jsx)(Q,{isMediaCard:!0,score:null==eS?void 0:eS.score})}),"anime"===ev&&!!ew&&ej.find(e=>{var t;return(null==(t=e.baseAnime)?void 0:t.id)===Y.id})&&(0,n.jsx)("div",{"data-media-entry-card-body-missing-episodes-badge-container":!0,className:"absolute z-[10] w-full flex justify-center left-1 bottom-0",children:(0,n.jsx)(s.E,{className:"font-semibold animate-pulse text-white bg-gray-950 !bg-opacity-90 rounded-[--radius-md] text-base rounded-bl-none rounded-br-none",intent:"gray-solid",size:"xl",children:(0,n.jsx)(M._UP,{})})})]}),(0,n.jsx)(q,{title:(null==(A=Y.title)?void 0:A.userPreferred)||"",year:null!=(_=Y.seasonYear)?_:null==(T=Y.startDate)?void 0:T.year,season:Y.season,format:Y.format})]}):null}},61816:(e,t,l)=>{"use strict";l.d(t,{BE:()=>c,FE:()=>d,ei:()=>o});var n=l(19749),i=l(7675),a=l(74889),r=l(58092),s=l(69554);function o(e){let t,l,r=(0,n.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=[a.S.DOWNLOAD.DownloadTorrentFile.key],r[0]=t):t=r[0],r[1]!==e?(l={endpoint:a.S.DOWNLOAD.DownloadTorrentFile.endpoint,method:a.S.DOWNLOAD.DownloadTorrentFile.methods[0],mutationKey:t,onSuccess:async()=>{s.oR.success("Files downloaded"),null==e||e()}},r[1]=e,r[2]=l):l=r[2],(0,i.qk)(l)}function d(){let e,t,l=(0,n.c)(3),{mutate:o}=(0,r.E)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.DOWNLOAD.DownloadRelease.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.DOWNLOAD.DownloadRelease.endpoint,method:a.S.DOWNLOAD.DownloadRelease.methods[0],mutationKey:e,onSuccess:async e=>{s.oR.success("Update downloaded successfully!"),(null==e?void 0:e.error)&&s.oR.error(e.error),(null==e?void 0:e.destination)&&o({path:e.destination})}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function c(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.DOWNLOAD.DownloadMacDenshiUpdate.endpoint,method:a.S.DOWNLOAD.DownloadMacDenshiUpdate.methods[0],mutationKey:[a.S.DOWNLOAD.DownloadMacDenshiUpdate.key],onSuccess:u},t[0]=e):e=t[0],(0,i.qk)(e)}async function u(){s.oR.success("Update installed successfully! Please restart the app.")}},62024:(e,t,l)=>{"use strict";l.d(t,{Zf:()=>k,er:()=>I,iG:()=>C,vK:()=>T});var n=l(95155),i=l(19749),a=l(56222),r=l(29694),s=l(96826),o=l(35656),d=l(14680),c=l(63717),u=l(84127),m=l(91360),p=l(2091),v=l(76049),f=l(30033),h=l(53712),x=l(14370),g=l(90711),y=l(1925),b=l(98317),N=l(76445),j=l(63981),S=l(12115),E=l(70376),w=l(38628),A=l(69554);function T(e,t){var l,n,i,a,r,s;return!!e&&!!t&&(null==(l=e.episode)?void 0:l.aniDBEpisode)===(null==(n=t.episode)?void 0:n.aniDBEpisode)&&(null==(a=e.episode)||null==(i=a.baseAnime)?void 0:i.id)===(null==(s=t.episode)||null==(r=s.baseAnime)?void 0:r.id)}function C(e){var t,l,n,i,a,r,s;return(null==(t=e.episode)?void 0:t.aniDBEpisode)+String(null==(n=e.episode)||null==(l=n.baseAnime)?void 0:l.id)+String(null==(i=e.episode)?void 0:i.episodeNumber)+String(null==(a=e.episode)?void 0:a.progressNumber)+String(null==(s=e.episode)||null==(r=s.localFile)?void 0:r.path)}function I(e){let{episodes:t,setEpisodes:l,libraryCollection:i,...a}=e,s=S.useRef(!0),[o,d]=S.useState(t),{selectedMedia:c,setSelectedMedia:m}=(0,r.e)();S.useEffect(()=>{if(s.current){s.current=!1;return}d(t)},[t]),S.useEffect(()=>{l(o)},[o]);let p=S.useCallback(e=>{let{active:t,over:l}=e;t.id!==(null==l?void 0:l.id)&&d(e=>{let n=e.findIndex(e=>C(e)===t.id),i=e.findIndex(e=>C(e)===(null==l?void 0:l.id));return(0,N.be)(e,n,i)})},[]),[g,j]=S.useState("CURRENT"),[w,A]=S.useState(""),T=(0,x.d)(w,500),I=S.useMemo(()=>{var e,t,l,n,a,r,s,o;return 0!==T.length?(null!=(s=null==i||null==(l=i.lists)||null==(t=l.filter(e=>"PLANNING"===e.type||"PAUSED"===e.type||"CURRENT"===e.type))||null==(e=t.flatMap(e=>e.entries))?void 0:e.filter(Boolean))?s:[]).filter(e=>{var t,l,n,i,a,r,s,o;return(null==e||null==(i=e.media)||null==(n=i.title)||null==(l=n.english)||null==(t=l.toLowerCase())?void 0:t.includes(T.toLowerCase()))||(null==e||null==(o=e.media)||null==(s=o.title)||null==(r=s.romaji)||null==(a=r.toLowerCase())?void 0:a.includes(T.toLowerCase()))}):null!=(o=null==i||null==(r=i.lists)||null==(a=r.filter(e=>"-"===g?"PLANNING"===e.type||"PAUSED"===e.type||"CURRENT"===e.type:e.type===g))||null==(n=a.flatMap(e=>e.entries))?void 0:n.filter(Boolean))?o:[]},[i,T,g]);return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)(v.a,{title:"Select an anime",contentClass:"max-w-4xl",trigger:(0,n.jsx)(u.$n,{leftIcon:(0,n.jsx)(E.Ca6,{className:"text-2xl"}),intent:"white-glass",className:"rounded-full",disabled:o.length>=10,children:"Add episodes"}),children:[(0,n.jsxs)("div",{className:"grid grid-cols-[150px,1fr] gap-2",children:[(0,n.jsx)(f.l,{value:g,onValueChange:e=>j(e),options:[{label:"Current",value:"CURRENT"},{label:"Paused",value:"PAUSED"},{label:"Planning",value:"PLANNING"},{label:"All",value:"-"}],disabled:0!==w.length}),(0,n.jsx)(h.k,{placeholder:"Search",value:w,onChange:e=>A(e.target.value)})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:null==I?void 0:I.map(e=>(0,n.jsx)(D,{entry:e,episodes:o,setEpisodes:d},e.mediaId))})]})}),(0,n.jsx)(y.Mp,{modifiers:[b.FN],onDragEnd:p,children:(0,n.jsx)(N.gB,{strategy:N._G,items:o.map(e=>C(e)),children:(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)("ul",{className:"space-y-2",children:o.filter(Boolean).map((e,t)=>(0,n.jsx)(_,{id:C(e),episode:e,setEpisodes:d},C(e)))})})})})]})}function D(e){var t,l,a,s,u,m,p,v,f;let h,x,g,y,b,N,j,S,E,A=(0,i.c)(23),{entry:T,episodes:C}=e,{setSelectedMedia:I}=(0,r.e)();A[0]!==T.mediaId||A[1]!==C?(h=null!=(f=null==(v=C.filter(e=>{var t,l;return(null==(l=e.episode)||null==(t=l.baseAnime)?void 0:t.id)===T.mediaId}))?void 0:v.length)?f:0,A[0]=T.mediaId,A[1]=C,A[2]=h):h=A[2];let D=h,k=T.mediaId;A[3]!==T.mediaId||A[4]!==I?(x=()=>I(T.mediaId),A[3]=T.mediaId,A[4]=I,A[5]=x):x=A[5],A[6]!==T.libraryData?(g=T.libraryData&&(0,n.jsx)("div",{"data-media-entry-card-body-library-badge":!0,className:"absolute z-[1] left-0 top-0",children:(0,n.jsx)(c.E,{size:"lg",intent:"warning-solid",className:"rounded-md rounded-bl-none rounded-tr-none text-orange-900 opacity-80",children:(0,n.jsx)(w.Q9o,{})})}),A[6]=T.libraryData,A[7]=g):g=A[7],A[8]!==D?(y=D>0&&(0,n.jsx)("div",{"data-media-entry-card-body-library-badge":!0,className:"absolute z-[1] right-1 top-1",children:(0,n.jsx)(c.E,{size:"lg",intent:"warning-solid",className:"rounded-full bg-black text-white opacity-80 size-6",children:D})}),A[8]=D,A[9]=y):y=A[9];let _=(null==(l=T.media)||null==(t=l.coverImage)?void 0:t.large)||(null==(a=T.media)?void 0:a.bannerImage)||"";A[10]===Symbol.for("react.memo_cache_sentinel")?(b=(0,o.r)(700,475),A[10]=b):b=A[10],A[11]!==_?(N=(0,n.jsx)(d.r,{src:_,placeholder:b,sizes:"10rem",fill:!0,alt:"",className:"object-center object-cover"}),A[11]=_,A[12]=N):N=A[12];let L=(null==(u=T.media)||null==(s=u.title)?void 0:s.userPreferred)||(null==(p=T.media)||null==(m=p.title)?void 0:m.romaji);return A[13]!==L?(j=(0,n.jsx)("p",{className:"line-clamp-2 text-sm absolute m-2 bottom-0 font-semibold z-[10]",children:L}),A[13]=L,A[14]=j):j=A[14],A[15]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsx)("div",{className:"z-[5] absolute bottom-0 w-full h-[80%] bg-gradient-to-t from-[--background] to-transparent"}),A[15]=S):S=A[15],A[16]!==T.mediaId||A[17]!==x||A[18]!==g||A[19]!==y||A[20]!==N||A[21]!==j?(E=(0,n.jsxs)("div",{className:"col-span-1 aspect-[7/7] rounded-md border overflow-hidden relative transition cursor-pointer bg-[--background] md:opacity-60 md:hover:opacity-100",onClick:x,children:[g,y,N,j,S]},k),A[16]=T.mediaId,A[17]=x,A[18]=g,A[19]=y,A[20]=N,A[21]=j,A[22]=E):E=A[22],E}function k(e){var t,l,a,s;let o,d,c,u=(0,i.c)(11),{entry:m,episodes:p,setEpisodes:f}=e,{selectedMedia:h,setSelectedMedia:x}=(0,r.e)(),g=h===m.mediaId;u[0]!==x?(o=e=>{e||x(null)},u[0]=x,u[1]=o):o=u[1];let y=(null==(l=m.media)||null==(t=l.title)?void 0:t.userPreferred)||(null==(s=m.media)||null==(a=s.title)?void 0:a.romaji)||"";return u[2]!==m||u[3]!==p||u[4]!==f?(d=(0,n.jsx)(M,{selectedEpisodes:p,setSelectedEpisodes:f,entry:m}),u[2]=m,u[3]=p,u[4]=f,u[5]=d):d=u[5],u[6]!==g||u[7]!==o||u[8]!==y||u[9]!==d?(c=(0,n.jsx)(v.a,{open:g,onOpenChange:o,title:y,children:d}),u[6]=g,u[7]=o,u[8]=y,u[9]=d,u[10]=c):c=u[10],c}function _(e){var t,l,a,r,c,p,v,f,h,x,y,b,w;let A,C,I,D,k,_,M,O,P,F,z,B,K,U,G,q,H,V,W=(0,i.c)(60),{id:Y,episode:Q,setEpisodes:$}=e;W[0]!==Y?(A={id:Y},W[0]=Y,W[1]=A):A=W[1];let{attributes:X,listeners:Z,setNodeRef:J,transform:ee,transition:et}=(0,N.gl)(A),{hasDebridService:el}=(0,s.bV)(),{hasTorrentStreaming:en}=(0,s.E_)(),{hasOnlineStreaming:ei}=(0,s.FA)();W[2]!==ee?(C=j.Ks.Transform.toString(ee?{...ee,scaleY:1}:null),W[2]=ee,W[3]=C):C=W[3],W[4]!==C||W[5]!==et?(I={transform:C,transition:et},W[4]=C,W[5]=et,W[6]=I):I=W[6];let ea=I;if(W[7]!==el||W[8]!==ei||W[9]!==en){if(k=[],en){let e;W[11]===Symbol.for("react.memo_cache_sentinel")?(e={label:"Torrent streaming",value:"torrent"},W[11]=e):e=W[11],k.push(e)}if(el){let e;W[12]===Symbol.for("react.memo_cache_sentinel")?(e={label:"Debrid streaming",value:"debrid"},W[12]=e):e=W[12],k.push(e)}if(ei){let e;W[13]===Symbol.for("react.memo_cache_sentinel")?(e={label:"Online streaming",value:"online"},W[13]=e):e=W[13],k.push(e)}W[7]=el,W[8]=ei,W[9]=en,W[10]=k}else k=W[10];D=k;let er=S.useRef(null);if(W[14]!==Q||W[15]!==el||W[16]!==ei||W[17]!==en||W[18]!==$?(_=()=>(Q&&!Q.watchType&&(en||el)&&(er.current=setTimeout(()=>{$(e=>e.find(e=>T(e,Q))?e.map(e=>T(e,Q)?{...e,watchType:en?"torrent":el?"debrid":ei?"online":""}:e):e)},300)),()=>{er.current&&clearTimeout(er.current)}),W[14]=Q,W[15]=el,W[16]=ei,W[17]=en,W[18]=$,W[19]=_):_=W[19],W[20]!==Q||W[21]!==el||W[22]!==ei||W[23]!==en?(M=[Q,el,ei,en],W[20]=Q,W[21]=el,W[22]=ei,W[23]=en,W[24]=M):M=W[24],S.useEffect(_,M),!Q)return null;W[25]===Symbol.for("react.memo_cache_sentinel")?(O=(0,n.jsx)(E.id1,{}),W[25]=O):O=W[25],W[26]!==Q||W[27]!==$?(P=(0,n.jsx)(u.K0,{className:"absolute top-2 right-2 rounded-full cursor-pointer",icon:O,intent:"alert-subtle",size:"sm",onClick:e=>{$(e=>e.filter(e=>!T(e,Q)))},onPointerDown:R}),W[26]=Q,W[27]=$,W[28]=P):P=W[28],W[29]!==(null==(t=Q.episode.episodeMetadata)?void 0:t.image)||W[30]!==Q.isCompleted?(F=(null==(v=Q.episode.episodeMetadata)?void 0:v.image)&&(0,n.jsx)(d.r,{"data-episode-card-image":!0,src:(0,g.VG)(null==(f=Q.episode.episodeMetadata)?void 0:f.image),alt:"",fill:!0,quality:100,placeholder:(0,o.r)(700,475),sizes:"20rem",className:(0,m.cn)("object-cover rounded-lg object-center transition lg:group-hover/episode-card:scale-105 duration-200",Q.isCompleted&&"opacity-20")}),W[29]=null==(h=Q.episode.episodeMetadata)?void 0:h.image,W[30]=Q.isCompleted,W[31]=F):F=W[31],W[32]!==F?(z=(0,n.jsx)("div",{className:"size-24 aspect-square flex-none rounded-md overflow-hidden relative transition bg-[--background]",children:F}),W[32]=F,W[33]=z):z=W[33];let es=null==(r=Q.episode)||null==(a=r.baseAnime)||null==(l=a.title)?void 0:l.userPreferred;W[34]!==es?(B=(0,n.jsx)("p",{className:"text-sm text-[--muted] font-medium",children:es}),W[34]=es,W[35]=B):B=W[35];let eo=(null==(p=Q.episode)||null==(c=p.baseAnime)?void 0:c.format)!=="MOVIE"?"Episode ".concat(Q.episode.episodeNumber):"Movie",ed=Q.isCompleted?" (Watched)":"";return W[36]!==eo||W[37]!==ed?(K=(0,n.jsxs)("p",{className:"",children:[eo,ed]}),W[36]=eo,W[37]=ed,W[38]=K):K=W[38],W[39]!==Q||W[40]!==$||W[41]!==D?(U=!(null==(x=Q.episode)?void 0:x.localFile)&&!Q.isNakama&&(0,n.jsx)("div",{className:"flex gap-1 flex-wrap",children:D.map(e=>(0,n.jsx)("div",{className:(0,m.cn)("text-sm flex w-fit py-1 px-2 rounded-xl hover:bg-[--subtle] text-[--muted] hover:text-[--foreground] transition border border-transparent cursor-pointer",e.value===Q.watchType&&"border-white/20 bg-[--subtle] text-white hover:text-white"),onPointerDown:L,onClick:t=>{t.stopPropagation(),$(t=>t.find(e=>T(e,Q))?t.map(t=>T(t,Q)?{...t,watchType:e.value===t.watchType?"":e.value}:t):t)},children:e.label},e.value))}),W[39]=Q,W[40]=$,W[41]=D,W[42]=U):U=W[42],W[43]!==Q.episode.localFile?(G=!!(null==(y=Q.episode)?void 0:y.localFile)&&(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"text-sm text-[--muted] line-clamp-1 tracking-wide",children:null==(w=Q.episode)||null==(b=w.localFile)?void 0:b.name})}),W[43]=Q.episode.localFile,W[44]=G):G=W[44],W[45]!==B||W[46]!==K||W[47]!==U||W[48]!==G?(q=(0,n.jsxs)("div",{className:"max-w-full space-y-1",children:[B,K,U,G]}),W[45]=B,W[46]=K,W[47]=U,W[48]=G,W[49]=q):q=W[49],W[50]!==X||W[51]!==Z||W[52]!==z||W[53]!==q||W[54]!==P?(H=(0,n.jsxs)("div",{className:"px-2.5 py-2 bg-gray-900 hover:bg-gray-900/80 rounded-xl border flex gap-3 relative cursor-move",...X,...Z,children:[P,z,q]}),W[50]=X,W[51]=Z,W[52]=z,W[53]=q,W[54]=P,W[55]=H):H=W[55],W[56]!==J||W[57]!==ea||W[58]!==H?(V=(0,n.jsx)("li",{ref:J,style:ea,children:H}),W[56]=J,W[57]=ea,W[58]=H,W[59]=V):V=W[59],V}function L(e){return e.stopPropagation()}function R(e){return e.stopPropagation()}function M(e){var t,l;let s,c,u,v,f=(0,i.c)(13),{entry:h,selectedEpisodes:x,setSelectedEpisodes:y}=e,{data:b,isLoading:N}=(0,a.Wy)(h.mediaId),{episodeToAdd:j,selectedMedia:E,setEpisodeToAdd:w}=(0,r.e)(),I=S.useRef(null);f[0]!==b||f[1]!==j||f[2]!==x||f[3]!==E?(s=[b,j,E,x],f[0]=b,f[1]=j,f[2]=x,f[3]=E,f[4]=s):s=f[4],S.useEffect(()=>(b&&j&&E&&E===h.mediaId&&(I.current=setTimeout(()=>{if(x.find(e=>{var t,l;return(null==(l=e.episode)||null==(t=l.baseAnime)?void 0:t.id)===E&&e.episode.aniDBEpisode===j}))return void A.oR.info("Episode already added");let e=null==b?void 0:b.find(e=>{var t;return(null==(t=e.episode)?void 0:t.aniDBEpisode)===j});e&&(D(e),A.oR.info("Episode added to playlist"),w(null))},400)),()=>{I.current&&clearTimeout(I.current)}),s);let D=e=>{S.startTransition(()=>{y(t=>t.find(t=>T(t,e))?t.filter(t=>!T(t,e)):t.length>=20?(A.oR.error("You can't add more than 20 episodes to a playlist"),t):[...t,e])})};f[5]!==N?(c=N&&(0,n.jsx)(p.kt,{}),f[5]=N,f[6]=c):c=f[6],f[7]!==(null==b?void 0:b.length)?(u=(null==b?void 0:b.length)===0&&(0,n.jsx)("p",{className:"text-center text-sm text-[--muted]",children:"No episodes found"}),f[7]=null==b?void 0:b.length,f[8]=u):u=f[8];let k=null==b||null==(l=b.filter(P))||null==(t=l.sort(O))?void 0:t.map(e=>{var t,l,i,a;return(0,n.jsxs)("div",{className:(0,m.cn)("grid grid-cols-[auto,1fr] px-2.5 py-2 bg-[--background] rounded-md border cursor-pointer overflow-hidden items-center gap-3 opacity-80 max-w-full",x.find(t=>T(e,t))?"bg-gray-800 opacity-100 text-white ring-1 ring-[--zinc]":"hover:bg-[--subtle]","transition"),onClick:()=>D(e),children:[(0,n.jsx)("div",{className:"w-16 flex-none aspect-square rounded-md overflow-hidden relative transition bg-[--background]",children:(null==(t=e.episode.episodeMetadata)?void 0:t.image)&&(0,n.jsx)(d.r,{"data-episode-card-image":!0,src:(0,g.VG)(null==(l=e.episode.episodeMetadata)?void 0:l.image),alt:"",fill:!0,quality:100,placeholder:(0,o.r)(700,475),sizes:"20rem",className:(0,m.cn)("object-cover rounded-lg object-center transition lg:group-hover/episode-card:scale-105 duration-200")})}),(0,n.jsxs)("div",{className:"max-w-full",children:[(0,n.jsx)("p",{className:"",children:(null==(i=h.media)?void 0:i.format)!=="MOVIE"?"Episode ".concat(e.episode.episodeNumber):"Movie"}),e.episode.localFile&&(0,n.jsx)("p",{className:"text-xs text-[--muted] tracking-wide italic max-w-full line-clamp-2",children:null==(a=e.episode.localFile)?void 0:a.name})]})]},C(e))});return f[9]!==c||f[10]!==u||f[11]!==k?(v=(0,n.jsxs)("div",{className:"flex flex-col gap-2 overflow-auto p-1",children:[c,u,k]}),f[9]=c,f[10]=u,f[11]=k,f[12]=v):v=f[12],v}function O(e,t){return e.episode.progressNumber-t.episode.progressNumber}function P(e){return!!e.episode}},65151:(e,t,l)=>{"use strict";l.d(t,{M:()=>o,n:()=>s});var n=l(95155),i=l(19749),a=l(12115);let r=a.createContext({});function s(){return a.useContext(r)}function o(e){let t,l=(0,i.c)(3);return l[0]!==e.children||l[1]!==e.opts?(t=(0,n.jsx)(r.Provider,{value:e.opts,children:e.children}),l[0]=e.children,l[1]=e.opts,l[2]=t):t=l[2],t}},66699:(e,t,l)=>{"use strict";l.d(t,{K9:()=>_,Uu:()=>P,a9:()=>O});var n=l(95155),i=l(19749),a=l(42094),r=l(2159),s=l(75193),o=l(29260),d=l(83563),c=l(96826),u=l(6472),m=l(76968),p=l(40845),v=l(87466),f=l(47363),h=l(75385),x=l(89401),g=l(45754),y=l(23391),b=l(91332),N=l(42500),j=l(29724),S=l(43826),E=l(6066),w=l(12115),A=l(75780),T=l(65160),C=l(38628),I=l(28002),D=l(2513);let k=(0,N.eU)("library");function _(){let e,t,l,n,a=(0,i.c)(16),[r,s]=(0,j.fp)(k),o="library"===r,d="torrentstream"===r,c="debridstream"===r,u="onlinestream"===r;a[0]!==s?(e=function(){s(M)},a[0]=s,a[1]=e):e=a[1];let m=e;a[2]!==s?(t=function(){s(R)},a[2]=s,a[3]=t):t=a[3];let p=t;a[4]!==s?(l=function(){s(L)},a[4]=s,a[5]=l):l=a[5];let v=l;return a[6]!==r||a[7]!==c||a[8]!==o||a[9]!==u||a[10]!==d||a[11]!==s||a[12]!==p||a[13]!==v||a[14]!==m?(n={currentView:r,setView:s,isLibraryView:o,isTorrentStreamingView:d,isDebridStreamingView:c,isOnlineStreamingView:u,toggleTorrentStreamingView:m,toggleDebridStreamingView:p,toggleOnlineStreamingView:v},a[6]=r,a[7]=c,a[8]=o,a[9]=u,a[10]=d,a[11]=s,a[12]=p,a[13]=v,a[14]=m,a[15]=n):n=a[15],n}function L(e){return"onlinestream"===e?"library":"onlinestream"}function R(e){return"debridstream"===e?"library":"debridstream"}function M(e){return"torrentstream"===e?"library":"torrentstream"}function O(){let e=(0,c.v1)(),t=(0,E.useRouter)(),l=(0,E.useSearchParams)(),i=l.get("id"),y=l.get("tab"),{data:N,isLoading:A}=(0,r._8)(i),{data:T,isLoading:C}=(0,a.yg)(i);(0,b.Ky)();let{currentView:I,isLibraryView:k,setView:L}=_(),R=w.useRef(!1);w.useLayoutEffect(()=>{if(N)try{var e,t,l,n;(null==N||null==(t=N.media)||null==(e=t.title)?void 0:e.userPreferred)&&(document.title="".concat(null==N||null==(n=N.media)||null==(l=n.title)?void 0:l.userPreferred," | Seanime"))}catch(e){}},[N]);let M=w.useRef(i);w.useEffect(()=>{var t,l,n,a,r,s,o,d,c,u,m,p,v,f,h,x,g,b,j,S,E;if(M.current!==i&&(R.current=!1,M.current=i),A||!i){R.current=!1;return}if(!A&&N&&(null==N||null==(t=N.media)?void 0:t.status)==="NOT_YET_RELEASED"){R.current=!0,L("library");return}!A&&y&&"library"!==y&&!R.current&&(R.current=!0,(null==e||null==(u=e.debridSettings)?void 0:u.enabled)&&"debridstream"===y?L("debridstream"):(null==e||null==(m=e.torrentstreamSettings)?void 0:m.enabled)&&"torrentstream"===y?L("torrentstream"):(null==e||null==(v=e.settings)||null==(p=v.library)?void 0:p.enableOnlinestream)&&"onlinestream"===y&&L("onlinestream")),!A&&!(null==N?void 0:N.libraryData)&&k&&((null==e||null==(l=e.torrentstreamSettings)?void 0:l.enabled)&&(null==e||null==(n=e.torrentstreamSettings)?void 0:n.includeInLibrary)||(null==e||null==(a=e.debridSettings)?void 0:a.enabled)&&(null==e||null==(r=e.debridSettings)?void 0:r.includeDebridStreamInLibrary)||(null==e||null==(o=e.settings)||null==(s=o.library)?void 0:s.enableOnlinestream)&&(null==e||null==(c=e.settings)||null==(d=c.library)?void 0:d.includeOnlineStreamingInLibrary))&&!R.current&&(R.current=!0,(null==e||null==(f=e.debridSettings)?void 0:f.enabled)&&(null==e||null==(h=e.debridSettings)?void 0:h.includeDebridStreamInLibrary)?L("debridstream"):(null==e||null==(x=e.torrentstreamSettings)?void 0:x.enabled)&&(null==e||null==(g=e.torrentstreamSettings)?void 0:g.includeInLibrary)?L("torrentstream"):(null==e||null==(j=e.settings)||null==(b=j.library)?void 0:b.enableOnlinestream)&&(null==e||null==(E=e.settings)||null==(S=E.library)?void 0:S.includeOnlineStreamingInLibrary)&&L("onlinestream"))},[N,A,i,l,e,I,y]),w.useEffect(()=>{i&&(A||N)||t.push("/")},[N,A]),(0,D.A)(()=>{L("library")});let O=(0,j.Xr)(f.N7),{inject:P,remove:F}=(0,d.H)();return(w.useEffect(()=>{var t,l,i,a;return P("anime-entry-navigation",{items:[...[{id:"library",description:"Downloaded episodes",show:"library"!==I},{id:"torrentstream",description:"Torrent streaming",show:(null==e||null==(t=e.torrentstreamSettings)?void 0:t.enabled)&&"torrentstream"!==I},{id:"debridstream",description:"Debrid streaming",show:(null==e||null==(l=e.debridSettings)?void 0:l.enabled)&&"debridstream"!==I},{id:"onlinestream",description:"Online streaming",show:(null==e||null==(a=e.settings)||null==(i=a.library)?void 0:i.enableOnlinestream)&&"onlinestream"!==I}].map(e=>({id:e.id,value:e.id,heading:"Views",data:e,render:()=>(0,n.jsx)("div",{children:e.description}),onSelect:()=>L(e.id),shouldShow:()=>!!e.show})),{id:"download",value:"download",render:()=>(0,n.jsx)("div",{children:"Download torrents"}),heading:"Views",data:"download torrents",onSelect:()=>O("download"),shouldShow:()=>"library"===I}],filter:e=>{var t,l;let{item:n,input:i}=e;return!i||(null==(l=n.data)||null==(t=l.description)?void 0:t.toLowerCase().startsWith(i.toLowerCase()))},priority:-1}),()=>F("anime-entry-navigation")},[I,e]),A||C)?(0,n.jsx)(o.C,{}):N?(0,n.jsxs)("div",{"data-anime-entry-page":!0,"data-media":JSON.stringify(N.media),"data-anime-entry-list-data":JSON.stringify(N.listData),children:[(0,n.jsx)(u.l,{entry:N,details:T}),(0,n.jsx)("div",{className:"px-4 md:px-8 relative z-[8]","data-anime-entry-page-content-container":!0,children:(0,n.jsx)(g.f,{"data-anime-entry-page-content":!0,className:"relative 2xl:order-first pb-10 lg:min-h-[calc(100vh-10rem)]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",damping:12,stiffness:80,delay:.5},children:(0,n.jsxs)(S.N,{mode:"wait",initial:!1,children:["library"===I&&(0,n.jsxs)(g.f,{"data-anime-entry-page-episode-list-view":!0,className:"relative 2xl:order-first pb-10",initial:{opacity:0,y:60},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.35},children:[(0,n.jsx)("div",{className:"h-10"}),(0,n.jsx)(v.B,{entry:N,details:T,bottomSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{details:T}),(0,n.jsx)(m.P,{entry:N,details:T})]})})]},"episode-list"),"torrentstream"===I&&(0,n.jsx)(h.a7,{entry:N,bottomSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{details:T}),(0,n.jsx)(m.P,{entry:N,details:T})]})}),"debridstream"===I&&(0,n.jsx)(p.wZ,{entry:N,bottomSection:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{details:T}),(0,n.jsx)(m.P,{entry:N,details:T})]})}),"onlinestream"===I&&(0,n.jsxs)(g.f,{"data-anime-entry-page-online-streaming-view":!0,className:"relative 2xl:order-first pb-10 lg:pt-0",initial:{opacity:0,y:60},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.35},children:[(0,n.jsx)("div",{className:"h-10 lg:h-0"}),(0,n.jsxs)("div",{className:"space-y-4","data-anime-entry-page-online-streaming-view-content":!0,children:[(0,n.jsx)(x.P,{animeEntry:N,animeEntryLoading:A,hideBackButton:!0}),(0,n.jsx)(s.A,{details:T})]})]},"online-streaming-episodes")]})})}),(0,n.jsx)(f.qM,{entry:N})]}):null}function P(e){var t,l,a,r,s,o,d,u,m,p,v,f,h,x,g,b,N;let j,S,E,w,D,k,L=(0,i.c)(22),{entry:R}=e,M=(0,c.v1)(),{isLibraryView:O,setView:P,isTorrentStreamingView:F,isDebridStreamingView:z,isOnlineStreamingView:B}=_();return R&&(null==(t=R.media)?void 0:t.status)!=="NOT_YET_RELEASED"&&((null==M||null==(l=M.torrentstreamSettings)?void 0:l.enabled)||(null==M||null==(a=M.debridSettings)?void 0:a.enabled)||(null==M||null==(s=M.settings)||null==(r=s.library)?void 0:r.enableOnlinestream))?(L[0]!==P?(j=()=>P("library"),L[0]=P,L[1]=j):j=L[1],L[2]!==O||L[3]!==j?(S={name:"Library",iconType:C.yPD,isCurrent:O,onClick:j},L[2]=O,L[3]=j,L[4]=S):S=L[4],L[5]!==F||L[6]!==(null==M||null==(o=M.torrentstreamSettings)?void 0:o.enabled)||L[7]!==P?(E=(null==M||null==(p=M.torrentstreamSettings)?void 0:p.enabled)?[{name:"Torrent streaming",iconType:I.kcS,isCurrent:F,onClick:()=>P("torrentstream")}]:[],L[5]=F,L[6]=null==M||null==(v=M.torrentstreamSettings)?void 0:v.enabled,L[7]=P,L[8]=E):E=L[8],L[9]!==z||L[10]!==(null==M||null==(d=M.debridSettings)?void 0:d.enabled)||L[11]!==P?(w=(null==M||null==(f=M.debridSettings)?void 0:f.enabled)?[{name:"Debrid streaming",iconType:T.hgf,isCurrent:z,onClick:()=>P("debridstream")}]:[],L[9]=z,L[10]=null==M||null==(h=M.debridSettings)?void 0:h.enabled,L[11]=P,L[12]=w):w=L[12],L[13]!==B||L[14]!==(null==M||null==(m=M.settings)||null==(u=m.library)?void 0:u.enableOnlinestream)||L[15]!==P?(D=(null==M||null==(g=M.settings)||null==(x=g.library)?void 0:x.enableOnlinestream)?[{name:"Online streaming",iconType:A.VeH,isCurrent:B,onClick:()=>P("onlinestream")}]:[],L[13]=B,L[14]=null==M||null==(N=M.settings)||null==(b=N.library)?void 0:b.enableOnlinestream,L[15]=P,L[16]=D):D=L[16],L[17]!==S||L[18]!==E||L[19]!==w||L[20]!==D?(k=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"w-full max-w-fit rounded-md lg:rounded-full border border-transparent mx-auto lg:mx-0 overflow-hidden","data-anime-entry-page-tabs-container":!0,children:(0,n.jsx)(y.tH,{className:"lg:h-10 flex-wrap lg:flex-nowrap overflow-hidden justify-center lg:justify-start",triggerClass:"px-4 py-1 text-[1.1rem] border border-transparent opacity-80 data-[current=true]:border-[--subtle] data-[current=true]:opacity-100 rounded-full data-[current=false]:scale-95 lg:scale-100 ",iconClass:"size-5 hidden data-[current=true]:block",items:[S,...E,...w,...D]})})}),L[17]=S,L[18]=E,L[19]=w,L[20]=D,L[21]=k):k=L[21],k):null}},67236:(e,t,l)=>{"use strict";l.d(t,{k:()=>o});var n=l(19749),i=l(78216),a=l(96826),r=l(6066),s=l(12115);function o(e,t){let l,o,d=(0,n.c)(11),{onPlay:c}=e,u=void 0===t||t,m=(0,a.v1)();(0,r.useRouter)();let p=(0,r.usePathname)();(0,r.useSearchParams)();let{playNext:v,resetPlayNext:f}=(0,i.p$)();return d[0]!==u||d[1]!==c||d[2]!==v||d[3]!==f?(l=()=>{if(!u)return;let e=setTimeout(()=>{v&&(f(),c())},500);return()=>clearTimeout(e)},d[0]=u,d[1]=c,d[2]=v,d[3]=f,d[4]=l):l=d[4],d[5]!==u||d[6]!==c||d[7]!==p||d[8]!==v||d[9]!==m?(o=[p,v,m,c,u],d[5]=u,d[6]=c,d[7]=p,d[8]=v,d[9]=m,d[10]=o):o=d[10],s.useEffect(l,o),null}},67487:(e,t,l)=>{"use strict";l.d(t,{V:()=>R,W:()=>D});var n=l(95155),i=l(19749),a=l(98802),r=l(61816),s=l(66792),o=l(96826),d=l(90355),c=l(24685),u=l(47363),m=l(22148),p=l(244),v=l(84127),f=l(91360),h=l(60695),x=l(97400),g=l(77022),y=l(43756),b=l(24151),N=l(42500),j=l(29724),S=l(6066),E=l(12115),w=l(78453),A=l(70376),T=l(28718),C=l(43994);let I=(0,N.eU)(!1);function D(e){var t,l,N,C,D,R,M,O,P,F,z,B,K,U,G,q,H,V,W,Y,Q,$,X,Z,J,ee,et;let el,en,ei,ea,er,es,eo,ed,ec,eu,em,ep,ev,ef,eh,ex,eg,ey,eb,eN=(0,i.c)(80),{onToggleTorrent:ej,media:eS,entry:eE}=e,ew=(0,S.useRouter)(),eA=(0,o.v1)(),eT=null==eA||null==(l=eA.settings)||null==(t=l.library)?void 0:t.libraryPath,eC=(0,j.Xr)(d.fd);eN[0]!==eE||eN[1]!==eT?(en=(0,d.G4)(eE,eT),eN[0]=eE,eN[1]=eT,eN[2]=en):en=eN[2],el=en;let[eI,eD]=(0,E.useState)(el),[ek,e_]=(0,j.fp)(I),eL=(0,j.Xr)(u.N7),eR=(0,j.md)(c.l);eN[3]!==(null==(N=eE.downloadInfo)?void 0:N.episodesToDownload)||eN[4]!==eS.episodes||eN[5]!==eS.format||eN[6]!==(null==(C=eS.nextAiringEpisode)?void 0:C.episode)||eN[7]!==eS.status||eN[8]!==eR[0]||eN[9]!==eR.length?(ei=()=>{var e,t,l,n;return 1===eR.length&&eR[0].isBatch&&"MOVIE"!==eS.format&&"FINISHED"===eS.status&&!!eS.episodes&&eS.episodes>1&&!!(null==(e=eE.downloadInfo)?void 0:e.episodesToDownload)&&(null==(t=eE.downloadInfo)?void 0:t.episodesToDownload.length)>0&&(null==(l=eE.downloadInfo)?void 0:l.episodesToDownload.length)!==(eS.episodes||(null==(n=eS.nextAiringEpisode)?void 0:n.episode)-1)},eN[3]=null==(q=eE.downloadInfo)?void 0:q.episodesToDownload,eN[4]=eS.episodes,eN[5]=eS.format,eN[6]=null==(H=eS.nextAiringEpisode)?void 0:H.episode,eN[7]=eS.status,eN[8]=eR[0],eN[9]=eR.length,eN[10]=ei):ei=eN[10],null==(D=eE.downloadInfo)||D.episodesToDownload,null==(R=eS.nextAiringEpisode)||R.episode,null==eA||null==(O=eA.settings)||null==(M=O.torrent)||M.defaultTorrentClient,eN[11]!==ei?(ea=ei(),eN[11]=ei,eN[12]=ea):ea=eN[12];let eM=ea;eN[13]!==ew||eN[14]!==e_||eN[15]!==eL?(er=()=>{e_(!1),eL(void 0),ew.push("/torrent-list")},eN[13]=ew,eN[14]=e_,eN[15]=eL,eN[16]=er):er=eN[16];let{mutate:eO,isPending:eP}=(0,s.Dp)(er);eN[17]!==e_||eN[18]!==eL?(es=()=>{e_(!1),eL(void 0)},eN[17]=e_,eN[18]=eL,eN[19]=es):es=eN[19];let{mutate:eF,isPending:ez}=(0,r.ei)(es);eN[20]!==ew||eN[21]!==e_||eN[22]!==eL?(eo=()=>{e_(!1),eL(void 0),ew.push("/debrid")},eN[20]=ew,eN[21]=e_,eN[22]=eL,eN[23]=eo):eo=eN[23];let{mutate:eB,isPending:eK}=(0,a.AG)(eo),eU=eP||ez||eK;eN[24]!==eI||eN[25]!==(null==(P=eE.downloadInfo)?void 0:P.episodesToDownload)||eN[26]!==eS||eN[27]!==eO||eN[28]!==eR||eN[29]!==eC?(ed=function(e){if("smart-select"===e){var t,l;eO({torrents:eR,destination:eI,smartSelect:{enabled:!0,missingEpisodeNumbers:(null==(l=eE.downloadInfo)||null==(t=l.episodesToDownload)?void 0:t.map(L))||[]},media:eS})}else"deselect"===e?eC({torrent:eR[0],destination:eI}):"default"===e&&eO({torrents:eR,destination:eI,smartSelect:{enabled:!1,missingEpisodeNumbers:[]},media:eS})},eN[24]=eI,eN[25]=null==(V=eE.downloadInfo)?void 0:V.episodesToDownload,eN[26]=eS,eN[27]=eO,eN[28]=eR,eN[29]=eC,eN[30]=ed):ed=eN[30];let eG=ed;eN[31]!==eI||eN[32]!==eF||eN[33]!==eS||eN[34]!==eR?(ec=function(){eF({download_urls:eR.map(_),destination:eI,media:eS})},eN[31]=eI,eN[32]=eF,eN[33]=eS,eN[34]=eR,eN[35]=ec):ec=eN[35];let eq=ec;eN[36]!==eB||eN[37]!==eI||eN[38]!==eS||eN[39]!==eR?(eu=function(){eB({torrents:eR,destination:eI,media:eS})},eN[36]=eB,eN[37]=eI,eN[38]=eS,eN[39]=eR,eN[40]=eu):eu=eN[40];let eH=eu,eV=(null==eA||null==(F=eA.debridSettings)?void 0:F.enabled)&&!!(null==eA||null==(z=eA.debridSettings)?void 0:z.provider),[eW,eY]=(0,E.useState)(eV);if(0===eR.length)return null;if(eN[41]!==e_?(em=()=>e_(!1),eN[41]=e_,eN[42]=em):em=eN[42],eN[43]===Symbol.for("react.memo_cache_sentinel")?(ep=(0,n.jsx)("h4",{className:"text-center",children:"Choose the destination"}),eN[43]=ep):ep=eN[43],eN[44]!==eV||eN[45]!==eW?(ev=eV&&(0,n.jsx)(h.d,{label:"Download with Debrid service",value:eW,onValueChange:e=>eY(e)}),eN[44]=eV,eN[45]=eW,eN[46]=ev):ev=eN[46],eN[47]===Symbol.for("react.memo_cache_sentinel")?(ef=(0,n.jsx)(T.WNP,{}),eN[47]=ef):ef=eN[47],eN[48]!==eI?(eh=(0,n.jsx)(m.j,{name:"destination",label:"Destination",leftIcon:ef,value:eI,defaultValue:eI,onSelect:eD,shouldExist:!1}),eN[48]=eI,eN[49]=eh):eh=eN[49],eN[50]!==eS.format||eN[51]!==ej||eN[52]!==eR){let e;eN[54]!==eS.format||eN[55]!==ej?(e=e=>(0,n.jsx)(x.m_,{"data-torrent-confirmation-modal-tooltip":!0,trigger:(0,n.jsxs)("div",{className:(0,f.cn)("ml-12 gap-2 p-2 border rounded-[--radius-md] hover:bg-gray-800 relative"),"data-torrent-confirmation-modal-torrent-item":!0,children:[(0,n.jsxs)("div",{"data-torrent-confirmation-modal-torrent-item-content":!0,className:"flex flex-none items-center gap-2 w-[90%] cursor-pointer",onClick:()=>(0,y.A)(e.link),children:[(0,n.jsxs)("span",{className:"text-lg","data-torrent-confirmation-modal-torrent-item-icon":!0,children:[e.isBatch&&"MOVIE"!==eS.format?(0,n.jsx)(T.WNP,{className:"text-2xl"}):(0,n.jsx)(T.oxM,{})," "]}),(0,n.jsx)("p",{className:"line-clamp-1","data-torrent-confirmation-modal-torrent-item-name":!0,children:e.name})]}),(0,n.jsx)(v.K0,{icon:(0,n.jsx)(A.Gsv,{}),className:"absolute right-2 top-2 rounded-full",size:"xs",intent:"gray-outline",onClick:()=>{ej(e)},"data-torrent-confirmation-modal-torrent-item-close-button":!0})]},e.name),children:"Open in browser"},"".concat(e.link)),eN[54]=eS.format,eN[55]=ej,eN[56]=e):e=eN[56],ex=eR.map(e),eN[50]=eS.format,eN[51]=ej,eN[52]=eR,eN[53]=ex}else ex=eN[53];return eN[57]!==eM||eN[58]!==eH||eN[59]!==eq||eN[60]!==eG||eN[61]!==eW||eN[62]!==eU||eN[63]!==eK||eN[64]!==ez||eN[65]!==eP||eN[66]!==eR||eN[67]!==(null==eA||null==(B=eA.debridSettings)?void 0:B.enabled)||eN[68]!==(null==eA||null==(K=eA.debridSettings)?void 0:K.provider)||eN[69]!==(null==eA||null==(G=eA.settings)||null==(U=G.torrent)?void 0:U.defaultTorrentClient)?(eg=eW?(0,n.jsx)(n.Fragment,{children:(null==eA||null==(W=eA.debridSettings)?void 0:W.enabled)&&!!(null==eA||null==(Y=eA.debridSettings)?void 0:Y.provider)&&(0,n.jsx)(v.$n,{"data-torrent-confirmation-modal-debrid-button":!0,leftIcon:(0,n.jsx)(w.Z9S,{className:"text-2xl"}),intent:"white",onClick:()=>eH(),disabled:eU,loading:eK,className:"w-full",children:"Download with Debrid service"})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"space-y-2","data-torrent-confirmation-modal-download-buttons":!0,children:[(0,n.jsxs)("div",{className:"flex w-full gap-2","data-torrent-confirmation-modal-download-buttons-left":!0,children:[!!(null==eR?void 0:eR.every(k))&&(0,n.jsx)(v.$n,{"data-torrent-confirmation-modal-download-files-button":!0,leftIcon:(0,n.jsx)(A.Ah9,{}),intent:"gray-outline",onClick:()=>eq(),disabled:eU,loading:ez,className:"w-full",children:"Download '.torrent' files"}),eR.length>0&&(0,n.jsx)(v.$n,{"data-torrent-confirmation-modal-download-button":!0,leftIcon:(0,n.jsx)(A.Ah9,{}),intent:"white",onClick:()=>eG("default"),disabled:eU||(null==eA||null==($=eA.settings)||null==(Q=$.torrent)?void 0:Q.defaultTorrentClient)===b.XH.NONE,loading:eP,className:"w-full",children:(null==eA||null==(X=eA.debridSettings)?void 0:X.enabled)?"Download with torrent client":eM?"Download all":"Download"})]}),1===eR.length&&(0,n.jsx)(v.$n,{"data-torrent-confirmation-modal-download-select-episodes-button":!0,leftIcon:(0,n.jsx)(A.S6K,{}),intent:"gray-outline",onClick:()=>eG("deselect"),disabled:eU,loading:eP,className:"w-full",children:"Choose files to download"}),eR.length>0&&eM&&(0,n.jsx)(v.$n,{"data-torrent-confirmation-modal-download-missing-episodes-button":!0,leftIcon:(0,n.jsx)(A.S6K,{}),intent:"gray-outline",onClick:()=>eG("smart-select"),disabled:eU,loading:eP,className:"w-full",children:"Download missing episodes"})]})}),eN[57]=eM,eN[58]=eH,eN[59]=eq,eN[60]=eG,eN[61]=eW,eN[62]=eU,eN[63]=eK,eN[64]=ez,eN[65]=eP,eN[66]=eR,eN[67]=null==eA||null==(Z=eA.debridSettings)?void 0:Z.enabled,eN[68]=null==eA||null==(J=eA.debridSettings)?void 0:J.provider,eN[69]=null==eA||null==(et=eA.settings)||null==(ee=et.torrent)?void 0:ee.defaultTorrentClient,eN[70]=eg):eg=eN[70],eN[71]!==ev||eN[72]!==eh||eN[73]!==ex||eN[74]!==eg?(ey=(0,n.jsx)(g.Cz,{className:"max-w-3xl mx-auto",children:(0,n.jsxs)(p.KZ,{className:"p-6",children:[ep,ev,eh,ex,eg]})}),eN[71]=ev,eN[72]=eh,eN[73]=ex,eN[74]=eg,eN[75]=ey):ey=eN[75],eN[76]!==ek||eN[77]!==em||eN[78]!==ey?(eb=(0,n.jsx)(g.Tr,{open:ek,onOpenChange:em,"data-torrent-confirmation-modal":!0,children:ey}),eN[76]=ek,eN[77]=em,eN[78]=ey,eN[79]=eb):eb=eN[79],eb}function k(e){return e.downloadUrl}function _(e){return e.downloadUrl}function L(e){return e.episodeNumber}function R(e){let t,l,a,r=(0,i.c)(11),{type:s,onTorrentValidated:o}=e,d=(0,j.md)(c.l),u=(0,j.Xr)(I);if(0===d.length)return null;r[0]!==o||r[1]!==u||r[2]!==s?(t=()=>{"download"===s?u(!0):o()},r[0]=o,r[1]=u,r[2]=s,r[3]=t):t=r[3],r[4]!==s?(l="download"===s?(0,n.jsx)(C.Oz0,{}):(0,n.jsx)(C.AJ$,{}),r[4]=s,r[5]=l):l=r[5];let m="download"===s?"Download":"Stream",p="download"===s?" (".concat(d.length,")"):"";return r[6]!==t||r[7]!==l||r[8]!==m||r[9]!==p?(a=(0,n.jsxs)(v.$n,{"data-torrent-search-confirmation-continue-button":!0,intent:"white",className:"Sea-TorrentSearchConfirmationContinueButton fixed z-[9999] left-0 right-0 bottom-4 rounded-full max-w-lg mx-auto halo font-bold",size:"lg",onClick:t,leftIcon:l,children:[m,p]}),r[6]=t,r[7]=l,r[8]=m,r[9]=p,r[10]=a):a=r[10],a}},71780:(e,t,l)=>{"use strict";l.d(t,{R:()=>c});var n=l(95155),i=l(19749),a=l(6472),r=l(47363),s=l(29724);l(12115);var o=l(70376),d=l(75780);function c(e){var t,l,c,u,m,p,v,f,h,x,g;let y,b,N,j,S,E=(0,i.c)(14),{entry:w}=e,A=(0,s.Xr)(r.N7),T=null==(l=w.downloadInfo)||null==(t=l.episodesToDownload)?void 0:t.length;null==(c=w.media)||c.format,y=(null==(u=w.media)?void 0:u.format)==="MOVIE";let C=(null==(m=w.downloadInfo)?void 0:m.hasInaccurateSchedule)?"white-subtle":T?"white":"gray-subtle";return E[0]!==T?(b=T?(0,n.jsx)(o.Ah9,{}):(0,n.jsx)(d.CKj,{}),E[0]=T,E[1]=b):b=E[1],E[2]!==A?(N=()=>A("download"),E[2]=A,E[3]=N):N=E[3],E[4]!==T||E[5]!==(null==(p=w.downloadInfo)?void 0:p.batchAll)||E[6]!==(null==(v=w.downloadInfo)?void 0:v.hasInaccurateSchedule)||E[7]!==y?(j=(null==(f=w.downloadInfo)?void 0:f.hasInaccurateSchedule)||!T?(0,n.jsx)(n.Fragment,{children:"Search torrents"}):(0,n.jsxs)(n.Fragment,{children:[!y&&"Download ".concat((null==(h=w.downloadInfo)?void 0:h.batchAll)?"batch /":"next"," ").concat(T>1?"".concat(T," episodes"):"episode"),y&&"Download movie"]}),E[4]=T,E[5]=null==(x=w.downloadInfo)?void 0:x.batchAll,E[6]=null==(g=w.downloadInfo)?void 0:g.hasInaccurateSchedule,E[7]=y,E[8]=j):j=E[8],E[9]!==C||E[10]!==b||E[11]!==N||E[12]!==j?(S=(0,n.jsx)("div",{className:"contents","data-torrent-search-button-container":!0,children:(0,n.jsx)(a.e,{intent:C,size:"md",leftIcon:b,iconClass:"text-2xl",onClick:N,"data-torrent-search-button":!0,children:j})}),E[9]=C,E[10]=b,E[11]=N,E[12]=j,E[13]=S):S=E[13],S}},73499:(e,t,l)=>{"use strict";l.d(t,{A9:()=>E,K1:()=>b,Lw:()=>j,bN:()=>S,l9:()=>N});var n=l(19749),i=l(2159),a=l(96826),r=l(51441),s=l(82449),o=l(93319),d=l(93715),c=l(42500),u=l(29724),m=l(21842),p=l(12115),v=l(69554);let f=(0,c.eU)(5),h=(0,c.eU)(null),x=(0,c.eU)(null),g=(0,m.tG)("sea-autoplay-info",null,void 0,{getOnInit:!0}),y=(0,m.tG)("sea-autoplay-selected-torrent",null,void 0,{getOnInit:!0});function b(){let e,t,l=(0,n.c)(5),[i,a]=(0,u.fp)(y);return l[0]!==a?(e=(e,t,l)=>a({entry:t,torrent:e,batchFiles:l}),l[0]=a,l[1]=e):e=l[1],l[2]!==i||l[3]!==e?(t={autoPlayTorrent:i,setAutoPlayTorrent:e},l[2]=i,l[3]=e,l[4]=t):t=l[4],t}function N(){let e,t,l,i=(0,n.c)(15),[a,r]=(0,u.fp)(g),[,o]=(0,u.fp)(h),{handleAutoSelectStream:d,handleStreamSelection:c}=(0,s.w)(),{autoPlayTorrent:m}=b();i[0]!==m||i[1]!==d||i[2]!==c||i[3]!==a||i[4]!==r||i[5]!==o?(e=function(){var e,t;let l;if(!a)return;let{entry:n,episodeNumber:i,aniDBEpisode:s,allEpisodes:u}=a;if(null==m?void 0:m.batchFiles){let e=null==(t=m.batchFiles.files)?void 0:t.find(e=>e.index===m.batchFiles.current+1);e&&(l=e.index)}(null==m||null==(e=m.torrent)?void 0:e.isBatch)?c({mediaId:n.mediaId,episodeNumber:i,aniDBEpisode:s,torrent:m.torrent,chosenFileIndex:l,batchEpisodeFiles:(null==m?void 0:m.batchFiles)&&void 0!==l?{...m.batchFiles,current:l,currentEpisodeNumber:i,currentAniDBEpisode:s}:void 0}):d({mediaId:n.mediaId,episodeNumber:i,aniDBEpisode:s});let p=null==u?void 0:u.find(e=>e.episodeNumber===i+1);p&&p.aniDBEpisode?(r({allEpisodes:u,entry:n,episodeNumber:p.episodeNumber,aniDBEpisode:p.aniDBEpisode,type:"torrentstream"}),o(p)):r(null),v.oR.info("Requesting next episode")},i[0]=m,i[1]=d,i[2]=c,i[3]=a,i[4]=r,i[5]=o,i[6]=e):e=i[6];let p=e,f=(null==a?void 0:a.type)==="torrentstream"?a:null,x=!!a&&"torrentstream"===a.type;return i[7]!==r?(t=()=>r(null),i[7]=r,i[8]=t):t=i[8],i[9]!==p||i[10]!==r||i[11]!==f||i[12]!==x||i[13]!==t?(l={torrentstreamAutoplayInfo:f,hasNextTorrentstreamEpisode:x,setTorrentstreamAutoplayInfo:r,autoplayNextTorrentstreamEpisode:p,resetTorrentstreamAutoplayInfo:t},i[9]=p,i[10]=r,i[11]=f,i[12]=x,i[13]=t,i[14]=l):l=i[14],l}function j(){let e,t,l,i=(0,n.c)(15),[a,s]=(0,u.fp)(g),[,o]=(0,u.fp)(h),{handleAutoSelectStream:d,handleStreamSelection:c}=(0,r.u)(),{autoPlayTorrent:m}=b();i[0]!==m||i[1]!==d||i[2]!==c||i[3]!==a||i[4]!==s||i[5]!==o?(e=function(){var e,t;if(!a)return;let{entry:l,episodeNumber:n,aniDBEpisode:i,allEpisodes:r}=a;if(null==m||null==(e=m.torrent)?void 0:e.isBatch){let e;if(null==m?void 0:m.batchFiles){let l=null==(t=m.batchFiles.files)?void 0:t.find(e=>e.index===m.batchFiles.current+1);l&&(e=l.index)}c({mediaId:l.mediaId,episodeNumber:n,aniDBEpisode:i,torrent:m.torrent,chosenFileId:void 0!==e?String(e):"",batchEpisodeFiles:(null==m?void 0:m.batchFiles)&&void 0!==e?{...m.batchFiles,current:e,currentEpisodeNumber:n,currentAniDBEpisode:i}:void 0})}else d({mediaId:l.mediaId,episodeNumber:n,aniDBEpisode:i});let u=null==r?void 0:r.find(e=>e.episodeNumber===n+1);u&&u.aniDBEpisode?(s({allEpisodes:r,entry:l,episodeNumber:u.episodeNumber,aniDBEpisode:u.aniDBEpisode,type:"debridstream"}),o(u)):s(null),v.oR.info("Requesting next episode")},i[0]=m,i[1]=d,i[2]=c,i[3]=a,i[4]=s,i[5]=o,i[6]=e):e=i[6];let p=e,f=(null==a?void 0:a.type)==="debridstream"?a:null,x=!!a&&"debridstream"===a.type;return i[7]!==s?(t=()=>s(null),i[7]=s,i[8]=t):t=i[8],i[9]!==p||i[10]!==s||i[11]!==f||i[12]!==x||i[13]!==t?(l={debridstreamAutoplayInfo:f,hasNextDebridstreamEpisode:x,setDebridstreamAutoplayInfo:s,autoplayNextDebridstreamEpisode:p,resetDebridstreamAutoplayInfo:t},i[9]=p,i[10]=s,i[11]=f,i[12]=x,i[13]=t,i[14]=l):l=i[14],l}function S(){let e=(0,a.v1)(),[t,l]=(0,p.useState)(!1),[n,i]=(0,u.fp)(f),[r,s]=(0,u.fp)(h),[c,m]=(0,u.fp)(x),{hasNextTorrentstreamEpisode:g,autoplayNextTorrentstreamEpisode:y,resetTorrentstreamAutoplayInfo:b}=N(),{hasNextDebridstreamEpisode:S,autoplayNextDebridstreamEpisode:E,resetDebridstreamAutoplayInfo:w}=j(),{playMediaFile:A}=(0,o.g)(),T=p.useRef(t),C=p.useRef(null),I=p.useRef(null),D=()=>{C.current&&(clearTimeout(C.current),C.current=null),I.current&&(clearInterval(I.current),I.current=null)},k=()=>{(0,d.v)("Autoplay").info("Cancelling autoplay"),D(),l(e=>(T.current=!1,!1)),s(null),m(null),i(5),b(),w()},_=(e,t,n)=>{(0,d.v)("Autoplay").info("Executing autoplay",{type:t,episode:null==e?void 0:e.displayTitle,isActive:T.current});try{switch(t){case"local":var a;(null==e||null==(a=e.localFile)?void 0:a.path)&&(A({path:e.localFile.path,mediaId:n.mediaId,episode:e}),v.oR.info("Playing next episode"));break;case"torrent":y();break;case"debrid":E();break;default:(0,d.v)("Autoplay").warning("Unknown streaming type",t)}}catch(e){(0,d.v)("Autoplay").error("Error executing autoplay",e),v.oR.error("Failed to play next episode")}finally{(0,d.v)("Autoplay").info("Autoplay execution finished, resetting state"),l(e=>(T.current=!1,!1)),s(null),m(null),i(5)}};return{state:{isActive:t,countdown:n,nextEpisode:r,streamingType:c},startAutoplay:function(t,n){var a,r;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"local";if(!(null==e||null==(r=e.settings)||null==(a=r.library)?void 0:a.autoPlayNextEpisode))return void(0,d.v)("Autoplay").info("Autoplay disabled in settings");if(T.current)return void(0,d.v)("Autoplay").info("Autoplay already active");let c=null,u=null;if(n?(c=n,u=o):u=g?"torrent":S?"debrid":"local",!c&&!g&&!S)return void(0,d.v)("Autoplay").info("No next episode found");(0,d.v)("Autoplay").info("Starting autoplay countdown",{nextEpisode:null==c?void 0:c.displayTitle,type:u}),s(c),m(u),l(e=>(T.current=!0,!0)),i(5),I.current=setInterval(()=>{i(e=>e<=1?(I.current&&(clearInterval(I.current),I.current=null),0):e-1)},1e3),C.current=setTimeout(()=>{_(c,u,t)},5e3)},cancelAutoplay:k,hasNextEpisode:!!r||g||S,resetAutoplayInfo:k}}function E(e,t){let{data:l}=(0,i._8)(e||null);return p.useMemo(()=>(null==l?void 0:l.episodes)&&l.episodes.filter(e=>"main"===e.type).find(e=>e.progressNumber===t+1)||null,[null==l?void 0:l.episodes,t])}},74907:(e,t,l)=>{"use strict";l.d(t,{U:()=>o,q:()=>s});var n=l(95155),i=l(19749),a=l(63717),r=l(91360);function s(e){let t,l,s,o,d=(0,i.c)(8);return d[0]!==e?({className:t,...l}=e,d[0]=e,d[1]=t,d[2]=l):(t=d[1],l=d[2]),d[3]!==t?(s=(0,r.cn)("align-middle ml-2 border-transparent",t),d[3]=t,d[4]=s):s=d[4],d[5]!==l||d[6]!==s?(o=(0,n.jsx)(a.E,{intent:"warning",size:"sm",className:s,...l,children:"Beta"}),d[5]=l,d[6]=s,d[7]=o):o=d[7],o}function o(e){let t,l,s,o,d=(0,i.c)(8);return d[0]!==e?({className:t,...l}=e,d[0]=e,d[1]=t,d[2]=l):(t=d[1],l=d[2]),d[3]!==t?(s=(0,r.cn)("align-middle ml-2 border-transparent",t),d[3]=t,d[4]=s):s=d[4],d[5]!==l||d[6]!==s?(o=(0,n.jsx)(a.E,{intent:"warning",size:"sm",className:s,...l,children:"Alpha"}),d[5]=l,d[6]=s,d[7]=o):o=d[7],o}},75193:(e,t,l)=>{"use strict";l.d(t,{A:()=>u});var n=l(95155),i=l(35656),a=l(14680),r=l(5249),s=l(91360),o=l(91332),d=l(12115),c=l(70376);function u(e){var t;let{details:l,isMangaPage:u,...m}=e,p=(0,o.Ky)(),v=d.useMemo(()=>{var e,t;return(null==l||null==(t=l.characters)||null==(e=t.edges)?void 0:e.filter(e=>"MAIN"===e.role||"SUPPORTING"===e.role))||[]},[null==l||null==(t=l.characters)?void 0:t.edges]);return 0===v.length?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{"data-media-entry-characters-section-title":!0,children:"Characters"}),(0,n.jsx)("div",{"data-media-entry-characters-section-grid":!0,className:(0,s.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4",u&&"grid-cols-1 md:grid-col-2 lg:grid-cols-3 xl:grid-cols-2 2xl:grid-cols-2"),children:null==v?void 0:v.slice(0,10).map(e=>{var t,l,o,d,u,v,f,h,x,g,y,b,N;return(0,n.jsx)("div",{className:"col-span-1","data-media-entry-characters-section-grid-item":!0,children:(0,n.jsxs)("div",{"data-media-entry-characters-section-grid-item-container":!0,className:(0,s.cn)("max-w-full flex gap-4","rounded-lg relative transition group/episode-list-item select-none",p.libraryScreenCustomBackgroundImage&&p.libraryScreenCustomBackgroundOpacity>5?"bg-[--background] p-3":"py-3","pr-12"),...m,children:[(0,n.jsxs)("div",{"data-media-entry-characters-section-grid-item-image-container":!0,className:(0,s.cn)("size-20 flex-none rounded-[--radius-md] object-cover object-center relative overflow-hidden","group/ep-item-img-container"),children:[(0,n.jsx)("div",{"data-media-entry-characters-section-grid-item-image-overlay":!0,className:"absolute z-[1] rounded-[--radius-md] w-full h-full"}),(0,n.jsx)("div",{"data-media-entry-characters-section-grid-item-image-background":!0,className:"bg-[--background] absolute z-[0] rounded-[--radius-md] w-full h-full"}),(null==e||null==(l=e.node)||null==(t=l.image)?void 0:t.large)&&(0,n.jsx)(a.r,{"data-media-entry-characters-section-grid-item-image":!0,src:(null==e||null==(d=e.node)||null==(o=d.image)?void 0:o.large)||"",alt:"episode image",fill:!0,quality:60,placeholder:(0,i.r)(700,475),sizes:"10rem",className:(0,s.cn)("object-cover object-center transition select-none"),"data-src":null==e||null==(v=e.node)||null==(u=v.image)?void 0:u.large})]}),(0,n.jsxs)("div",{"data-media-entry-characters-section-grid-item-content":!0,children:[(0,n.jsx)(r.i,{href:(null==e||null==(f=e.node)?void 0:f.siteUrl)||"#",target:"_blank","data-media-entry-characters-section-grid-item-content-link":!0,children:(0,n.jsx)("p",{className:(0,s.cn)("text-lg font-semibold transition line-clamp-2 leading-5 hover:text-brand-100"),children:null==e||null==(x=e.node)||null==(h=x.name)?void 0:h.full})}),(null==e||null==(g=e.node)?void 0:g.age)&&(0,n.jsxs)("p",{"data-media-entry-characters-section-grid-item-content-age":!0,className:"text-sm",children:[null==e||null==(y=e.node)?void 0:y.age," years old"]}),(0,n.jsx)("p",{"data-media-entry-characters-section-grid-item-content-role":!0,className:"text-[--muted] text-xs",children:null==e?void 0:e.role}),(null==e||null==(b=e.node)?void 0:b.isFavourite)&&(0,n.jsx)("div",{"data-media-entry-characters-section-grid-item-content-favourite":!0,children:(0,n.jsx)(c.DfY,{className:"text-pink-600 text-lg block"})})]})]})},null==e||null==(N=e.node)?void 0:N.id)})})]})}},75385:(e,t,l)=>{"use strict";l.d(t,{a7:()=>I,bj:()=>C,q6:()=>T});var n=l(95155),i=l(19749),a=l(22264),r=l(55014),s=l(73499),o=l(83563),d=l(96826),c=l(52029),u=l(47363),m=l(31775),p=l(82449),v=l(45754),f=l(244),h=l(84127),x=l(2091),g=l(60695),y=l(97400),b=l(93715),N=l(42500),j=l(29724),S=l(21842),E=l(12115),w=l(78453),A=l(70376);let T=(0,S.tG)("sea-torrentstream-auto-select-file",!0),C=(0,N.eU)(!1);function I(e){var t,l,N,S,I,k;let _,L,R,M,O,P,F,z,B,K,U,G,q,H,V,W,Y,Q,$,X,Z,J,ee=(0,i.c)(75),{entry:et,bottomSection:el}=e,en=(0,d.v1)(),[ei,ea]=E.useState(null!=(S=null==en||null==(t=en.torrentstreamSettings)?void 0:t.autoSelect)&&S),[er,es]=(0,j.fp)(T),[,eo]=(0,j.fp)(C);ee[0]!==ei||ee[1]!==eo?(_=()=>{eo(ei)},ee[0]=ei,ee[1]=eo,ee[2]=_):_=ee[2],ee[3]!==ei?(L=[ei],ee[3]=ei,ee[4]=L):L=ee[4],E.useEffect(_,L);let{data:ed,isLoading:ec}=(0,a.L)(et.mediaId);ee[5]!==(null==ed?void 0:ed.hasMappingError)||ee[6]!==(null==en||null==(l=en.torrentstreamSettings)?void 0:l.autoSelect)?(R=()=>{if(null==ed?void 0:ed.hasMappingError)ea(!1);else{var e,t;ea(null!=(t=null==en||null==(e=en.torrentstreamSettings)?void 0:e.autoSelect)&&t)}},ee[5]=null==ed?void 0:ed.hasMappingError,ee[6]=null==en||null==(I=en.torrentstreamSettings)?void 0:I.autoSelect,ee[7]=R):R=ee[7];let eu=null==en||null==(N=en.torrentstreamSettings)?void 0:N.autoSelect;ee[8]!==ed||ee[9]!==eu?(M=[eu,ed],ee[8]=ed,ee[9]=eu,ee[10]=M):M=ee[10],E.useLayoutEffect(R,M);let em=(0,j.Xr)(u.N7),ep=(0,j.Xr)(u.Io),{setTorrentSearchStreamEpisode:ev}=(0,c.U)(),{handleAutoSelectStream:ef,handleStreamSelection:eh,isPending:ex}=(0,p.w)(),{setTorrentstreamAutoplayInfo:eg}=(0,s.l9)(),{data:ey}=(0,r.iz)(null==et?void 0:et.mediaId,!0),[eb,eN]=E.useState(!1);ee[11]!==(null==ey?void 0:ey.torrent)?(O=()=>{eN(!!(null==ey?void 0:ey.torrent))},ee[11]=null==ey?void 0:ey.torrent,ee[12]=O):O=ee[12],ee[13]!==ey?(P=[ey],ee[13]=ey,ee[14]=P):P=ee[14],E.useEffect(O,P),ee[15]!==et||ee[16]!==(null==ed?void 0:ed.episodes)||ee[17]!==eg?(F=function(e){var t;if(!e||!e.aniDBEpisode||!(null==ed?void 0:ed.episodes))return;let l=null==ed||null==(t=ed.episodes)?void 0:t.find(t=>t.episodeNumber===e.episodeNumber+1);(0,b.v)("TORRENTSTREAM").info("Auto select, Next episode",l),l&&l.aniDBEpisode?eg({allEpisodes:null==ed?void 0:ed.episodes,entry:et,episodeNumber:l.episodeNumber,aniDBEpisode:l.aniDBEpisode,type:"torrentstream"}):eg(null)},ee[15]=et,ee[16]=null==ed?void 0:ed.episodes,ee[17]=eg,ee[18]=F):F=ee[18];let ej=F;ee[19]!==(null==ed?void 0:ed.episodes)||ee[20]!==ef||ee[21]!==ej||ee[22]!==ex?(z=function(e,t){!ex&&t&&t.aniDBEpisode&&(null==ed?void 0:ed.episodes)&&(ef({mediaId:e.mediaId,episodeNumber:t.episodeNumber,aniDBEpisode:t.aniDBEpisode}),ej(t))},ee[19]=null==ed?void 0:ed.episodes,ee[20]=ef,ee[21]=ej,ee[22]=ex,ee[23]=z):z=ee[23];let eS=z;ee[24]!==ei||ee[25]!==er||ee[26]!==ey||ee[27]!==et||ee[28]!==eS||ee[29]!==ej||ee[30]!==eh||ee[31]!==ex||ee[32]!==ep||ee[33]!==em||ee[34]!==ev||ee[35]!==eb?(K=function(e){ei?eS(et,e):B(e)},B=e=>{ex||(ev(e),E.startTransition(()=>{if(ei)eS(et,e);else{let l=!1;if(eb&&(null==ey?void 0:ey.torrent)&&e.aniDBEpisode){if(er)eh({mediaId:et.mediaId,episodeNumber:e.episodeNumber,aniDBEpisode:e.aniDBEpisode,torrent:ey.torrent,chosenFileIndex:void 0,batchEpisodeFiles:void 0}),l=!0;else if(null==ey?void 0:ey.batchEpisodeFiles){let n;if(console.log("handleEpisodeClick (batchHistory)",null==ey?void 0:ey.batchEpisodeFiles,e.aniDBEpisode,e.episodeNumber),(null==ey?void 0:ey.batchEpisodeFiles.currentAniDBEpisode)===e.aniDBEpisode)n=ey.batchEpisodeFiles.current;else{var t;let l=e.episodeNumber-ey.batchEpisodeFiles.currentEpisodeNumber,i=null==(t=ey.batchEpisodeFiles.files)?void 0:t.find(e=>{var t;return e.index===((null==(t=ey.batchEpisodeFiles)?void 0:t.current)||0)+l});i&&(n=i.index,console.log("handleEpisodeClick (batchHistory) found file",i))}void 0!==n&&(eh({mediaId:et.mediaId,episodeNumber:e.episodeNumber,aniDBEpisode:e.aniDBEpisode,torrent:ey.torrent,chosenFileIndex:n,batchEpisodeFiles:ey.batchEpisodeFiles?{...ey.batchEpisodeFiles,files:ey.batchEpisodeFiles.files,current:n,currentAniDBEpisode:e.aniDBEpisode,currentEpisodeNumber:e.episodeNumber}:void 0}),l=!0)}}l||(ep(e.episodeNumber),E.startTransition(()=>{er?em("torrentstream-select"):em("torrentstream-select-file")})),ej(e)}}))},ee[24]=ei,ee[25]=er,ee[26]=ey,ee[27]=et,ee[28]=eS,ee[29]=ej,ee[30]=eh,ee[31]=ex,ee[32]=ep,ee[33]=em,ee[34]=ev,ee[35]=eb,ee[36]=B,ee[37]=K):(B=ee[36],K=ee[37]);let{inject:eE,remove:ew}=(0,o.H)();ee[38]!==ed||ee[39]!==B||ee[40]!==eE||ee[41]!==ew?(U=()=>{var e;if(null==ed||null==(e=ed.episodes)?void 0:e.length)return eE("torrent-stream-episodes",{items:ed.episodes.map(e=>({id:"episode-".concat(e.episodeNumber),value:"".concat(e.episodeNumber),heading:"Episodes",render:()=>(0,n.jsxs)("div",{className:"flex gap-1 items-center w-full",children:[(0,n.jsx)("p",{className:"max-w-[70%] truncate",children:e.displayTitle}),!!e.episodeTitle&&(0,n.jsxs)("p",{className:"text-[--muted] flex-1 truncate",children:["- ",e.episodeTitle]})]}),onSelect:()=>B(e)})),filter:D}),()=>ew("torrent-stream-episodes")},ee[38]=ed,ee[39]=B,ee[40]=eE,ee[41]=ew,ee[42]=U):U=ee[42];let eA=null==ed?void 0:ed.episodes;if(ee[43]!==eA?(G=[eA],ee[43]=eA,ee[44]=G):G=ee[44],E.useEffect(U,G),!et.media)return null;if(ec){let e;return ee[45]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(x.kt,{}),ee[45]=e):e=ee[45],e}return ee[46]===Symbol.for("react.memo_cache_sentinel")?(q={initial:{opacity:0,y:60},animate:{opacity:1,y:0},exit:{opacity:0,scale:.99},transition:{duration:.35}},H=(0,n.jsx)("div",{className:"h-10 lg:h-0"}),ee[46]=q,ee[47]=H):(q=ee[46],H=ee[47]),ee[48]===Symbol.for("react.memo_cache_sentinel")?(V=e=>{ea(e)},ee[48]=V):V=ee[48],ee[49]!==ei?(W=(0,n.jsx)(g.d,{label:"Auto-select",value:ei,onValueChange:V,fieldClass:"w-fit flex-none"}),ee[49]=ei,ee[50]=W):W=ee[50],ee[51]!==ei||ee[52]!==er||ee[53]!==es?(Y=!ei&&(0,n.jsx)(g.d,{label:"Auto-select file",value:er,onValueChange:e=>{es(e)},moreHelp:"The episode file will be automatically selected from your chosen batch torrent",fieldClass:"w-fit flex-none"}),ee[51]=ei,ee[52]=er,ee[53]=es,ee[54]=Y):Y=ee[54],ee[55]!==ei||ee[56]!==ey||ee[57]!==eb?(Q=!ei&&eb&&ey&&(0,n.jsx)("div",{className:"relative w-full xl:max-w-[20rem] group/torrent-stream-batch-history",children:(0,n.jsx)("div",{className:"rounded-full max-w-[20rem]",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"flex flex-none items-center justify-center",children:(0,n.jsx)(h.K0,{intent:"alert-basic",icon:(0,n.jsx)(A.Gsv,{}),size:"sm",onClick:()=>eN(!1),className:"rounded-full"})}),(0,n.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center flex-none gap-1",children:["Using previous selection",(0,n.jsx)(y.m_,{className:"text-sm",trigger:(0,n.jsx)(w.ExT,{className:"transition-opacity opacity-45 hover:opacity-90"}),children:"The next episode will be played from this batch."})]}),(0,n.jsx)("p",{className:"line-clamp-1 text-[--muted] text-xs tracking-wide w-0 transition-all duration-300 ease-in-out group-hover/torrent-stream-batch-history:w-[20rem]",children:null==(k=ey.torrent)?void 0:k.name})]})]})})}),ee[55]=ei,ee[56]=ey,ee[57]=eb,ee[58]=Q):Q=ee[58],ee[59]!==W||ee[60]!==Y||ee[61]!==Q?($=(0,n.jsxs)("div",{className:"flex flex-col flex-wrap lg:flex-nowrap items-start md:items-center md:flex-row gap-2 md:gap-6 2xl:py-0 lg:h-12","data-torrent-stream-page-content-actions-container":!0,children:[W,Y,Q]}),ee[59]=W,ee[60]=Y,ee[61]=Q,ee[62]=$):$=ee[62],ee[63]!==(null==ed?void 0:ed.hasMappingError)?(X=(null==ed?void 0:ed.hasMappingError)&&(0,n.jsx)("div",{"data-torrent-stream-page-no-metadata-message-container":!0,children:(0,n.jsx)("p",{className:"text-red-200 opacity-50",children:"No metadata info available for this anime. You may need to manually select the file to stream."})}),ee[63]=null==ed?void 0:ed.hasMappingError,ee[64]=X):X=ee[64],ee[65]!==el||ee[66]!==et||ee[67]!==ed||ee[68]!==B||ee[69]!==K?(Z=(0,n.jsx)(m.X,{episodeCollection:ed,entry:et,onEpisodeClick:B,onPlayNextEpisodeOnMount:K,bottomSection:el}),ee[65]=el,ee[66]=et,ee[67]=ed,ee[68]=B,ee[69]=K,ee[70]=Z):Z=ee[70],ee[71]!==$||ee[72]!==X||ee[73]!==Z?(J=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(v.f,{"data-anime-entry-page-torrent-stream-view":!0,className:"relative 2xl:order-first pb-10 lg:pt-0",...q,children:[H,(0,n.jsxs)(f.KZ,{"data-torrent-stream-page":!0,children:[$,X,Z]})]},"torrent-streaming-episodes")}),ee[71]=$,ee[72]=X,ee[73]=Z,ee[74]=J):J=ee[74],J}function D(e){let{item:t,input:l}=e;return!l||t.value.toLowerCase().includes(l.toLowerCase())}},75733:(e,t,l)=>{"use strict";l.d(t,{J:()=>o,K:()=>d});var n=l(95155),i=l(19749),a=l(84127),r=l(76049),s=l(73832);function o(e){let t,l=(0,i.c)(3),n=(0,s.j)(!1);return l[0]!==n||l[1]!==e?(t={...n,...e},l[0]=n,l[1]=e,l[2]=t):t=l[2],t}l(12115);let d=e=>{let t,l,s,o,d,c,u,m=(0,i.c)(22),{isOpen:p,close:v,onConfirm:f,title:h,description:x,actionText:g,actionIntent:y}=e,b=void 0===x?"Are you sure you want to continue?":x,N=void 0===g?"Confirm":g,j=void 0===y?"alert-subtle":y;return m[0]!==b?(t=(0,n.jsx)("p",{className:"text-center",children:b}),m[0]=b,m[1]=t):t=m[1],m[2]!==v||m[3]!==f?(l=()=>{f(),v()},m[2]=v,m[3]=f,m[4]=l):l=m[4],m[5]!==j||m[6]!==N||m[7]!==l?(s=(0,n.jsx)(a.$n,{intent:j,onClick:l,children:N}),m[5]=j,m[6]=N,m[7]=l,m[8]=s):s=m[8],m[9]!==v?(o=(0,n.jsx)(a.$n,{intent:"white",onClick:v,children:"Cancel"}),m[9]=v,m[10]=o):o=m[10],m[11]!==s||m[12]!==o?(d=(0,n.jsxs)("div",{className:"flex gap-2 justify-center items-center",children:[s,o]}),m[11]=s,m[12]=o,m[13]=d):d=m[13],m[14]!==t||m[15]!==d?(c=(0,n.jsxs)("div",{className:"space-y-4",children:[t,d]}),m[14]=t,m[15]=d,m[16]=c):c=m[16],m[17]!==v||m[18]!==p||m[19]!==c||m[20]!==h?(u=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.a,{title:h,titleClass:"text-center",open:p,onOpenChange:v,children:c})}),m[17]=v,m[18]=p,m[19]=c,m[20]=h,m[21]=u):u=m[21],u}},76182:()=>{},76968:(e,t,l)=>{"use strict";l.d(t,{P:()=>c});var n=l(95155),i=l(36945),a=l(61585),r=l(96826),s=l(86694),o=l.n(s),d=l(12115);function c(e){var t,l,s,c,u;let{entry:m,details:p,containerRef:v,maxCol:f,...h}=e,x=(0,r.v1)(),g=d.useMemo(()=>{var e,t,l,n,i;return(null==x||null==(t=x.settings)||null==(e=t.library)?void 0:e.enableManga)?null==p||null==(i=p.relations)||null==(n=i.edges)||null==(l=n.find(e=>{var t;return((null==e?void 0:e.relationType)==="SOURCE"||(null==e?void 0:e.relationType)==="ADAPTATION")&&(null==e||null==(t=e.node)?void 0:t.format)==="MANGA"}))?void 0:l.node:void 0},[null==p||null==(t=p.relations)?void 0:t.edges,null==x||null==(s=x.settings)||null==(l=s.library)?void 0:l.enableManga]),y=d.useMemo(()=>{var e,t;return((null==p||null==(t=p.relations)||null==(e=t.edges)?void 0:e.map(e=>e))||[]).filter(Boolean).filter(e=>{var t,l,n,i;return((null==(t=e.node)?void 0:t.format)==="TV"||(null==(l=e.node)?void 0:l.format)==="OVA"||(null==(n=e.node)?void 0:n.format)==="MOVIE"||(null==(i=e.node)?void 0:i.format)==="SPECIAL")&&("PREQUEL"===e.relationType||"SEQUEL"===e.relationType||"PARENT"===e.relationType||"SIDE_STORY"===e.relationType||"ALTERNATIVE"===e.relationType||"ADAPTATION"===e.relationType||"SUMMARY"===e.relationType||"SPIN_OFF"===e.relationType)})},[null==p||null==(c=p.relations)?void 0:c.edges]),b=d.useMemo(()=>{var e,t,l;return(null==p||null==(l=p.recommendations)||null==(t=l.edges)||null==(e=t.map(e=>{var t;return null==e||null==(t=e.node)?void 0:t.mediaRecommendation}))?void 0:e.filter(Boolean))||[]},[null==p||null==(u=p.recommendations)?void 0:u.edges]);return m&&p?(0,n.jsxs)(n.Fragment,{children:[(!!g||y.length>0)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Relations"}),(0,n.jsxs)(i.Ln,{maxCol:f,children:[!!g&&(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(a.V,{media:g,overlay:(0,n.jsx)("p",{className:"font-semibold text-white bg-gray-950 z-[-1] absolute right-0 w-fit px-4 py-1.5 text-center !bg-opacity-90 text-sm lg:text-base rounded-none rounded-bl-lg",children:"Manga"}),type:"manga"})}),y.slice(0,4).map(e=>{var t,l;return(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(a.V,{media:e.node,overlay:(0,n.jsx)("p",{className:"font-semibold text-white bg-gray-950 z-[-1] absolute right-0 w-fit px-4 py-1.5 text-center !bg-opacity-90 text-sm lg:text-base rounded-none rounded-bl-lg",children:(null==(t=e.node)?void 0:t.format)==="MOVIE"?o()(e.relationType||"").replace("_"," ")+" (Movie)":o()(e.relationType||"").replace("_"," ")}),showLibraryBadge:!0,showTrailer:!0,type:"anime"})},null==(l=e.node)?void 0:l.id)})]})]}),b.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Recommendations"}),(0,n.jsx)(i.Ln,{maxCol:f,children:b.map(e=>(0,n.jsx)("div",{className:"col-span-1",children:(0,n.jsx)(a.V,{media:e,showLibraryBadge:!0,showTrailer:!0,type:"anime"})},e.id))})]})]}):null}},77022:(e,t,l)=>{"use strict";l.d(t,{Cz:()=>m,Tr:()=>d});var n=l(95155),i=l(19749),a=l(91360),r=l(83475),s=l(12115),o=l(98899);let d=e=>{let t,l,a,r=(0,i.c)(6);r[0]!==e?({shouldScaleBackground:l,...t}=e,r[0]=e,r[1]=t,r[2]=l):(t=r[1],l=r[2]);let s=void 0===l||l;return r[3]!==t||r[4]!==s?(a=(0,n.jsx)(o._s.Root,{shouldScaleBackground:s,...t}),r[3]=t,r[4]=s,r[5]=a):a=r[5],a};d.displayName="Vaul",o._s.Trigger;let c=o._s.Portal;o._s.Close;let u=s.forwardRef((e,t)=>{let l,r,s,d,c=(0,i.c)(9);return c[0]!==e?({className:l,...r}=e,c[0]=e,c[1]=l,c[2]=r):(l=c[1],r=c[2]),c[3]!==l?(s=(0,a.cn)("fixed inset-0 z-50 bg-gray-950/70 backdrop-blur-sm",l),c[3]=l,c[4]=s):s=c[4],c[5]!==r||c[6]!==t||c[7]!==s?(d=(0,n.jsx)(o._s.Overlay,{ref:t,className:s,...r}),c[5]=r,c[6]=t,c[7]=s,c[8]=d):d=c[8],d});u.displayName=o._s.Overlay.displayName;let m=s.forwardRef((e,t)=>{let l,s,d,m,v,f,h,x,g=(0,i.c)(17);return g[0]!==e?({className:s,title:m,children:l,...d}=e,g[0]=e,g[1]=l,g[2]=s,g[3]=d,g[4]=m):(l=g[1],s=g[2],d=g[3],m=g[4]),g[5]===Symbol.for("react.memo_cache_sentinel")?(v=(0,n.jsx)(u,{}),g[5]=v):v=g[5],g[6]!==s?(f=(0,a.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-2xl border border-b-0 bg-[var(--background)]","select-none focus:outline-none outline-none outline-0 focus:outline-0",s),g[6]=s,g[7]=f):f=g[7],g[8]!==m?(h=m?(0,n.jsx)(p,{children:m}):(0,n.jsx)(r.s6,{children:(0,n.jsx)(o._s.Title,{children:"Drawer"})}),g[8]=m,g[9]=h):h=g[9],g[10]!==l||g[11]!==d||g[12]!==t||g[13]!==f||g[14]!==h||g[15]!==m?(x=(0,n.jsxs)(c,{children:[v,(0,n.jsxs)(o._s.Content,{ref:t,className:f,title:m,...d,children:[h,l]})]}),g[10]=l,g[11]=d,g[12]=t,g[13]=f,g[14]=h,g[15]=m,g[16]=x):x=g[16],x});m.displayName="VaulContent";let p=s.forwardRef((e,t)=>{let l,r,s,d,c=(0,i.c)(9);return c[0]!==e?({className:l,...r}=e,c[0]=e,c[1]=l,c[2]=r):(l=c[1],r=c[2]),c[3]!==l?(s=(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",l),c[3]=l,c[4]=s):s=c[4],c[5]!==r||c[6]!==t||c[7]!==s?(d=(0,n.jsx)(o._s.Title,{ref:t,className:s,...r}),c[5]=r,c[6]=t,c[7]=s,c[8]=d):d=c[8],d});p.displayName=o._s.Title.displayName,s.forwardRef((e,t)=>{let l,r,s,d,c=(0,i.c)(9);return c[0]!==e?({className:l,...r}=e,c[0]=e,c[1]=l,c[2]=r):(l=c[1],r=c[2]),c[3]!==l?(s=(0,a.cn)("text-sm text-muted-foreground",l),c[3]=l,c[4]=s):s=c[4],c[5]!==r||c[6]!==t||c[7]!==s?(d=(0,n.jsx)(o._s.Description,{ref:t,className:s,...r}),c[5]=r,c[6]=t,c[7]=s,c[8]=d):d=c[8],d}).displayName=o._s.Description.displayName},78045:(e,t,l)=>{"use strict";l.d(t,{v:()=>c});var n=l(95155),i=l(19749),a=l(42094),r=l(61585),s=l(63717),o=l(15388),d=l(2091);function c(e){var t,l;let a,r,o=(0,i.c)(5),{studios:d}=e;if(!(null==d?void 0:d.nodes))return null;let c=null==d||null==(l=d.nodes)||null==(t=l[0])?void 0:t.name;return o[0]!==c?(a=(0,n.jsx)(s.E,{size:"lg",intent:"gray",className:"rounded-full px-0 border-transparent bg-transparent cursor-pointer transition-all hover:bg-transparent hover:text-white hover:-translate-y-0.5","data-anime-entry-studio-badge":!0,children:c}),o[0]=c,o[1]=a):a=o[1],o[2]!==d||o[3]!==a?(r=(0,n.jsx)(u,{studios:d,children:a}),o[2]=d,o[3]=a,o[4]=r):r=o[4],r}function u(e){var t;let l,a,r,s=(0,i.c)(7),{studios:d,children:c}=e,u=null==d||null==(t=d.nodes)?void 0:t[0];return(null==u?void 0:u.name)?(s[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("div",{"data-anime-entry-studio-details-modal-top-padding":!0,className:"py-4"}),s[0]=l):l=s[0],s[1]!==d?(a=(0,n.jsx)(m,{studios:d}),s[1]=d,s[2]=a):a=s[2],s[3]!==c||s[4]!==u.name||s[5]!==a?(r=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o._s,{trigger:c,size:"xl",title:u.name,"data-anime-entry-studio-details-modal":!0,children:[l,a]})}),s[3]=c,s[4]=u.name,s[5]=a,s[6]=r):r=s[6],r):null}function m(e){var t,l,r,s,o,c,u,m,v;let f,h,x=(0,i.c)(5),{studios:g}=e,{data:y,isLoading:b}=(0,a.gW)(null==g||null==(l=g.nodes)||null==(t=l[0])?void 0:t.id);if(b){let e;return x[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(d.kt,{}),x[0]=e):e=x[0],e}return x[1]!==(null==y||null==(s=y.Studio)||null==(r=s.media)?void 0:r.nodes)?(f=null==y||null==(u=y.Studio)||null==(c=u.media)||null==(o=c.nodes)?void 0:o.map(p),x[1]=null==y||null==(v=y.Studio)||null==(m=v.media)?void 0:m.nodes,x[2]=f):f=x[2],x[3]!==f?(h=(0,n.jsx)("div",{"data-anime-entry-studio-details-modal-content":!0,className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 gap-4",children:f}),x[3]=f,x[4]=h):h=x[4],h}function p(e){return(0,n.jsx)("div",{className:"col-span-1","data-anime-entry-studio-details-modal-content-media-entry-card":!0,children:(0,n.jsx)(r.V,{media:e,type:"anime",showLibraryBadge:!0})},null==e?void 0:e.id)}l(12115)},78075:(e,t,l)=>{"use strict";l.d(t,{N6:()=>R,N4:()=>O});var n=l(19749),i=l(45886),a=l(83394),r=l(61203),s=l(81281),o=l(14490),d=l(17946),c=l(92161),u=l(93715),m=l(29724),p=l(12115);function v(e,t){return e.label.localeCompare(t.label)}function f(e){return{label:e.name,value:e.id}}var h=l(42500),x=l(62477),g=l.n(x),y=l(6066),b=l(85530),N=l(69554);function j(e){return e.quality.includes("default")}function S(e){return e.quality.includes("default")}function E(e){return e.quality.includes("360p")}function w(e){return e.quality.includes("360p")}function A(e){return e.quality.includes("480p")}function T(e){return e.quality.includes("480p")}function C(e){return e.quality.includes("720p")}function I(e){return e.quality.includes("720p")}function D(e){return e.quality.includes("1080p")}function k(e){return e.quality.includes("1080p")}function _(e){return"auto"===e.quality}function L(e){return"auto"===e.quality}function R(e){var t;let{mediaId:l,ref:o}=e,{providerExtensions:h,providerExtensionOptions:x}=function(){let e,t,l,i,a,r,s=(0,n.c)(15),{data:o}=(0,d.u0)(),[h,x]=(0,m.fp)(c.kL);return s[0]!==h||s[1]!==o||s[2]!==x?(e=()=>{(0,u.v)("ONLINESTREAM").info("extensions",o),o&&(null!==h&&o.find(e=>e.id===h)||(o.length>0?x(o[0].id):x(null)))},s[0]=h,s[1]=o,s[2]=x,s[3]=e):e=s[3],s[4]!==o?(t=[o],s[4]=o,s[5]=t):t=s[5],p.useLayoutEffect(e,t),s[6]!==o?(l=null!=o?o:[],s[6]=o,s[7]=l):l=s[7],s[8]!==o?(i=null!=o?o:[],s[8]=o,s[9]=i):i=s[9],s[10]!==i?(a=i.map(f).sort(v),s[10]=i,s[11]=a):a=s[11],s[12]!==l||s[13]!==a?(r={providerExtensions:l,providerExtensionOptions:a},s[12]=l,s[13]=a,s[14]=r):r=s[14],r}(),R=(0,s.zh)(),{streamToLoad:M,onLoadedStream:P,hostNotifyStreamStarted:F}=O(),{episodes:z,media:B,isFetching:K,isLoading:U,isSuccess:G,isError:q}=function(e){let t,l,i,a=(0,n.c)(12),s=(0,y.useRouter)(),o=(0,m.md)(c.kL),d=(0,m.md)(c.zw),{data:u,isLoading:v,isFetching:f,isSuccess:h,isError:x}=(0,r.Ww)(e,o,d);a[0]!==x||a[1]!==s?(t=()=>{x&&s.push("/")},a[0]=x,a[1]=s,a[2]=t):t=a[2],a[3]!==x?(l=[x],a[3]=x,a[4]=l):l=a[4],p.useEffect(t,l);let g=null==u?void 0:u.media,b=null==u?void 0:u.episodes;return a[5]!==x||a[6]!==f||a[7]!==v||a[8]!==h||a[9]!==g||a[10]!==b?(i={media:g,episodes:b,isLoading:v,isFetching:f,isSuccess:h,isError:x},a[5]=x,a[6]=f,a[7]=v,a[8]=h,a[9]=g,a[10]=b,a[11]=i):i=a[11],i}(l),{waitForWatchHistory:H}=(0,a.vy)(l),{episodeSource:V,isLoading:W,isFetching:Y,isError:Q,error:$}=function(e,t,l){let i,a,s=(0,n.c)(6),o=(0,m.md)(c.kL),d=(0,m.md)(c.rz),u=(0,m.md)(c.zw);i=e.find(e=>e.id===o);let{data:p,isLoading:v,isFetching:f,isError:h,error:x}=(0,r.j3)(t,o,d,!!(null==i?void 0:i.supportsDub)&&u,!!t&&void 0!==d&&l);return s[0]!==p||s[1]!==x||s[2]!==h||s[3]!==f||s[4]!==v?(a={episodeSource:p,isLoading:v,isFetching:f,isError:h,error:x},s[0]=p,s[1]=x,s[2]=h,s[3]=f,s[4]=v,s[5]=a):a=s[5],a}(h,l,G&&!H),X=(0,m.Xr)(c.rz),Z=(0,m.Xr)(c.Wr),J=(0,m.Xr)(c.F5),[ee,et]=(0,m.fp)(c.zw),[el,en]=(0,m.fp)(c.kL),[ei,ea]=p.useState(void 0),er=p.useRef(null),es=p.useRef(0),eo=p.useRef(!1),ed=p.useMemo(()=>null==z?void 0:z.find(e=>e.number===(null==V?void 0:V.number)),[z,V]),ec=p.useMemo(()=>{var e;if(!V)return(0,u.v)("ONLINESTREAM").info("Updating servers, no episode source",[]),[];let t=null==(e=V.videoSources)?void 0:e.map(e=>e.server);return(0,u.v)("ONLINESTREAM").info("Updating servers",t),g()(t)},[V]),{videoSource:eu}=function(e){let t,l,i=(0,n.c)(24),a=(0,m.md)(c.F5),r=(0,m.md)(c.Wr);t:{if(!e||!e.videoSources){t=void 0;break t}let l=e.videoSources;if((0,u.v)("ONLINESTREAM").info("Stored quality",a),(0,u.v)("ONLINESTREAM").info("Selected server",r),r&&l.some(e=>e.server===r)){let e;if(i[0]!==r||i[1]!==l){let t;i[3]!==r?(t=e=>e.server===r,i[3]=r,i[4]=t):t=i[4],e=l.filter(t),i[0]=r,i[1]=l,i[2]=e}else e=i[2];l=e}let n=l.some(e=>e.quality===a),s=l.some(L);if((0,u.v)("ONLINESTREAM").info("Selecting quality",{hasAuto:s,hasQuality:n}),a&&n){let e;if(i[5]!==a||i[6]!==l){let t;i[8]!==a?(t=e=>e.quality===a,i[8]=a,i[9]=t):t=i[9],e=l.filter(t),i[5]=a,i[6]=l,i[7]=e}else e=i[7];l=e}else if(s){let e;i[10]!==l?(e=l.filter(_),i[10]=l,i[11]=e):e=i[11],l=e}else{if((0,u.v)("ONLINESTREAM").info("Choosing a quality"),l.some(k)){let e;i[12]!==l?(e=l.filter(D),i[12]=l,i[13]=e):e=i[13],l=e}else if(l.some(I)){let e;i[14]!==l?(e=l.filter(C),i[14]=l,i[15]=e):e=i[15],l=e}else if(l.some(T)){let e;i[16]!==l?(e=l.filter(A),i[16]=l,i[17]=e):e=i[17],l=e}else if(l.some(w)){let e;i[18]!==l?(e=l.filter(E),i[18]=l,i[19]=e):e=i[19],l=e}if(l.some(S)){let e;i[20]!==l?(e=l.filter(j),i[20]=l,i[21]=e):e=i[21],l=e}}(0,u.v)("ONLINESTREAM").info("videoSources",l),t=l[0]}let s=t;return i[22]!==s?(l={videoSource:s},i[22]=s,i[23]=l):l=i[23],l}(V);p.useEffect(()=>{if((0,u.v)("ONLINESTREAM").info("Changing stream URL using videoSource",{videoSource:eu}),ea(void 0),(0,u.v)("ONLINESTREAM").info("Setting stream URL to undefined"),null==eu?void 0:eu.url){Z(eu.server);let e=eu.url;e=eu.headers&&Object.keys(eu.headers).length>0?"".concat((0,i.M)(),"/api/v1/proxy?url=").concat(encodeURIComponent(null==eu?void 0:eu.url),"&headers=").concat(encodeURIComponent(JSON.stringify(null==eu?void 0:eu.headers))):eu.url,p.startTransition(()=>{(0,u.v)("ONLINESTREAM").info("Setting stream URL",{url:e}),ea(e)})}},[null==eu?void 0:eu.url]),p.useEffect(()=>{(0,u.v)("ONLINESTREAM").info("Provider changed",{provider:el}),er.current=el},[el]),p.useEffect(()=>{(0,u.v)("ONLINESTREAM").info("URL changed",{url:ei})},[ei]),(0,b.A)(()=>{if(M){if((0,u.v)("ONLINESTREAM").info("Stream to load",{streamToLoad:M}),!x.some(e=>e.value===M.provider)){(0,u.v)("ONLINESTREAM").warning("Provider not found in options",{providerExtensionOptions:x,provider:M.provider}),N.oR.error("Watch Party: The provider used by the host is not installed.");return}en(M.provider),et(M.dubbed),X(M.episodeNumber),Z(M.server),J(M.quality),P()}},[M]);let[em,ep]=p.useState([]);p.useEffect(()=>{ep([])},[ed]);let ev=p.useCallback(()=>{(0,u.v)("ONLINESTREAM").warning("onMediaDetached")},[]),[ef,eh]=p.useMemo(()=>{var e,t,l,n;return[!!(null==V||null==(l=V.videoSources)||null==(t=l.map(e=>e.quality))||null==(e=t.filter(e=>e.includes("p")))?void 0:e.length),g()(null==V||null==(n=V.videoSources)?void 0:n.map(e=>e.quality))]},[V]),ex=p.useCallback(e=>{try{var t,l,n;es.current=null!=(n=null==(t=o.current)?void 0:t.currentTime)?n:0,eo.current=(null==(l=o.current)?void 0:l.paused)===!1,(0,u.v)("ONLINESTREAM").info("Changing quality",{quality:e})}catch(e){}J(e)},[eu]),eg=p.useCallback(e=>{try{var t,l,n;es.current=null!=(n=null==(t=o.current)?void 0:t.currentTime)?n:0,eo.current=(null==(l=o.current)?void 0:l.paused)===!1,(0,u.v)("ONLINESTREAM").info("Changing provider",{provider:e})}catch(e){}en(e)},[eu]),ey=p.useCallback(e=>{try{var t,l,n;es.current=null!=(n=null==(t=o.current)?void 0:t.currentTime)?n:0,eo.current=(null==(l=o.current)?void 0:l.paused)===!1,(0,u.v)("ONLINESTREAM").info("Changing server",{server:e})}catch(e){}Z(e)},[eu]),eb=p.useCallback(()=>{try{var e,t,l;es.current=null!=(l=null==(e=o.current)?void 0:e.currentTime)?l:0,eo.current=(null==(t=o.current)?void 0:t.paused)===!1,(0,u.v)("ONLINESTREAM").info("Toggling dubbed")}catch(e){}et(e=>!e)},[eu]),eN=p.useMemo(()=>h.find(e=>e.id===el),[h,el]);return{currentEpisodeDetails:ed,provider:el,servers:ec,videoSource:eu,onMediaDetached:ev,onFatalError:()=>{(0,u.v)("ONLINESTREAM").error("onFatalError",{sameProvider:el==er.current}),el==er.current&&(ea(void 0),(0,u.v)("ONLINESTREAM").error("Setting stream URL to undefined"),N.oR.warning("Playback error, trying another server..."),(0,u.v)("ONLINESTREAM").error("Player encountered a fatal error"),setTimeout(()=>{if((0,u.v)("ONLINESTREAM").error("erroredServers",em),null==eu?void 0:eu.server){let e=ec.filter(e=>e!==(null==eu?void 0:eu.server)&&!em.includes(e));e.length>0?(ep(e=>[...e,null==eu?void 0:eu.server]),Z(e[0])):en(e=>{var t,l;return null!=(l=null==(t=x.find(t=>t.value!==e))?void 0:t.value)?l:null})}},500))},onCanPlay:()=>{var e,t,l,n,i,a;if((0,u.v)("ONLINESTREAM").info("Can play event",{previousCurrentTime:es.current,previousIsPlayingRef:eo.current}),(null==R?void 0:R.isHost)&&R.currentWatchPartySession&&!(null==R?void 0:R.currentWatchPartySession.isRelayMode)){let a={mediaId:null!=(e=null==B?void 0:B.id)?e:0,provider:null!=(t=er.current)?t:"",episodeNumber:null!=(l=null==V?void 0:V.number)?l:0,server:null!=(n=null==eu?void 0:eu.server)?n:"",quality:null!=(i=null==eu?void 0:eu.quality)?i:"",dubbed:ee};(0,u.v)("ONLINESTREAM").info("Watch Party: Notifying peers that stream has started",a),F(a)}es.current>0&&(Object.assign(null!=(a=o.current)?a:{},{currentTime:es.current}),es.current=0,(0,u.v)("ONLINESTREAM").info("Seeking to previous time",{previousCurrentTime:es.current})),setTimeout(()=>{if(eo.current){try{var e;null==(e=o.current)||e.play()}catch(e){}(0,u.v)("ONLINESTREAM").info("Resuming playback since past video was playing before the onCanPlay event")}},500)},url:ei,episodes:z,media:B,episodeSource:V,loadPage:!K&&!U,currentEpisodeNumber:null!=(t=null==V?void 0:V.number)?t:0,handleChangeEpisodeNumber:e=>{X(t=>e)},episodeLoading:W||Y,isErrorEpisodeSource:Q,errorEpisodeSource:$,isErrorProvider:q,opts:{selectedExtension:eN,currentEpisodeDetails:ed,providerExtensions:h,providerExtensionOptions:x,servers:ec,videoSource:eu,customQualities:eh,hasCustomQualities:ef,changeQuality:ex,changeProvider:eg,changeServer:ey,toggleDubbed:eb}}}let M=(0,h.eU)(null);function O(){let e,t,l,i=(0,n.c)(14),[a,r]=(0,m.fp)(M),d=(0,y.usePathname)(),c=(0,y.useSearchParams)(),p=(0,y.useRouter)(),v=(0,s.zh)(),{sendMessage:f}=(0,o.Y0)();return i[0]!==(null==v?void 0:v.isHost)||i[1]!==f?(e=e=>{if(!(null==v?void 0:v.isHost))return void(0,u.v)("ONLINESTREAM").warning("hostNotifyStreamStarted called, but not a host");f({type:"nakama",payload:{type:"online-stream-started",payload:{mediaId:e.mediaId,provider:e.provider,episodeNumber:e.episodeNumber,server:e.server,quality:e.quality,dubbed:e.dubbed}}})},i[0]=null==v?void 0:v.isHost,i[1]=f,i[2]=e):e=i[2],i[3]!==r?(t=()=>{r(null)},i[3]=r,i[4]=t):t=i[4],i[5]!==(null==v?void 0:v.isHost)||i[6]!==d||i[7]!==p||i[8]!==c||i[9]!==r||i[10]!==a||i[11]!==e||i[12]!==t?(l={hostNotifyStreamStarted:e,streamToLoad:a,onLoadedStream:t,startOnlineStream(e){if(null==v?void 0:v.isHost)return void(0,u.v)("ONLINESTREAM").info("Start online stream event sent to peers",e);(0,u.v)("ONLINESTREAM").info("Starting online stream",e),r(e),("/entry"!==d||c.get("id")!==String(e.mediaId))&&p.push("/entry?id="+e.mediaId+"&tab=onlinestream&provider="+e.provider+"&episodeNumber="+e.episodeNumber+"&server="+e.server+"&quality="+e.quality+"&dubbed="+e.dubbed)}},i[5]=null==v?void 0:v.isHost,i[6]=d,i[7]=p,i[8]=c,i[9]=r,i[10]=a,i[11]=e,i[12]=t,i[13]=l):l=i[13],l}},81281:(e,t,l)=>{"use strict";l.d(t,{gg:()=>k,hw:()=>M,zh:()=>R});var n=l(95155),i=l(19749),a=l(48751),r=l(14490),s=l(96826),o=l(78075),d=l(26603),c=l(74907),u=l(24038),m=l(5249),p=l(63717),v=l(84127),f=l(91360),h=l(2091),x=l(76049),g=l(97400),y=l(23862),b=l(94077),N=l(42500),j=l(29724),S=l(12115),E=l(70376),w=l(3692),A=l(65160),T=l(43994),C=l(41452),I=l(69554),D=l(78216);let k=(0,N.eU)(!1),_=(0,N.eU)(void 0),L=(0,N.eU)(void 0);function R(){return(0,j.md)(_)}function M(){var e,t,l,i,s;let{sendMessage:f}=(0,r.Y0)(),[g,N]=(0,j.fp)(k),[w,A]=(0,j.fp)(_),[T,R]=(0,j.fp)(L),M=(0,j.md)(d.O1),{mutate:F,isPending:z}=(0,a.LC)(),{mutate:B,isPending:K}=(0,a.Fq)(),{mutate:U,isPending:G}=(0,a.cg)(),{mutate:q,isPending:H}=(0,a.sA)(),{mutate:V,isPending:W}=(0,a.zm)(),[Y,Q]=S.useState({syncThreshold:3,maxBufferWaitTime:10}),{electronPlaybackMethod:$}=(0,D.zw)();function X(){f({type:y.c.NAKAMA_STATUS_REQUESTED,payload:{useDenshiPlayer:b.nH&&$===D.Ft.NativePlayer}})}S.useEffect(()=>{X()},[$]),(0,r.oA)({type:y.c.NAKAMA_STATUS,onMessage:e=>{A(null!=e?e:null)}}),(0,r.oA)({type:y.c.NAKAMA_WATCH_PARTY_STATE,onMessage:e=>{X()}}),S.useEffect(()=>{(null==w?void 0:w.currentWatchPartySession)?R(w.currentWatchPartySession):R(null)},[w]);let Z=(0,j.md)(d.ST);S.useEffect(()=>{X()},[g,Z]);let J=S.useCallback(()=>{F({},{onSuccess:()=>{I.oR.success("Reconnection initiated"),X()},onError:e=>{I.oR.error("Failed to reconnect: ".concat(e.message))}})},[F,X]),ee=S.useCallback(()=>{B({},{onSuccess:()=>{I.oR.success("Stale connections cleaned up"),X()},onError:e=>{I.oR.error("Failed to cleanup: ".concat(e.message))}})},[B,X]),et=S.useCallback(()=>{U({settings:Y},{onSuccess:()=>{I.oR.success("Watch party created"),X()},onError:e=>{I.oR.error("Failed to create watch party: ".concat(e.message))}})},[U,Y,X]),el=S.useCallback(()=>{q({clientId:M||""},{onSuccess:()=>{I.oR.info("Joining watch party"),X()}})},[q,X]),en=S.useCallback(()=>{V(void 0,{onSuccess:()=>{I.oR.info("Leaving watch party"),R(null),X()}})},[V,R,X]);(0,r.oA)({type:y.c.NAKAMA_HOST_STARTED,onMessage:()=>{X()}}),(0,r.oA)({type:y.c.NAKAMA_HOST_STOPPED,onMessage:()=>{X()}}),(0,r.oA)({type:y.c.NAKAMA_PEER_CONNECTED,onMessage:()=>{X()}}),(0,r.oA)({type:y.c.NAKAMA_PEER_DISCONNECTED,onMessage:()=>{X()}}),(0,r.oA)({type:y.c.NAKAMA_HOST_CONNECTED,onMessage:()=>{X()}}),(0,r.oA)({type:y.c.NAKAMA_HOST_DISCONNECTED,onMessage:()=>{X()}}),(0,r.oA)({type:y.c.NAKAMA_ERROR,onMessage:()=>{X()}});let{startOnlineStream:ei}=(0,o.N4)();return(0,r.oA)({type:y.c.NAKAMA_ONLINE_STREAM_EVENT,onMessage:e=>{if(console.log(e),"online-stream-playback-status"===e.type){let t=e.payload;"start"===t.type&&ei(t.payload)}}}),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(x.a,{open:g,onOpenChange:N,title:(0,n.jsxs)("div",{className:"flex items-center gap-2 w-full justify-center",children:[(0,n.jsx)(C.u67,{className:"size-8"}),"Nakama",(0,n.jsx)(c.q,{className:"border-transparent"})]}),contentClass:"max-w-3xl bg-gray-950 bg-opacity-60 backdrop-blur-sm firefox:bg-opacity-100 firefox:backdrop-blur-none sm:rounded-3xl",overlayClass:"bg-gray-950/70 backdrop-blur-sm",children:[(0,n.jsx)(u.Z,{variant:"classic",spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01,className:"opacity-50"}),(0,n.jsx)("div",{className:"absolute top-4 right-14",children:(0,n.jsx)(m.i,{href:"/settings?tab=nakama",onClick:()=>N(!1),children:(0,n.jsx)(v.K0,{intent:"gray-basic",size:"sm",icon:(0,n.jsx)(E.nMM,{})})})}),void 0===w&&(0,n.jsx)(h.kt,{}),!(null==w?void 0:w.isHost)&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{}),(0,n.jsx)(v.$n,{onClick:J,disabled:z,size:"sm",intent:"gray-basic",leftIcon:(0,n.jsx)(C.joZ,{}),children:z?"Reconnecting...":"Reconnect"})]}),void 0!==w&&((null==w?void 0:w.isHost)||(null==w?void 0:w.isConnectedToHost))&&(0,n.jsxs)(n.Fragment,{children:[(null==w?void 0:w.isHost)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(p.E,{intent:"success-solid",className:"px-0 text-indigo-300 bg-transparent",children:"Currently hosting"}),(0,n.jsx)(v.$n,{onClick:ee,disabled:K,size:"sm",intent:"gray-basic",leftIcon:(0,n.jsx)(C.xbI,{}),children:K?"Cleaning up...":"Remove stale connections"})]}),(0,n.jsxs)("h4",{children:["Connected peers (",null!=(s=null==w||null==(e=w.connectedPeers)?void 0:e.length)?s:0,")"]}),(0,n.jsxs)("div",{className:"p-4 border rounded-lg bg-gray-950",children:[!(null==w||null==(t=w.connectedPeers)?void 0:t.length)&&(0,n.jsx)("p",{className:"text-center text-sm text-[--muted]",children:"No connected peers"}),null==w||null==(l=w.connectedPeers)?void 0:l.map((e,t)=>(0,n.jsx)("div",{className:"flex items-center justify-between py-1",children:(0,n.jsx)("span",{className:"font-medium",children:e})},t))]})]}),(null==w?void 0:w.isConnectedToHost)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{children:"Host connection"}),(0,n.jsx)("div",{className:"p-4 border rounded-lg bg-gray-950",children:(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-[--muted]",children:"Host"}),(0,n.jsx)("span",{className:"font-medium text-sm tracking-wide",children:(null==w||null==(i=w.hostConnectionStatus)?void 0:i.username)||"Unknown"})]})})})]}),(()=>{var e;let t=(null==w?void 0:w.isHost)||!1,l=(null==w?void 0:w.isConnectedToHost)||!1,i=null==w||null==(e=w.hostConnectionStatus)?void 0:e.peerId,a=T&&(t||i&&T.participants&&i in T.participants);return T&&a?(0,n.jsx)(P,{session:T,isHost:t,onLeave:en,isLeaving:W}):(0,n.jsx)(O,{isHost:t,isConnectedToHost:l,hasActiveSession:!!T,settings:Y,onSettingsChange:Q,onCreateWatchParty:et,onJoinWatchParty:el,isCreating:G,isJoining:H})})()]}),!(null==w?void 0:w.isHost)&&!(null==w?void 0:w.isConnectedToHost)&&void 0!==w&&(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("p",{className:"text-[--muted]",children:"Nakama is not active"}),(0,n.jsx)("p",{className:"text-sm text-[--muted] mt-2",children:"Configure Nakama in settings to connect to a host or start hosting"})]})]})})}function O(e){let t,l,a,r,s,o,d=(0,i.c)(23),{isHost:c,isConnectedToHost:u,hasActiveSession:m,onCreateWatchParty:p,onJoinWatchParty:f,isCreating:h,isJoining:x}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)("h4",{className:"flex items-center gap-2",children:[(0,n.jsx)(T.zIA,{className:"size-6"})," Watch Party"]}),d[0]=t):t=d[0],d[1]!==h||d[2]!==c||d[3]!==p?(l=c&&(0,n.jsx)("div",{className:"p-4 border rounded-lg bg-gray-950",children:(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)(v.$n,{onClick:p,disabled:h,className:"w-full",intent:"primary",leftIcon:(0,n.jsx)(C.jgn,{}),children:h?"Creating...":"Create Watch Party"})})}),d[1]=h,d[2]=c,d[3]=p,d[4]=l):l=d[4],d[5]!==m||d[6]!==u||d[7]!==c||d[8]!==x||d[9]!==f?(a=u&&!c&&m&&(0,n.jsx)("div",{className:"p-4 border rounded-lg bg-gray-950",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-sm text-[--muted]",children:"There's an active watch party! Join to watch content together in sync."}),(0,n.jsx)(v.$n,{onClick:f,disabled:x,className:"w-full",intent:"primary",leftIcon:(0,n.jsx)(C.XKH,{}),children:x?"Joining...":"Join Watch Party"})]})}),d[5]=m,d[6]=u,d[7]=c,d[8]=x,d[9]=f,d[10]=a):a=d[10],d[11]!==u||d[12]!==c?(r=!c&&!u&&(0,n.jsx)("div",{className:"text-center py-8",children:(0,n.jsx)("p",{className:"text-[--muted]",children:"Connect to a host to join a watch party"})}),d[11]=u,d[12]=c,d[13]=r):r=d[13],d[14]!==m||d[15]!==u||d[16]!==c?(s=!c&&u&&!m&&(0,n.jsx)("div",{className:"text-center py-8",children:(0,n.jsx)("p",{className:"text-[--muted]",children:"No active watch party"})}),d[14]=m,d[15]=u,d[16]=c,d[17]=s):s=d[17],d[18]!==l||d[19]!==a||d[20]!==r||d[21]!==s?(o=(0,n.jsxs)("div",{className:"space-y-4",children:[t,l,a,r,s]}),d[18]=l,d[19]=a,d[20]=r,d[21]=s,d[22]=o):o=d[22],o}function P(e){var t;let l,a,o,d,c,u,m,h,x=(0,i.c)(23),{session:b,isHost:N,onLeave:j,isLeaving:E}=e,{sendMessage:C}=(0,r.Y0)(),I=R();x[0]!==b.participants?(l=b.participants||{},x[0]=b.participants,x[1]=l):l=x[1];let D=Object.values(l),k=D.length;(0,s.v1)();let[_,L]=S.useState(!1),M=N?"host":null==I||null==(t=I.hostConnectionStatus)?void 0:t.peerId;x[2]!==C?(a=function(e){C({type:y.c.NAKAMA_WATCH_PARTY_ENABLE_RELAY_MODE,payload:{peerId:e}})},x[2]=C,x[3]=a):a=x[3];let O=a;x[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsxs)("h4",{className:"flex items-center gap-2",children:[(0,n.jsx)(T.zIA,{className:"size-6"})," Watch Party"]}),x[4]=o):o=x[4],x[5]!==_||x[6]!==N||x[7]!==b.isRelayMode?(d=N&&!b.isRelayMode&&(0,n.jsx)(g.m_,{trigger:(0,n.jsx)(v.K0,{size:"sm",intent:_?"primary":"primary-subtle",icon:(0,n.jsx)(w.Uhg,{}),onClick:()=>L(F),className:(0,f.cn)(_&&"animate-pulse")}),children:"Enable relay mode"}),x[5]=_,x[6]=N,x[7]=b.isRelayMode,x[8]=d):d=x[8];let P=E?"Leaving...":N?"Stop":"Leave";x[9]!==E||x[10]!==j||x[11]!==P?(c=(0,n.jsx)(v.$n,{onClick:j,disabled:E,size:"sm",intent:"alert-basic",children:P}),x[9]=E,x[10]=j,x[11]=P,x[12]=c):c=x[12],x[13]!==d||x[14]!==c?(u=(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[o,(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[d,c]})]}),x[13]=d,x[14]=c,x[15]=u):u=x[15],x[16]!==M||x[17]!==_||x[18]!==O||x[19]!==b.isRelayMode?(m=e=>{let t=e.id===M;return(0,n.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"font-medium text-sm tracking-wide",children:[e.username,t&&(0,n.jsx)("span",{className:"text-[--muted] font-normal",children:" (me)"})]}),b.isRelayMode&&e.isHost&&(0,n.jsx)(p.E,{intent:"unstyled",className:"text-xs",leftIcon:(0,n.jsx)(w.Uhg,{}),children:"Relay"}),e.isHost&&(0,n.jsx)(p.E,{className:"text-xs",children:"Host"}),e.isRelayOrigin&&(0,n.jsx)(p.E,{intent:"warning",className:"text-xs",children:"Origin"}),_&&!e.isHost&&!e.isRelayOrigin&&!b.isRelayMode&&(0,n.jsx)(v.$n,{size:"sm",intent:"white",leftIcon:(0,n.jsx)(A.ax_,{}),onClick:()=>O(e.id),children:"Promote to origin"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 text-xs text-[--muted]",children:[!e.isHost&&void 0!==e.bufferHealth&&(0,n.jsx)(g.m_,{trigger:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"text-xs",children:"Buffer"}),(0,n.jsx)("div",{className:"w-8 h-1 bg-gray-300 rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:"".concat(Math.max(0,Math.min(100,100*e.bufferHealth)),"%")}})}),(0,n.jsxs)("span",{className:"text-xs",children:[Math.round(100*e.bufferHealth),"%"]})]}),children:"Synchronization buffer health"}),e.latency>0&&(0,n.jsxs)("span",{children:[e.latency,"ms"]}),e.isBuffering?(0,n.jsx)(p.E,{intent:"alert-solid",className:"text-xs",children:"Buffering"}):null]})]},e.id)},x[16]=M,x[17]=_,x[18]=O,x[19]=b.isRelayMode,x[20]=m):m=x[20];let z=D.map(m);return x[21]!==z?(h=(0,n.jsx)("div",{className:"p-4 border rounded-lg bg-gray-950",children:(0,n.jsx)("div",{className:"space-y-0",children:z})}),x[21]=z,x[22]=h):h=x[22],(0,n.jsxs)("div",{className:"space-y-4",children:[u,(0,n.jsxs)("h5",{children:["Participants (",k,")"]}),h]})}function F(e){return!e}},82449:(e,t,l)=>{"use strict";l.d(t,{w:()=>m});var n=l(55014),i=l(78216),a=l(25264),r=l(26603),s=l(93715),o=l(94077),d=l(46278),c=l(29724),u=l(12115);function m(){let{mutate:e,isPending:t}=(0,n.UW)();(0,d.jE)();let l=(0,c.Xr)(a.bp),m=(0,c.Xr)(a.LT),{torrentStreamingPlayback:p,electronPlaybackMethod:v}=(0,i.zw)(),{externalPlayerLink:f}=(0,i._V)(),h=(0,c.md)(r.O1),x=u.useMemo(()=>o.nH&&v===i.Ft.NativePlayer?"nativeplayer":(null==f?void 0:f.length)&&p===i.kG.ExternalPlayerLink?"externalPlayerLink":"default",[p,f,v]);return{handleStreamSelection:u.useCallback(t=>{var n;(0,s.v)("TORRENT STREAM SELECTION").info("Starting torrent stream",t),e({mediaId:t.mediaId,episodeNumber:t.episodeNumber,torrent:t.torrent,aniDBEpisode:t.aniDBEpisode,autoSelect:!1,fileIndex:null!=(n=t.chosenFileIndex)?n:void 0,playbackType:x,clientId:h||"",batchEpisodeFiles:t.batchEpisodeFiles},{onSuccess:()=>{},onError:()=>{l(null),m(!1)}})},[x,h]),handleAutoSelectStream:u.useCallback(t=>{e({mediaId:t.mediaId,episodeNumber:t.episodeNumber,aniDBEpisode:t.aniDBEpisode,autoSelect:!0,torrent:void 0,playbackType:x,clientId:h||""},{onError:()=>{l(null),m(!1)}})},[x,h]),isPending:t}}},83394:(e,t,l)=>{"use strict";l.d(t,{FE:()=>p,H_:()=>c,hH:()=>u,pj:()=>m,vy:()=>v});var n=l(19749),i=l(7675),a=l(74889),r=l(96826),s=l(93715),o=l(46278),d=l(12115);function c(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.CONTINUITY.GetContinuityWatchHistory.endpoint,method:a.S.CONTINUITY.GetContinuityWatchHistory.methods[0],queryKey:[a.S.CONTINUITY.GetContinuityWatchHistory.key],enabled:!0},t[0]=e):e=t[0],(0,i.fl)(e)}function u(e,t,l){if(!e)return 0;let n=e[t];if(!n||!n.currentTime||!n.duration||n.episodeNumber!==l)return 0;let i=Math.round(n.currentTime/n.duration*100);return i>90||i<5?0:i}function m(e,t,l){if(!e)return 0;let n=e[t];return n&&n.currentTime&&n.duration&&n.episodeNumber===l?Math.round((n.duration-n.currentTime)/60):0}function p(e,t,l){var c,u,m,p;let v,f,h,x,g=(0,n.c)(12),y=(0,r.v1)(),b=(0,o.jE)();g[0]!==b?(v=()=>{(async()=>{await b.invalidateQueries({queryKey:[a.S.CONTINUITY.GetContinuityWatchHistory.key]}),await b.invalidateQueries({queryKey:[a.S.CONTINUITY.GetContinuityWatchHistoryItem.key]})})()},g[0]=b,g[1]=v):v=g[1];let N=null!=t?t:0;g[2]!==N?(f=[N],g[2]=N,g[3]=f):f=g[3],d.useEffect(v,f);let{mutate:j}=function(){let e,t,l=(0,n.c)(3),r=(0,o.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.CONTINUITY.UpdateContinuityWatchHistoryItem.key],l[0]=e):e=l[0],l[1]!==r?(t={endpoint:a.S.CONTINUITY.UpdateContinuityWatchHistoryItem.endpoint,method:a.S.CONTINUITY.UpdateContinuityWatchHistoryItem.methods[0],mutationKey:e,onSuccess:async()=>{await r.invalidateQueries({queryKey:[a.S.CONTINUITY.GetContinuityWatchHistory.key]})}},l[1]=r,l[2]=t):t=l[2],(0,i.qk)(t)}();g[4]!==t||g[5]!==l||g[6]!==e||g[7]!==(null==y||null==(u=y.settings)||null==(c=u.library)?void 0:c.enableWatchContinuity)||g[8]!==j?(h=function(){var n,i,a,r,o,d,c,u,m,p;(null==y||null==(i=y.settings)||null==(n=i.library)?void 0:n.enableWatchContinuity)&&(null==(a=e.current)?void 0:a.duration)&&(null==(r=e.current)?void 0:r.currentTime)&&((0,s.v)("CONTINUITY").info("Watch history updated",{currentTime:null==(o=e.current)?void 0:o.currentTime,duration:null==(d=e.current)?void 0:d.duration}),j({options:{currentTime:null!=(m=null==(c=e.current)?void 0:c.currentTime)?m:0,duration:null!=(p=null==(u=e.current)?void 0:u.duration)?p:0,mediaId:Number(l),episodeNumber:null!=t?t:0,kind:"onlinestream"}}))},g[4]=t,g[5]=l,g[6]=e,g[7]=null==y||null==(p=y.settings)||null==(m=p.library)?void 0:m.enableWatchContinuity,g[8]=j,g[9]=h):h=g[9];let S=h;return g[10]!==S?(x={handleUpdateWatchHistory:S},g[10]=S,g[11]=x):x=g[11],x}function v(e){var t,l,o,d,c,u;let m,p,v=(0,n.c)(8),f=(0,r.v1)(),{data:h,isLoading:x}=function(e){var t,l;let s,o,d,c=(0,n.c)(8),u=(0,r.v1)();c[0]!==e?(s=a.S.CONTINUITY.GetContinuityWatchHistoryItem.endpoint.replace("{id}",String(e)),c[0]=e,c[1]=s):s=c[1];let m=String(e);c[2]!==m?(o=[a.S.CONTINUITY.GetContinuityWatchHistoryItem.key,m],c[2]=m,c[3]=o):o=c[3];let p=(null==u||null==(l=u.settings)||null==(t=l.library)?void 0:t.enableWatchContinuity)&&!!e;return c[4]!==s||c[5]!==o||c[6]!==p?(d={endpoint:s,method:a.S.CONTINUITY.GetContinuityWatchHistoryItem.methods[0],queryKey:o,enabled:p},c[4]=s,c[5]=o,c[6]=p,c[7]=d):d=c[7],(0,i.fl)(d)}(e),g=x&&(null==f||null==(l=f.settings)||null==(t=l.library)?void 0:t.enableWatchContinuity);v[0]!==e||v[1]!==(null==f||null==(d=f.settings)||null==(o=d.library)?void 0:o.enableWatchContinuity)||v[2]!==h?(m=function(t,l,n){var i,a;if(!(null==f||null==(a=f.settings)||null==(i=a.library)?void 0:i.enableWatchContinuity)||!e||!h||!n||!t)return 0;let r=null==h?void 0:h.item;return r&&r.currentTime&&r.duration&&r.episodeNumber===t&&r.currentTime>0&&r.currentTime<n&&!(r.currentTime/r.duration>90)?((0,s.v)("CONTINUITY").info("Found last watched time",{currentTime:r.currentTime,duration:r.duration,episodeNumber:r.episodeNumber}),r.currentTime):0},v[0]=e,v[1]=null==f||null==(u=f.settings)||null==(c=u.library)?void 0:c.enableWatchContinuity,v[2]=h,v[3]=m):m=v[3];let y=m;return v[4]!==y||v[5]!==g||v[6]!==h?(p={watchHistory:h,waitForWatchHistory:g,getEpisodeContinuitySeekTo:y},v[4]=y,v[5]=g,v[6]=h,v[7]=p):p=v[7],p}},85210:(e,t,l)=>{"use strict";l.d(t,{$x:()=>f,Bq:()=>m,Hy:()=>y,I4:()=>c,Qg:()=>u,Qw:()=>v,TI:()=>x,Xs:()=>o,co:()=>s,dw:()=>h,ns:()=>g,wi:()=>d});var n=l(24780),i=l(84621),a=l.n(i),r=l(99288);let s=[{label:"Aired recently",value:"AIRDATE_DESC"},{label:"Aired oldest",value:"AIRDATE"},{label:"Highest episode number",value:"EPISODE_NUMBER_DESC"},{label:"Lowest episode number",value:"EPISODE_NUMBER"},{label:"Most unwatched episodes",value:"UNWATCHED_EPISODES_DESC"},{label:"Least unwatched episodes",value:"UNWATCHED_EPISODES"},{label:"Highest score",value:"SCORE_DESC"},{label:"Lowest score",value:"SCORE"},{label:"Started recently",value:"START_DATE_DESC"},{label:"Oldest start date",value:"START_DATE"},{label:"Most recent watch",value:"LAST_WATCHED_DESC"},{label:"Least recent watch",value:"LAST_WATCHED"}],o=[{label:"Highest score",value:"SCORE_DESC"},{label:"Lowest score",value:"SCORE"},{label:"Title",value:"TITLE"},{label:"Title (Z-A)",value:"TITLE_DESC"},{label:"Highest progress",value:"PROGRESS_DESC"},{label:"Lowest progress",value:"PROGRESS"},{label:"Started recently",value:"START_DATE_DESC"},{label:"Oldest start date",value:"START_DATE"},{label:"Completed recently",value:"END_DATE_DESC"},{label:"Oldest completion date",value:"END_DATE"},{label:"Released recently",value:"RELEASE_DATE_DESC"},{label:"Oldest release",value:"RELEASE_DATE"}],d=[{label:"Aired recently and not up-to-date",value:"AIRDATE_DESC"},{label:"Aired oldest and not up-to-date",value:"AIRDATE"},{label:"Most unwatched episodes",value:"UNWATCHED_EPISODES_DESC"},{label:"Least unwatched episodes",value:"UNWATCHED_EPISODES"},{label:"Most recent watch",value:"LAST_WATCHED_DESC"},{label:"Least recent watch",value:"LAST_WATCHED"},...o],c=[{label:"Most unread chapters",value:"UNREAD_CHAPTERS_DESC"},{label:"Least unread chapters",value:"UNREAD_CHAPTERS"},...o],u={sorting:"SCORE_DESC",genre:null,status:null,format:null,season:null,year:null,isAdult:!1,continueWatchingOnly:!1},m={sorting:"SCORE_DESC",genre:null,status:null,format:null,season:null,year:null,isAdult:!1,continueWatchingOnly:!1};function p(e){return""===e||Array.isArray(e)&&0===e.filter(Boolean).length?void 0:"string"!=typeof e||isNaN(parseInt(e))?null!==e?e:void 0:Number(e)}function v(e,t){if(!e)return[];if(e.length>0&&t.length>0){let l=t.toLowerCase().trim().replace(/\s+/g," ");return e.filter(e=>{var t,n,i,a,r,s,o,d,c,u,m;return(null==(i=e.media)||null==(n=i.title)||null==(t=n.english)?void 0:t.toLowerCase().includes(l))||(null==(s=e.media)||null==(r=s.title)||null==(a=r.userPreferred)?void 0:a.toLowerCase().includes(l))||(null==(c=e.media)||null==(d=c.title)||null==(o=d.romaji)?void 0:o.toLowerCase().includes(l))||(null==(m=e.media)||null==(u=m.synonyms)?void 0:u.some(e=>null==e?void 0:e.toLowerCase().includes(l)))})}return e}function f(e,t,l,n){var i;if(!t)return[];let r=[...t];return r&&l.isAdult&&(r=r.filter(e=>{var t;return null==(t=e.media)?void 0:t.isAdult})),n||(r=r.filter(e=>{var t;return!(null==(t=e.media)?void 0:t.isAdult)})),r&&l.format&&(r=r.filter(e=>{var t;return(null==(t=e.media)?void 0:t.format)===l.format})),r&&l.season&&(r=r.filter(e=>{var t;return(null==(t=e.media)?void 0:t.season)===l.season})),r&&l.status&&(r=r.filter(e=>{var t;return(null==(t=e.media)?void 0:t.status)===l.status})),r&&l.year&&(r=r.filter(e=>{var t,n,i,a,r,s;return(null==(t=e.media)?void 0:t.seasonYear)?(null==(n=e.media)?void 0:n.seasonYear)===Number(l.year)||(null==(a=e.media)||null==(i=a.startDate)?void 0:i.year)===Number(l.year):(null==(s=e.media)||null==(r=s.startDate)?void 0:r.year)===Number(l.year)})),r&&(null==(i=l.genre)?void 0:i.length)&&(r=r.filter(e=>{var t;return null==(t=l.genre)?void 0:t.every(t=>{var l,n;return null==(n=e.media)||null==(l=n.genres)?void 0:l.includes(t)})})),r=a()(r,e=>{var t,l;return null==e||null==(l=e.media)||null==(t=l.title)?void 0:t.userPreferred}).reverse(),"TITLE"===p(l.sorting)&&r.sort((e,t)=>{var l,n,i,a,r;return(null==e||null==(r=e.media)||null==(a=r.title)||null==(i=a.userPreferred)?void 0:i.localeCompare(null==t||null==(n=t.media)||null==(l=n.title)?void 0:l.userPreferred))||0}),"TITLE_DESC"===p(l.sorting)&&r.sort((e,t)=>{var l,n,i,a,r;return(null==t||null==(r=t.media)||null==(a=r.title)||null==(i=a.userPreferred)?void 0:i.localeCompare(null==e||null==(n=e.media)||null==(l=n.title)?void 0:l.userPreferred))||0}).reverse(),("RELEASE_DATE"===p(l.sorting)||"RELEASE_DATE_DESC"===p(l.sorting))&&(r=null==r?void 0:r.filter(e=>{var t;return(null==(t=e.media)?void 0:t.startDate)&&!!e.media.startDate.year&&!!e.media.startDate.month})),"RELEASE_DATE"===p(l.sorting)&&(r=a()(r,e=>{var t,l,n,i;return new Date(null==e||null==(l=e.media)||null==(t=l.startDate)?void 0:t.year,(null==e||null==(i=e.media)||null==(n=i.startDate)?void 0:n.month)-1)})),"RELEASE_DATE_DESC"===p(l.sorting)&&(r=a()(r,e=>{var t,l,n,i;return new Date(null==e||null==(l=e.media)||null==(t=l.startDate)?void 0:t.year,(null==e||null==(i=e.media)||null==(n=i.startDate)?void 0:n.month)-1)}).reverse()),"SCORE"===p(l.sorting)&&(r=a()(r,e=>(null==e?void 0:e.score)||999999)),"SCORE_DESC"===p(l.sorting)&&(r=a()(r,e=>(null==e?void 0:e.score)||0).reverse()),"START_DATE"===p(l.sorting)&&(r=a()(r,e=>{var t,l,n;return new Date((null==e||null==(t=e.startedAt)?void 0:t.year)||9999,((null==e||null==(l=e.startedAt)?void 0:l.month)||1)-1,(null==e||null==(n=e.startedAt)?void 0:n.day)||1)})),"START_DATE_DESC"===p(l.sorting)&&(r=a()(r,e=>{var t,l,n;return new Date((null==e||null==(t=e.startedAt)?void 0:t.year)||1e3,((null==e||null==(l=e.startedAt)?void 0:l.month)||1)-1,(null==e||null==(n=e.startedAt)?void 0:n.day)||1)}).reverse()),("END_DATE"===p(l.sorting)||"END_DATE_DESC"===p(l.sorting))&&(r=null==r?void 0:r.filter(e=>e.completedAt&&!!e.completedAt.year&&!!e.completedAt.month&&!!e.completedAt.day)),"END_DATE"===p(l.sorting)&&(r=a()(r,e=>{var t,l,n;return new Date(null==e||null==(t=e.completedAt)?void 0:t.year,(null==e||null==(l=e.completedAt)?void 0:l.month)-1,null==e||null==(n=e.completedAt)?void 0:n.day)})),"END_DATE_DESC"===p(l.sorting)&&(r=a()(r,e=>{var t,l,n;return new Date(null==e||null==(t=e.completedAt)?void 0:t.year,(null==e||null==(l=e.completedAt)?void 0:l.month)-1,null==e||null==(n=e.completedAt)?void 0:n.day)}).reverse()),"PROGRESS"===p(l.sorting)&&(r=a()(r,e=>(null==e?void 0:e.progress)||0)),"PROGRESS_DESC"===p(l.sorting)&&(r=a()(r,e=>(null==e?void 0:e.progress)||0).reverse()),r}function h(e,t,l,n){var i;if(!t)return[];let r=[...t];return r&&l.isAdult&&(r=r.filter(e=>{var t;return null==(t=e.media)?void 0:t.isAdult})),n||(r=r.filter(e=>{var t;return!(null==(t=e.media)?void 0:t.isAdult)})),r&&l.format&&(r=r.filter(e=>{var t;return(null==(t=e.media)?void 0:t.format)===l.format})),r&&l.season&&(r=r.filter(e=>{var t;return(null==(t=e.media)?void 0:t.season)===l.season})),r&&l.status&&(r=r.filter(e=>{var t;return(null==(t=e.media)?void 0:t.status)===l.status})),r&&l.year&&(r=r.filter(e=>{var t,n,i;return(null==(t=e.media)?void 0:t.seasonYear)===Number(l.year)||(null==(i=e.media)||null==(n=i.startDate)?void 0:n.year)===Number(l.year)})),r&&(null==(i=l.genre)?void 0:i.length)&&(r=r.filter(e=>{var t;return null==(t=l.genre)?void 0:t.every(t=>{var l,n;return null==(n=e.media)||null==(l=n.genres)?void 0:l.includes(t)})})),r=a()(r,e=>{var t,l;return null==e||null==(l=e.media)||null==(t=l.title)?void 0:t.userPreferred}).reverse(),"TITLE"===p(l.sorting)&&r.sort((e,t)=>{var l,n,i,a,r;return(null==e||null==(r=e.media)||null==(a=r.title)||null==(i=a.userPreferred)?void 0:i.localeCompare(null==t||null==(n=t.media)||null==(l=n.title)?void 0:l.userPreferred))||0}),"TITLE_DESC"===p(l.sorting)&&r.sort((e,t)=>{var l,n,i,a,r;return(null==t||null==(r=t.media)||null==(a=r.title)||null==(i=a.userPreferred)?void 0:i.localeCompare(null==e||null==(n=e.media)||null==(l=n.title)?void 0:l.userPreferred))||0}).reverse(),("RELEASE_DATE"===p(l.sorting)||"RELEASE_DATE_DESC"===p(l.sorting))&&(r=null==r?void 0:r.filter(e=>{var t;return(null==(t=e.media)?void 0:t.startDate)&&!!e.media.startDate.year&&!!e.media.startDate.month})),"RELEASE_DATE"===p(l.sorting)&&(r=a()(r,e=>{var t,l,n,i;return new Date(null==e||null==(l=e.media)||null==(t=l.startDate)?void 0:t.year,(null==e||null==(i=e.media)||null==(n=i.startDate)?void 0:n.month)-1)})),"RELEASE_DATE_DESC"===p(l.sorting)&&(r=a()(r,e=>{var t,l,n,i;return new Date(null==e||null==(l=e.media)||null==(t=l.startDate)?void 0:t.year,(null==e||null==(i=e.media)||null==(n=i.startDate)?void 0:n.month)-1)}).reverse()),"SCORE"===p(l.sorting)&&(r=a()(r,e=>{var t;return(null==e||null==(t=e.listData)?void 0:t.score)||999999})),"SCORE_DESC"===p(l.sorting)&&(r=a()(r,e=>{var t;return(null==e||null==(t=e.listData)?void 0:t.score)||0}).reverse()),"START_DATE"===p(l.sorting)&&(r=a()(r,e=>{var t,l;return new Date(null!=(l=null==e||null==(t=e.listData)?void 0:t.startedAt)?l:new Date(9999,1,1).toISOString())})),"START_DATE_DESC"===p(l.sorting)&&(r=a()(r,e=>{var t,l;return new Date(null!=(l=null==e||null==(t=e.listData)?void 0:t.startedAt)?l:new Date(1e3,1,1).toISOString())}).reverse()),("END_DATE"===p(l.sorting)||"END_DATE_DESC"===p(l.sorting))&&(r=null==r?void 0:r.filter(e=>{var t;return!!(null==(t=e.listData)?void 0:t.completedAt)})),"END_DATE"===p(l.sorting)&&(r=a()(r,e=>{var t;return new Date(null==e||null==(t=e.listData)?void 0:t.completedAt)})),"END_DATE_DESC"===p(l.sorting)&&(r=a()(r,e=>{var t;return new Date(null==e||null==(t=e.listData)?void 0:t.completedAt)}).reverse()),"PROGRESS"===p(l.sorting)&&(r=a()(r,e=>{var t;return(null==e||null==(t=e.listData)?void 0:t.progress)||0})),"PROGRESS_DESC"===p(l.sorting)&&(r=a()(r,e=>{var t;return(null==e||null==(t=e.listData)?void 0:t.progress)||0}).reverse()),r}function x(e,t,l,n,i){let s=h("anime",e,t,l);return t.continueWatchingOnly&&(s=s.filter(e=>(null==n?void 0:n.findIndex(t=>{var l,n;return(null==(l=t.baseAnime)?void 0:l.id)===(null==(n=e.media)?void 0:n.id)}))!==-1)),"AIRDATE"===p(t.sorting)&&(s=a()(s,e=>{var t,l;return(null==n||null==(l=n.find(t=>{var l,n;return(null==(l=t.baseAnime)?void 0:l.id)===(null==(n=e.media)?void 0:n.id)}))||null==(t=l.episodeMetadata)?void 0:t.airDate)||new Date(9999,1,1).toISOString()})),"AIRDATE_DESC"===p(t.sorting)&&(s=a()(s,e=>{var t,l;return(null==n||null==(l=n.find(t=>{var l,n;return(null==(l=t.baseAnime)?void 0:l.id)===(null==(n=e.media)?void 0:n.id)}))||null==(t=l.episodeMetadata)?void 0:t.airDate)||new Date(1e3,1,1).toISOString()}).reverse()),"UNWATCHED_EPISODES"===p(t.sorting)&&(s=a()(s,e=>{var t,l,n,i,a;return(null==(t=e.libraryData)?void 0:t.mainFileCount)?null==(l=e.libraryData)?void 0:l.unwatchedCount:(null==(n=e.nakamaLibraryData)?void 0:n.mainFileCount)?null==(i=e.nakamaLibraryData)?void 0:i.unwatchedCount:(0,r.wR)(e.media,null==(a=e.listData)?void 0:a.progress)||99999})),"UNWATCHED_EPISODES_DESC"===p(t.sorting)&&(s=a()(s,e=>{var t,l,n,i,a;return(null==(t=e.libraryData)?void 0:t.mainFileCount)?null==(l=e.libraryData)?void 0:l.unwatchedCount:(null==(n=e.nakamaLibraryData)?void 0:n.mainFileCount)?null==(i=e.nakamaLibraryData)?void 0:i.unwatchedCount:(0,r.wR)(e.media,null==(a=e.listData)?void 0:a.progress)||99999}).reverse()),"LAST_WATCHED"===p(t.sorting)&&(s=a()(s,e=>{var t,l;return(null==i||null==(t=i[null==(l=e.media)?void 0:l.id])?void 0:t.timeUpdated)||new Date(9999,1,1).toISOString()})),"LAST_WATCHED_DESC"===p(t.sorting)&&(s=a()(s,e=>{var t,l;return(null==i||null==(t=i[null==(l=e.media)?void 0:l.id])?void 0:t.timeUpdated)||new Date(1e3,1,1).toISOString()}).reverse()),s}function g(e,t,l,i,r,s){if(!s||!i||!r)return[];let o=h("manga",e,t,l);return t.unreadOnly&&(o=o.filter(e=>{var t,l;return((0,n.em)(null==(t=e.media)?void 0:t.id,s,i,r)||999999)-((null==(l=e.listData)?void 0:l.progress)||0)>0})),"UNREAD_CHAPTERS"===p(t.sorting)&&(o=a()(o,e=>{var t,l;return((0,n.em)(null==(t=e.media)?void 0:t.id,s,i,r)||999999)-((null==(l=e.listData)?void 0:l.progress)||0)})),"UNREAD_CHAPTERS_DESC"===p(t.sorting)&&(o=a()(o,e=>{var t,l;return((0,n.em)(null==(t=e.media)?void 0:t.id,s,i,r)||0)-((null==(l=e.listData)?void 0:l.progress)||0)}).reverse()),o}function y(e,t,l,n){if(!e)return[];let i=[...e];return i=a()(i,e=>null==e?void 0:e.displayTitle),"EPISODE_NUMBER"===t&&(i=a()(i,e=>null==e?void 0:e.episodeNumber)),"EPISODE_NUMBER_DESC"===t&&(i=a()(i,e=>null==e?void 0:e.episodeNumber).reverse()),"AIRDATE"===t&&(i=a()(i,e=>{var t;return null==e||null==(t=e.episodeMetadata)?void 0:t.airDate})),"AIRDATE_DESC"===t&&(i=a()(i,e=>{var t;return null==e||null==(t=e.episodeMetadata)?void 0:t.airDate}).reverse()),"UNWATCHED_EPISODES"===t&&(i=a()(i,e=>{var t,n,i,a,s;return null!=(s=null==l||null==(n=l.find(t=>{var l,n;return(null==(l=t.media)?void 0:l.id)===(null==(n=e.baseAnime)?void 0:n.id)}))||null==(t=n.libraryData)?void 0:t.unwatchedCount)?s:(0,r.wR)(e.baseAnime,null==l||null==(a=l.find(t=>{var l,n;return(null==(l=t.media)?void 0:l.id)===(null==(n=e.baseAnime)?void 0:n.id)}))||null==(i=a.listData)?void 0:i.progress)||99999})),"UNWATCHED_EPISODES_DESC"===t&&(i=a()(i,e=>{var t,n,i,a,s;return null!=(s=null==l||null==(n=l.find(t=>{var l,n;return(null==(l=t.media)?void 0:l.id)===(null==(n=e.baseAnime)?void 0:n.id)}))||null==(t=n.libraryData)?void 0:t.unwatchedCount)?s:(0,r.wR)(e.baseAnime,null==l||null==(a=l.find(t=>{var l,n;return(null==(l=t.media)?void 0:l.id)===(null==(n=e.baseAnime)?void 0:n.id)}))||null==(i=a.listData)?void 0:i.progress)}).reverse()),"SCORE"===t&&(i=a()(i,e=>{var t,n;return(null==l||null==(n=l.find(t=>{var l,n;return(null==(l=t.media)?void 0:l.id)===(null==(n=e.baseAnime)?void 0:n.id)}))||null==(t=n.listData)?void 0:t.score)||999999})),"SCORE_DESC"===t&&(i=a()(i,e=>{var t,n;return(null==l||null==(n=l.find(t=>{var l,n;return(null==(l=t.media)?void 0:l.id)===(null==(n=e.baseAnime)?void 0:n.id)}))||null==(t=n.listData)?void 0:t.score)||0}).reverse()),"START_DATE"===t&&(i=a()(i,e=>{var t,n;return(null==l||null==(n=l.find(t=>{var l,n;return(null==(l=t.media)?void 0:l.id)===(null==(n=e.baseAnime)?void 0:n.id)}))||null==(t=n.listData)?void 0:t.startedAt)||new Date(9999,1,1).toISOString()})),"START_DATE_DESC"===t&&(i=a()(i,e=>{var t,n;return(null==l||null==(n=l.find(t=>{var l,n;return(null==(l=t.media)?void 0:l.id)===(null==(n=e.baseAnime)?void 0:n.id)}))||null==(t=n.listData)?void 0:t.startedAt)||new Date(1e3,1,1).toISOString()}).reverse()),"LAST_WATCHED"===t&&(i=a()(i,e=>{var t,l;return(null==n||null==(t=n[null==(l=e.baseAnime)?void 0:l.id])?void 0:t.timeUpdated)||new Date(9999,1,1).toISOString()})),"LAST_WATCHED_DESC"===t&&(i=a()(i,e=>{var t,l;return(null==n||null==(t=n[null==(l=e.baseAnime)?void 0:l.id])?void 0:t.timeUpdated)||new Date(1e3,1,1).toISOString()}).reverse()),i}},87466:(e,t,l)=>{"use strict";l.d(t,{B:()=>C});var n=l(95155),i=l(19749),a=l(83394),r=l(13029),s=l(83563),o=l(96826),d=l(65539),c=l(66699),u=l(94936),m=l(26589),p=l(10653),v=l(47363),f=l(29724),h=l(12115),x=l(70376);function g(e){let t,l,a,r,s,c=(0,i.c)(17),{downloadInfo:g,media:b,maxCol:N}=e,j=null==g?void 0:g.episodesToDownload,S=(0,f.Xr)(v.N7),E=(0,f.Xr)(v.Io),{hasTorrentProvider:w}=(0,o.lJ)(),A=w?(null==g?void 0:g.rewatch)?"You have not downloaded the following:":"You have not watched nor downloaded the following:":"The following episodes are not in your library:";return(null==j?void 0:j.length)?(c[0]!==A?(t=(0,n.jsx)("p",{className:"",children:A}),c[0]=A,c[1]=t):t=c[1],c[2]!==j||c[3]!==w||c[4]!==b||c[5]!==E||c[6]!==S?(l=null==j?void 0:j.sort(y).slice(0,28).map((e,t)=>{var l,i,a,r,s,o;if(!e.episode)return null;let d=e.episode;return(0,n.jsx)(m.X,{media:b,image:null==(l=d.episodeMetadata)?void 0:l.image,isInvalid:d.isInvalid,title:d.displayTitle,episodeTitle:d.episodeTitle,episodeNumber:d.episodeNumber,progressNumber:d.progressNumber,description:(null==(i=d.episodeMetadata)?void 0:i.summary)||(null==(a=d.episodeMetadata)?void 0:a.overview),action:(0,n.jsxs)(n.Fragment,{children:[w&&(0,n.jsx)("div",{"data-undownloaded-episode-list-action-download-button":!0,onClick:()=>{E(d.episodeNumber),(0,h.startTransition)(()=>{S("download")})},className:"inline-block text-orange-200 text-2xl animate-pulse cursor-pointer py-2",children:(0,n.jsx)(x.Ah9,{})}),(0,n.jsx)(u.E4,{episode:d}),(0,n.jsx)(p.bv,{isDropdownMenu:!0,type:"undownloaded",episode:d})]}),children:(0,n.jsx)("div",{"data-undownloaded-episode-list-episode-metadata-container":!0,className:"mt-1",children:(0,n.jsxs)("p",{"data-undownloaded-episode-list-episode-metadata-text":!0,className:"flex gap-1 items-center text-sm text-[--muted]",children:[(0,n.jsx)(x.zBL,{})," ",(null==(r=d.episodeMetadata)?void 0:r.airDate)?"Aired on ".concat(new Date(null==(s=d.episodeMetadata)?void 0:s.airDate).toLocaleDateString()):"Aired"]})})},(null==(o=e.episode.localFile)?void 0:o.path)||t)}),c[2]=j,c[3]=w,c[4]=b,c[5]=E,c[6]=S,c[7]=l):l=c[7],c[8]!==N||c[9]!==l?(a=(0,n.jsx)(d.i,{maxCol:N,children:l}),c[8]=N,c[9]=l,c[10]=a):a=c[10],c[11]!==j.length?(r=j.length>28&&(0,n.jsx)("h3",{children:"And more..."}),c[11]=j.length,c[12]=r):r=c[12],c[13]!==t||c[14]!==a||c[15]!==r?(s=(0,n.jsxs)("div",{className:"space-y-4","data-undownloaded-episode-list":!0,children:[t,a,r]}),c[13]=t,c[14]=a,c[15]=r,c[16]=s):s=c[16],s):null}function y(e,t){return e.episodeNumber-t.episodeNumber}var b=l(93319),N=l(67236),j=l(59271),S=l(50558),E=l(244),w=l(6708),A=l(91332),T=l(38628);function C(e){let t,l,m,p,v,f,x,y,C,R,M,O,P=(0,i.c)(80),{entry:F,bottomSection:z,hideCarousel:B,maxCol:K}=e,U=void 0===K?4:K,G=(0,A.Ky)(),q=(0,o.v1)(),{currentView:H}=(0,c.K9)();P[0]!==F?(t={entry:F},P[0]=F,P[1]=t):t=P[1];let{media:V,hasInvalidEpisodes:W,episodesToWatch:Y,mainEpisodes:Q,specialEpisodes:$,ncEpisodes:X,playMediaFile:Z}=function(e){var t;let{entry:l}=e,n=l.media,{playMediaFile:i}=(0,b.g)();(0,N.k)({onPlay:()=>{if(l.nextEpisode){var e,t;i({path:null!=(t=null==(e=l.nextEpisode.localFile)?void 0:e.path)?t:"",mediaId:l.mediaId,episode:l.nextEpisode})}}},!!l.nextEpisode);let a=h.useMemo(()=>{var e,t;return null!=(t=null==(e=l.episodes)?void 0:e.filter(e=>"main"===e.type))?t:[]},[l.episodes]),r=h.useMemo(()=>{var e,t;return(null!=(t=null==(e=l.episodes)?void 0:e.filter(e=>"special"===e.type))?t:[]).sort((e,t)=>e.displayTitle.localeCompare(t.displayTitle,void 0,{numeric:!0}))},[l.episodes]),s=h.useMemo(()=>{var e,t;return(null!=(t=null==(e=l.episodes)?void 0:e.filter(e=>{var t;return"nc"===e.type&&!!(null==(t=e.localFile)?void 0:t.path)}))?t:[]).sort((e,t)=>e.localFile.path.localeCompare(t.localFile.path,void 0,{numeric:!0}))},[l.episodes]),o=h.useMemo(()=>{var e,t;return null!=(t=null==(e=l.episodes)?void 0:e.some(e=>e.isInvalid))&&t},[l.episodes]),d=h.useMemo(()=>{var e;let t=a.filter(e=>{var t,n;return!l.nextEpisode||e.progressNumber>(null!=(n=null==(t=l.listData)?void 0:t.progress)?n:0)});return(null==(e=l.listData)?void 0:e.progress)&&!l.nextEpisode?t.reverse():t},[a,l.nextEpisode,null==(t=l.listData)?void 0:t.progress]);return{media:n,playMediaFile:i,mainEpisodes:a,specialEpisodes:r,ncEpisodes:s,hasInvalidEpisodes:o,episodesToWatch:d}}(t),{data:J}=(0,a.H_)(),{inject:ee,remove:et}=(0,s.H)();if(P[2]!==H||P[3]!==F||P[4]!==(null==Y?void 0:Y[0])||P[5]!==ee||P[6]!==Q||P[7]!==V||P[8]!==X||P[9]!==Z||P[10]!==et||P[11]!==$?(l=()=>{if(V)return ee("library-episodes",{items:[{...null==Y?void 0:Y[0],type:"next"},...Q.map(L),...$.map(_),...X.map(k)].filter(D).map(e=>{var t;return{data:e,id:"".concat(e.type,"-").concat((null==(t=e.localFile)?void 0:t.path)||"","-").concat(e.episodeNumber),value:"".concat(e.episodeNumber),heading:"next"===e.type?"Next Episode":"special"===e.type?"Specials":"other"===e.type?"Others":"Episodes",priority:"next"===e.type?2:+("main"===e.type),render:()=>(0,n.jsxs)("div",{className:"flex gap-1 items-center w-full",children:[(0,n.jsx)("p",{className:"max-w-[70%] truncate",children:e.displayTitle}),!!e.episodeTitle&&(0,n.jsxs)("p",{className:"text-[--muted] flex-1 truncate",children:["- ",e.episodeTitle]})]}),onSelect:()=>{var t,l;return Z({path:null!=(l=null==(t=e.localFile)?void 0:t.path)?l:"",mediaId:F.mediaId,episode:e})}}}),filter:I,shouldShow:()=>"library"===H,priority:1}),()=>et("library-episodes")},P[2]=H,P[3]=F,P[4]=null==Y?void 0:Y[0],P[5]=ee,P[6]=Q,P[7]=V,P[8]=X,P[9]=Z,P[10]=et,P[11]=$,P[12]=l):l=P[12],P[13]!==H||P[14]!==Y||P[15]!==Q||P[16]!==V||P[17]!==X||P[18]!==$?(m=[V,Y,Q,$,X,H],P[13]=H,P[14]=Y,P[15]=Q,P[16]=V,P[17]=X,P[18]=$,P[19]=m):m=P[19],h.useEffect(l,m),!V)return null;if(V&&(!F.listData&&!F._isNakamaEntry||!F.libraryData)&&!(null==q?void 0:q.isOffline)){let e,t,l,i;return P[20]!==F._isNakamaEntry||P[21]!==(null==V?void 0:V.status)?(e=(null==V?void 0:V.status)!=="NOT_YET_RELEASED"?(0,n.jsxs)("h4",{className:"text-yellow-50 flex items-center gap-2",children:[(0,n.jsx)(T.Q9o,{})," Not in ",F._isNakamaEntry?"the Nakama's":"your"," library"]}):(0,n.jsx)("h5",{className:"text-yellow-50",children:"Not yet released"}),P[20]=F._isNakamaEntry,P[21]=null==V?void 0:V.status,P[22]=e):e=P[22],P[23]!==F._isNakamaEntry||P[24]!==F.downloadInfo||P[25]!==U||P[26]!==V?(t=!F._isNakamaEntry&&(0,n.jsx)(g,{downloadInfo:F.downloadInfo,media:V,maxCol:U}),P[23]=F._isNakamaEntry,P[24]=F.downloadInfo,P[25]=U,P[26]=V,P[27]=t):t=P[27],P[28]!==z||P[29]!==t?(l=(0,n.jsxs)("div",{className:"overflow-y-auto pt-4 lg:pt-0 space-y-10 overflow-x-hidden",children:[t,z]}),P[28]=z,P[29]=t,P[30]=l):l=P[30],P[31]!==e||P[32]!==l?(i=(0,n.jsxs)("div",{className:"space-y-10",children:[e,l]}),P[31]=e,P[32]=l,P[33]=i):i=P[33],i}return P[34]!==W?(p=W&&(0,n.jsx)(S.F,{intent:"alert",description:"Some episodes are invalid. Update the metadata to fix this."}),P[34]=W,P[35]=p):p=P[35],P[36]!==F.mediaId||P[37]!==Y||P[38]!==B||P[39]!==Z||P[40]!==G||P[41]!==J?(v=Y.length>0&&!B&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(w.FN,{className:"w-full max-w-full",gap:"md",opts:{align:"start"},"data-episode-carousel":!0,children:[(0,n.jsx)(w.h1,{}),(0,n.jsx)(w.Wk,{children:Y.map((e,t)=>{var l,i,s,o,d,c,u,m,p,v,f,h,x,g;return(0,n.jsx)(w.A7,{className:(0,j.pF)(G.smallerEpisodeCarouselSize),children:(0,n.jsx)(r.U,{episode:e,image:(null==(l=e.episodeMetadata)?void 0:l.image)||(null==(i=e.baseAnime)?void 0:i.bannerImage)||(null==(o=e.baseAnime)||null==(s=o.coverImage)?void 0:s.extraLarge),topTitle:e.episodeTitle||(null==e||null==(c=e.baseAnime)||null==(d=c.title)?void 0:d.userPreferred),title:e.displayTitle,isInvalid:e.isInvalid,progressTotal:null==(u=e.baseAnime)?void 0:u.episodes,progressNumber:e.progressNumber,episodeNumber:e.episodeNumber,length:null==(m=e.episodeMetadata)?void 0:m.length,percentageComplete:(0,a.hH)(J,F.mediaId,e.episodeNumber),minutesRemaining:(0,a.pj)(J,F.mediaId,e.episodeNumber),onClick:()=>{var t,l;return Z({path:null!=(l=null==(t=e.localFile)?void 0:t.path)?l:"",mediaId:F.mediaId,episode:e})},anime:{id:F.mediaId,image:null==(v=e.baseAnime)||null==(p=v.coverImage)?void 0:p.medium,title:null==e||null==(h=e.baseAnime)||null==(f=h.title)?void 0:f.userPreferred}},(null==(x=e.localFile)?void 0:x.path)||"")},(null==e||null==(g=e.localFile)?void 0:g.path)||t)})})]})}),P[36]=F.mediaId,P[37]=Y,P[38]=B,P[39]=Z,P[40]=G,P[41]=J,P[42]=v):v=P[42],P[43]!==F.listData||P[44]!==F.mediaId||P[45]!==Q||P[46]!==V||P[47]!==Z||P[48]!==J?(f=e=>{var t,l;return(0,n.jsx)(u.nv,{episode:Q[e],media:V,isWatched:!!(null==(t=F.listData)?void 0:t.progress)&&F.listData.progress>=Q[e].progressNumber,onPlay:t=>{let{path:l,mediaId:n}=t;return Z({path:l,mediaId:n,episode:Q[e]})},percentageComplete:(0,a.hH)(J,F.mediaId,Q[e].episodeNumber),minutesRemaining:(0,a.pj)(J,F.mediaId,Q[e].episodeNumber)},(null==(l=Q[e].localFile)?void 0:l.path)||"")},P[43]=F.listData,P[44]=F.mediaId,P[45]=Q,P[46]=V,P[47]=Z,P[48]=J,P[49]=f):f=P[49],P[50]!==Q.length||P[51]!==U||P[52]!==f?(x=(0,n.jsx)(d.n,{maxCol:U,length:Q.length,renderItem:f}),P[50]=Q.length,P[51]=U,P[52]=f,P[53]=x):x=P[53],P[54]!==F._isNakamaEntry||P[55]!==F.downloadInfo||P[56]!==U||P[57]!==V||P[58]!==(null==q?void 0:q.isOffline)?(y=!(null==q?void 0:q.isOffline)&&!F._isNakamaEntry&&(0,n.jsx)(g,{downloadInfo:F.downloadInfo,media:V,maxCol:U}),P[54]=F._isNakamaEntry,P[55]=F.downloadInfo,P[56]=U,P[57]=V,P[58]=null==q?void 0:q.isOffline,P[59]=y):y=P[59],P[60]!==U||P[61]!==V||P[62]!==Z||P[63]!==$?(C=$.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Specials"}),(0,n.jsx)(d.i,{"data-episode-list-specials":!0,maxCol:U,children:$.map(e=>{var t;return(0,n.jsx)(u.nv,{episode:e,media:V,onPlay:t=>{let{path:l,mediaId:n}=t;return Z({path:l,mediaId:n,episode:e})}},(null==(t=e.localFile)?void 0:t.path)||"")})})]}),P[60]=U,P[61]=V,P[62]=Z,P[63]=$,P[64]=C):C=P[64],P[65]!==U||P[66]!==V||P[67]!==X||P[68]!==Z?(R=X.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Others"}),(0,n.jsx)(d.i,{"data-episode-list-others":!0,maxCol:U,children:X.map(e=>{var t;return(0,n.jsx)(u.nv,{episode:e,media:V,onPlay:t=>{let{path:l,mediaId:n}=t;return Z({path:l,mediaId:n,episode:e})}},(null==(t=e.localFile)?void 0:t.path)||"")})})]}),P[65]=U,P[66]=V,P[67]=X,P[68]=Z,P[69]=R):R=P[69],P[70]!==z||P[71]!==C||P[72]!==R||P[73]!==x||P[74]!==y?(M=(0,n.jsxs)("div",{className:"space-y-10","data-episode-list-stack":!0,children:[x,y,C,R,z]}),P[70]=z,P[71]=C,P[72]=R,P[73]=x,P[74]=y,P[75]=M):M=P[75],P[76]!==M||P[77]!==p||P[78]!==v?(O=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(E.KZ,{spacing:"lg","data-episode-section-stack":!0,children:[p,v,M]})}),P[76]=M,P[77]=p,P[78]=v,P[79]=O):O=P[79],O}function I(e){let{item:t,input:l}=e;return!l||t.value.toLowerCase().includes(l.toLowerCase())}function D(e){return!!e.episodeTitle}function k(e){return{...e,type:"other"}}function _(e){return{...e,type:"special"}}function L(e){return{...e,type:"main"}}},89401:(e,t,l)=>{"use strict";l.d(t,{P:()=>X});var n=l(95155),i=l(19749),a=l(35349),r=l(26589),s=l(77166),o=l(81281),d=l(37614),c=l(2126),u=l(812),m=l(9693),p=l(91360),v=l(84218),f=l(12115);function h(e){let t,l,a,r,s,o,d,c=(0,i.c)(16),{episodes:u,currentEpisodeNumber:m,onEpisodeSelect:f,progress:h,disabled:g,className:y,getEpisodeId:b}=e,N=void 0===h?0:h,j=void 0!==g&&g;if(c[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:0,y:20},l={opacity:1,y:0},a={opacity:0,y:-20},r={duration:.3},c[0]=t,c[1]=l,c[2]=a,c[3]=r):(t=c[0],l=c[1],a=c[2],r=c[3]),c[4]!==y?(s=(0,p.cn)("grid grid-cols-6 sm:grid-cols-8 md:grid-cols-10 lg:grid-cols-10 xl:grid-cols-10 2xl:grid-cols-6 gap-2 pb-8",y),c[4]=y,c[5]=s):s=c[5],c[6]!==m||c[7]!==j||c[8]!==u||c[9]!==b||c[10]!==f||c[11]!==N){var S,E;o=null==u||null==(E=u.filter(Boolean))||null==(S=E.sort(x))?void 0:S.map(e=>{let t=e.number===m,l=N>0&&e.number<=N,i=e.isFiller;return(0,n.jsxs)(v.P.button,{onClick:()=>!j&&f(e.number),disabled:j,title:e.title||"Episode ".concat(e.number),id:b(e),className:(0,p.cn)("relative flex items-center justify-center","w-full h-10 rounded-md font-medium text-sm","transition-all duration-150 ease-out","focus:outline-none",!t&&["bg-[--subtle]","hover:bg-transparent"],t&&["bg-brand-500 text-white"],i&&!t&&["text-orange-300"],l&&!t&&["text-[--muted]"],j&&["opacity-50 cursor-not-allowed","hover:bg-inherit hover:text-inherit hover:scale-100"]),children:[(0,n.jsx)("span",{className:"relative z-10",children:e.number}),i&&(0,n.jsx)("div",{className:(0,p.cn)("absolute top-1 right-1 w-1.5 h-1.5 rounded-full","bg-orange-400",t&&"bg-orange-200"),title:"Filler episode"})]},e.number)}),c[6]=m,c[7]=j,c[8]=u,c[9]=b,c[10]=f,c[11]=N,c[12]=o}else o=c[12];return c[13]!==s||c[14]!==o?(d=(0,n.jsx)(v.P.div,{initial:t,animate:l,exit:a,transition:r,className:s,children:o}),c[13]=s,c[14]=o,c[15]=d):d=c[15],d}function x(e,t){return e.number-t.number}var g=l(3820),y=l(61203),b=l(92161),N=l(75733),j=l(5249),S=l(244),E=l(84127),w=l(14033),A=l(2091),T=l(76049),C=l(57073),I=l(97400),D=l(29724),k=l(70376),_=l(75780);function L(e){let t,l,a=(0,i.c)(5),{children:r,entry:s}=e;return a[0]!==s?(t=(0,n.jsx)(M,{entry:s}),a[0]=s,a[1]=t):t=a[1],a[2]!==r||a[3]!==t?(l=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(T.a,{title:"Manual match",description:"Match this anime to a search result from the provider.",trigger:r,contentClass:"max-w-4xl",children:t})}),a[2]=r,a[3]=t,a[4]=l):l=a[4],l}let R=(0,w.Jo)(e=>{let{z:t}=e;return t.object({query:t.string().min(1),dubbed:t.boolean().default(!1)})});function M(e){let t,l,a,r,s,o,d=(0,i.c)(29),{entry:c}=e,u=(0,D.md)(b.kL),m=u||void 0;d[0]!==c.mediaId||d[1]!==m?(t={provider:m,mediaId:c.mediaId},d[0]=c.mediaId,d[1]=m,d[2]=t):t=d[2];let{data:v,isLoading:h}=(0,y.JF)(t),{mutate:x,data:g,isPending:T,reset:L}=(0,y.Xj)(c.mediaId,u);d[3]!==x||d[4]!==u?(l=function(e){u&&x({provider:u,query:e.query,dubbed:e.dubbed})},d[3]=x,d[4]=u,d[5]=l):l=d[5];let M=l,{mutate:O,isPending:P}=(0,y.vf)(),{mutate:F,isPending:z}=(0,y.n6)(),[B,K]=f.useState(null);d[6]!==B||d[7]!==c.mediaId||d[8]!==O||d[9]!==L||d[10]!==u?(a={title:"Manual match",description:"Are you sure you want to match this anime to the search result?",actionText:"Confirm",actionIntent:"success",onConfirm:()=>{B&&u&&(O({provider:u,mediaId:c.mediaId,animeId:B}),L(),K(null))}},d[6]=B,d[7]=c.mediaId,d[8]=O,d[9]=L,d[10]=u,d[11]=a):a=d[11];let U=(0,N.J)(a);return d[12]!==U||d[13]!==c.mediaId||d[14]!==v||d[15]!==M||d[16]!==P||d[17]!==z||d[18]!==h||d[19]!==T||d[20]!==g||d[21]!==u||d[22]!==F?(r=h?(0,n.jsx)(A.kt,{}):(0,n.jsxs)(S.KZ,{children:[(0,n.jsx)("div",{className:"text-center",children:(null==v?void 0:v.animeId)?(0,n.jsxs)(S.KZ,{children:[(0,n.jsxs)("p",{children:["Current mapping: ",(0,n.jsx)("span",{children:v.animeId})]}),(0,n.jsx)(E.$n,{intent:"alert-subtle",loading:z,onClick:()=>{u&&F({provider:u,mediaId:c.mediaId})},children:"Remove mapping"})]}):(0,n.jsx)("p",{className:"text-[--muted] italic",children:"No manual match"})}),(0,n.jsx)(C.w,{}),(0,n.jsx)(w.lV,{schema:R,onSubmit:M,children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(w.D0.Text,{name:"query",placeholder:"Enter a title...",leftIcon:(0,n.jsx)(_.CKj,{className:"text-xl text-[--muted]"}),fieldClass:"w-full"}),(0,n.jsx)(w.D0.Switch,{name:"dubbed",label:"Look for dubs",side:"right",moreHelp:"Only applies to providers that support dubs in search results."}),(0,n.jsx)(w.D0.Submit,{intent:"white",loading:P||T||h,className:"",children:"Search"})]})}),T?(0,n.jsx)(A.kt,{}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"space-y-2",children:null==g?void 0:g.map(e=>(0,n.jsxs)("div",{className:(0,p.cn)("flex justify-between items-center"),children:[(0,n.jsx)("p",{onClick:()=>{K(e.id),f.startTransition(()=>{U.open()})},className:"cursor-pointer hover:underline",children:e.title}),(0,n.jsx)("div",{children:(0,n.jsx)(j.i,{href:e.url,target:"_blank",children:(0,n.jsx)(I.m_,{trigger:(0,n.jsx)(E.K0,{icon:(0,n.jsx)(k.zaF,{}),intent:"primary-basic",size:"xs"}),children:"Open in browser"})})})]},e.id))})})]}),d[12]=U,d[13]=c.mediaId,d[14]=v,d[15]=M,d[16]=P,d[17]=z,d[18]=h,d[19]=T,d[20]=g,d[21]=u,d[22]=F,d[23]=r):r=d[23],d[24]!==U?(s=(0,n.jsx)(N.K,{...U}),d[24]=U,d[25]=s):s=d[25],d[26]!==r||d[27]!==s?(o=(0,n.jsxs)(n.Fragment,{children:[r,s]}),d[26]=r,d[27]=s,d[28]=o):o=d[28],o}var O=l(78075),P=l(65151),F=l(78106),z=l(77717),B=l(93715),K=l(85594),U=l(92430),G=l(42500),q=l(21842),H=l(43826),V=l(6066),W=l(79858),Y=l(3692);l(76182),l(73015);var Q=l(10653);(0,G.eU)(void 0);let $=(0,q.tG)("sea-onlinestream-episode-view-mode","list");function X(e){var t,l,p,x,y,b,N,j,S,w,A,T;let C,I,k,_,R,M,G,q,X,en,ei,ea,er,es,eo,ed,ec,eu,em,ep,ev,ef,eh,ex,eg,ey,eb,eN,ej,eS=(0,i.c)(126),{animeEntry:eE,animeEntryLoading:ew,hideBackButton:eA}=e;(0,D.md)(a.H5);let eT=(0,V.useRouter)(),eC=(0,V.usePathname)(),eI=(0,V.useSearchParams)();eS[0]!==eI?(C=eI.get("id"),eS[0]=eI,eS[1]=C):C=eS[1];let eD=C;eS[2]!==eI?(I=eI.get("episode"),eS[2]=eI,eS[3]=I):I=eS[3];let ek=I,e_=f.useRef(null),[eL,eR]=(0,D.fp)($),eM=null==eE?void 0:eE.media;eS[4]!==eD?(k={mediaId:eD,ref:e_},eS[4]=eD,eS[5]=k):k=eS[5];let{episodes:eO,currentEpisodeDetails:eP,opts:eF,url:ez,onMediaDetached:eB,onCanPlay:eK,onFatalError:eU,loadPage:eG,episodeSource:eq,currentEpisodeNumber:eH,handleChangeEpisodeNumber:eV,episodeLoading:eW,isErrorEpisodeSource:eY,errorEpisodeSource:eQ,isErrorProvider:e$,provider:eX}=(0,O.N6)(k),eZ=null!=(x=null==eE||null==(t=eE.listData)?void 0:t.progress)?x:0,eJ=(0,o.zh)(),{currentPlaylist:e0,playEpisode:e1,nextPlaylistEpisode:e2,prevPlaylistEpisode:e3}=(0,d.n)(),e4=f.useRef(!0);eS[6]!==(null==eE||null==(l=eE.listData)?void 0:l.progress)||eS[7]!==eO||eS[8]!==eV||eS[9]!==eM||eS[10]!==eJ||eS[11]!==ek?(_=()=>{if((null==eJ||!eJ.currentWatchPartySession||eJ.isHost)&&eM&&e4.current&&eO){var e,t;let l=ek?Number(ek):void 0,n=null!=(t=null==eE||null==(e=eE.listData)?void 0:e.progress)?t:0,i=1,a=eO.find(e=>e.number===n+1);a&&(i=a.number),eV(l||i||1),(0,B.v)("ONLINESTREAM").info("Setting episode number to",l||i||1),e4.current=!1}},eS[6]=null==eE||null==(y=eE.listData)?void 0:y.progress,eS[7]=eO,eS[8]=eV,eS[9]=eM,eS[10]=eJ,eS[11]=ek,eS[12]=_):_=eS[12];let e5=null==eE?void 0:eE.listData;eS[13]!==e0||eS[14]!==eO||eS[15]!==eM||eS[16]!==e5||eS[17]!==ek?(R=[eO,eM,e5,ek,e0],eS[13]=e0,eS[14]=eO,eS[15]=eM,eS[16]=e5,eS[17]=ek,eS[18]=R):R=eS[18],f.useEffect(_,R),eS[19]!==eO||eS[20]!==eV||eS[21]!==eM||eS[22]!==eJ||eS[23]!==ek?(M=()=>{if((null==eJ||!eJ.currentWatchPartySession||eJ.isHost)&&!e4.current&&eM&&eO){let e=ek?Number(ek):void 0;e&&(eV(e),(0,B.v)("ONLINESTREAM").info("Changing episode number to",e))}},eS[19]=eO,eS[20]=eV,eS[21]=eM,eS[22]=eJ,eS[23]=ek,eS[24]=M):M=eS[24],eS[25]!==ek?(G=[ek],eS[25]=ek,eS[26]=G):G=eS[26],f.useEffect(M,G),eS[27]!==eK||eS[28]!==eD||eS[29]!==eC||eS[30]!==eT||eS[31]!==ek?(q=function(){ek&&eT.replace(eC+"?id=".concat(eD)),eK()},eS[27]=eK,eS[28]=eD,eS[29]=eC,eS[30]=eT,eS[31]=ek,eS[32]=q):q=eS[32];let e6=q;eS[33]!==eH||eS[34]!==eO?(X=null==eO||null==(b=eO.find(e=>e.number===eH))?void 0:b.title,eS[33]=eH,eS[34]=eO,eS[35]=X):X=eS[35];let e7=X,e9=e0?!!e2:!!(null==eO?void 0:eO.find(e=>e.number===eH+1)),e8=e0?!!e3:!!(null==eO?void 0:eO.find(e=>e.number===eH-1));eS[36]!==eH||eS[37]!==e0||eS[38]!==eO||eS[39]!==eV||eS[40]!==e1?(en=function(){if(e0)return void e1("next",!0);(null==eO?void 0:eO.find(e=>e.number===eH+1))&&eV(eH+1)},eS[36]=eH,eS[37]=e0,eS[38]=eO,eS[39]=eV,eS[40]=e1,eS[41]=en):en=eS[41];let te=en;eS[42]!==eH||eS[43]!==e0||eS[44]!==eO||eS[45]!==eV||eS[46]!==e1?(ei=function(){if(e0)return void e1("previous",!0);eH>1&&(null==eO?void 0:eO.find(e=>e.number===eH-1))&&eV(eH-1)},eS[42]=eH,eS[43]=e0,eS[44]=eO,eS[45]=eV,eS[46]=e1,eS[47]=ei):ei=eS[47];let tt=ei;eS[48]===Symbol.for("react.memo_cache_sentinel")?(ea=function(e,t){(0,K.ar)(e)&&(e.library=U.Ay,e.config={})},eS[48]=ea):ea=eS[48];let tl=ea;eS[49]!==eU||eS[50]!==eB||eS[51]!==ez?(er=function(e,t){if((0,K.ar)(e))if(U.Ay.isSupported()){var l,n;null==(l=e.instance)||l.on(U.Ay.Events.MEDIA_DETACHED,e=>{eB()}),null==(n=e.instance)||n.on(U.Ay.Events.ERROR,(e,t)=>{t.fatal&&eU()})}else e.video.canPlayType("application/vnd.apple.mpegurl")&&(e.video.src=ez||"")},eS[49]=eU,eS[50]=eB,eS[51]=ez,eS[52]=er):er=eS[52];let tn=er;if(eS[53]!==eF.hasCustomQualities?(es=()=>{let e=setTimeout(()=>{var e,t;let l=document.querySelector(".vds-quality-menu");eF.hasCustomQualities?null==l||null==(e=l.classList)||e.add("force-hidden"):null==l||null==(t=l.classList)||t.remove("force-hidden")},1e3);return()=>clearTimeout(e)},eS[53]=eF.hasCustomQualities,eS[54]=es):es=eS[54],eS[55]!==eW||eS[56]!==eF.hasCustomQualities||eS[57]!==ez?(eo=[eF.hasCustomQualities,ez,eW],eS[55]=eW,eS[56]=eF.hasCustomQualities,eS[57]=ez,eS[58]=eo):eo=eS[58],f.useEffect(es,eo),!eM||ew){let e,t;return eS[59]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"flex gap-4 items-center relative",children:(0,n.jsx)(z.E,{className:"h-12"})}),eS[59]=e):e=eS[59],eS[60]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)("div",{"data-onlinestream-page-loading-container":!0,className:"space-y-4",children:[e,(0,n.jsxs)("div",{className:"grid 2xl:grid-cols-[1fr,450px] gap-4 xl:gap-4",children:[(0,n.jsx)("div",{className:"w-full min-h-[70dvh] relative",children:(0,n.jsx)(z.E,{className:"h-full w-full absolute"})}),(0,n.jsx)(z.E,{className:"hidden 2xl:block relative h-[78dvh] overflow-y-auto pr-4 pt-0"})]})]}),eS[60]=t):t=eS[60],t}let ti=e7||null;eS[61]!==eH||eS[62]!==eZ||eS[63]!==ti?(ed={currentProgress:eZ,currentEpisodeNumber:eH,currentEpisodeTitle:ti},eS[61]=eH,eS[62]=eZ,eS[63]=ti,eS[64]=ed):ed=eS[64];let ta=eD?Number(eD):void 0,tr=null==eM||null==(p=eM.title)?void 0:p.userPreferred;eS[65]!==eD?(ec=!!eD&&(0,n.jsx)(g.uN,{mediaId:Number(eD)}),eS[65]=eD,eS[66]=ec):ec=eS[66],eS[67]!==eE||eS[68]!==eX?(eu=eE&&!!eX&&(0,n.jsx)(L,{entry:eE,children:(0,n.jsx)(E.$n,{size:"sm",intent:"gray-basic",className:"rounded-full",leftIcon:(0,n.jsx)(Y.KSO,{className:""}),children:"Manual match"})}),eS[67]=eE,eS[68]=eX,eS[69]=eu):eu=eS[69],eS[70]===Symbol.for("react.memo_cache_sentinel")?(em=(0,n.jsx)(g.xF,{}),ep=(0,n.jsx)("div",{className:"hidden lg:flex flex-1"}),eS[70]=em,eS[71]=ep):(em=eS[70],ep=eS[71]),eS[72]!==ec||eS[73]!==eu?(ev=(0,n.jsxs)(n.Fragment,{children:[ec,eu,em,ep]}),eS[72]=ec,eS[73]=eu,eS[74]=ev):ev=eS[74];let ts="list"===eL?"gray-basic":"white-subtle";eS[75]===Symbol.for("react.memo_cache_sentinel")?(ef=(0,n.jsx)(W.qf5,{}),eS[75]=ef):ef=eS[75],eS[76]!==eR?(eh=()=>eR(el),eS[76]=eR,eS[77]=eh):eh=eS[77];let to="list"===eL?"Switch to grid view":"Switch to list view";return eS[78]!==ts||eS[79]!==eh||eS[80]!==to?(ex=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(E.K0,{size:"sm",intent:ts,icon:ef,onClick:eh,title:to})}),eS[78]=ts,eS[79]=eh,eS[80]=to,eS[81]=ex):ex=eS[81],eS[82]!==(null==eP?void 0:eP.image)||eS[83]!==eW||eS[84]!==(null==eq?void 0:eq.subtitles)||eS[85]!==eQ||eS[86]!==te||eS[87]!==tt||eS[88]!==e9||eS[89]!==e8||eS[90]!==eY||eS[91]!==e$||eS[92]!==eG||eS[93]!==eM||eS[94]!==eD||eS[95]!==e6||eS[96]!==tn||eS[97]!==eF.hasCustomQualities||eS[98]!==eX||eS[99]!==ez?(eg=eX?e$?(0,n.jsx)(F.D,{title:"Provider error"}):(0,n.jsx)(c.F,{url:ez,poster:(null==eP?void 0:eP.image)||(null==(N=eM.coverImage)?void 0:N.extraLarge),isLoading:!eG||eW,isPlaybackError:eY?null==eQ||null==(S=eQ.response)||null==(j=S.data)?void 0:j.error:void 0,playerRef:e_,onProviderChange:tl,onProviderSetup:tn,onCanPlay:e6,onGoToNextEpisode:e9?te:void 0,onGoToPreviousEpisode:e8?tt:void 0,tracks:null==eq||null==(w=eq.subtitles)?void 0:w.map(et),settingsItems:(0,n.jsx)(n.Fragment,{children:eF.hasCustomQualities?(0,n.jsx)(g.nO,{}):null}),videoLayoutSlots:{beforeCaptionButton:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(g.V1,{})})})}}):(0,n.jsxs)("div",{className:"flex items-center flex-col justify-center w-full h-full",children:[(0,n.jsx)(F.D,{title:"No provider selected"}),(0,n.jsx)("div",{className:"flex gap-2",children:!!eD&&(0,n.jsx)(g.uN,{mediaId:Number(eD)})})]}),eS[82]=null==eP?void 0:eP.image,eS[83]=eW,eS[84]=null==eq?void 0:eq.subtitles,eS[85]=eQ,eS[86]=te,eS[87]=tt,eS[88]=e9,eS[89]=e8,eS[90]=eY,eS[91]=e$,eS[92]=eG,eS[93]=eM,eS[94]=eD,eS[95]=e6,eS[96]=tn,eS[97]=eF.hasCustomQualities,eS[98]=eX,eS[99]=ez,eS[100]=eg):eg=eS[100],eS[101]!==eH||eS[102]!==eW||eS[103]!==eL||eS[104]!==eO||eS[105]!==eV||eS[106]!==eM||eS[107]!==eZ?(ey=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(H.N,{mode:"wait",initial:!1,children:"list"===eL?(0,n.jsxs)(v.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-3",children:[null==eO||null==(T=eO.filter(Boolean))||null==(A=T.sort(ee))?void 0:A.map((e,t)=>{var l;return(0,n.jsx)(r.X,{id:"episode-".concat(String(e.number)),onClick:()=>eV(e.number),title:"MOVIE"===eM.format?"Complete movie":"Episode ".concat(e.number),episodeTitle:e.title,description:null!=(l=e.description)?l:void 0,image:e.image,media:eM,isSelected:e.number===eH,disabled:eW,isWatched:eZ?e.number<=eZ:void 0,className:"flex-none w-full",isFiller:e.isFiller,episodeNumber:e.number,progressNumber:e.number,action:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.H,{title:"MOVIE"===eM.format?"Complete movie":"Episode ".concat(e.number),image:null==e?void 0:e.image,episodeTitle:e.title,summary:null==e?void 0:e.description}),(0,n.jsx)(Q.bv,{isDropdownMenu:!0,type:"onlinestream",episode:e})]})},t+(e.title||"")+e.number)}),!!(null==eO?void 0:eO.length)&&(0,n.jsx)("p",{className:"text-center text-[--muted] py-2",children:"End"})]},"list-view"):(0,n.jsx)(h,{episodes:(null==eO?void 0:eO.map(J))||[],currentEpisodeNumber:eH,onEpisodeSelect:eV,progress:eZ,disabled:eW,getEpisodeId:Z},"grid-view")})}),eS[101]=eH,eS[102]=eW,eS[103]=eL,eS[104]=eO,eS[105]=eV,eS[106]=eM,eS[107]=eZ,eS[108]=ey):ey=eS[108],eS[109]!==eO||eS[110]!==eA||eS[111]!==eG||eS[112]!==ta||eS[113]!==tr||eS[114]!==ev||eS[115]!==ex||eS[116]!==eg||eS[117]!==ey?(eb=(0,n.jsx)(u.t,{mediaId:ta,title:tr,hideBackButton:eA,episodes:eO,loading:eG,leftHeaderActions:ev,rightHeaderActions:ex,mediaPlayer:eg,episodeList:ey}),eS[109]=eO,eS[110]=eA,eS[111]=eG,eS[112]=ta,eS[113]=tr,eS[114]=ev,eS[115]=ex,eS[116]=eg,eS[117]=ey,eS[118]=eb):eb=eS[118],eS[119]!==eF||eS[120]!==eb?(eN=(0,n.jsx)(P.M,{opts:eF,children:eb}),eS[119]=eF,eS[120]=eb,eS[121]=eN):eN=eS[121],eS[122]!==eM||eS[123]!==ed||eS[124]!==eN?(ej=(0,n.jsx)(m.Ky,{media:eM,progress:ed,children:eN}),eS[122]=eM,eS[123]=ed,eS[124]=eN,eS[125]=ej):ej=eS[125],ej}function Z(e){return"episode-".concat(e.number)}function J(e){return{number:e.number,title:e.title,isFiller:e.isFiller}}function ee(e,t){return e.number-t.number}function et(e){var t,l,n,i;return{id:e.language,label:e.language,kind:"subtitles",src:e.url,language:e.language,default:e.language?(null==(t=e.language)?void 0:t.toLowerCase())==="english"||(null==(l=e.language)?void 0:l.toLowerCase())==="en-us":(null==(n=e.language)?void 0:n.toLowerCase())==="english"||(null==(i=e.language)?void 0:i.toLowerCase())==="en-us"}}function el(e){return"list"===e?"grid":"list"}},90355:(e,t,l)=>{"use strict";l.d(t,{G4:()=>w,fd:()=>E,h3:()=>A});var n=l(95155),i=l(19749),a=l(66792),r=l(96826),s=l(24685),o=l(47363),d=l(22148),c=l(10212),u=l(244),m=l(84127),p=l(2091),v=l(22960),f=l(77022),h=l(93715),x=l(12556),g=l(42500),y=l(29724),b=l(6066),N=l(12115),j=l(70376),S=l(28718);(0,h.v)("TORRENT DOWNLOAD FILE SELECTION");let E=(0,g.eU)(void 0);function w(e,t){var l,n,i,a;let r=null==(n=e.localFiles)||null==(l=n.findLast(e=>e))?void 0:l.path,s=t?x.V.join(t,((null==(a=e.media)||null==(i=a.title)?void 0:i.romaji)||"").replace(/[<>:"/\\|?*\x00-\x1F]/g," ").trim().replace(/^\.+|\.+$/g,"").replace(/\s+/g," ")||"Untitled"):"";return r?x.V.normalize(x.V.dirname(r)):s}function A(e){var t,l,h;let x,g,A,D,k,_,L,R,M,O,P,F,z,B,K,U=(0,i.c)(51),{entry:G}=e,q=(0,b.useRouter)(),H=(0,r.v1)(),V=null==H||null==(l=H.settings)||null==(t=l.library)?void 0:t.libraryPath,W=(0,y.Xr)(o.N7),[Y,Q]=(0,y.fp)(E);(0,y.md)(s.l),U[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],U[0]=x):x=U[0];let[$,X]=N.useState(x),Z=null==Y?void 0:Y.torrent;U[1]!==G||U[2]!==(null==Y?void 0:Y.destination)||U[3]!==V?(g=null!=(h=null==Y?void 0:Y.destination)?h:w(G,V),U[1]=G,U[2]=null==Y?void 0:Y.destination,U[3]=V,U[4]=g):g=U[4];let J=g;U[5]!==Y||U[6]!==Q?(A=e=>{Y&&Q({...Y,destination:e})},U[5]=Y,U[6]=Q,U[7]=A):A=U[7];let ee=A,et=null==Z?void 0:Z.provider;U[8]!==Z||U[9]!==et?(D={torrent:Z,provider:et},U[8]=Z,U[9]=et,U[10]=D):D=U[10];let{data:el,isLoading:en}=(0,a.Ui)(D);U[11]!==q||U[12]!==Q||U[13]!==W?(k=()=>{Q(void 0),W(void 0),q.push("/torrent-list")},U[11]=q,U[12]=Q,U[13]=W,U[14]=k):k=U[14];let{mutate:ei,isPending:ea}=(0,a.Dp)(k);t:{let e;if(!el){let e;U[15]===Symbol.for("react.memo_cache_sentinel")?(e=[],U[15]=e):e=U[15],_=e;break t}U[16]!==el?(e=el.map(I),U[16]=el,U[17]=e):e=U[17],_=e}let er=_;e:{let e;if(!el){let e;U[18]===Symbol.for("react.memo_cache_sentinel")?(e=[],U[18]=e):e=U[18],L=e;break e}if(U[19]!==el||U[20]!==$){let t;U[22]!==$?(t=e=>!$.includes(e),U[22]=$,U[23]=t):t=U[23],e=el.map(C).filter(t),U[19]=el,U[20]=$,U[21]=e}else e=U[21];L=e}let es=L,eo=N.useRef(null);U[24]!==es||U[25]!==J||U[26]!==G||U[27]!==ei||U[28]!==$||U[29]!==Z?(R=()=>{Z&&0!==$.length&&ei({torrents:[Z],destination:J,smartSelect:{enabled:!1,missingEpisodeNumbers:[]},deselect:{enabled:!0,indices:es},media:G.media})},U[24]=es,U[25]=J,U[26]=G,U[27]=ei,U[28]=$,U[29]=Z,U[30]=R):R=U[30];let ed=R,ec=!!Z;return U[31]!==Q?(M=e=>{e||(Q(void 0),X([]))},U[31]=Q,U[32]=M):M=U[32],U[33]===Symbol.for("react.memo_cache_sentinel")?(O=(0,n.jsx)("h4",{className:"text-center mb-4",children:"Select files to download"}),U[33]=O):O=U[33],U[34]===Symbol.for("react.memo_cache_sentinel")?(P=(0,n.jsx)(S.WNP,{}),U[34]=P):P=U[34],U[35]!==J||U[36]!==ee?(F=(0,n.jsx)(d.j,{name:"destination",label:"Destination",leftIcon:P,value:J,defaultValue:J,onSelect:ee,shouldExist:!1}),U[35]=J,U[36]=ee,U[37]=F):F=U[37],U[38]!==er||U[39]!==ed||U[40]!==en||U[41]!==ea||U[42]!==$?(z=en?(0,n.jsx)(p.kt,{}):(0,n.jsxs)(u.KZ,{className:"pb-0",children:[(0,n.jsx)(v.F,{viewportRef:eo,className:"h-[60dvh] lg:h-[50dvh] overflow-y-auto p-4 border rounded-[--radius-md]",children:(0,n.jsx)(c.bj,{filePreviews:er,selectedIndices:$,onSelectionChange:X,getFileValue:T})}),(0,n.jsxs)("div",{className:"text-sm text-[--muted] mb-2",children:[$.length," of ",er.length," files selected"]}),(0,n.jsx)(m.$n,{intent:"white",className:"w-full",rightIcon:(0,n.jsx)(j.Ah9,{className:"text-xl"}),disabled:0===$.length||en||ea,loading:ea,onClick:ed,children:"Download selected files"})]}),U[38]=er,U[39]=ed,U[40]=en,U[41]=ea,U[42]=$,U[43]=z):z=U[43],U[44]!==F||U[45]!==z?(B=(0,n.jsx)(f.Cz,{className:"max-w-5xl mx-auto",children:(0,n.jsxs)(u.KZ,{className:"mt-4 p-3 lg:p-6",children:[O,F,z]})}),U[44]=F,U[45]=z,U[46]=B):B=U[46],U[47]!==ec||U[48]!==M||U[49]!==B?(K=(0,n.jsx)(f.Tr,{open:ec,onOpenChange:M,children:B}),U[47]=ec,U[48]=M,U[49]=B,U[50]=K):K=U[50],K}function T(e){return e.index}function C(e,t){return t}function I(e,t){return{index:t,path:e,displayTitle:e.split("/").pop()||e,displayPath:e,isLikely:!1}}},92161:(e,t,l)=>{"use strict";l.d(t,{F5:()=>d,Wr:()=>o,kL:()=>a,rz:()=>s,zw:()=>r});var n=l(42500),i=l(21842);let a=(0,i.tG)("sea-onlinestream-provider",null),r=(0,n.eU)(!1),s=(0,n.eU)(void 0),o=(0,i.tG)("sea-onlinestream-server",void 0),d=(0,i.tG)("sea-onlinestream-quality",void 0)},93319:(e,t,l)=>{"use strict";l.d(t,{g:()=>S});var n=l(19749),i=l(7675),a=l(74889);async function r(){}var s=l(48751),o=l(10109),d=l(78216),c=l(73499),u=l(96826),m=l(71689),p=l(26603),v=l(56859),f=l(43756),h=l(93715),x=l(94077),g=l(29724),y=l(6066),b=l(12115),N=l(69554),j=l(33014).Buffer;function S(){var e,t;let l,S,E=(0,n.c)(16),w=(0,y.useRouter)(),A=(0,u.v1)(),T=(0,g.md)(p.O1),{activeOnDevice:C}=(0,m.NY)(),{setFilePath:I}=(0,m.ju)(),{mutate:D}=(0,o.a8)(),{downloadedMediaPlayback:k,electronPlaybackMethod:_}=(0,d.zw)(),{externalPlayerLink:L}=(0,d._V)(),{mutate:R}=(0,o.gA)(),{mutate:M}=(0,s.ys)(),{mutate:O}=function(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.DIRECTSTREAM.DirectstreamPlayLocalFile.endpoint,method:a.S.DIRECTSTREAM.DirectstreamPlayLocalFile.methods[0],mutationKey:[a.S.DIRECTSTREAM.DirectstreamPlayLocalFile.key],onSuccess:r},t[0]=e):e=t[0],(0,i.qk)(e)}(),{setTorrentstreamAutoplayInfo:P}=(0,c.l9)();E[0]!==T||E[1]!==O||E[2]!==k||E[3]!==_||E[4]!==L||E[5]!==C||E[6]!==M||E[7]!==R||E[8]!==w||E[9]!==(null==A||null==(e=A.mediastreamSettings)?void 0:e.transcodeEnabled)||E[10]!==I||E[11]!==P||E[12]!==D?(l=function(e){var t,l,n,i,a,r;let{path:s,mediaId:o,episode:c}=e,u=null!=(i=null==(l=c.localFile)||null==(t=l.metadata)?void 0:t.aniDBEpisode)?i:"";if(P(null),c._isNakamaEpisode){if(k===d.Dc.ExternalPlayerLink){let e=new v.R(L);e.setEpisodeNumber(c.progressNumber),e.setMediaTitle(null==(r=c.baseAnime)||null==(a=r.title)?void 0:a.userPreferred),e.to({endpoint:"/api/v1/nakama/stream?type=file&path="+j.from(s).toString("base64")}).then(),(0,f.A)(e.getFullUrl()),(null==c?void 0:c.progressNumber)&&"main"===c.type?((0,h.v)("PLAY MEDIA").error("Starting manual tracking for nakama file"),b.startTransition(()=>{D({mediaId:o,episodeNumber:null==c?void 0:c.progressNumber,clientId:T||""})})):(0,h.v)("PLAY MEDIA").warning("No manual tracking, progress number is not set for nakama file");return}return M({path:s,mediaId:o,anidbEpisode:u,clientId:null!=T?T:""})}if((0,h.v)("PLAY MEDIA").info("Playing media file",s),x.nH&&_===d.Ft.NativePlayer)return void O({path:s,clientId:null!=T?T:""});if(k===d.Dc.ExternalPlayerLink)return L?((0,h.v)("PLAY MEDIA").info("Opening media file in external player",L,s),I(s),void b.startTransition(()=>{w.push("/medialinks?id=".concat(o))})):void N.oR.error("External player link is not set.");if((null==A||null==(n=A.mediastreamSettings)?void 0:n.transcodeEnabled)&&C){I(s),b.startTransition(()=>{w.push("/mediastream?id=".concat(o))});return}return R({path:s})},E[0]=T,E[1]=O,E[2]=k,E[3]=_,E[4]=L,E[5]=C,E[6]=M,E[7]=R,E[8]=w,E[9]=null==A||null==(t=A.mediastreamSettings)?void 0:t.transcodeEnabled,E[10]=I,E[11]=P,E[12]=D,E[13]=l):l=E[13];let F=l;return E[14]!==F?(S={playMediaFile:F},E[14]=F,E[15]=S):S=E[15],S}},94936:(e,t,l)=>{"use strict";l.d(t,{E4:()=>F,Qx:()=>R,nv:()=>L});var n=l(95155),i=l(19749),a=l(45886),r=l(9478),s=l(78216),o=l(26589),d=l(10653),c=l(96826),u=l(14680),m=l(84127),p=l(17934),v=l(14033),f=l(76049),h=l(75435),x=l(57073),g=l(90711),y=l(50943),b=l(42500),N=l(78259),j=l(12115),S=l(78453),E=l(70376),w=l(41452),A=l(40568),T=l(64685),C=l(13391),I=l(69554),D=l(33014).Buffer;let k=(0,N.lR)(),_=(0,b.eU)(!1),L=(0,j.memo)(e=>{var t,l,u,v,f,h,x,g,y,b,N;let j,S,A,_,L,R,P,z,B,K,U,G,q,H=(0,i.c)(56),{episode:V,media:W,isWatched:Y,onPlay:Q,percentageComplete:$,minutesRemaining:X}=e,{updateLocalFile:Z,isPending:J}=(0,r.sS)(),[,ee]=(0,C.A)(),{getHMACTokenQueryParam:et}=(0,c.OZ)(),{getHMACTokenQueryParam:el}=(0,c.OB)(),{encodePath:en}=(0,s._V)();H[0]!==en?(j=function(e){return en?D.from(e).toString("base64"):encodeURIComponent(e)},H[0]=en,H[1]=j):j=H[1];let ei=j,ea=null==(t=V.episodeMetadata)?void 0:t.image;H[2]!==(null==(l=V.localFile)?void 0:l.path)||H[3]!==W||H[4]!==Q?(S=()=>{var e,t;return null==Q?void 0:Q({path:null!=(t=null==(e=V.localFile)?void 0:e.path)?t:"",mediaId:W.id})},H[2]=null==(g=V.localFile)?void 0:g.path,H[3]=W,H[4]=Q,H[5]=S):S=H[5];let er=null==(u=V.localFile)?void 0:u.name,es=V.progressNumber>0&&Y,eo=null==(v=V.episodeMetadata)?void 0:v.isFiller,ed=null==(f=V.episodeMetadata)?void 0:f.length,ec=(null==(h=V.episodeMetadata)?void 0:h.summary)||(null==(x=V.episodeMetadata)?void 0:x.overview);return H[6]!==V._isNakamaEpisode||H[7]!==V.localFile||H[8]!==J||H[9]!==Z?(A=!V._isNakamaEpisode&&(0,n.jsx)(m.K0,{icon:(null==(y=V.localFile)?void 0:y.locked)?(0,n.jsx)(T.zu7,{}):(0,n.jsx)(E.iXN,{}),intent:(null==(b=V.localFile)?void 0:b.locked)?"success-basic":"warning-basic",size:"md",className:"hover:opacity-60",loading:J,onClick:()=>{if(V.localFile){var e;Z(V.localFile,{locked:!(null==(e=V.localFile)?void 0:e.locked)})}}}),H[6]=V._isNakamaEpisode,H[7]=V.localFile,H[8]=J,H[9]=Z,H[10]=A):A=H[10],H[11]===Symbol.for("react.memo_cache_sentinel")?(_=(0,n.jsx)(m.K0,{icon:(0,n.jsx)(E.sjm,{}),intent:"gray-basic",size:"xs"}),H[11]=_):_=H[11],H[12]!==V._isNakamaEpisode?(L=!V._isNakamaEpisode&&(0,n.jsx)(O,{}),H[12]=V._isNakamaEpisode,H[13]=L):L=H[13],H[14]!==ee||H[15]!==ei||H[16]!==V._isNakamaEpisode||H[17]!==V.localFile||H[18]!==et||H[19]!==el?(R=V.localFile&&(0,n.jsxs)(p._2,{onClick:async()=>{if(V._isNakamaEpisode){let e="/api/v1/nakama/stream?type=file&path="+D.from(V.localFile.path).toString("base64"),t=await el("/api/v1/nakama/stream","&");ee("".concat((0,a.M)()).concat(e).concat(t))}else{let e="/api/v1/mediastream/file?path="+ei(V.localFile.path),t=await et("/api/v1/mediastream/file","&");ee("".concat((0,a.M)()).concat(e).concat(t))}I.oR.info("Stream URL copied")},children:[(0,n.jsx)(w.Ftv,{}),"Copy stream URL"]}),H[14]=ee,H[15]=ei,H[16]=V._isNakamaEpisode,H[17]=V.localFile,H[18]=et,H[19]=el,H[20]=R):R=H[20],H[21]!==V||H[22]!==Z?(P=!V._isNakamaEpisode&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.bv,{isDropdownMenu:!1,type:"library",episode:V}),(0,n.jsx)(p.mB,{}),(0,n.jsxs)(p._2,{className:"text-[--orange]",onClick:()=>{V.localFile&&Z(V.localFile,{mediaId:0,locked:!1,ignored:!1})},children:[(0,n.jsx)(w.eXw,{})," Unmatch"]})]}),H[21]=V,H[22]=Z,H[23]=P):P=H[23],H[24]!==L||H[25]!==R||H[26]!==P?(z=(0,n.jsxs)(p.rI,{trigger:_,children:[L,R,P]}),H[24]=L,H[25]=R,H[26]=P,H[27]=z):z=H[27],H[28]!==V?(B=!!V.episodeMetadata&&("main"===V.type||"special"===V.type)&&!!(null==(N=V.episodeMetadata)?void 0:N.anidbId)&&(0,n.jsx)(F,{episode:V}),H[28]=V,H[29]=B):B=H[29],H[30]!==z||H[31]!==B||H[32]!==A?(K=(0,n.jsxs)(n.Fragment,{children:[A,z,B]}),H[30]=z,H[31]=B,H[32]=A,H[33]=K):K=H[33],H[34]!==V.displayTitle||H[35]!==V.episodeNumber||H[36]!==V.episodeTitle||H[37]!==V.isInvalid||H[38]!==V.progressNumber||H[39]!==W||H[40]!==X||H[41]!==$||H[42]!==K||H[43]!==ea||H[44]!==S||H[45]!==er||H[46]!==es||H[47]!==eo||H[48]!==ed||H[49]!==ec?(U=(0,n.jsx)(o.X,{media:W,image:ea,onClick:S,isInvalid:V.isInvalid,title:V.displayTitle,episodeTitle:V.episodeTitle,fileName:er,isWatched:es,isFiller:eo,length:ed,percentageComplete:$,minutesRemaining:X,episodeNumber:V.episodeNumber,progressNumber:V.progressNumber,description:ec,action:K}),H[34]=V.displayTitle,H[35]=V.episodeNumber,H[36]=V.episodeTitle,H[37]=V.isInvalid,H[38]=V.progressNumber,H[39]=W,H[40]=X,H[41]=$,H[42]=K,H[43]=ea,H[44]=S,H[45]=er,H[46]=es,H[47]=eo,H[48]=ed,H[49]=ec,H[50]=U):U=H[50],H[51]!==V?(G=(0,n.jsx)(M,{episode:V}),H[51]=V,H[52]=G):G=H[52],H[53]!==U||H[54]!==G?(q=(0,n.jsxs)(k.Provider,{children:[U,G]}),H[53]=U,H[54]=G,H[55]=q):q=H[55],q}),R=(0,v.Jo)(e=>{let{z:t}=e;return t.object({episode:t.number().min(0),aniDBEpisode:t.string().transform(e=>e.toUpperCase()),type:t.string().min(0)})});function M(e){var t;let l,a,s,o,d,c,u,m,p,h,x=(0,i.c)(25),{episode:g}=e,[y,b]=k.useAtom(_),{updateLocalFile:N,isPending:j}=(0,r.sS)();x[0]!==b?(l=()=>b(!1),x[0]=b,x[1]=l):l=x[1];let S=null==(t=g.localFile)?void 0:t.name;return x[2]!==S?(a=(0,n.jsx)("p",{className:"w-full line-clamp-2 text-sm px-4 text-center py-2 flex-none",children:S}),x[2]=S,x[3]=a):a=x[3],x[4]!==g.localFile||x[5]!==b||x[6]!==N?(s=e=>{if(g.localFile){var t;N(g.localFile,{metadata:{...null==(t=g.localFile)?void 0:t.metadata,type:e.type,episode:e.episode,aniDBEpisode:e.aniDBEpisode}},()=>{b(!1),I.oR.success("Metadata saved")})}},x[4]=g.localFile,x[5]=b,x[6]=N,x[7]=s):s=x[7],x[8]!==g.fileMetadata?(o={...g.fileMetadata},x[8]=g.fileMetadata,x[9]=o):o=x[9],x[10]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(v.D0.Number,{label:"Episode number",name:"episode",help:"Relative episode number. If movie, episode number = 1",required:!0}),c=(0,n.jsx)(v.D0.Text,{label:"AniDB episode",name:"aniDBEpisode",help:"Specials typically contain the letter S"}),x[10]=d,x[11]=c):(d=x[10],c=x[11]),x[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(v.D0.Select,{label:"Type",name:"type",options:[{label:"Main",value:"main"},{label:"Special",value:"special"},{label:"NC/Other",value:"nc"}]}),x[12]=u):u=x[12],x[13]!==j?(m=(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(v.D0.Submit,{role:"save",intent:"primary",className:"w-full",loading:j,children:"Save"})}),x[13]=j,x[14]=m):m=x[14],x[15]!==s||x[16]!==o||x[17]!==m?(p=(0,n.jsxs)(v.lV,{schema:R,onSubmit:s,onError:console.log,defaultValues:o,children:[d,c,u,m]}),x[15]=s,x[16]=o,x[17]=m,x[18]=p):p=x[18],x[19]!==g.displayTitle||x[20]!==y||x[21]!==l||x[22]!==p||x[23]!==a?(h=(0,n.jsxs)(f.a,{open:y,onOpenChange:l,title:g.displayTitle,titleClass:"text-center",contentClass:"max-w-xl",children:[a,p]}),x[19]=g.displayTitle,x[20]=y,x[21]=l,x[22]=p,x[23]=a,x[24]=h):h=x[24],h}function O(){let e,t,l,a=(0,i.c)(5),[,r]=k.useAtom(_);return a[0]!==r?(e=()=>r(!0),a[0]=r,a[1]=e):e=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(A.aoq,{}),a[2]=t):t=a[2],a[3]!==e?(l=(0,n.jsxs)(p._2,{onClick:e,children:[t,"Update metadata"]}),a[3]=e,a[4]=l):l=a[4],l}function P(e){let t,l,a,r,s=(0,i.c)(11);s[0]!==e?({title:a,children:t,...l}=e,s[0]=e,s[1]=t,s[2]=l,s[3]=a):(t=s[1],l=s[2],a=s[3]);let{width:o}=(0,y.lW)();if(o&&o>1024){let e;return s[4]!==t||s[5]!==l?(e=(0,n.jsx)(h.A,{...l,className:"max-w-xl !w-full overflow-hidden",children:t}),s[4]=t,s[5]=l,s[6]=e):e=s[6],e}return s[7]!==t||s[8]!==l||s[9]!==a?(r=(0,n.jsx)(f.a,{...l,title:a,titleClass:"text-xl",contentClass:"max-w-2xl overflow-hidden",children:t}),s[7]=t,s[8]=l,s[9]=a,s[10]=r):r=s[10],r}function F(e){var t,l,a,r,s,o,d,c,p,v,f,h,y,b,N,j,E,A,T,C,I,D,k,_;let L,R,M,O,F,z,B,K,U,G,q,H,V,W=(0,i.c)(34),{episode:Y}=e;W[0]===Symbol.for("react.memo_cache_sentinel")?(L=(0,n.jsx)(m.K0,{icon:(0,n.jsx)(w.MJW,{}),className:"opacity-30 hover:opacity-100 transform-opacity",intent:"gray-basic",size:"xs"}),W[0]=L):L=W[0],W[1]!==(null==(t=Y.episodeMetadata)?void 0:t.image)?(R=(null==(v=Y.episodeMetadata)?void 0:v.image)&&(0,n.jsxs)("div",{className:"h-[8rem] w-full flex-none object-cover object-center overflow-hidden absolute left-0 top-0 z-[0] rounded-t-lg",children:[(0,n.jsx)(u.r,{src:(0,g.VG)(null==(f=Y.episodeMetadata)?void 0:f.image),alt:"banner",fill:!0,quality:80,priority:!0,sizes:"20rem",className:"object-cover object-center opacity-30"}),(0,n.jsx)("div",{className:"z-[5] absolute bottom-0 w-full h-[80%] bg-gradient-to-t from-[--background] to-transparent"})]}),W[1]=null==(h=Y.episodeMetadata)?void 0:h.image,W[2]=R):R=W[2],W[3]!==Y.episodeTitle?(M=null==(y=Y.episodeTitle)?void 0:y.replaceAll("`","'"),W[3]=Y.episodeTitle,W[4]=M):M=W[4],W[5]!==Y.isInvalid?(O=Y.isInvalid&&(0,n.jsx)(S.mRc,{}),W[5]=Y.isInvalid,W[6]=O):O=W[6],W[7]!==M||W[8]!==O?(F=(0,n.jsxs)("p",{className:"text-lg line-clamp-2 font-semibold",children:[M,O]}),W[7]=M,W[8]=O,W[9]=F):F=W[9];let Q=(null==(l=Y.episodeMetadata)?void 0:l.airDate)||"Unknown airing date",$=(null==(a=Y.episodeMetadata)?void 0:a.length)||"N/A";W[10]!==Q||W[11]!==$?(z=(0,n.jsxs)("p",{className:"text-[--muted]",children:[Q," - ",$," minutes"]}),W[10]=Q,W[11]=$,W[12]=z):z=W[12],W[13]!==(null==(r=Y.episodeMetadata)?void 0:r.overview)||W[14]!==(null==(s=Y.episodeMetadata)?void 0:s.summary)?(B=(null==(N=(null==(j=Y.episodeMetadata)?void 0:j.summary)||(null==(E=Y.episodeMetadata)?void 0:E.overview))||null==(b=N.replaceAll("`","'"))?void 0:b.replace(/source:.*/gi,""))||"No summary",W[13]=null==(A=Y.episodeMetadata)?void 0:A.overview,W[14]=null==(T=Y.episodeMetadata)?void 0:T.summary,W[15]=B):B=W[15],W[16]!==B?(K=(0,n.jsx)("p",{className:"text-gray-300",children:B}),W[16]=B,W[17]=K):K=W[17],W[18]===Symbol.for("react.memo_cache_sentinel")?(U=(0,n.jsx)(x.w,{}),W[18]=U):U=W[18];let X=null==(d=Y.localFile)||null==(o=d.parsedInfo)?void 0:o.original;return W[19]!==X?(G=(0,n.jsx)("p",{className:"text-[--muted] line-clamp-2 tracking-wide text-sm",children:X}),W[19]=X,W[20]=G):G=W[20],W[21]!==(null==(c=Y.episodeMetadata)?void 0:c.anidbId)||W[22]!==(null==(p=Y.fileMetadata)?void 0:p.aniDBEpisode)?(q=!!(null==(C=Y.episodeMetadata)?void 0:C.anidbId)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"w-full flex gap-2",children:[(0,n.jsxs)("p",{children:["AniDB Episode: ",null==(I=Y.fileMetadata)?void 0:I.aniDBEpisode]}),(0,n.jsx)("a",{href:"https://anidb.net/episode/"+(null==(D=Y.episodeMetadata)?void 0:D.anidbId)+"#layout-footer",target:"_blank",className:"hover:underline text-[--muted]",children:"Open on AniDB"})]})}),W[21]=null==(k=Y.episodeMetadata)?void 0:k.anidbId,W[22]=null==(_=Y.fileMetadata)?void 0:_.aniDBEpisode,W[23]=q):q=W[23],W[24]!==K||W[25]!==G||W[26]!==q||W[27]!==F||W[28]!==z?(H=(0,n.jsxs)("div",{className:"space-y-4 z-[5] relative",children:[F,z,K,U,G,q]}),W[24]=K,W[25]=G,W[26]=q,W[27]=F,W[28]=z,W[29]=H):H=W[29],W[30]!==Y.displayTitle||W[31]!==H||W[32]!==R?(V=(0,n.jsxs)(P,{title:Y.displayTitle,trigger:L,children:[R,H]}),W[30]=Y.displayTitle,W[31]=H,W[32]=R,W[33]=V):V=W[33],V}},98530:(e,t,l)=>{"use strict";l.d(t,{nI:()=>a});var n=l(19749),i=l(73773);function a(e,t){let l,a,o,d,c=(0,n.c)(12);c[0]!==t||c[1]!==e?(l=["skip-data",e,t],a=async()=>{let l=await fetch("https://api.aniskip.com/v2/skip-times/".concat(e,"/").concat(t,"?types[]=ed&types[]=mixed-ed&types[]=mixed-op&types[]=op&types[]=recap&episodeLength=")),n=await l.json();if(n.results&&n.found){var i,a;return{op:(null==(i=n.results)?void 0:i.find(s))||null,ed:(null==(a=n.results)?void 0:a.find(r))||null}}return{op:null,ed:null}},c[0]=t,c[1]=e,c[2]=l,c[3]=a):(l=c[2],a=c[3]);let u=!!e&&-1!=t;c[4]!==l||c[5]!==a||c[6]!==u?(o={queryKey:l,queryFn:a,refetchOnWindowFocus:!1,enabled:u},c[4]=l,c[5]=a,c[6]=u,c[7]=o):o=c[7];let m=(0,i.I)(o),p=m.isLoading||m.isFetching;return c[8]!==m.data||c[9]!==m.isError||c[10]!==p?(d={data:m.data,isLoading:p,isError:m.isError},c[8]=m.data,c[9]=m.isError,c[10]=p,c[11]=d):d=c[11],d}function r(e){return"ed"===e.skipType}function s(e){return"op"===e.skipType}},98802:(e,t,l)=>{"use strict";l.d(t,{AG:()=>c,AH:()=>b,FQ:()=>h,O9:()=>g,R5:()=>x,Ts:()=>o,_s:()=>p,fR:()=>f,wO:()=>d,wX:()=>u});var n=l(19749),i=l(7675),a=l(74889),r=l(46278),s=l(69554);function o(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.DEBRID.GetDebridSettings.endpoint,method:a.S.DEBRID.GetDebridSettings.methods[0],queryKey:[a.S.DEBRID.GetDebridSettings.key],enabled:!0},t[0]=e):e=t[0],(0,i.fl)(e)}function d(){let e,t,l=(0,n.c)(3),s=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.DEBRID.SaveDebridSettings.key],l[0]=e):e=l[0],l[1]!==s?(t={endpoint:a.S.DEBRID.SaveDebridSettings.endpoint,method:a.S.DEBRID.SaveDebridSettings.methods[0],mutationKey:e,onSuccess:async()=>{await s.invalidateQueries({queryKey:[a.S.DEBRID.GetDebridSettings.key]}),await s.invalidateQueries({queryKey:[a.S.STATUS.GetStatus.key]})}},l[1]=s,l[2]=t):t=l[2],(0,i.qk)(t)}function c(e){let t,l,o=(0,n.c)(4),d=(0,r.jE)();return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=[a.S.DEBRID.DebridAddTorrents.key],o[0]=t):t=o[0],o[1]!==e||o[2]!==d?(l={endpoint:a.S.DEBRID.DebridAddTorrents.endpoint,method:a.S.DEBRID.DebridAddTorrents.methods[0],mutationKey:t,onSuccess:async()=>{e(),s.oR.success("Torrent added"),await d.invalidateQueries({queryKey:[a.S.DEBRID.DebridGetTorrents.key]})}},o[1]=e,o[2]=d,o[3]=l):l=o[3],(0,i.qk)(l)}function u(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.DEBRID.DebridDownloadTorrent.endpoint,method:a.S.DEBRID.DebridDownloadTorrent.methods[0],mutationKey:[a.S.DEBRID.DebridDownloadTorrent.key],onSuccess:m},t[0]=e):e=t[0],(0,i.qk)(e)}async function m(){s.oR.info("Download started")}function p(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.DEBRID.DebridCancelDownload.endpoint,method:a.S.DEBRID.DebridCancelDownload.methods[0],mutationKey:[a.S.DEBRID.DebridCancelDownload.key],onSuccess:v},t[0]=e):e=t[0],(0,i.qk)(e)}async function v(){s.oR.info("Download cancelled")}function f(){let e,t,l=(0,n.c)(3),o=(0,r.jE)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=[a.S.DEBRID.DebridDeleteTorrent.key],l[0]=e):e=l[0],l[1]!==o?(t={endpoint:a.S.DEBRID.DebridDeleteTorrent.endpoint,method:a.S.DEBRID.DebridDeleteTorrent.methods[0],mutationKey:e,onSuccess:async()=>{s.oR.success("Torrent deleted"),await o.invalidateQueries({queryKey:[a.S.DEBRID.DebridGetTorrents.key]})}},l[1]=o,l[2]=t):t=l[2],(0,i.qk)(t)}function h(e,t){let l,r,s=(0,n.c)(4);return s[0]===Symbol.for("react.memo_cache_sentinel")?(l=[a.S.DEBRID.DebridGetTorrents.key],s[0]=l):l=s[0],s[1]!==e||s[2]!==t?(r={endpoint:a.S.DEBRID.DebridGetTorrents.endpoint,method:a.S.DEBRID.DebridGetTorrents.methods[0],queryKey:l,enabled:e,retry:3,refetchInterval:t},s[1]=e,s[2]=t,s[3]=r):r=s[3],(0,i.fl)(r)}function x(e,t){var l;let r,s,o=(0,n.c)(6),d=null==e||null==(l=e.torrent)?void 0:l.infoHash;return o[0]!==d?(r=[a.S.DEBRID.DebridGetTorrentFilePreviews.key,d],o[0]=d,o[1]=r):r=o[1],o[2]!==t||o[3]!==r||o[4]!==e?(s={endpoint:a.S.DEBRID.DebridGetTorrentFilePreviews.endpoint,method:a.S.DEBRID.DebridGetTorrentFilePreviews.methods[0],queryKey:r,data:e,enabled:t,gcTime:0},o[2]=t,o[3]=r,o[4]=e,o[5]=s):s=o[5],(0,i.fl)(s)}function g(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.DEBRID.DebridStartStream.endpoint,method:a.S.DEBRID.DebridStartStream.methods[0],mutationKey:[a.S.DEBRID.DebridStartStream.key],onSuccess:y},t[0]=e):e=t[0],(0,i.qk)(e)}async function y(){}function b(){let e,t=(0,n.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:a.S.DEBRID.DebridCancelStream.endpoint,method:a.S.DEBRID.DebridCancelStream.methods[0],mutationKey:[a.S.DEBRID.DebridCancelStream.key],onSuccess:N},t[0]=e):e=t[0],(0,i.qk)(e)}async function N(){s.oR.success("Stream cancelled")}},99288:(e,t,l)=>{"use strict";function n(e){if(!e)return -1;let t=-1;if(e.nextAiringEpisode&&e.nextAiringEpisode.episode&&(t=e.nextAiringEpisode.episode-1),-1===t){var l;t=null!=(l=e.episodes)?l:0}return t}function i(e){var t,l,n,i,a,r,s,o;return{progress:null==e?void 0:e.progress,score:null==e?void 0:e.score,status:null==e?void 0:e.status,startedAt:new Date((null==e||null==(t=e.startedAt)?void 0:t.year)||0,(null==e||null==(l=e.startedAt)?void 0:l.month)?(null==e||null==(n=e.startedAt)?void 0:n.month)-1:0,(null==e||null==(i=e.startedAt)?void 0:i.day)||0).toUTCString(),completedAt:new Date((null==e||null==(a=e.completedAt)?void 0:a.year)||0,(null==e||null==(r=e.completedAt)?void 0:r.month)?(null==e||null==(s=e.completedAt)?void 0:s.month)-1:0,(null==e||null==(o=e.completedAt)?void 0:o.day)||0).toUTCString()}}function a(e){return!!e&&(null==e?void 0:e.format)==="MOVIE"}function r(e){return!!e&&((null==e?void 0:e.format)==="MOVIE"||(null==e?void 0:e.episodes)===1)}function s(e,t){return!!e&&n(e)-(null!=t?t:0)}l.d(t,{DH:()=>n,Do:()=>r,Sv:()=>a,_1:()=>i,wR:()=>s})}}]);