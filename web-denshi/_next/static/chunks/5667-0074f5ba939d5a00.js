"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5667],{53647:(e,t,n)=>{n.d(t,{pz:()=>c,vF:()=>d});var o=n(95155),r=n(19749),a=n(32754),s=n(35656),i=n(14680),l=n(84127);function c(e){var t,n;let c,d,u,m,h,f,p=(0,r.c)(14),{media:S,type:g}=e,{setPreviewModalMediaId:y}=(0,a.D)(),w=(null==(t=S.coverImage)?void 0:t.medium)||"";p[0]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.r)(700,475),p[0]=c):c=p[0],p[1]!==w?(d=(0,o.jsx)("div",{className:"size-12 flex-none rounded-[--radius-md] relative overflow-hidden",children:(0,o.jsx)(i.r,{src:w,alt:"episode image",fill:!0,className:"object-center object-cover",placeholder:c})}),p[1]=w,p[2]=d):d=p[2];let x=(null==S||null==(n=S.title)?void 0:n.userPreferred)||"";return p[3]!==x?(u=(0,o.jsx)("div",{className:"flex gap-1 items-center w-full",children:(0,o.jsx)("p",{className:"w-full line-clamp-1",children:x})}),p[3]=x,p[4]=u):u=p[4],p[5]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)("div",{className:"flex-1"}),p[5]=m):m=p[5],p[6]!==S.id||p[7]!==y||p[8]!==g?(h=(0,o.jsx)(l.$n,{size:"sm",intent:"gray-basic",onClick:e=>{e.stopPropagation(),y(S.id,g)},className:"flex-shrink-0",children:"Preview"}),p[6]=S.id,p[7]=y,p[8]=g,p[9]=h):h=p[9],p[10]!==d||p[11]!==u||p[12]!==h?(f=(0,o.jsxs)("div",{className:"flex gap-3 items-center w-full",children:[d,u,m,h]}),p[10]=d,p[11]=u,p[12]=h,p[13]=f):f=p[13],f}function d(e){let t,n,a,s=(0,r.c)(7),{command:i,description:l,show:c}=e;return c?(s[0]!==i?(t=(0,o.jsx)("span",{className:"text-[--foreground]",children:i}),s[0]=i,s[1]=t):t=s[1],s[2]!==l?(n=(0,o.jsx)("span",{className:"tracking-wide",children:l}),s[2]=l,s[3]=n):n=s[3],s[4]!==t||s[5]!==n?(a=(0,o.jsxs)("p",{className:"py-1 px-6 text-center text-sm sm:px-14 tracking-widest text-[--muted]",children:[t," ",n]}),s[4]=t,s[5]=n,s[6]=a):a=s[6],a):null}n(45499),n(81845)},64742:(e,t,n)=>{n.d(t,{h:()=>a});var o=n(19749),r=n(86726);function a(){let e,t,n=(0,o.c)(4),{mutate:a}=(0,r.Oc)();n[0]!==a?(e=function(){a()},n[0]=a,n[1]=e):e=n[1];let s=e;return n[2]!==s?(t={handleCopyLatestLogs:s},n[2]=s,n[3]=t):t=n[3],t}},66873:(e,t,n)=>{function o(e){let[t,...n]=e.split(/\s+/);return{isCommand:e.startsWith("/"),command:t.slice(1),args:n}}function r(e,t){return!!e&&(!!e.english&&a(e.english).includes(a(t))||!!e.romaji&&a(e.romaji).includes(a(t)))}function a(e){return e.replace(/[^a-zA-Z0-9 ]/g,"").toLowerCase()}n.d(t,{P:()=>o,q:()=>r})},76793:(e,t,n)=>{n.d(t,{m7:()=>C,S1:()=>b,LV:()=>U});var o=n(95155),r=n(45886),a=n(19749),s=n(7675),i=n(74889);async function l(){}var c=n(96826),d=n(84127),u=n(63352),m=n(91360),h=n(97400),f=n(43756),p=n(46278),S=n(42500),g=n(29724),y=n(6066),w=n(12115),x=n(70376),j=n(28002),T=n(64685),v=n(69554);let b=(0,S.eU)(!1),U=(0,S.eU)(!1);(0,S.eU)();let L=(0,S.eU)([]),A=(0,S.eU)([]),E=(0,S.eU)([]),R=(0,S.eU)([]);function C(){(0,y.useRouter)(),(0,y.usePathname)();let e=(0,p.jE)(),[t,n]=(0,g.fp)(b),[S,C]=(0,g.fp)(U),[N,G]=(0,g.fp)(A),[_,k]=(0,g.fp)(L),[O,P]=(0,g.fp)(E),[I,F]=(0,g.fp)(R),[M,q]=w.useState(!1),{mutate:D,isPending:K}=function(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:i.S.REPORT.SaveIssueReport.endpoint,method:i.S.REPORT.SaveIssueReport.methods[0],mutationKey:[i.S.REPORT.SaveIssueReport.key],onSuccess:l},t[0]=e):e=t[0],(0,s.qk)(e)}();w.useEffect(()=>{t||C(!1)},[t]),w.useEffect(()=>{S||(G([]),k([]),P([]),F([]))},[S]),w.useEffect(()=>{if(!S)return;let e=e=>{let t=e.target;k(e=>{var n;return[...e,{pageUrl:window.location.href.replace(window.location.host,"{client}"),timestamp:new Date().toISOString(),element:t.tagName,className:JSON.stringify((null==(n=t.className)?void 0:n.length)&&t.className.length>50?t.className.slice(0,100)+"...":t.className),text:t.innerText}]})};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[S]),w.useEffect(()=>{if(!S)return;let e={log:console.log,error:console.error,warn:console.warn},t=t=>function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];e[t](...o);try{G(e=>[...e,{type:t,pageUrl:window.location.href.replace(window.location.host,"{client}"),content:o.map(e=>"object"==typeof e?JSON.stringify(e):String(e)).join(" "),timestamp:new Date().toISOString()}])}catch(e){}};return console.log=t("log"),console.error=t("error"),console.warn=t("warn"),()=>{Object.assign(console,e)}},[S]),w.useEffect(()=>{if(!S)return;let t=e.getQueryCache().subscribe(e=>{"pending"!==e.query.state.status&&F(t=>[...t,{type:"query",pageUrl:window.location.href.replace(window.location.host,"{client}"),status:e.query.state.status,hash:e.query.queryHash,error:e.query.state.error,timestamp:new Date().toISOString(),dataPreview:"object"==typeof e.query.state.data?JSON.stringify(e.query.state.data).slice(0,200):"",dataType:typeof e.query.state.data}])}),n=e.getMutationCache().subscribe(e=>{if(!e.mutation||"pending"===e.mutation.state.status||"idle"===e.mutation.state.status)return;let t=e.mutation.options.mutationKey;Array.isArray(t)&&t.includes("REPORT-save-issue-report")||F(t=>[...t,{type:"mutation",pageUrl:window.location.href.replace(window.location.host,"{client}"),status:e.mutation.state.status,hash:JSON.stringify(e.mutation.options.mutationKey),error:e.mutation.state.error,timestamp:new Date().toISOString(),dataPreview:"object"==typeof e.mutation.state.data?JSON.stringify(e.mutation.state.data).slice(0,200):"",dataType:typeof e.mutation.state.data}])});return()=>{t(),n()}},[S]),w.useEffect(()=>{if(!S)return;let e=XMLHttpRequest.prototype.open,t=XMLHttpRequest.prototype.send;return XMLHttpRequest.prototype.open=function(t,n){this._url=n,this._method=t,e.apply(this,arguments)},XMLHttpRequest.prototype.send=function(e){let n=Date.now(),o=this._url,r=this._method,a=new URL(o);a.host="{server}",a.port="",this.addEventListener("load",()=>{let t=Date.now()-n;P(n=>[...n,{type:"xhr",method:r,url:a.href,pageUrl:window.location.href.replace(window.location.host,"{client}"),status:this.status,duration:t,dataPreview:this.responseText.slice(0,200),timestamp:new Date().toISOString(),body:JSON.stringify(e)}])}),t.apply(this,arguments)},()=>{XMLHttpRequest.prototype.open=e,XMLHttpRequest.prototype.send=t}},[S]);let{getHMACTokenQueryParam:H}=(0,c.OZ)();async function $(){C(!1),D({clickLogs:_,consoleLogs:N,networkLogs:O,reactQueryLogs:I,isAnimeLibraryIssue:M},{onSuccess:async()=>{v.oR.success("Issue report saved successfully"),setTimeout(async()=>{try{let e="/api/v1/report/issue/download",t=await H(e);(0,f.A)("".concat((0,r.M)()).concat(e).concat(t))}catch(e){v.oR.error("Failed to generate download token")}},1e3)}})}return(0,o.jsx)(o.Fragment,{children:t&&(0,o.jsx)("div",{className:(0,m.cn)("issue-reporter-ui","fixed z-[100] bottom-8 w-fit left-20 h-fit flex","transition-all duration-300 select-none",!S&&"hover:translate-y-[-2px]",S&&"justify-end"),children:(0,o.jsx)("div",{className:(0,m.cn)("p-4 bg-gray-900 border text-white rounded-xl","transition-colors duration-300",S&&"p-0 border-transparent bg-transparent"),children:S?(0,o.jsxs)("div",{className:"flex items-center justify-center gap-0",children:[(0,o.jsx)(h.m_,{trigger:(0,o.jsx)(d.K0,{intent:"alert",icon:(0,o.jsx)(j.Jh$,{className:"text-white animate-pulse"}),onClick:$}),children:"Stop recording"}),(0,o.jsx)(h.m_,{trigger:(0,o.jsx)(d.K0,{intent:"white",size:"xs",icon:(0,o.jsx)(x.Gsv,{}),onClick:()=>C(!1)}),children:"Cancel"})]}):(0,o.jsx)("div",{className:"space-y-2",children:(0,o.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,o.jsx)(T.NWf,{className:"text-2xl text-[--brand]"}),(0,o.jsxs)("div",{className:"",children:[(0,o.jsx)("p",{children:"Issue recorder"}),(0,o.jsx)("p",{className:"text-[--muted] text-sm text-center",children:"Record your issue and generate a report"}),(0,o.jsx)("div",{className:"pt-2",children:(0,o.jsx)(u.Sc,{label:"Anime library issue",value:M,onValueChange:e=>"boolean"==typeof e&&q(e),size:"sm"})})]}),(0,o.jsxs)("div",{className:"flex items-center gap-0",children:[(0,o.jsx)(h.m_,{trigger:(0,o.jsx)(d.K0,{intent:"gray-basic",icon:(0,o.jsx)(j.FLc,{className:"text-red-500"}),onClick:function(){C(!0)}}),children:"Start recording"}),(0,o.jsx)(h.m_,{trigger:(0,o.jsx)(d.K0,{intent:"gray-basic",icon:(0,o.jsx)(x.Gsv,{}),onClick:()=>n(!1)}),children:"Close"})]})]})})})})})}},81845:(e,t,n)=>{n.d(t,{Rg:()=>q,NL:()=>k,W:()=>M,$w:()=>P});var o=n(95155),r=n(19749),a=n(76793),s=n(64742),i=n(45499),l=n(29724),c=n(12115);function d(){let e,t,n,d=(0,r.c)(13),{select:u,command:m,close:h}=P(),{command:f}=m,p=(0,l.Xr)(a.S1),S=(0,l.Xr)(a.LV),{handleCopyLatestLogs:g}=(0,s.h)();return d[0]!==f||d[1]!==g||d[2]!==u?(e="logs"===f&&(0,o.jsx)(i.L$,{heading:"Actions",children:(0,o.jsxs)(i.h_,{value:"Logs",onSelect:()=>{u(()=>{g()})},children:["Copy current server logs",(0,o.jsx)(i.Gg,{children:"Enter"})]})}),d[0]=f,d[1]=g,d[2]=u,d[3]=e):e=d[3],d[4]!==h||d[5]!==f||d[6]!==u||d[7]!==S||d[8]!==p?(t="issue"===f&&(0,o.jsx)(i.L$,{heading:"Actions",children:(0,o.jsxs)(i.h_,{value:"Issue",onSelect:()=>{u(()=>{h(),c.startTransition(()=>{p(!0),setTimeout(()=>{S(!0)},500)})})},children:["Record an issue",(0,o.jsx)(i.Gg,{children:"Enter"})]})}),d[4]=h,d[5]=f,d[6]=u,d[7]=S,d[8]=p,d[9]=t):t=d[9],d[10]!==e||d[11]!==t?(n=(0,o.jsxs)(o.Fragment,{children:[e,t]}),d[10]=e,d[11]=t,d[12]=n):n=d[12],n}var u=n(92224),m=n(66873),h=n(42500),f=n(21842),p=n(4573),S=n.n(p),g=n(6066);function y(e){let t,n=(0,r.c)(3),{shouldShow:o,render:a}=e,s=P();return o(s)?(n[0]!==s||n[1]!==a?(t=a(s),n[0]=s,n[1]=a,n[2]=t):t=n[2],t):null}var w=n(83563);function x(){let e=P(),{input:t,select:n,scrollToTop:r}=e,a=(0,w.a)(),s=c.useMemo(()=>{let n={};return Object.values(a).forEach(o=>{var r;(null==(r=o.shouldShow)?void 0:r.call(o,{ctx:e}))===!1||!o.isCommand&&t.startsWith("/")||o.items.filter(t=>{var n,o;return null==(o=null==(n=t.shouldShow)?void 0:n.call(t,{ctx:e}))||o}).filter(e=>{var n,r;return null==(r=null==(n=o.filter)?void 0:n.call(o,{item:e,input:t}))||r}).filter(e=>"includes"===e.showBasedOnInput?e.value.toLowerCase().includes(t.toLowerCase()):"startsWith"!==e.showBasedOnInput||e.value.toLowerCase().startsWith(t.toLowerCase())).filter(e=>"includes"===o.showBasedOnInput?e.value.toLowerCase().includes(t.toLowerCase()):"startsWith"!==e.showBasedOnInput||e.value.toLowerCase().startsWith(t.toLowerCase())).forEach(e=>{let t=e.heading||"Custom";n[t]||(n[t]=[]),n[t].push(e)})}),Object.keys(n).forEach(e=>{n[e].sort((e,t)=>(t.priority||0)-(e.priority||0))}),r(),n},[a,t]);return 0===Object.keys(s).length?null:(0,o.jsx)(o.Fragment,{children:Object.entries(s).map(t=>{let[r,a]=t;return(0,o.jsx)(i.L$,{heading:r,children:a.map(t=>(0,o.jsx)(i.h_,{value:t.id,onSelect:()=>{n(()=>t.onSelect({ctx:e}))},className:"gap-3",children:t.render()},t.id))},r)})})}function j(){let e,t,n=(0,r.c)(5),{setInput:a,command:s}=P(),{command:l}=s;n[0]!==l?(e=[{command:"anime",description:"Find in your collection",show:!0},{command:"manga",description:"Find in your collection",show:!0},{command:"search",description:"Search on AniList",show:!0},{command:"logs",description:"Copy the current logs",show:!0},{command:"issue",description:"Record an issue",show:!0}].filter(e=>e.show&&e.command.startsWith(l)&&e.command!=l),n[0]=l,n[1]=e):e=n[1];let c=e;return(null==c?void 0:c.length)?(n[2]!==c||n[3]!==a?(t=(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(i.L$,{heading:"Autocomplete",children:c.map(e=>(0,o.jsxs)(i.h_,{onSelect:()=>{a("/".concat(e.command))},children:[(0,o.jsxs)("span",{className:"tracking-widest text-sm",children:["/",e.command]}),(0,o.jsx)(i.Gg,{className:"text-[--muted]",children:e.description})]},e.command))})}),n[2]=c,n[3]=a,n[4]=t):t=n[4],t):null}var T=n(42094),v=n(38900),b=n(96826),U=n(70376),L=n(53647);function A(){var e,t,n,a,s,l,c,d,u,h,f;let p,S=(0,r.c)(4),{select:y,command:w}=P(),{command:x,args:j}=w,{data:b}=(0,T.u)(),{data:U}=(0,v.QJ)(),A=null!=(h=null==b||null==(s=b.MediaListCollection)||null==(a=s.lists)||null==(n=a.flatMap(N))||null==(t=n.filter(Boolean))||null==(e=t.map(C))?void 0:e.filter(Boolean))?h:[],G=null!=(f=null==U||null==(u=U.lists)||null==(d=u.flatMap(R))||null==(c=d.filter(Boolean))||null==(l=c.map(E))?void 0:l.filter(Boolean))?f:[],_=(0,g.useRouter)(),k=j.join(" "),O="anime"===x&&k.length>0?A.filter(e=>(0,m.q)(e.title,k)):[],I="manga"===x&&k.length>0?G.filter(e=>(0,m.q)(e.title,k)):[],F=0===k.length&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(L.vF,{command:"/anime [title]",description:"Find anime in your collection",show:"anime"===x}),(0,o.jsx)(L.vF,{command:"/manga [title]",description:"Find manga in your collection",show:"manga"===x}),(0,o.jsx)(L.vF,{command:"/library [title]",description:"Find anime in your library",show:"library"===x})]}),M="anime"===x&&O.length>0&&(0,o.jsx)(i.L$,{heading:"My anime",children:O.map(e=>(0,o.jsx)(i.h_,{onSelect:()=>{y(()=>{_.push("/entry?id=".concat(e.id))})},children:(0,o.jsx)(L.pz,{media:e,type:"anime"})},e.id))}),q="manga"===x&&I.length>0&&(0,o.jsx)(i.L$,{heading:"My manga",children:I.map(e=>(0,o.jsx)(i.h_,{onSelect:()=>{y(()=>{_.push("/manga/entry?id=".concat(e.id))})},children:(0,o.jsx)(L.pz,{media:e,type:"manga"})},e.id))});return S[0]!==F||S[1]!==M||S[2]!==q?(p=(0,o.jsxs)(o.Fragment,{children:[F,M,q]}),S[0]=F,S[1]=M,S[2]=q,S[3]=p):p=S[3],p}function E(e){return e.media}function R(e){return null==e?void 0:e.entries}function C(e){return e.media}function N(e){return null==e?void 0:e.entries}function G(){let e,t,n,a,s,l,c=(0,r.c)(28),d=(0,b.v1)(),{select:u,command:m}=P(),{isCommand:h,command:f,args:p}=m,S=(0,g.useRouter)(),y=!(null==d?void 0:d.isOffline);c[0]!==f||c[1]!==(null==d?void 0:d.isOffline)||c[2]!==y?(e=[{name:"Home",href:"/",flag:"home",show:y},{name:"Schedule",href:"/schedule",flag:"schedule",show:!(null==d?void 0:d.isOffline)},{name:"Settings",href:"/settings",flag:"settings",show:!(null==d?void 0:d.isOffline)},{name:"Manga",href:"/manga",flag:"manga",show:!(null==d?void 0:d.isOffline)},{name:"Discover",href:"/discover",flag:"discover",show:!(null==d?void 0:d.isOffline)},{name:"My lists",href:"/lists",flag:"lists",show:!(null==d?void 0:d.isOffline)},{name:"Auto Downloader",href:"/auto-downloader",flag:"auto-downloader",show:!(null==d?void 0:d.isOffline)},{name:"Torrent list",href:"/torrent-list",flag:"torrent-list",show:!(null==d?void 0:d.isOffline)},{name:"Scan summaries",href:"/scan-summaries",flag:"scan-summaries",show:!(null==d?void 0:d.isOffline)},{name:"Extensions",href:"/extensions",flag:"extensions",show:!(null==d?void 0:d.isOffline)},{name:"Advanced search",href:"/search",flag:"search",show:!(null==d?void 0:d.isOffline)}].filter(e=>e.flag.startsWith(f)),c[0]=f,c[1]=null==d?void 0:d.isOffline,c[2]=y,c[3]=e):e=c[3];let w=e;return c[4]!==f||c[5]!==S||c[6]!==u?(t=f.startsWith("ba")&&(0,o.jsx)(i.L$,{heading:"Navigation",children:(0,o.jsxs)(i.h_,{onSelect:()=>{u(()=>{S.back()})},children:[(0,o.jsx)(U.OLK,{className:"mr-2 h-4 w-4"}),(0,o.jsx)("span",{children:"Go back"})]})}),c[4]=f,c[5]=S,c[6]=u,c[7]=t):t=c[7],c[8]!==f||c[9]!==S||c[10]!==u?(n=f.startsWith("fo")&&(0,o.jsx)(i.L$,{heading:"Navigation",children:(0,o.jsxs)(i.h_,{onSelect:()=>{u(()=>{S.forward()})},children:[(0,o.jsx)(U.OLK,{className:"mr-2 h-4 w-4 rotate-180"}),(0,o.jsx)("span",{children:"Go forward"})]})}),c[8]=f,c[9]=S,c[10]=u,c[11]=n):n=c[11],c[12]!==p||c[13]!==f||c[14]!==w||c[15]!==h||c[16]!==S||c[17]!==u?(a=h&&w.length>0&&0===p.length&&(0,o.jsx)(i.L$,{heading:"Screens",children:(0,o.jsx)(o.Fragment,{children:w.filter(_).map(e=>(0,o.jsxs)(i.h_,{onSelect:()=>{u(()=>{S.push(e.href)})},children:[(0,o.jsx)("span",{className:"text-sm tracking-wide font-bold text-[--muted]",children:"Go to:\xa0"})," ",e.name,f===e.flag?(0,o.jsx)(i.Gg,{children:"Enter"}):(0,o.jsxs)(i.Gg,{children:["/",e.flag]})]},e.flag))})}),c[12]=p,c[13]=f,c[14]=w,c[15]=h,c[16]=S,c[17]=u,c[18]=a):a=c[18],c[19]!==f||c[20]!==S||c[21]!==u?(s="back"!==f&&"forward"!==f&&(0,o.jsx)(i.L$,{heading:"Navigation",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.h_,{onSelect:()=>{u(()=>{S.back()})},children:[(0,o.jsx)(U.OLK,{className:"mr-2 h-4 w-4"}),(0,o.jsx)("span",{children:"Go back"})]}),(0,o.jsxs)(i.h_,{onSelect:()=>{u(()=>{S.forward()})},children:[(0,o.jsx)(U.OLK,{className:"mr-2 h-4 w-4 rotate-180"}),(0,o.jsx)("span",{children:"Go forward"})]})]})}),c[19]=f,c[20]=S,c[21]=u,c[22]=s):s=c[22],c[23]!==t||c[24]!==n||c[25]!==a||c[26]!==s?(l=(0,o.jsxs)(o.Fragment,{children:[t,n,a,s]}),c[23]=t,c[24]=n,c[25]=a,c[26]=s,c[27]=l):l=c[27],l}function _(e){return e.show}let k=(0,f.tG)("sea-command-shortcuts",["meta+j","q"],void 0,{getOnInit:!0}),O=c.createContext({input:"",setInput:()=>{},resetInput:()=>{},close:()=>{},select:()=>{},command:{command:"",isCommand:!1,args:[]},scrollToTop:()=>()=>{},commandListRef:c.createRef(),router:{pathname:""}});function P(){return c.useContext(O)}let I=(0,h.eU)(!1),F=(0,h.eU)("");function M(){let e,t=(0,r.c)(3),n=(0,l.Xr)(I),o=(0,l.Xr)(F);return t[0]!==o||t[1]!==n?(e={setSeaCommandOpen:n,setSeaCommandInput:o},t[0]=o,t[1]=n,t[2]=e):e=t[2],e}function q(){let e,t,n,a,s,d,u,h,f,p,w,x,j,T,v,b,U,L,A,E=(0,r.c)(50);(0,g.useRouter)();let R=(0,g.usePathname)(),[C,N]=(0,l.fp)(I),[G,_]=(0,l.fp)(F),[P,M]=c.useState(""),[q]=(0,l.fp)(k),et=(0,m.P)(G);E[0]!==_||E[1]!==N||E[2]!==q?(e=()=>(S().bind(q,()=>{_(""),c.startTransition(()=>{N(!0)})}),()=>{S().unbind(q)}),E[0]=_,E[1]=N,E[2]=q,E[3]=e):e=E[3],E[4]!==q?(t=[q],E[4]=q,E[5]=t):t=E[5],c.useEffect(e,t),E[6]!==C||E[7]!==_?(n=()=>{C||_("")},E[6]=C,E[7]=_,E[8]=n):n=E[8],E[9]!==C?(a=[C],E[9]=C,E[10]=a):a=E[10],c.useEffect(n,a),E[11]!==_||E[12]!==N?(s=()=>(S().bind(["s"],()=>{N(!0),c.startTransition(()=>{setTimeout(()=>{_("/search ")},100)})}),ee),E[11]=_,E[12]=N,E[13]=s):s=E[13],E[14]===Symbol.for("react.memo_cache_sentinel")?(d=[],E[14]=d):d=E[14],c.useEffect(s,d);let en=c.useRef(null);E[15]===Symbol.for("react.memo_cache_sentinel")?(u=function(){let e=en.current;if(!e)return Z;let t=setTimeout(()=>{e.scrollTop=0;let t=e.querySelector("[cmdk-item]");if(t){let e=t.getAttribute("data-value");e&&M(e)}},100);return()=>clearTimeout(t)},E[15]=u):u=E[15];let eo=u;return E[16]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{let e=eo();return()=>e()},E[16]=h):h=E[16],E[17]!==G||E[18]!==R?(f=[G,R],E[17]=G,E[18]=R,E[19]=f):f=E[19],c.useEffect(h,f),E[20]!==_?(p=()=>_(""),E[20]=_,E[21]=p):p=E[21],E[22]!==N?(w=()=>{c.startTransition(()=>{N(!1)})},E[22]=N,E[23]=w):w=E[23],E[24]!==_?(x=e=>{null==e||e(),_("")},E[24]=_,E[25]=x):x=E[25],E[26]!==R?(j={pathname:R},E[26]=R,E[27]=j):j=E[27],E[28]!==G||E[29]!==et||E[30]!==_||E[31]!==w||E[32]!==x||E[33]!==j||E[34]!==p?(T={input:G,setInput:_,resetInput:p,close:w,select:x,scrollToTop:eo,command:et,commandListRef:en,router:j},E[28]=G,E[29]=et,E[30]=_,E[31]=w,E[32]=x,E[33]=j,E[34]=p,E[35]=T):T=E[35],E[36]!==P?(v={value:P,onValueChange:M},E[36]=P,E[37]=v):v=E[37],E[38]!==G||E[39]!==_?(b=(0,o.jsx)(i.G7,{placeholder:"Type a command or input...",value:G,onValueChange:_}),E[38]=G,E[39]=_,E[40]=b):b=E[40],E[41]===Symbol.for("react.memo_cache_sentinel")?(U=(0,o.jsxs)(i.oI,{className:"mb-2",ref:en,children:[(0,o.jsx)(y,{shouldShow:Y,render:V}),(0,o.jsx)(y,{shouldShow:Q,render:J}),(0,o.jsx)(y,{shouldShow:B,render:z}),(0,o.jsx)(y,{shouldShow:X,render:W}),(0,o.jsx)(y,{shouldShow:$,render:H}),(0,o.jsx)(y,{shouldShow:K,render:D})]}),E[41]=U):U=E[41],E[42]!==C||E[43]!==N||E[44]!==v||E[45]!==b?(L=(0,o.jsxs)(i.Gj,{open:C,onOpenChange:N,commandProps:v,overlayClass:"bg-black/30",contentClass:"max-w-2xl",commandClass:"h-[300px]",children:[b,U]}),E[42]=C,E[43]=N,E[44]=v,E[45]=b,E[46]=L):L=E[46],E[47]!==T||E[48]!==L?(A=(0,o.jsx)(O.Provider,{value:T,children:L}),E[47]=T,E[48]=L,E[49]=A):A=E[49],A}function D(){return(0,o.jsx)(G,{})}function K(){return!0}function H(){return(0,o.jsx)(j,{})}function $(e){return e.input.startsWith("/")}function W(){return(0,o.jsx)(x,{})}function X(){return!0}function z(){return(0,o.jsx)(d,{})}function B(e){return"logs"===e.command.command||"issue"===e.command.command}function J(){return(0,o.jsx)(A,{})}function Q(e){return"anime"===e.command.command||"manga"===e.command.command}function V(){return(0,o.jsx)(u.d,{})}function Y(e){return"search"===e.command.command}function Z(){}function ee(){S().unbind(["s"])}},86726:(e,t,n)=>{n.d(t,{J8:()=>x,Oc:()=>S,Sv:()=>w,TM:()=>v,bN:()=>b,g5:()=>f,hz:()=>T,mE:()=>j,mu:()=>y,sA:()=>U,sh:()=>p,wy:()=>h});var o=n(19749),r=n(7675),a=n(45886),s=n(74889),i=n(35349),l=n(43756),c=n(94077),d=n(46278),u=n(29724),m=n(69554);function h(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:s.S.STATUS.GetStatus.endpoint,method:s.S.STATUS.GetStatus.methods[0],queryKey:[s.S.STATUS.GetStatus.key],enabled:!0,retryDelay:1e3,retry:6,muteError:c.X},t[0]=e):e=t[0],(0,r.fl)(e)}function f(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:s.S.STATUS.GetLogFilenames.endpoint,method:s.S.STATUS.GetLogFilenames.methods[0],queryKey:[s.S.STATUS.GetLogFilenames.key],enabled:!0},t[0]=e):e=t[0],(0,r.fl)(e)}function p(){let e,t,n=(0,o.c)(3),a=(0,d.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s.S.STATUS.DeleteLogs.key],n[0]=e):e=n[0],n[1]!==a?(t={endpoint:s.S.STATUS.DeleteLogs.endpoint,method:s.S.STATUS.DeleteLogs.methods[0],mutationKey:e,onSuccess:async()=>{await a.invalidateQueries({queryKey:[s.S.STATUS.GetLogFilenames.key]}),m.oR.success("Logs deleted")}},n[1]=a,n[2]=t):t=n[2],(0,r.qk)(t)}function S(){let e,t=(0,o.c)(1);return(0,d.jE)(),t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:s.S.STATUS.GetLatestLogContent.endpoint,method:s.S.STATUS.GetLatestLogContent.methods[0],mutationKey:[s.S.STATUS.GetLatestLogContent.key],onSuccess:g},t[0]=e):e=t[0],(0,r.qk)(e)}async function g(e){if(!e)return m.oR.error("Couldn't fetch logs");try{await (0,l.l)(e),m.oR.success("Copied to clipboard")}catch(e){console.error("Clipboard write error:",e),m.oR.error("Failed to copy logs: "+e.message)}}function y(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:s.S.STATUS.GetAnnouncements.endpoint,method:s.S.STATUS.GetAnnouncements.methods[0],mutationKey:[s.S.STATUS.GetAnnouncements.key]},t[0]=e):e=t[0],(0,r.qk)(e)}function w(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:s.S.STATUS.GetMemoryStats.endpoint,method:s.S.STATUS.GetMemoryStats.methods[0],queryKey:[s.S.STATUS.GetMemoryStats.key],enabled:!1,refetchInterval:!1},t[0]=e):e=t[0],(0,r.fl)(e)}function x(){let e,t,n=(0,o.c)(3),a=(0,d.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s.S.STATUS.ForceGC.key],n[0]=e):e=n[0],n[1]!==a?(t={endpoint:s.S.STATUS.ForceGC.endpoint,method:s.S.STATUS.ForceGC.methods[0],mutationKey:e,onSuccess:async()=>{await a.invalidateQueries({queryKey:[s.S.STATUS.GetMemoryStats.key]}),m.oR.success("Garbage collection completed")}},n[1]=a,n[2]=t):t=n[2],(0,r.qk)(t)}function j(){let e=(0,u.md)(i.uQ);return(0,r.qk)({endpoint:s.S.STATUS.GetMemoryProfile.endpoint,method:s.S.STATUS.GetMemoryProfile.methods[0],mutationKey:[s.S.STATUS.GetMemoryProfile.key],onMutate:async t=>{let n=t.profileType||"heap";m.oR.info("Generating ".concat(n," profile..."));let o=(0,a.M)()+s.S.STATUS.GetMemoryProfile.endpoint;"heap"===n?o+="?heap=true":"allocs"===n&&(o+="?allocs=true");try{let t={};e&&(t["X-Seanime-Token"]=e);let r=await fetch(o,{method:"GET",headers:t});if(!r.ok)throw Error("HTTP error: status: ".concat(r.status));let a=await r.blob(),s=new Date().toISOString().replace(/[:.]/g,"-").split("T")[0]+"_"+new Date().toISOString().replace(/[:.]/g,"-").split("T")[1].split(".")[0],i="seanime-".concat(n,"-profile-").concat(s,".pprof"),l=window.URL.createObjectURL(a),c=document.createElement("a");c.href=l,c.setAttribute("download",i),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l),m.oR.success('Profile "'.concat(n,'" downloaded'))}catch(e){console.error("Download error:",e),m.oR.error("Failed to download ".concat(n," profile"))}throw Error("Download handled in onMutate")},onError:e=>{"Download handled in onMutate"!==e.message&&m.oR.error("Failed to download memory profile")}})}function T(){let e=(0,u.md)(i.uQ);return(0,r.qk)({endpoint:s.S.STATUS.GetGoRoutineProfile.endpoint,method:s.S.STATUS.GetGoRoutineProfile.methods[0],mutationKey:[s.S.STATUS.GetGoRoutineProfile.key],onMutate:async()=>{m.oR.info("Generating goroutine profile...");let t=(0,a.M)()+s.S.STATUS.GetGoRoutineProfile.endpoint;try{let n={};e&&(n["X-Seanime-Token"]=e);let o=await fetch(t,{method:"GET",headers:n});if(!o.ok)throw Error("HTTP error! status: ".concat(o.status));let r=await o.blob();new Date().toISOString().replace(/[:.]/g,"-").split("T")[0],new Date().toISOString().replace(/[:.]/g,"-").split("T")[1].split(".")[0];let a=window.URL.createObjectURL(r);(0,l.A)(a),m.oR.success("Goroutine profile downloaded")}catch(e){console.error("Download error:",e),m.oR.error("Failed to download goroutine profile")}throw Error("Download handled in onMutate")},onError:e=>{"Download handled in onMutate"!==e.message&&m.oR.error("Failed to download goroutine profile")}})}function v(){let e=(0,u.md)(i.uQ);return(0,r.qk)({endpoint:s.S.STATUS.GetCPUProfile.endpoint,method:s.S.STATUS.GetCPUProfile.methods[0],mutationKey:[s.S.STATUS.GetCPUProfile.key],onMutate:async t=>{let n=(null==t?void 0:t.duration)||30;m.oR.info("Generating CPU profile for ".concat(n," seconds..."));let o="".concat((0,a.M)()).concat(s.S.STATUS.GetCPUProfile.endpoint,"?duration=").concat(n);try{let t={};e&&(t["X-Seanime-Token"]=e);let r=await fetch(o,{method:"GET",headers:t});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let a=await r.blob(),s=new Date().toISOString().replace(/[:.]/g,"-").split("T")[0]+"_"+new Date().toISOString().replace(/[:.]/g,"-").split("T")[1].split(".")[0],i=window.URL.createObjectURL(a),l=document.createElement("a");l.href=i,l.setAttribute("download","seanime-cpu-profile-".concat(s,".pprof")),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i),m.oR.success("CPU profile (".concat(n,"s) downloaded"))}catch(e){console.error("Download error:",e),m.oR.error("Failed to download CPU profile")}throw Error("Download handled in onMutate")},onError:e=>{"Download handled in onMutate"!==e.message&&m.oR.error("Failed to download CPU profile")}})}function b(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={endpoint:s.S.STATUS.GetHomeItems.endpoint,method:s.S.STATUS.GetHomeItems.methods[0],queryKey:[s.S.STATUS.GetHomeItems.key],enabled:!0},t[0]=e):e=t[0],(0,r.fl)(e)}function U(){let e,t,n=(0,o.c)(3),a=(0,d.jE)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s.S.STATUS.UpdateHomeItems.key],n[0]=e):e=n[0],n[1]!==a?(t={endpoint:s.S.STATUS.UpdateHomeItems.endpoint,method:s.S.STATUS.UpdateHomeItems.methods[0],mutationKey:e,onSuccess:async()=>{await a.invalidateQueries({queryKey:[s.S.STATUS.GetHomeItems.key]}),m.oR.success("Home screen updated")}},n[1]=a,n[2]=t):t=n[2],(0,r.qk)(t)}},92224:(e,t,n)=>{n.d(t,{U:()=>T,d:()=>v});var o=n(95155),r=n(19749),a=n(42094),s=n(38900),i=n(32754),l=n(96826),c=n(14680),d=n(45499),u=n(2091),m=n(14370),h=n(42500),f=n(29724),p=n(6066),S=n(12115),g=n(53647),y=n(81845);let w=(0,h.eU)(null),x=(0,h.eU)(null),j=(0,h.eU)(null);function T(){let e,t,n,o=(0,r.c)(11),[,a]=(0,f.fp)(w),[s,i]=(0,f.fp)(x),[l,c]=(0,f.fp)(j);return o[0]!==a?(e=e=>{a(e)},o[0]=a,o[1]=e):e=o[1],o[2]!==a||o[3]!==i||o[4]!==c?(t=()=>{a(null),i(null),c(null)},o[2]=a,o[3]=i,o[4]=c,o[5]=t):t=o[5],o[6]!==s||o[7]!==l||o[8]!==e||o[9]!==t?(n={searchAndSelectMedia:e,selectedAnime:s,selectedManga:l,onAcknowledgeSelection:t},o[6]=s,o[7]=l,o[8]=e,o[9]=t,o[10]=n):n=o[10],n}function v(){(0,l.v1)();let{setPreviewModalMediaId:e}=(0,i.D)(),[t,n]=(0,f.fp)(w),[r,h]=(0,f.fp)(x),[T,v]=(0,f.fp)(j),{input:b,select:U,scrollToTop:L,commandListRef:A,command:{isCommand:E,command:R,args:C}}=(0,y.$w)(),N=(0,p.useRouter)(),G=C.join(" "),_=C.slice(1).join(" "),k="manga"!==C[0]?"anime":"manga",O=(0,m.d)("anime"===k?G:_,500),{data:P,isLoading:I,isFetching:F}=(0,a.qN)({search:O,page:1,perPage:10,status:["FINISHED","CANCELLED","NOT_YET_RELEASED","RELEASING"],sort:["SEARCH_MATCH"]},O.length>0&&"anime"===k),{data:M,isLoading:q,isFetching:D}=(0,s.cE)({search:O,page:1,perPage:10,status:["FINISHED","CANCELLED","NOT_YET_RELEASED","RELEASING"],sort:["SEARCH_MATCH"]},O.length>0&&"manga"===k),K="anime"===k?I:q,H="anime"===k?F:D,$=S.useMemo(()=>{var e,t,n,o;return"anime"===k?null==P||null==(t=P.Page)||null==(e=t.media)?void 0:e.filter(Boolean):null==M||null==(o=M.Page)||null==(n=o.media)?void 0:n.filter(Boolean)},[P,M,k]);return S.useEffect(()=>{let e=L();return()=>e()},[b,K,H]),S.useEffect(()=>{t||(h(null),v(null))},[t]),(0,o.jsx)(o.Fragment,{children:""===G&&""===_?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.vF,{command:"/search [title]",description:"Search anime",show:!0}),(0,o.jsx)(g.vF,{command:"/search manga [title]",description:"Search manga",show:!0})]}):(0,o.jsxs)(d.L$,{heading:"".concat("anime"===k?"Anime":"Manga"," results"),children:[""!==O&&(!$||0===$.length)&&(K||H)&&(0,o.jsx)(u.kt,{}),""!==O&&!K&&!H&&(!$||0===$.length)&&(0,o.jsxs)("div",{className:"py-14 px-6 text-center text-sm sm:px-14",children:[(0,o.jsx)("div",{className:"h-[10rem] w-[10rem] mx-auto flex-none rounded-[--radius-md] object-cover object-center relative overflow-hidden",children:(0,o.jsx)(c.r,{src:"/luffy-01.png",alt:"",fill:!0,quality:100,priority:!0,sizes:"10rem",className:"object-contain object-top"})}),(0,o.jsx)("h5",{className:"mt-4 font-semibold text-[--foreground]",children:"Nothing found"}),(0,o.jsx)("p",{className:"mt-2 text-[--muted]",children:"We couldn't find anything with that name. Please try again."})]}),null==$?void 0:$.map(e=>(0,o.jsx)(d.h_,{onSelect:()=>{U(()=>{"anime"===t?h(e):"manga"===t?v(e):"anime"===k?N.push("/entry?id=".concat(e.id)):N.push("/manga/entry?id=".concat(e.id))})},children:(0,o.jsx)(g.pz,{media:e,type:k})},(null==e?void 0:e.id)||""))]})})}}}]);