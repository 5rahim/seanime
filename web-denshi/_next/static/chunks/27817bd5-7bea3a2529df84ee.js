"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8481],{85594:(t,e,i)=>{i.d(e,{A:()=>th,B:()=>tm,C:()=>s0,D:()=>s1,E:()=>ai,F:()=>as,G:()=>aa,H:()=>at,I:()=>M,J:()=>tn,K:()=>ay,L:()=>v,N:()=>iX,O:()=>i_,P:()=>aj,Q:()=>eg,S:()=>an,T:()=>W,U:()=>s_,V:()=>to,W:()=>s2,X:()=>a$,a:()=>sX,a$:()=>s3,ar:()=>em,b:()=>tr,b0:()=>s5,b1:()=>s4,b2:()=>s6,b3:()=>s9,b4:()=>s7,b5:()=>s8,b6:()=>ae,b7:()=>ar,b8:()=>al,b9:()=>ah,ba:()=>ao,bb:()=>au,bc:()=>ad,bd:()=>ac,be:()=>ap,bf:()=>ag,bg:()=>af,bh:()=>am,bj:()=>ab,bk:()=>av,bl:()=>aw,bm:()=>ak,bn:()=>ax,c:()=>Z,d:()=>D,e:()=>O,f:()=>eM,g:()=>eW,h:()=>G,i:()=>ts,j:()=>K,k:()=>I,l:()=>t4,m:()=>eC,n:()=>e1,o:()=>eq,p:()=>Q,q:()=>aC,u:()=>aO,w:()=>N,x:()=>V,y:()=>F,z:()=>aA});var s,a,n,r,l,h,o=i(12115),u=i(7311);Symbol(0);let d=Symbol(0),c=Symbol(0),p=Symbol(0),g=Symbol(0),f=Symbol(0),m=Symbol(0),b=Symbol(0),v={pa:d,Zb:c,I:p,qa:g,_b:f,Nc:m,oe:b,pe:Symbol(0),qe:Symbol(0)};class y extends u.T{get length(){return this.s.length}get readonly(){return this[v._b]}toArray(){return[...this.s]}[(n=v._b,Symbol.iterator)](){return this.s.values()}[v.pa](t,e){let i=this.s.length;""+i in this||Object.defineProperty(this,i,{get(){return this.s[i]}}),this.s.includes(t)||(this.s.push(t),this.dispatchEvent(new u.D("add",{detail:t,trigger:e})))}[v.Zb](t,e){let i=this.s.indexOf(t);if(i>=0){var s;null==(s=this[v.pe])||s.call(this,t,e),this.s.splice(i,1),this.dispatchEvent(new u.D("remove",{detail:t,trigger:e}))}}[v.I](t){var e;for(let e of[...this.s])this[v.Zb](e,t);this.s=[],this[v.Nc](!1,t),null==(e=this[v.oe])||e.call(this)}[v.Nc](t,e){this[v._b]!==t&&(this[v._b]=t,this.dispatchEvent(new u.D("readonly-change",{detail:t,trigger:e})))}constructor(){super(...arguments),this.s=[],this[n]=!1}}var w={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},$=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],k=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],x=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],T="undefined"!=typeof window&&void 0!==window.document?window.document:{},P="fullscreenEnabled"in T&&Object.keys(w)||$[0]in T&&$||k[0]in T&&k||x[0]in T&&x||[],S={requestFullscreen:function(t){return t[P[w.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[P[w.requestFullscreen]]},get exitFullscreen(){return T[P[w.exitFullscreen]].bind(T)},get fullscreenPseudoClass(){return":"+P[w.fullscreen]},addEventListener:function(t,e,i){return T.addEventListener(P[w[t]],e,i)},removeEventListener:function(t,e,i){return T.removeEventListener(P[w[t]],e,i)},get fullscreenEnabled(){return!!T[P[w.fullscreenEnabled]]},set fullscreenEnabled(val){},get fullscreenElement(){return T[P[w.fullscreenElement]]},set fullscreenElement(val){},get onfullscreenchange(){return T[("on"+P[w.fullscreenchange]).toLowerCase()]},set onfullscreenchange(handler){return T[("on"+P[w.fullscreenchange]).toLowerCase()]=handler},get onfullscreenerror(){return T[("on"+P[w.fullscreenerror]).toLowerCase()]},set onfullscreenerror(handler){return T[("on"+P[w.fullscreenerror]).toLowerCase()]=handler}};let E=S.fullscreenEnabled;class j extends u.V{get active(){return this.Oc}get supported(){return E}onConnect(){(0,u.l)(S,"fullscreenchange",this.Pc.bind(this)),(0,u.l)(S,"fullscreenerror",this.$b.bind(this)),(0,u.v)(this.za.bind(this))}async za(){E&&await this.exit()}Pc(t){let e=A(this.el);e!==this.Oc&&(e||(this.vb=!1),this.Oc=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}$b(t){this.vb&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.vb=!1)}async enter(){try{if(this.vb=!0,!this.el||A(this.el))return;return C(),S.requestFullscreen(this.el)}catch(t){throw this.vb=!1,t}}async exit(){if(this.el&&A(this.el))return C(),S.exitFullscreen()}constructor(){super(...arguments),this.vb=!1,this.Oc=!1}}function A(t){if(S.fullscreenElement===t)return!0;try{return t.matches(S.fullscreenPseudoClass)}catch(t){return!1}}function C(){if(!E)throw Error("[vidstack] no fullscreen API")}let M="undefined"==typeof document,q=M?"":(null==(s=navigator)?void 0:s.userAgent.toLowerCase())||"",O=!M&&/iphone|ipad|ipod|ios|crios|fxios/i.test(q),L=!M&&/(iphone|ipod)/gi.test((null==(a=navigator)?void 0:a.platform)||""),D=!M&&!!window.chrome,I=!M&&(!!window.safari||O);function R(){return!M&&!(0,u.i)(window.screen.orientation)&&!(0,u.i)(window.screen.orientation.lock)&&(0,u.r)(screen.orientation.unlock)}function F(t){return!M&&(t||(t=document.createElement("video")),t.canPlayType("application/vnd.apple.mpegurl").length>0)}function N(t){return!M&&!!document.pictureInPictureEnabled&&!(null==t?void 0:t.disablePictureInPicture)}function V(t){return!M&&(0,u.r)(null==t?void 0:t.webkitSupportsPresentationMode)&&(0,u.r)(null==t?void 0:t.webkitSetPresentationMode)}async function z(){let t=document.createElement("video");return t.volume=.5,await (0,u.U)(0),.5===t.volume}function K(){var t,e,i,s,a,n,r,l;if(M)return!1;let h=M?void 0:null!=(a=null!=(s=null==(t=window)?void 0:t.ManagedMediaSource)?s:null==(e=window)?void 0:e.MediaSource)?a:null==(i=window)?void 0:i.WebKitMediaSource;if((0,u.i)(h))return!1;let o=h&&(0,u.r)(h.isTypeSupported)&&h.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),d=M?void 0:null!=(l=null==(n=window)?void 0:n.SourceBuffer)?l:null==(r=window)?void 0:r.WebKitSourceBuffer,c=(0,u.i)(d)||!(0,u.i)(d.prototype)&&(0,u.r)(d.prototype.appendBuffer)&&(0,u.r)(d.prototype.remove);return!!o&&!!c}let U=class t extends u.V{get type(){return this.wb()}get locked(){return this.Sa()}get portrait(){return this.wb().startsWith("portrait")}get landscape(){return this.wb().startsWith("landscape")}get supported(){return t.supported}onConnect(){if(this.supported)(0,u.l)(screen.orientation,"change",this.se.bind(this));else{let t=window.matchMedia("(orientation: landscape)");t.onchange=this.se.bind(this),(0,u.v)(()=>t.onchange=null)}(0,u.v)(this.za.bind(this))}async za(){this.supported&&this.Sa()&&await this.unlock()}se(t){this.wb.set(this.re()),this.dispatch("orientation-change",{detail:{orientation:(0,u.p)(this.wb),lock:this.ac},trigger:t})}async lock(t){(0,u.p)(this.Sa)||this.ac===t||(this.te(),await screen.orientation.lock(t),this.Sa.set(!0),this.ac=t)}async unlock(){(0,u.p)(this.Sa)&&(this.te(),this.ac=void 0,await screen.orientation.unlock(),this.Sa.set(!1))}te(){if(!this.supported)throw Error("[vidstack] no orientation API")}re(){return M?"portrait-primary":this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}constructor(){super(...arguments),this.wb=(0,u.s)(this.re()),this.Sa=(0,u.s)(!1)}};U.supported=R();class W{get length(){return this.aa.length}start(t){var e;return null!=(e=this.aa[t][0])?e:1/0}end(t){var e;return null!=(e=this.aa[t][1])?e:1/0}constructor(t,e){(0,u.m)(t)?this.aa=t:(0,u.i)(t)||(0,u.i)(e)?this.aa=[]:this.aa=[[t,e]]}}function B(t){if(!t.length)return null;let e=t.start(0);for(let i=1;i<t.length;i++){let s=t.start(i);s<e&&(e=s)}return e}function H(t){if(!t.length)return null;let e=t.end(0);for(let i=1;i<t.length;i++){let s=t.end(i);s>e&&(e=s)}return e}function Z(t,e){let i=new URLSearchParams;for(let t of Object.keys(e))i.set(t,e[t]+"");return t+"?"+i.toString()}function Q(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preconnect";if(M)return!1;let i=document.querySelector('link[href="'.concat(t,'"]'));if(!(0,u.W)(i))return!0;let s=document.createElement("link");return s.rel=e,s.href=t,s.crossOrigin="true",document.head.append(s),!0}let J={};function G(t){if(J[t])return J[t].promise;let e=(0,u.k)(),i=document.querySelector('script[src="'.concat(t,'"]'));if(!(0,u.W)(i))return e.resolve(),e.promise;let s=document.createElement("script");return s.src=t,s.onload=()=>{e.resolve(),delete J[t]},s.onerror=()=>{e.reject(),delete J[t]},setTimeout(()=>document.head.append(s),0),e.promise}function Y(t){return"use-credentials"===t?"include":(0,u.j)(t)?"same-origin":void 0}let X=Symbol(0),_=Symbol(0),tt=Symbol(0),te=Symbol(0),ti=Symbol(0),ts={Vk:X,N:_,Ua:tt,Q:te,Va:ti,U:Symbol(0),ue:Symbol(0)};function ta(t,e){return e>=t.startTime&&e<t.endTime}function tn(t,e,i){let s=null;function a(){let a=(0,u.j)(e)?[e]:e,n=t.toArray().find(t=>a.includes(t.kind)&&"showing"===t.mode);if(n!==s){if(!n){i(null),s=null;return}2==n.readyState?i(n):(i(null),n.addEventListener("load",()=>i(n),{once:!0})),s=n}}return a(),(0,u.l)(t,"mode-change",a)}class tr extends u.T{static createId(t){var e;return"id::".concat(t.type,"-").concat(t.kind,"-").concat(null!=(e=t.src)?e:t.label)}get metadata(){return this.ve}get regions(){return this.bc}get cues(){return this.K}get activeCues(){return this.Xa}get readyState(){return this[ts.N]}get mode(){return this.J}set mode(t){this.setMode(t)}addCue(t,e){let i=0,s=this.K.length;for(i=0;i<s&&!(t.endTime<=this.K[i].startTime);i++);if(i===s?this.K.push(t):this.K.splice(i,0,t),(null==e?void 0:e.type)!=="cuechange"){var a;null==(a=this[ts.U])||a.track.addCue(t)}this.dispatchEvent(new u.D("add-cue",{detail:t,trigger:e})),ta(t,this.Wa)&&this[ts.Ua](this.Wa,e)}removeCue(t,e){let i=this.K.indexOf(t);if(i>=0){var s;let a=this.Xa.includes(t);this.K.splice(i,1),null==(s=this[ts.U])||s.track.removeCue(t),this.dispatchEvent(new u.D("remove-cue",{detail:t,trigger:e})),a&&this[ts.Ua](this.Wa,e)}}setMode(t,e){var i;this.J!==t&&(this.J=t,"disabled"===t?(this.Xa=[],this.xe()):2===this.readyState?this[ts.Ua](this.Wa,e):this.ye(),this.dispatchEvent(new u.D("mode-change",{detail:this,trigger:e})),null==(i=this[ts.Va])||i.call(this))}[(r=ts.N,l=ts.Va,h=ts.U,ts.Ua)](t,e){if(this.Wa=t,"disabled"===this.mode||!this.K.length)return;let i=[];for(let e=0,s=this.K.length;e<s;e++){let s=this.K[e];ta(s,t)&&i.push(s)}let s=i.length!==this.Xa.length;if(!s){for(let t=0;t<i.length;t++)if(!this.Xa.includes(i[t])){s=!0;break}}this.Xa=i,s&&this.xe(e)}[ts.Q](){this.Q=!0,"disabled"!==this.J&&this.ye()}async ye(){if(this.Q&&this.src&&!(this[ts.N]>0)){this[ts.N]=1,this.dispatchEvent(new u.D("load-start"));try{var t,e;let{parseResponse:s,VTTCue:a,VTTRegion:n}=await i.e(943).then(i.bind(i,90943)),r=null==(t=this[ts.Vk])?void 0:t.call(this),l=fetch(this.src,{headers:"json"===this.type?{"Content-Type":"application/json"}:void 0,credentials:Y(r)});if("json"===this.type)this.we(await (await l).text(),a,n);else{let{errors:t,metadata:i,regions:a,cues:n}=await s(l,{type:this.type,encoding:this.encoding});if((null==(e=t[0])?void 0:e.code)===0)throw t[0];this.ve=i,this.bc=a,this.K=n}this.N()}catch(t){this.ze(t)}}}N(){if(this[ts.N]=2,!this.src||"vtt"!==this.type){var t;let e=null==(t=this[ts.U])?void 0:t.track;if(e)for(let t of this.K)e.addCue(t)}let e=new u.D("load");this[ts.Ua](this.Wa,e),this.dispatchEvent(e)}ze(t){this[ts.N]=3,this.dispatchEvent(new u.D("error",{detail:t}))}we(t,e,i){try{let{regions:s,cues:a}=function(t,e,i){let s=(0,u.j)(t)?JSON.parse(t):t,a=[],n=[];return s.regions&&i&&(a=s.regions.map(t=>Object.assign(new i,t))),(s.cues||(0,u.m)(s))&&(n=((0,u.m)(s)?s:s.cues).filter(t=>(0,u.c)(t.startTime)&&(0,u.c)(t.endTime)).map(t=>Object.assign(new e(0,0,""),t))),{regions:a,cues:n}}(t,e,i);this.bc=s,this.K=a}catch(t){this.ze(t)}}xe(t){this.dispatchEvent(new u.D("cue-change",{trigger:t}))}constructor(t){for(let e of(super(),this.id="",this.label="",this.language="",this.default=!1,this.Q=!1,this.Wa=0,this.J="disabled",this.ve={},this.bc=[],this.K=[],this.Xa=[],this[r]=0,this[l]=null,this[h]=null,Object.keys(t)))this[e]=t[e];this.type||(this.type="vtt"),!M&&t.content?i.e(943).then(i.bind(i,90943)).then(e=>{let{parseText:i,VTTCue:s,VTTRegion:a}=e;(0,u.j)(t.content)&&"json"!==t.type?i(t.content,{type:t.type}).then(t=>{let{cues:e,regions:i}=t;this.K=e,this.bc=i,this.N()}):(this.we(t.content,s,a),3!==this.readyState&&this.N())}):t.src||(this[ts.N]=2)}}let tl=/captions|subtitles/;function th(t){return tl.test(t.kind)}let to=new u.X({artist:"",audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,buffered:new W,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:R(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,controlsVisible:!1,crossOrigin:null,ended:!1,error:null,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new W,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,seekable:new W,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(th).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return"unknown"!==this.providedViewType?this.providedViewType:this.inferredViewType},get streamType(){return"unknown"!==this.providedStreamType?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){var tu;return Math.max(0,(null!=(tu=B(this.buffered))?tu:0)-this.clipStartTime)},get bufferedEnd(){var td;let t=null!=(td=H(this.buffered))?td:0;return Math.min(this.duration,Math.max(0,t-this.clipStartTime))},get seekableStart(){var tc;return Math.max(0,(null!=(tc=B(this.seekable))?tc:0)-this.clipStartTime)},get seekableEnd(){var tp;let t=this.canPlay?null!=(tp=H(this.seekable))?tp:1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,t-this.clipStartTime)):t},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return"airplay"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},get isGoogleCastConnected(){return"google-cast"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){var tg;return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(null!=(tg=this.liveSyncPosition)?tg:this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),tf=new Set(["audioTrack","audioTracks","autoPlayError","autoPlaying","autoQuality","buffered","canPlay","ended","error","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","paused","played","playing","qualities","quality","realCurrentTime","seekable","seeking","started","userBehindLiveEdge","waiting"]),tm=(0,u.Y)();function tb(){return(0,u.J)(tm)}class tv{setTarget(t){this.B=t}getPlayer(t){var e;return this.ba||null==(e=null!=t?t:this.B)||e.dispatchEvent(new u.D("find-media-player",{detail:t=>void(this.ba=t),bubbles:!0,composed:!0})),this.ba}setPlayer(t){this.ba=t}startLoading(t){this.t("media-start-loading",t)}startLoadingPoster(t){this.t("media-poster-start-loading",t)}requestAirPlay(t){this.t("media-airplay-request",t)}requestGoogleCast(t){this.t("media-google-cast-request",t)}play(t){this.t("media-play-request",t)}pause(t){this.t("media-pause-request",t)}mute(t){this.t("media-mute-request",t)}unmute(t){this.t("media-unmute-request",t)}enterFullscreen(t,e){this.t("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.t("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.t("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.t("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.t("media-enter-pip-request",t)}exitPictureInPicture(t){this.t("media-exit-pip-request",t)}seeking(t,e){this.t("media-seeking-request",e,t)}seek(t,e){this.t("media-seek-request",e,t)}seekToLiveEdge(t){this.t("media-live-edge-request",t)}changeVolume(t,e){this.t("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.t("media-audio-track-change-request",e,t)}changeQuality(t,e){this.t("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,i){this.t("media-text-track-change-request",i,{index:t,mode:e})}changePlaybackRate(t,e){this.t("media-rate-change-request",e,t)}resumeControls(t){this.t("media-resume-controls-request",t)}pauseControls(t){this.t("media-pause-controls-request",t)}togglePaused(t){let e=this.getPlayer(null==t?void 0:t.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){let e=this.getPlayer(null==t?void 0:t.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){let e=this.getPlayer(null==t?void 0:t.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){let i=this.getPlayer(null==e?void 0:e.target);i&&(i.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){let e=this.getPlayer(null==t?void 0:t.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}disableCaptions(t){let e=this.getPlayer(null==t?void 0:t.target);if(!e)return;let i=e.state.textTracks,s=e.state.textTrack;if(s){let e=i.indexOf(s);this.changeTextTrackMode(e,"disabled",t)}}toggleCaptions(t){let e=this.getPlayer(null==t?void 0:t.target);if(!e)return;let i=e.state.textTracks,s=e.state.textTrack;if(s){let e=i.indexOf(s);this.changeTextTrackMode(e,"disabled",t),this.Qc=e}else{let e=this.Qc;i[e]&&th(i[e])||(e=-1),-1===e&&(e=i.findIndex(t=>th(t)&&t.default)),-1===e&&(e=i.findIndex(t=>th(t))),e>=0&&this.changeTextTrackMode(e,"showing",t),this.Qc=-1}}t(t,e,i){var s,a,n;let r=new u.D(t,{bubbles:!0,composed:!0,cancelable:!0,detail:i,trigger:e}),l=(null==e?void 0:e.target)||null;l&&l instanceof u.Z&&(l=l.el),l=!l||l===document||l===window||l===document.body||(null==(s=this.ba)?void 0:s.el)&&l instanceof Node&&!this.ba.el.contains(l)?null!=(n=this.B)?n:null==(a=this.getPlayer())?void 0:a.el:null!=l?l:this.B,this.ba&&("media-play-request"!==t||this.ba.state.canLoad)?this.ba.canPlayQueue.k(t,()=>null==l?void 0:l.dispatchEvent(r)):null==l||l.dispatchEvent(r)}Aa(t){}constructor(t){this.ub=t,this.B=null,this.ba=null,this.Qc=-1}}let ty=Math.min,tw=Math.max,t$=Math.round,tk=Math.floor,tx=t=>({x:t,y:t});function tT(t){return t.split("-")[0]}function tP(t){return["top","bottom"].includes(tT(t))?"y":"x"}function tS(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function tE(t,e,i){let s,{reference:a,floating:n}=t;let r=tP(e),l="x"===tP(e)?"y":"x",h="y"===l?"height":"width",o=tT(e),u="y"===r,d=a.x+a.width/2-n.width/2,c=a.y+a.height/2-n.height/2,p=a[h]/2-n[h]/2;switch(o){case"top":s={x:d,y:a.y-n.height};break;case"bottom":s={x:d,y:a.y+a.height};break;case"right":s={x:a.x+a.width,y:c};break;case"left":s={x:a.x-n.width,y:c};break;default:s={x:a.x,y:a.y}}switch(e.split("-")[1]){case"start":s[l]-=p*(i&&u?-1:1);break;case"end":s[l]+=p*(i&&u?-1:1)}return s}let tj=async(t,e,i)=>{let{placement:s="bottom",strategy:a="absolute",middleware:n=[],platform:r}=i,l=n.filter(Boolean),h=await (null==r.isRTL?void 0:r.isRTL(e)),o=await r.getElementRects({reference:t,floating:e,strategy:a}),{x:u,y:d}=tE(o,s,h),c=s,p={},g=0;for(let i=0;i<l.length;i++){let{name:n,fn:f}=l[i],{x:m,y:b,data:v,reset:y}=await f({x:u,y:d,initialPlacement:s,placement:c,strategy:a,middlewareData:p,rects:o,platform:r,elements:{reference:t,floating:e}});u=null!=m?m:u,d=null!=b?b:d,p={...p,[n]:{...p[n],...v}},y&&g<=50&&(g++,"object"==typeof y&&(y.placement&&(c=y.placement),y.rects&&(o=!0===y.rects?await r.getElementRects({reference:t,floating:e,strategy:a}):y.rects),{x:u,y:d}=tE(o,c,h)),i=-1)}return{x:u,y:d,placement:c,strategy:a,middlewareData:p}};function tA(t){return tq(t)?(t.nodeName||"").toLowerCase():"#document"}function tC(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function tM(t){var e;return null==(e=(tq(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function tq(t){return t instanceof Node||t instanceof tC(t).Node}function tO(t){return t instanceof Element||t instanceof tC(t).Element}function tL(t){return t instanceof HTMLElement||t instanceof tC(t).HTMLElement}function tD(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof tC(t).ShadowRoot)}function tI(t){let{overflow:e,overflowX:i,overflowY:s,display:a}=tV(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(a)}function tR(t){let e=tF(),i=tV(t);return"none"!==i.transform||"none"!==i.perspective||!!i.containerType&&"normal"!==i.containerType||!e&&!!i.backdropFilter&&"none"!==i.backdropFilter||!e&&!!i.filter&&"none"!==i.filter||["transform","perspective","filter"].some(t=>(i.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(i.contain||"").includes(t))}function tF(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function tN(t){return["html","body","#document"].includes(tA(t))}function tV(t){return tC(t).getComputedStyle(t)}function tz(t){return tO(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function tK(t){if("html"===tA(t))return t;let e=t.assignedSlot||t.parentNode||tD(t)&&t.host||tM(t);return tD(e)?e.host:e}function tU(t,e,i){var s;void 0===e&&(e=[]),void 0===i&&(i=!0);let a=function t(e){let i=tK(e);return tN(i)?e.ownerDocument?e.ownerDocument.body:e.body:tL(i)&&tI(i)?i:t(i)}(t),n=a===(null==(s=t.ownerDocument)?void 0:s.body),r=tC(a);return n?e.concat(r,r.visualViewport||[],tI(a)?a:[],r.frameElement&&i?tU(r.frameElement):[]):e.concat(a,tU(a,[],i))}function tW(t){let e=tV(t),i=parseFloat(e.width)||0,s=parseFloat(e.height)||0,a=tL(t),n=a?t.offsetWidth:i,r=a?t.offsetHeight:s,l=t$(i)!==n||t$(s)!==r;return l&&(i=n,s=r),{width:i,height:s,$:l}}function tB(t){return tO(t)?t:t.contextElement}function tH(t){let e=tB(t);if(!tL(e))return tx(1);let i=e.getBoundingClientRect(),{width:s,height:a,$:n}=tW(e),r=(n?t$(i.width):i.width)/s,l=(n?t$(i.height):i.height)/a;return r&&Number.isFinite(r)||(r=1),l&&Number.isFinite(l)||(l=1),{x:r,y:l}}let tZ=tx(0);function tQ(t){let e=tC(t);return tF()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:tZ}function tJ(t,e,i,s){var a;void 0===e&&(e=!1),void 0===i&&(i=!1);let n=t.getBoundingClientRect(),r=tB(t),l=tx(1);e&&(s?tO(s)&&(l=tH(s)):l=tH(t));let h=(void 0===(a=i)&&(a=!1),s&&(!a||s===tC(r))&&a)?tQ(r):tx(0),o=(n.left+h.x)/l.x,u=(n.top+h.y)/l.y,d=n.width/l.x,c=n.height/l.y;if(r){let t=tC(r),e=s&&tO(s)?tC(s):s,i=t,a=i.frameElement;for(;a&&s&&e!==i;){let t=tH(a),e=a.getBoundingClientRect(),s=tV(a),n=e.left+(a.clientLeft+parseFloat(s.paddingLeft))*t.x,r=e.top+(a.clientTop+parseFloat(s.paddingTop))*t.y;o*=t.x,u*=t.y,d*=t.x,c*=t.y,o+=n,u+=r,a=(i=tC(a)).frameElement}}return tS({width:d,height:c,x:o,y:u})}let tG=[":popover-open",":modal"];function tY(t){return tG.some(e=>{try{return t.matches(e)}catch(t){return!1}})}function tX(t){return tJ(tM(t)).left+tz(t).scrollLeft}function t_(t,e,i){let s;if("viewport"===e)s=function(t,e){let i=tC(t),s=tM(t),a=i.visualViewport,n=s.clientWidth,r=s.clientHeight,l=0,h=0;if(a){n=a.width,r=a.height;let t=tF();(!t||t&&"fixed"===e)&&(l=a.offsetLeft,h=a.offsetTop)}return{width:n,height:r,x:l,y:h}}(t,i);else if("document"===e)s=function(t){let e=tM(t),i=tz(t),s=t.ownerDocument.body,a=tw(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),n=tw(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight),r=-i.scrollLeft+tX(t),l=-i.scrollTop;return"rtl"===tV(s).direction&&(r+=tw(e.clientWidth,s.clientWidth)-a),{width:a,height:n,x:r,y:l}}(tM(t));else if(tO(e))s=function(t,e){let i=tJ(t,!0,"fixed"===e),s=i.top+t.clientTop,a=i.left+t.clientLeft,n=tL(t)?tH(t):tx(1),r=t.clientWidth*n.x,l=t.clientHeight*n.y;return{width:r,height:l,x:a*n.x,y:s*n.y}}(e,i);else{let i=tQ(t);s={...e,x:e.x-i.x,y:e.y-i.y}}return tS(s)}function t0(t,e){return tL(t)&&"fixed"!==tV(t).position?e?e(t):t.offsetParent:null}function t1(t,e){let i=tC(t);if(!tL(t)||tY(t))return i;let s=t0(t,e);for(;s&&["table","td","th"].includes(tA(s))&&"static"===tV(s).position;)s=t0(s,e);return s&&("html"===tA(s)||"body"===tA(s)&&"static"===tV(s).position&&!tR(s))?i:s||function(t){let e=tK(t);for(;tL(e)&&!tN(e);)if(tR(e))return e;else e=tK(e);return null}(t)||i}let t2=async function(t){let e=this.getOffsetParent||t1,i=this.getDimensions;return{reference:function(t,e,i){let s=tL(e),a=tM(e),n="fixed"===i,r=tJ(t,!0,n,e),l={scrollLeft:0,scrollTop:0},h=tx(0);if(s||!s&&!n)if(("body"!==tA(e)||tI(a))&&(l=tz(e)),s){let t=tJ(e,!0,n,e);h.x=t.x+e.clientLeft,h.y=t.y+e.clientTop}else a&&(h.x=tX(a));return{x:r.left+l.scrollLeft-h.x,y:r.top+l.scrollTop-h.y,width:r.width,height:r.height}}(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await i(t.floating)}}},t3={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:i,offsetParent:s,strategy:a}=t,n="fixed"===a,r=tM(s),l=!!e&&tY(e.floating);if(s===r||l&&n)return i;let h={scrollLeft:0,scrollTop:0},o=tx(1),u=tx(0),d=tL(s);if((d||!d&&!n)&&(("body"!==tA(s)||tI(r))&&(h=tz(s)),tL(s))){let t=tJ(s);o=tH(s),u.x=t.x+s.clientLeft,u.y=t.y+s.clientTop}return{width:i.width*o.x,height:i.height*o.y,x:i.x*o.x-h.scrollLeft*o.x+u.x,y:i.y*o.y-h.scrollTop*o.y+u.y}},getDocumentElement:tM,getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:s,strategy:a}=t,n=[..."clippingAncestors"===i?function(t,e){let i=e.get(t);if(i)return i;let s=tU(t,[],!1).filter(t=>tO(t)&&"body"!==tA(t)),a=null,n="fixed"===tV(t).position,r=n?tK(t):t;for(;tO(r)&&!tN(r);){let e=tV(r),i=tR(r);i||"fixed"!==e.position||(a=null),(n?!i&&!a:!i&&"static"===e.position&&!!a&&["absolute","fixed"].includes(a.position)||tI(r)&&!i&&function t(e,i){let s=tK(e);return!(s===i||!tO(s)||tN(s))&&("fixed"===tV(s).position||t(s,i))}(t,r))?s=s.filter(t=>t!==r):a=e,r=tK(r)}return e.set(t,s),s}(e,this._c):[].concat(i),s],r=n[0],l=n.reduce((t,i)=>{let s=t_(e,i,a);return t.top=tw(s.top,t.top),t.right=ty(s.right,t.right),t.bottom=ty(s.bottom,t.bottom),t.left=tw(s.left,t.left),t},t_(e,r,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:t1,getElementRects:t2,getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){let{width:e,height:i}=tW(t);return{width:e,height:i}},getScale:tH,isElement:tO,isRTL:function(t){return"rtl"===tV(t).direction}},t5=(t,e,i)=>{let s=new Map,a={platform:t3,...i},n={...a.platform,_c:s};return tj(t,e,{...a,platform:n})};function t4(t,e,i){if(t)return(0,u.l)(t,e,i)}function t6(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}function t9(t,e){if(!(t.hasAttribute("aria-label")||t.hasAttribute("data-no-label"))){if(!(0,u.r)(e))return void(0,u.x)(t,"aria-label",e);M?i():(0,u.g)(i)}function i(){(0,u.x)(t,"aria-label",e())}}function t7(t,e,i){for(;e;)if(e===t)return!0;else if(null==i?void 0:i(e))break;else e=e.parentElement;return!1}function t8(t,e){(0,u.l)(t,"pointerup",t=>{0===t.button&&e(t)}),(0,u.l)(t,"keydown",t=>{(0,u.F)(t)&&e(t)})}function et(t){return(0,u._)(t)&&(t.touches.length>1||t.changedTouches.length>1)}function ee(t){if(M)return t();let e=(0,u.$)(),i=window.requestAnimationFrame(()=>{(0,u.G)(t,e),i=-1});return()=>void window.cancelAnimationFrame(i)}function ei(t,e,i,s){let{offsetVarName:a,xOffset:n,yOffset:r,...l}=s;if(!t)return;let h=i.replace(" ","-").replace("-center","");if((0,u.e)(t,"visibility",e?null:"hidden"),!e)return;let o=t=>i.includes("left")?"calc(-1 * ".concat(t,")"):t,d=t=>i.includes("top")?"calc(-1 * ".concat(t,")"):t;return function(t,e,i,s){let a;void 0===s&&(s={});let{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:l="function"==typeof ResizeObserver,layoutShift:h="function"==typeof IntersectionObserver,animationFrame:o=!1}=s,u=tB(t),d=n||r?[...u?tU(u):[],...tU(e)]:[];d.forEach(t=>{n&&t.addEventListener("scroll",i,{passive:!0}),r&&t.addEventListener("resize",i)});let c=u&&h?function(t,e){let i,s=null,a=tM(t);function n(){var t;clearTimeout(i),null==(t=s)||t.disconnect(),s=null}return!function r(l,h){void 0===l&&(l=!1),void 0===h&&(h=1),n();let{left:o,top:u,width:d,height:c}=t.getBoundingClientRect();if(l||e(),!d||!c)return;let p=tk(u),g=tk(a.clientWidth-(o+d)),f={rootMargin:-p+"px "+-g+"px "+-tk(a.clientHeight-(u+c))+"px "+-tk(o)+"px",threshold:tw(0,ty(1,h))||1},m=!0;function b(t){let e=t[0].intersectionRatio;if(e!==h){if(!m)return r();e?r(!1,e):i=setTimeout(()=>{r(!1,1e-7)},100)}m=!1}try{s=new IntersectionObserver(b,{...f,root:a.ownerDocument})}catch(t){s=new IntersectionObserver(b,f)}s.observe(t)}(!0),n}(u,i):null,p=-1,g=null;l&&(g=new ResizeObserver(t=>{let[s]=t;s&&s.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var t;null==(t=g)||t.observe(e)})),i()}),u&&!o&&g.observe(u),g.observe(e));let f=o?tJ(t):null;return o&&function e(){let s=tJ(t);f&&(s.x!==f.x||s.y!==f.y||s.width!==f.width||s.height!==f.height)&&i(),f=s,a=requestAnimationFrame(e)}(),i(),()=>{var t;d.forEach(t=>{n&&t.removeEventListener("scroll",i),r&&t.removeEventListener("resize",i)}),null==c||c(),null==(t=g)||t.disconnect(),g=null,o&&cancelAnimationFrame(a)}}(e,t,()=>{t5(e,t,{placement:h,...l}).then(e=>{let{x:i,y:s}=e;Object.assign(t.style,{top:"calc(".concat(s+"px"," + ").concat(d(r?r+"px":"var(--".concat(a,"-y-offset, 0px)")),")"),left:"calc(".concat(i+"px"," + ").concat(o(n?n+"px":"var(--".concat(a,"-x-offset, 0px)")),")")})})})}class es extends u.V{}class ea extends es{get hideOnMouseLeave(){let{hideControlsOnMouseLeave:t}=this.$props;return this.Ae()||t()}set hideOnMouseLeave(t){this.Ae.set(t)}get showing(){return this.$state.controlsVisible()}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.Tc(),this.Ya||this.cc(!0,t,e)}hide(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultDelay,e=arguments.length>1?arguments[1]:void 0;this.Tc(),this.Ya||this.cc(!1,t,e)}pause(t){this.Ya=!0,this.Tc(),this.cc(!0,0,t)}resume(t){this.Ya=!1,this.$state.paused()||this.cc(!1,this.defaultDelay,t)}onConnect(){(0,u.g)(this.cg.bind(this)),(0,u.g)(this.Uc.bind(this));let t=this.yb.bind(this),e=this.Ba.bind(this);this.listen("can-play",t=>this.show(0,t)),this.listen("play",t),this.listen("pause",e),this.listen("auto-play-fail",e)}cg(){let{started:t,pointer:e,paused:i}=this.$state;if(!t()||"fine"!==e())return;let s=this.hideOnMouseLeave;s&&this.Sc()||(0,u.g)(()=>{i()||this.listen("pointermove",this.Be.bind(this))}),s&&(this.listen("mouseenter",this.dg.bind(this)),this.listen("mouseleave",this.eg.bind(this)))}Uc(){let{paused:t,started:e,autoPlayError:i}=this.$state;if(t()||i()&&!e())return;let s=this.Be.bind(this);(0,u.g)(()=>{for(let t of["coarse"===this.$state.pointer()?"touchend":"pointerup","keydown"])this.listen(t,s,{passive:!1})})}yb(t){this.show(0,t),this.hide(void 0,t)}Ba(t){this.show(0,t)}dg(t){this.Sc.set(!1),this.show(0,t),this.hide(void 0,t)}eg(t){this.Sc.set(!0),this.hide(0,t)}Tc(){window.clearTimeout(this.Rc),this.Rc=-1}Be(t){if(!(t.MEDIA_GESTURE||this.Ya||et(t))){if((0,u.E)(t))if("Escape"===t.key){var e;null==(e=this.el)||e.focus(),this.xb=null}else this.xb&&(t.preventDefault(),requestAnimationFrame(()=>{var t;null==(t=this.xb)||t.focus(),this.xb=null}));this.show(0,t),this.hide(this.defaultDelay,t)}}cc(t,e,i){if(0===e)return void this.C(t,i);this.Rc=window.setTimeout(()=>{this.scope&&this.C(t&&!this.Ya,i)},e)}C(t,e){var i;this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&(null==(i=this.el)?void 0:i.contains(document.activeElement))&&(this.xb=document.activeElement,requestAnimationFrame(()=>{var t;return null==(t=this.el)?void 0:t.focus()})),this.dispatch("controls-change",{detail:t,trigger:e}))}constructor(){super(...arguments),this.Rc=-2,this.Ya=!1,this.Ae=(0,u.s)(!1),this.Sc=(0,u.s)(!1),this.xb=null,this.defaultDelay=2e3}}var en=function(t,e,i){var s=null,a=null,n=i&&i.leading,r=i&&i.trailing;null==n&&(n=!0),null==r&&(r=!n),!0==n&&(r=!1);var l=function(){s&&(clearTimeout(s),s=null)},h=function(){var i=n&&!s,l=this,h=arguments;if(a=function(){return t.apply(l,h)},s||(s=setTimeout(function(){if(s=null,r)return a()},e)),i)return i=!1,a()};return h.cancel=l,h.flush=function(){var t=a;l(),t&&t()},h};class er{async getVolume(){return this.Sk.volume}async setVolume(t){this.Sk.volume=t,this.save()}async getMuted(){return this.Sk.muted}async setMuted(t){this.Sk.muted=t,this.save()}async getTime(){return this.Sk.time}async setTime(t){this.Sk.time=t,this.saveTime()}async getLang(){return this.Sk.lang}async setLang(t){this.Sk.lang=t,this.save()}async getCaptions(){return this.Sk.captions}async setCaptions(t){this.Sk.captions=t,this.save()}async getPlaybackRate(){return this.Sk.rate}async setPlaybackRate(t){this.Sk.rate=t,this.save()}async getVideoQuality(){return this.Sk.quality}async setVideoQuality(t){this.Sk.quality=t,this.save()}onChange(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vds-player",s=i?localStorage.getItem(i):null,a=e?localStorage.getItem(e):null;this.playerId=i,this.mediaId=e,this.Sk={volume:null,muted:null,lang:null,captions:null,rate:null,quality:null,...s?JSON.parse(s):{},time:a?+a:null}}save(){if(M||!this.playerId)return;let t=JSON.stringify({...this.Sk,time:void 0});localStorage.setItem(this.playerId,t)}constructor(){this.playerId="vds-player",this.mediaId=null,this.Sk={volume:null,muted:null,time:null,lang:null,captions:null,rate:null,quality:null},this.saveTime=en(()=>{var t;if(M||!this.mediaId)return;let e=(null!=(t=this.Sk.time)?t:0).toString();localStorage.setItem(this.mediaId,e)},1e3)}}class el{canRender(t,e){return!!e}attach(t){this.m=t,t&&(t.textTracks.onchange=this.C.bind(this))}addTrack(t){this.zb.add(t),this.fg(t)}removeTrack(t){var e,i;null==(i=t[ts.U])||null==(e=i.remove)||e.call(i),t[ts.U]=null,this.zb.delete(t)}changeTrack(t){let e=null==t?void 0:t[ts.U];e&&"showing"!==e.track.mode&&(e.track.mode="showing"),this.A=t}setDisplay(t){this.Ce=t,this.C()}detach(){for(let t of(this.m&&(this.m.textTracks.onchange=null),this.zb))this.removeTrack(t);this.zb.clear(),this.m=null,this.A=null}fg(t){var e,i;if(!this.m)return;let s=null!=(i=t[e=ts.U])?i:t[e]=this.gg(t);s instanceof HTMLElement&&(this.m.append(s),s.track.mode=s.default?"showing":"hidden")}gg(t){let e=document.createElement("track"),i=t.default||"showing"===t.mode,s=t.src&&"vtt"===t.type;return e.id=t.id,e.src=s?t.src:"https://cdn.jsdelivr.net/npm/vidstack@next/empty.vtt",e.label=t.label,e.kind=t.kind,e.default=i,t.language&&(e.srclang=t.language),i&&!s&&this.De(t,e.track),e}De(t,e){var i;if((!t.src||"vtt"!==t.type)&&(null==(i=e.cues)||!i.length))for(let i of t.cues)e.addCue(i)}C(t){for(let i of this.zb){var e;let s=null==(e=i[ts.U])?void 0:e.track;if(!s)continue;if(!this.Ce){s.mode="disabled";continue}let a="showing"===s.mode;a&&this.De(i,s),i.setMode(a?"showing":"disabled",t)}}constructor(){this.priority=0,this.Ce=!0,this.m=null,this.A=null,this.zb=new Set}}class eh{Wc(){let{$state:t,$iosControls:e}=this.a;this.Ee=t.controls()||e(),this.fa()}add(t){this.dc.push(t),this.fa()}remove(t){t.detach(),this.dc.splice(this.dc.indexOf(t),1),this.fa()}Ge(t){requestAnimationFrame(()=>{if(this.m=t,t)for(let e of(this.ca=new el,this.ca.attach(t),this.Vc))this.He(e);this.fa()})}He(t){var e;th(t)&&(null==(e=this.ca)||e.addTrack(t))}ig(t){var e;th(t)&&(null==(e=this.ca)||e.removeTrack(t))}Xc(t){this.He(t.detail)}hg(t){this.ig(t.detail)}fa(){var t,e,i,s,a,n,r;let l=this.Vc.selected;if(this.m&&(this.Ee||(null==l?void 0:l[ts.ue]))){null==(i=this.Ca)||i.changeTrack(null),null==(s=this.ca)||s.setDisplay(!0),null==(a=this.ca)||a.changeTrack(l);return}if(null==(t=this.ca)||t.setDisplay(!1),null==(e=this.ca)||e.changeTrack(null),!l){null==(n=this.Ca)||n.changeTrack(null);return}let h=this.dc.sort((t,e)=>t.priority-e.priority).find(t=>t.canRender(l,this.m));this.Ca!==h&&(null==(r=this.Ca)||r.detach(),null==h||h.attach(this.m),this.Ca=null!=h?h:null),null==h||h.changeTrack(l)}Fe(){var t,e;null==(t=this.ca)||t.detach(),this.ca=null,null==(e=this.Ca)||e.detach(),this.Ca=null}constructor(t){this.a=t,this.m=null,this.dc=[],this.Ee=!1,this.ca=null,this.Ca=null;let e=t.textTracks;this.Vc=e,(0,u.g)(this.Wc.bind(this)),(0,u.v)(this.Fe.bind(this)),(0,u.l)(e,"add",this.Xc.bind(this)),(0,u.l)(e,"remove",this.hg.bind(this)),(0,u.l)(e,"mode-change",this.fa.bind(this))}}var eo=function(t,e,i){var s=null,a=null,n=function(){s&&(clearTimeout(s),a=null,s=null)},r=function(){if(!e)return t.apply(this,arguments);var r=this,l=arguments,h=i&&!s;if(n(),a=function(){t.apply(r,l)},s=setTimeout(function(){if(s=null,!h){var t=a;return a=null,t()}},e),h)return a()};return r.cancel=n,r.flush=function(){var t=a;n(),t&&t()},r};class eu extends y{get selected(){let t=this.s.find(t=>"showing"===t.mode&&th(t));return null!=t?t:null}get preferredLang(){return this.Tk}set preferredLang(t){this.Tk=t,this.Um(t)}add(t,e){let i=t instanceof tr?t:new tr(t),s="captions"===t.kind||"subtitles"===t.kind?"captions":t.kind;return this.ec[s]&&t.default&&delete t.default,i.addEventListener("mode-change",this.Ke),this[v.pa](i,e),i[ts.Vk]=this[ts.Vk],this.Q&&i[ts.Q](),t.default&&(this.ec[s]=i),this.Vm(),this}remove(t,e){if(this.s.includes(t))return t===this.ec[t.kind]&&delete this.ec[t.kind],t.mode="disabled",t[ts.Va]=null,t.removeEventListener("mode-change",this.Ke),this[v.Zb](t,e),this}clear(t){for(let e of[...this.s])this.remove(e,t);return this}getById(t){var e;return null!=(e=this.s.find(e=>e.id===t))?e:null}getByKind(t){let e=Array.isArray(t)?t:[t];return this.s.filter(t=>e.includes(t.kind))}[ts.Q](){if(!this.Q){for(let t of this.s)t[ts.Q]();this.Q=!0,this.Vm()}}jg(t){let e=t.detail;if(this.Uk&&th(e)&&"disabled"!==e.mode&&this.Wm(e),"showing"===e.mode){let t=th(e)?["captions","subtitles"]:[e.kind];for(let i of this.s)"showing"===i.mode&&i!=e&&t.includes(i.kind)&&(i.mode="disabled")}this.dispatchEvent(new u.D("mode-change",{detail:t.detail,trigger:t}))}Wm(t){var e,i;this.Um(t.language),null==(i=this.Uk)||null==(e=i.setCaptions)||e.call(i,"showing"===t.mode)}Um(t){var e,i;null==(i=this.Uk)||null==(e=i.setLang)||e.call(i,this.Tk=t)}setStorage(t){this.Uk=t}constructor(){super(),this.Q=!1,this.ec={},this.Uk=null,this.Tk=null,this.Vm=eo(async()=>{var t;if(!this.Q)return;!this.Tk&&this.Uk&&(this.Tk=await this.Uk.getLang());let e=await (null==(t=this.Uk)?void 0:t.getCaptions());for(let t of[["captions","subtitles"],"chapters","descriptions","metadata"]){let i=this.getByKind(t);if(i.find(t=>"showing"===t.mode))continue;let s=this.Tk?i.find(t=>t.language===this.Tk):null,a=(0,u.m)(t)?this.ec[t.find(t=>this.ec[t])||""]:this.ec[t],n=null!=s?s:a,r=n&&th(n);n&&(!r||!1!==e)&&(n.mode="showing",r&&this.Wm(n))}},300),this.Ke=this.jg.bind(this)}}let ed=Symbol(0);class ec extends y{get selected(){var t;return null!=(t=this.s.find(t=>t.selected))?t:null}get selectedIndex(){return this.s.findIndex(t=>t.selected)}[v.pe](t,e){this[v.qa](t,!1,e)}[v.pa](t,e){t[ed]=!1,Object.defineProperty(t,"selected",{get(){return this[ed]},set:e=>{var i;this.readonly||(null==(i=this[v.qe])||i.call(this),this[v.qa](t,e))}}),super[v.pa](t,e)}[v.qa](t,e,i){if(e===(null==t?void 0:t[ed]))return;let s=this.selected;t&&(t[ed]=e),(e?s!==t:s===t)&&(s&&(s[ed]=!1),this.dispatchEvent(new u.D("change",{detail:{prev:s,current:this.selected},trigger:i})))}}class ep extends ec{getById(t){var e;return""===t?null:null!=(e=this.s.find(e=>e.id===t))?e:null}}let eg={Za:Symbol(0),_a:Symbol(0)};class ef extends ec{get auto(){return this.gc||this.readonly}[v.qe](){this[eg.Za](!1)}[v.oe](t){this[eg.Za](!1,t)}autoSelect(t){var e;this.readonly||this.gc||!this[eg._a]||(null==(e=this[eg._a])||e.call(this),this[eg.Za](!0,t))}[eg.Za](t,e){this.gc!==t&&(this.gc=t,this.dispatchEvent(new u.D("auto-change",{detail:t,trigger:e})))}constructor(){super(...arguments),this.gc=!1,this.switch="current"}}function em(t){return(null==t?void 0:t.$$PROVIDER_TYPE)==="HLS"}let eb=new Set(["Shift","Alt","Meta","Control"]),ev='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class ey extends es{onConnect(){(0,u.g)(this.ng.bind(this))}ng(){let{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;let i="player"===e()?this.el:document,s=(0,u.s)(!1);i===this.el?(this.listen("focusin",()=>s.set(!0)),this.listen("focusout",t=>{this.el.contains(t.target)||s.set(!1)})):((0,u.p)(s)||s.set(document.querySelector("[data-media-player]")===this.el),(0,u.l)(document,"focusin",t=>{let e=t.composedPath().find(t=>t instanceof Element&&"media-player"===t.localName);void 0!==e&&s.set(this.el===e)})),(0,u.g)(()=>{s()&&((0,u.l)(i,"keyup",this.Ab.bind(this)),(0,u.l)(i,"keydown",this.Bb.bind(this)),(0,u.l)(i,"keydown",this.og.bind(this),{capture:!0}))})}Ab(t){let e=document.activeElement;if(!t.key||!this.$state.canSeek()||(null==e?void 0:e.matches(ev)))return;let{method:i,value:s}=this._c(t);if(!(0,u.j)(s)&&!(0,u.m)(s)){var a,n;null==s||null==(a=s.onKeyUp)||a.call(s,{event:t,player:this.a.player,remote:this.a.remote}),null==s||null==(n=s.callback)||n.call(s,t,this.a.remote);return}if((null==i?void 0:i.startsWith("seek"))&&(t.preventDefault(),t.stopPropagation(),this.$a?(this.Oe(t,"seekForward"===i),this.$a=null):(this.a.remote.seek(this.hc,t),this.hc=void 0)),null==i?void 0:i.startsWith("volume")){let e=this.el.querySelector("[data-media-volume-slider]");null==e||e.dispatchEvent(new KeyboardEvent("keyup",{key:"volumeUp"===i?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}}Bb(t){var e,i,s,a;if(!t.key||eb.has(t.key))return;let n=document.activeElement;if((null==n?void 0:n.matches(ev))||(0,u.F)(t)&&(null==n?void 0:n.matches('button, [role="button"]')))return;let{method:r,value:l}=this._c(t),h=!t.metaKey&&/^[0-9]$/.test(t.key);if(!(0,u.j)(l)&&!(0,u.m)(l)&&!h){null==l||null==(e=l.onKeyDown)||e.call(l,{event:t,player:this.a.player,remote:this.a.remote}),null==l||null==(i=l.callback)||i.call(l,t,this.a.remote);return}if(!r&&h){t.preventDefault(),t.stopPropagation(),this.a.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(r){switch(t.preventDefault(),t.stopPropagation(),r){case"seekForward":case"seekBackward":this.ra(t,r,"seekForward"===r);break;case"volumeUp":case"volumeDown":let e=this.el.querySelector("[data-media-volume-slider]");if(e)e.dispatchEvent(new KeyboardEvent("keydown",{key:"volumeUp"===r?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{let e=t.shiftKey?.1:.05;this.a.remote.changeVolume(this.$state.volume()+("volumeUp"===r?+e:-e),t)}break;case"toggleFullscreen":this.a.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":let i=this.$state.playbackRate();this.a.remote.changePlaybackRate(Math.max(.25,Math.min(2,i+("speedUp"===r?.25:-.25))),t);break;default:null==(s=(a=this.a.remote)[r])||s.call(a,t)}this.$state.lastKeyboardAction.set({action:r,event:t})}}og(t){var e,i;i=e=t.target,(!M&&i instanceof HTMLAudioElement||!M&&e instanceof HTMLVideoElement)&&this._c(t).method&&t.preventDefault()}_c(t){let e={...this.$props.keyShortcuts(),...this.a.ariaKeys},i=Object.keys(e).find(i=>{var s;let a=e[i],n=(0,u.m)(a)?a.join(" "):(0,u.j)(a)?a:null==a?void 0:a.keys;return null==(s=(0,u.m)(n)?n:null==n?void 0:n.split(" "))?void 0:s.some(e=>e.replace(/Shift\+(\d)/g,(t,e)=>ew[e-1]).replace(/Control/g,"Ctrl").split("+").every(e=>eb.has(e)?t[e.toLowerCase()+"Key"]:t.key===e.replace("Space"," ")))});return{method:i,value:i?e[i]:null}}pg(t,e){var i;let s=t.shiftKey?10:5;return this.hc=Math.max(0,Math.min((null!=(i=this.hc)?i:this.$state.currentTime())+("seekForward"===e?+s:-s),this.$state.duration()))}Oe(t,e){var i;null==(i=this.$a)||i.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}ra(t,e,i){this.$state.canSeek()&&(this.$a||(this.$a=this.el.querySelector("[data-media-time-slider]")),this.$a?this.Oe(t,i):this.a.remote.seeking(this.pg(t,e),t))}constructor(t){super(),this.a=t,this.$a=null}}let ew=["!","@","#","$","%","^","&","*","(",")"];class e$ extends u.V{onAttach(t){let{$props:e,ariaKeys:i}=tb(),s=t.getAttribute("aria-keyshortcuts");if(s){i[this.$c]=s,M||(0,u.v)(()=>{delete i[this.$c]});return}let a=e.keyShortcuts()[this.$c];if(a){let e=(0,u.m)(a)?a.join(" "):(0,u.j)(a)?a:null==a?void 0:a.keys;t.setAttribute("aria-keyshortcuts",(0,u.m)(e)?e.join(" "):e)}}constructor(t){super(),this.$c=t}}let ek=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,ex=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp4","audio/webm","audio/flac"]),eT=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,eP=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),eS=/\.(m3u8)($|\?)/i,eE=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]);function ej(t){let{src:e,type:i}=t;return(0,u.j)(e)?ek.test(e)||ex.has(i)||e.startsWith("blob:")&&"audio/object"===i:"audio/object"===i}function eA(t){return(0,u.j)(t.src)?eT.test(t.src)||eP.has(t.type)||t.src.startsWith("blob:")&&"video/object"===t.type||eC(t)&&(M||F()):"video/object"===t.type}function eC(t){let{src:e,type:i}=t;return(0,u.j)(e)&&eS.test(e)||eE.has(i)}function eM(t){return(0,u.j)(t.src)&&(ej(t)||eA(t)||eC(t))}function eq(t){return!M&&void 0!==window.MediaStream&&t instanceof window.MediaStream}class eO{canPlay(t){var e,i;return!!ej(t)&&(M||!(0,u.j)(t.src)||"?"===t.type||(e=this.target,i=t.type,!M&&(e||(e=document.createElement("audio")),e.canPlayType(i).length>0)))}mediaType(){return"audio"}async load(t){if(M)throw Error("[vidstack] can not load audio provider server-side");return new(await i.e(4829).then(i.bind(i,84829))).AudioProvider(this.target,t)}constructor(){this.name="audio"}}class eL{canPlay(t){var e,i;return!!eA(t)&&(M||!(0,u.j)(t.src)||"?"===t.type||(e=this.target,i=t.type,!M&&(e||(e=document.createElement("video")),e.canPlayType(i).length>0)))}mediaType(){return"video"}async load(t){if(M)throw Error("[vidstack] can not load video provider server-side");return new(await i.e(4250).then(i.bind(i,64250))).VideoProvider(this.target,t)}constructor(){this.name="video"}}let eD=class t extends eL{canPlay(e){return t.supported&&eC(e)}async load(t){if(M)throw Error("[vidstack] can not load hls provider server-side");return new(await i.e(618).then(i.bind(i,50618))).HLSProvider(this.target,t)}constructor(){super(...arguments),this.name="hls"}};eD.supported=K();class eI{preconnect(){for(let t of["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"])Q(t)}canPlay(t){return(0,u.j)(t.src)&&"video/vimeo"===t.type}mediaType(){return"video"}async load(t){if(M)throw Error("[vidstack] can not load vimeo provider server-side");return new(await i.e(1051).then(i.bind(i,71051))).VimeoProvider(this.target,t)}async loadPoster(t,e,s){let{resolveVimeoVideoId:a,getVimeoVideoInfo:n}=await i.e(2159).then(i.bind(i,62159));if(!(0,u.j)(t.src))return null;let{videoId:r}=a(t.src);return r?n(r,s).then(t=>t?t.poster:null):null}constructor(){this.name="vimeo"}}class eR{preconnect(){for(let t of["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"])Q(t)}canPlay(t){return(0,u.j)(t.src)&&"video/youtube"===t.type}mediaType(){return"video"}async load(t){if(M)throw Error("[vidstack] can not load youtube provider server-side");return new(await i.e(7819).then(i.bind(i,37819))).YouTubeProvider(this.target,t)}async loadPoster(t,e,s){let{findYouTubePoster:a,resolveYouTubeVideoId:n}=await i.e(3676).then(i.bind(i,13676)),r=(0,u.j)(t.src)&&n(t.src);return r?a(r,s):null}constructor(){this.name="youtube"}}let eF=Symbol(0),eN=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"];class eV extends es{async onAttach(t){if(M)return;let e=this.$props[this.wb]();if("eager"===e)requestAnimationFrame(this.Da);else if("idle"===e)(0,u.a0)(this.Da);else if("visible"===e){let e,i=new IntersectionObserver(t=>{this.scope&&t[0].isIntersecting&&(null==e||e(),e=void 0,this.Da())});i.observe(t),e=(0,u.v)(()=>i.disconnect())}}constructor(t,e){super(),this.wb=t,this.Da=e}}class ez{async kc(t,e){if(!M)return(0,u.z)(async()=>{var i,s,a,n,r,l,h,o,d,c,p,g,f;this.a;let{autoPlay:m,canPlay:b,started:v,duration:y,seekable:w,buffered:$,remotePlaybackInfo:k,playsInline:x}=this.a.$state;if(b())return;let T={duration:null!=(r=null==t?void 0:t.duration)?r:y(),seekable:null!=(l=null==t?void 0:t.seekable)?l:w(),buffered:null!=(h=null==t?void 0:t.buffered)?h:$(),provider:this.a.$provider()};this.c("can-play",T,e),(0,u.y)();let P=this.a.$provider(),{storage:S,qualities:E}=this.a,{muted:j,volume:A,clipStartTime:C,playbackRate:M}=this.a.$props,q=null==(s=k())||null==(i=s.savedState)?void 0:i.currentTime,O=(null==(n=k())||null==(a=n.savedState)?void 0:a.paused)===!1,L=null!=(o=null!=q?q:await (null==S?void 0:S.getTime()))?o:C(),D=O||m();P&&(P.setVolume(null!=(p=await (null==S?void 0:S.getVolume()))?p:A()),P.setMuted(null!=(g=await (null==S?void 0:S.getMuted()))?g:j()),null==(d=P.setPlaybackRate)||d.call(P,null!=(f=await (null==S?void 0:S.getPlaybackRate()))?f:M()),null==(c=P.setPlaysInline)||c.call(P,x()),L>0&&P.setCurrentTime(L));let I=await (null==S?void 0:S.getVideoQuality());if(I&&E.length){let t=null,e=1/0;for(let i of E){let s=Math.abs(I.width-i.width)+Math.abs(I.height-i.height)+(I.bitrate?Math.abs(I.bitrate-i.bitrate):0);s<e&&(t=i,e=s)}t&&(t.selected=!0)}b()&&D&&!v()&&await this.ph(e),k.set(null)})}async ph(t){let{player:e,$state:{autoPlaying:i,muted:s}}=this.a;i.set(!0);let a=new u.D("auto-play-attempt",{trigger:t});try{await e.play(a)}catch(t){}}constructor(t,e){var i=this;this.Y=t,this.a=e,this.c=function(t){for(var e=arguments.length,s=Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];M||i.Y(new u.D(t,{detail:null==s?void 0:s[0],trigger:null==s?void 0:s[1]}))}}}class eK{k(t,e){this.e.set(t,e)}ud(t){let e=this.dl(t);return this.e.delete(t),e}dl(t){return this.e.get(t)}rc(t){this.e.delete(t)}Jm(){this.e.clear()}constructor(){this.e=new Map}}class eU{get qh(){return this.e.size}get Sj(){return this.Nb}async Tj(){this.Nb||await this.Fd.promise}k(t,e){if(this.Nb)return void e();this.e.delete(t),this.e.set(t,e)}ud(t){var e;null==(e=this.e.get(t))||e(),this.e.delete(t)}Cb(){this.kf(),this.Nb=!0,this.e.size>0&&this.kf()}sa(){this.Nb=!1}I(){this.sa(),this.e.clear(),this.lf()}kf(){for(let t of this.e.keys())this.ud(t);this.lf()}lf(){this.Fd.resolve(),this.Fd=(0,u.k)()}constructor(){this.Nb=!1,this.Fd=(0,u.k)(),this.e=new Map}}function eW(t){return t instanceof Error?t:Error(JSON.stringify(t))}function eB(t,e){if(!t)throw Error(e||"Assertion failed.")}class eH extends es{onAttach(){this.listen("fullscreen-change",this.Pc.bind(this))}onConnect(){let t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e=this.rh.bind(this);for(let i of t)i.startsWith("media-")&&this.listen(i,e);this.pl(),(0,u.g)(this.Kk.bind(this)),(0,u.g)(this.sh.bind(this)),(0,u.g)(this.ql.bind(this)),(0,u.g)(this.zm.bind(this)),(0,u.g)(this.th.bind(this)),(0,u.g)(this.uh.bind(this))}onDestroy(){this.Jk.I()}pl(){let{load:t}=this.$props,{canLoad:e}=this.$state;if("play"!==t()||e())return;let i=this.listen("media-play-request",t=>{this.fl(t),i()})}Kk(){let t=this.Ik(),e=this.$state.canPlay();return t&&e&&this.Jk.Cb(),()=>{this.Jk.sa()}}rh(t){t.stopPropagation(),!t.defaultPrevented&&this[t.type]&&((0,u.p)(this.Ik)?this[t.type](t):this.Jk.k(t.type,()=>{(0,u.p)(this.Ik)&&this[t.type](t)}))}async tc(t){if(M)return;let{canPlay:e,paused:i,autoPlaying:s}=this.$state;if(!this.fl(t)&&(0,u.p)(i)){t&&this.f.e.k("media-play-request",t);try{let t=(0,u.p)(this.Ik);return eZ(t,(0,u.p)(e)),await t.play()}catch(i){let e=this.createEvent("play-fail",{detail:eW(i),trigger:t});throw e.autoPlay=s(),this.ha.Y(e),i}}}fl(t){let{load:e}=this.$props,{canLoad:i}=this.$state;if("play"===e()&&!i()){let e=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(e),this.Jk.k("media-play-request",async()=>{try{await this.tc(e)}catch(t){}}),!0}return!1}async vd(t){if(M)return;let{canPlay:e,paused:i}=this.$state;if(!(0,u.p)(i)){t&&this.f.e.k("media-pause-request",t);try{let t=(0,u.p)(this.Ik);return eZ(t,(0,u.p)(e)),await t.pause()}catch(t){throw this.f.e.rc("media-pause-request"),t}}}_e(t){var e;if(M)return;let{canPlay:i,live:s,liveEdge:a,canSeek:n,liveSyncPosition:r,seekableEnd:l,userBehindLiveEdge:h}=this.$state;if(h.set(!1),(0,u.p)(()=>!s()||a()||!n()))return;let o=(0,u.p)(this.Ik);eZ(o,(0,u.p)(i)),t&&this.f.e.k("media-seek-request",t);let d=l()-2;o.setCurrentTime(Math.min(d,null!=(e=r())?e:d))}async $e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"prefer-media",e=arguments.length>1?arguments[1]:void 0;if(M)return;let i=this.af(t);if(eQ(t,i),!i.active)return(0,u.p)(this.$state.pictureInPicture)&&(this.wd=!0,await this.xd(e)),e&&this.f.e.k("media-enter-fullscreen-request",e),i.enter()}async bf(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"prefer-media",e=arguments.length>1?arguments[1]:void 0;if(M)return;let i=this.af(t);if(eQ(t,i),i.active){e&&this.f.e.k("media-exit-fullscreen-request",e);try{let t=await i.exit();return this.wd&&(0,u.p)(this.$state.canPictureInPicture)&&await this.yd(),t}finally{this.wd=!1}}}af(t){let e=(0,u.p)(this.Ik);return"prefer-media"===t&&this.sc.supported||"media"===t?this.sc:null==e?void 0:e.fullscreen}async yd(t){if(!M&&(this.cf(),!this.$state.pictureInPicture()))return t&&this.f.e.k("media-enter-pip-request",t),await this.Ik().pictureInPicture.enter()}async xd(t){if(!M&&(this.cf(),this.$state.pictureInPicture()))return t&&this.f.e.k("media-exit-pip-request",t),await this.Ik().pictureInPicture.exit()}cf(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}sh(){this.Jb.defaultDelay=this.$props.controlsDelay()}ql(){var t,e;let{canAirPlay:i}=this.$state,s=!!(null==(e=this.Ik())||null==(t=e.airPlay)?void 0:t.supported);i.set(s)}zm(){let{canGoogleCast:t,source:e}=this.$state,i=D&&!O&&eM(e());t.set(i)}th(){var t,e;let{canFullscreen:i}=this.$state,s=this.sc.supported||!!(null==(e=this.Ik())||null==(t=e.fullscreen)?void 0:t.supported);i.set(s)}uh(){var t,e;let{canPictureInPicture:i}=this.$state,s=!!(null==(e=this.Ik())||null==(t=e.pictureInPicture)?void 0:t.supported);i.set(s)}async "media-airplay-request"(t){try{await this.am(t)}catch(t){}}async am(t){try{var e;let i=null==(e=this.Ik())?void 0:e.airPlay;if(!(null==i?void 0:i.supported))throw Error("No AirPlay adapter.");return t&&this.f.e.k("media-airplay-request",t),await i.prompt()}catch(t){throw this.f.e.rc("media-airplay-request"),t}}async "media-google-cast-request"(t){try{await this.bm(t)}catch(t){}}async bm(t){try{let{canGoogleCast:e}=this.$state;if(!(0,u.p)(e))throw Error("Cast not available.");if(Q("https://www.gstatic.com"),!this.Jl){let t=await i.e(3926).then(i.bind(i,33926)).then(function(t){return t.d});this.Jl=new t.GoogleCastLoader}await this.Jl.prompt(this.a),t&&this.f.e.k("media-google-cast-request",t);let s="disconnected"!==(0,u.p)(this.$state.remotePlaybackState);s&&this.$state.remotePlaybackInfo.set(t=>({...t,savedState:{paused:(0,u.p)(this.$state.paused),currentTime:(0,u.p)(this.$state.currentTime)}})),this.$state.remotePlaybackLoader.set(s?this.Jl:null)}catch(t){throw this.f.e.rc("media-google-cast-request"),t}}"media-audio-track-change-request"(t){let{logger:e,audioTracks:i}=this.a;if(i.readonly)return;let s=i[t.detail];if(s){let e=t.type;this.f.e.k(e,t),s.selected=!0}}async "media-enter-fullscreen-request"(t){try{await this.$e(t.detail,t)}catch(e){this.$b(e,t)}}async "media-exit-fullscreen-request"(t){try{await this.bf(t.detail,t)}catch(e){this.$b(e,t)}}async Pc(t){let e=(0,u.p)(this.$props.fullscreenOrientation),i=t.detail;if(!(0,u.i)(e)&&this.ua.supported)if(i){if(this.ua.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.ua.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}$b(t,e){this.ha.Y(this.createEvent("fullscreen-error",{detail:eW(t)}))}async "media-orientation-lock-request"(t){let e=t.type;try{this.f.e.k(e,t),await this.ua.lock(t.detail)}catch(t){this.f.e.rc(e)}}async "media-orientation-unlock-request"(t){let e=t.type;try{this.f.e.k(e,t),await this.ua.unlock()}catch(t){this.f.e.rc(e)}}async "media-enter-pip-request"(t){try{await this.yd(t)}catch(e){this.df(e,t)}}async "media-exit-pip-request"(t){try{await this.xd(t)}catch(e){this.df(e,t)}}df(t,e){this.ha.Y(this.createEvent("picture-in-picture-error",{detail:eW(t)}))}"media-live-edge-request"(t){let{live:e,liveEdge:i,canSeek:s}=this.$state;if(!(!e()||i())&&s()){this.f.e.k("media-seek-request",t);try{this._e()}catch(t){this.f.e.rc("media-seek-request")}}}async "media-loop-request"(t){try{this.f.Ia=!0,this.f.hb=!0,await this.tc(t)}catch(t){this.f.Ia=!1}}async "media-pause-request"(t){if(!this.$state.paused())try{await this.vd(t)}catch(t){}}async "media-play-request"(t){if(this.$state.paused())try{await this.tc(t)}catch(t){}}"media-rate-change-request"(t){let{playbackRate:e,canSetPlaybackRate:i}=this.$state;if(e()===t.detail||!i())return;let s=this.Ik();(null==s?void 0:s.setPlaybackRate)&&(this.f.e.k("media-rate-change-request",t),s.setPlaybackRate(t.detail))}"media-quality-change-request"(t){var e,i;let{qualities:s,storage:a,logger:n}=this.a;if(s.readonly)return;this.f.e.k("media-quality-change-request",t);let r=t.detail;if(r<0)s.autoSelect(t),t.isOriginTrusted&&(null==a||null==(e=a.setVideoQuality)||e.call(a,null));else{let e=s[r];e&&(e.selected=!0,t.isOriginTrusted&&(null==a||null==(i=a.setVideoQuality)||i.call(a,{id:e.id,width:e.width,height:e.height,bitrate:e.bitrate})))}}"media-pause-controls-request"(t){let e=t.type;this.f.e.k(e,t),this.Jb.pause(t)}"media-resume-controls-request"(t){let e=t.type;this.f.e.k(e,t),this.Jb.resume(t)}"media-seek-request"(t){let{seekableStart:e,seekableEnd:i,ended:s,canSeek:a,live:n,userBehindLiveEdge:r,clipStartTime:l}=this.$state;s()&&(this.f.hb=!0);let h=t.type;this.f.ra=!1,this.f.e.rc(h);let o=Math.min(Math.max(e()+.1,t.detail+l()),i()-.1);Number.isFinite(o)&&a()&&(this.f.e.k(h,t),this.Ik().setCurrentTime(o),n()&&t.isOriginTrusted&&Math.abs(i()-o)>=2&&r.set(!0))}"media-seeking-request"(t){let e=t.type;this.f.e.k(e,t),this.$state.seeking.set(!0),this.f.ra=!0}"media-start-loading"(t){if(this.$state.canLoad())return;let e=t.type;this.f.e.k(e,t),this.ha.Y(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;let e=t.type;this.f.e.k(e,t),this.ha.Y(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){let{index:e,mode:i}=t.detail,s=this.a.textTracks[e];if(s){let e=t.type;this.f.e.k(e,t),s.setMode(i,t)}}"media-mute-request"(t){if(this.$state.muted())return;let e=t.type;this.f.e.k(e,t),this.Ik().setMuted(!0)}"media-unmute-request"(t){let{muted:e,volume:i}=this.$state;if(!e())return;let s=t.type;this.f.e.k(s,t),this.a.$provider().setMuted(!1),0===i()&&(this.f.e.k(s,t),this.Ik().setVolume(.25))}"media-volume-change-request"(t){let{muted:e,volume:i}=this.$state,s=t.detail;if(i()===s)return;let a=t.type;this.f.e.k(a,t),this.Ik().setVolume(s),s>0&&e()&&(this.f.e.k(a,t),this.Ik().setMuted(!1))}Dl(t,e,i){}constructor(t,e,i){super(),this.ha=t,this.f=e,this.a=i,this.Jk=new eU,this.wd=!1,this.Ik=i.$provider,this.Jb=new ea,this.sc=new j,this.ua=new U}}function eZ(t,e){if(!t||!e)throw Error("[vidstack] media not ready")}function eQ(t,e){if(null==e||!e.supported)throw Error("[vidstack] no fullscreen support")}class eJ{constructor(){this.ra=!1,this.Ia=!1,this.hb=!1,this.e=new eK}}let eG=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class eY extends es{onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){(0,u.g)(this.Am.bind(this)),this.vh(),this.wh(),this.xh(),this.yh(),(0,u.v)(this.zh.bind(this))}Y(t){var e;if(!this.scope)return;let i=t.type;null==(e=this[t.type])||e.call(this,t),M||(eG.has(i)&&this.p.set(i,t),this.dispatch(t))}yh(){this.Kb&&(requestAnimationFrame(()=>{this.scope&&this.a.remote.play(new u.D("dom-connect"))}),this.Kb=!1)}zh(){var t;this.Kb||(this.Kb=!this.a.$state.paused(),null==(t=this.a.$provider())||t.pause())}jb(){this.ef(),this.Yk=!1,this.f.hb=!1,this.f.Ia=!1,this.uc=!1,this.ib=void 0,this.p.clear()}G(t,e){let i=this.f.e.ud(t);i&&(e.request=i,e.triggers.add(i))}vh(){this.zd(),this.ff();let t=this.a.textTracks;(0,u.l)(t,"add",this.zd.bind(this)),(0,u.l)(t,"remove",this.zd.bind(this)),(0,u.l)(t,"mode-change",this.ff.bind(this))}wh(){let t=this.a.qualities;(0,u.l)(t,"add",this.qc.bind(this)),(0,u.l)(t,"remove",this.qc.bind(this)),(0,u.l)(t,"change",this.gb.bind(this)),(0,u.l)(t,"auto-change",this.Ah.bind(this)),(0,u.l)(t,"readonly-change",this.Bh.bind(this))}xh(){let t=this.a.audioTracks;(0,u.l)(t,"add",this.gf.bind(this)),(0,u.l)(t,"remove",this.gf.bind(this)),(0,u.l)(t,"change",this.Ch.bind(this))}zd(t){let{textTracks:e}=this.$state;e.set(this.a.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}ff(t){t&&this.G("media-text-track-change-request",t);let e=this.a.textTracks.selected,{textTrack:i}=this.$state;i()!==e&&(i.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}gf(t){let{audioTracks:e}=this.$state;e.set(this.a.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}Ch(t){let{audioTrack:e}=this.$state;e.set(this.a.audioTracks.selected),t&&this.G("media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}qc(t){let{qualities:e}=this.$state;e.set(this.a.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}gb(t){let{quality:e}=this.$state;e.set(this.a.qualities.selected),t&&this.G("media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})}Ah(){this.$state.autoQuality.set(this.a.qualities.auto)}Bh(){this.$state.canSetQuality.set(!this.a.qualities.readonly)}Am(){let{canSetVolume:t,isGoogleCastConnected:e}=this.$state;if(e())return void t.set(!1);z().then(t.set)}"provider-change"(t){var e,i;let s=this.a.$provider(),a=t.detail;(null==s?void 0:s.type)!==(null==a?void 0:a.type)&&(null==s||null==(e=s.destroy)||e.call(s),null==s||null==(i=s.scope)||i.dispose(),this.a.$provider.set(t.detail),s&&null===t.detail&&this.hf(t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),this.jb()}"can-load"(t){this.$state.canLoad.set(!0),this.p.set("can-load",t),this.a.textTracks[ts.Q](),this.G("media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),this.p.set("can-load-poster",t),this.G("media-poster-start-loading",t)}"media-type-change"(t){let e=this.p.get("source-change");e&&t.triggers.add(e);let i=this.$state.viewType();this.$state.mediaType.set(t.detail);let s=this.$state.providedViewType(),a="unknown"===s?t.detail:s;i!==a&&(M?this.$state.inferredViewType.set(a):setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:a,trigger:t}))})},0))}"stream-type-change"(t){let e=this.p.get("source-change");e&&t.triggers.add(e);let{streamType:i,inferredStreamType:s}=this.$state;s.set(t.detail),t.detail=i()}"rate-change"(t){let{storage:e}=this.a,{canPlay:i}=this.$state;if(this.$state.playbackRate.set(t.detail),this.G("media-rate-change-request",t),i()){var s;null==e||null==(s=e.setPlaybackRate)||s.call(e,t.detail)}}"remote-playback-change"(t){let{remotePlaybackState:e,remotePlaybackType:i}=this.$state,{type:s,state:a}=t.detail,n="connected"===a;i.set(s),e.set(a);let r="airplay"===s?"media-airplay-request":"media-google-cast-request";if(n)this.G(r,t);else{let e=this.f.e.dl(r);e&&(t.request=e,t.triggers.add(e))}}"sources-change"(t){this.$state.sources.set(t.detail)}"source-change"(t){var e;let i=this.p.get("sources-change");i&&t.triggers.add(i),this.hf(t),this.p.set(t.type,t),this.$state.source.set(t.detail),null==(e=this.el)||e.setAttribute("aria-busy","true")}hf(t){var e;this.a.audioTracks[v.I](t),this.a.qualities[v.I](t),this.jb(),e=this.a.$state,to.reset(e,t=>tf.has(t)),(0,u.y)()}abort(t){let e=this.p.get("source-change");e&&t.triggers.add(e);let i=this.p.get("can-load");i&&!t.triggers.hasType("can-load")&&t.triggers.add(i)}"load-start"(t){let e=this.p.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);let e=this.p.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){let e=this.p.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){let e=this.p.get("load-start");e&&t.triggers.add(e)}"can-play"(t){var e;let i=this.p.get("loaded-metadata");i&&t.triggers.add(i),this.jf(t.detail),null==(e=this.el)||e.setAttribute("aria-busy","false")}"can-play-through"(t){this.jf(t.detail);let e=this.p.get("can-play");e&&t.triggers.add(e)}jf(t){var e;let{seekable:i,buffered:s,intrinsicDuration:a,canPlay:n}=this.$state;n.set(!0),s.set(t.buffered),i.set(t.seekable);let r=null!=(e=H(t.seekable))?e:1/0;a.set(r)}"duration-change"(t){let{live:e,intrinsicDuration:i}=this.$state,s=t.detail;e()||i.set(Number.isNaN(s)?0:s)}progress(t){let{buffered:e,seekable:i,live:s,intrinsicDuration:a}=this.$state,n=t.detail;if(e.set(n.buffered),i.set(n.seekable),s()){var r;let e=null!=(r=H(n.seekable))?r:1/0;a.set(e),this.dispatch("duration-change",{detail:e,trigger:t})}}play(t){let{paused:e,autoPlayError:i,ended:s,autoPlaying:a,playsInline:n,pointer:r,muted:l,viewType:h,live:o,userBehindLiveEdge:u}=this.$state;if(this.rl(),!e())return void t.stopImmediatePropagation();t.autoPlay=a();let d=this.p.get("waiting");d&&t.triggers.add(d),this.G("media-play-request",t),this.p.set("play",t),e.set(!1),i.set(null),t.autoPlay&&(this.Y(this.createEvent("auto-play",{detail:{muted:l()},trigger:t})),a.set(!1)),(s()||this.f.hb)&&(this.f.hb=!1,s.set(!1),this.Y(this.createEvent("replay",{trigger:t}))),n()||"video"!==h()||"coarse"!==r()||this.a.remote.enterFullscreen("prefer-media",t),o()&&!u()&&this.a.remote.seekToLiveEdge(t)}rl(t){if(!(0,u.p)(this.a.$provider))return;let{ended:e,seekableStart:i,clipStartTime:s,clipEndTime:a,realCurrentTime:n,duration:r}=this.$state,l=n()<s()||a()>0&&n()>=a()||.1>Math.abs(n()-r())||e();return l&&this.dispatch("media-seek-request",{detail:(s()>0?0:i())+.1,trigger:t}),l}"play-fail"(t){let{muted:e,autoPlaying:i}=this.$state,s=this.p.get("play");s&&t.triggers.add(s),this.G("media-play-request",t);let{paused:a,playing:n}=this.$state;a.set(!0),n.set(!1),this.jb(),this.p.set("play-fail",t),t.autoPlay&&(this.Y(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),i.set(!1))}playing(t){let e=this.p.get("play"),i=this.p.get("seeked");e?t.triggers.add(e):i&&t.triggers.add(i),setTimeout(()=>this.jb(),0);let{paused:s,playing:a,live:n,liveSyncPosition:r,seekableEnd:l,started:h,currentTime:o,seeking:u,ended:d}=this.$state;if(s.set(!1),a.set(!0),u.set(!1),d.set(!1),this.f.Ia){this.f.Ia=!1;return}if(n()&&!h()&&0===o()){var c;let t=null!=(c=r())?c:l()-2;Number.isFinite(t)&&this.a.$provider().setCurrentTime(t)}this.started(t)}started(t){let{started:e}=this.$state;e()||(e.set(!0),this.Y(this.createEvent("started",{trigger:t})))}pause(t){var e;(null==(e=this.el)?void 0:e.isConnected)||(this.Kb=!0),this.G("media-pause-request",t);let i=this.p.get("seeked");i&&t.triggers.add(i);let{paused:s,playing:a}=this.$state;s.set(!0),a.set(!1),this.Yk&&setTimeout(()=>{this.Y(this.createEvent("end",{trigger:t})),this.Yk=!1},0),this.jb()}"time-update"(t){if(this.f.Ia)return void t.stopImmediatePropagation();let{realCurrentTime:e,played:i,waiting:s,clipEndTime:a}=this.$state,n=a(),r=t.detail;for(let a of(e.set(r.currentTime),i.set(r.played),s.set(!1),this.a.textTracks))a[ts.Ua](r.currentTime,t);n>0&&r.currentTime>=n&&(this.Yk=!0,this.dispatch("media-pause-request",{trigger:t})),this._k()}_k(){let{storage:t}=this.a,{canPlay:e,realCurrentTime:i}=this.$state;if(e()){var s;null==t||null==(s=t.setTime)||s.call(t,i())}}"volume-change"(t){let{storage:e}=this.a,{volume:i,muted:s,canPlay:a}=this.$state,n=t.detail;if(i.set(n.volume),s.set(n.muted||0===n.volume),this.G("media-volume-change-request",t),this.G(n.muted?"media-mute-request":"media-unmute-request",t),a()){var r,l;null==e||null==(r=e.setVolume)||r.call(e,i()),null==e||null==(l=e.setMuted)||l.call(e,s())}}seeked(t){let{seeking:e,currentTime:i,realCurrentTime:s,paused:a,duration:n,ended:r}=this.$state;if(this.f.ra)e.set(!0),t.stopImmediatePropagation();else if(e()){let i=this.p.get("waiting");i&&t.triggers.add(i);let l=this.p.get("seeking");l&&!t.triggers.has(l)&&t.triggers.add(l),a()&&this.ef(),e.set(!1),t.detail!==n()&&r.set(!1),s.set(t.detail),this.G("media-seek-request",t);let h=null==t?void 0:t.originEvent;(null==h?void 0:h.isTrusted)&&!/seek/.test(h.type)&&this.started(t)}Math.abs(n()-i())>=.1&&r.set(!1)}waiting(t){this.uc||this.f.ra||(t.stopImmediatePropagation(),this.ib=t,this.Ad())}end(t){let{loop:e}=this.$state;if(e())return void setTimeout(()=>{requestAnimationFrame(()=>{this.dispatch("media-loop-request",{trigger:t})})},10);this.Eb(t)}Eb(t){let{paused:e,seeking:i,ended:s,duration:a}=this.$state;e()||this.dispatch("pause",{trigger:t}),i()&&this.dispatch("seeked",{detail:a(),trigger:t}),s.set(!0),this.jb(),this.dispatch("ended",{trigger:t})}ef(){this.Ad.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){let e=t.detail;this.$state.fullscreen.set(e),this.G(e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){this.G("media-enter-fullscreen-request",t),this.G("media-exit-fullscreen-request",t)}"orientation-change"(t){let e=t.detail.lock;this.G(e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){let e=t.detail;this.$state.pictureInPicture.set(e),this.G(e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){this.G("media-enter-pip-request",t),this.G("media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}constructor(t,e){super(),this.f=t,this.a=e,this.p=new Map,this.Yk=!1,this.uc=!1,this.Kb=!1,this.seeking=en(t=>{let{seeking:e,realCurrentTime:i,paused:s}=this.$state;e.set(!0),i.set(t.detail),this.G("media-seeking-request",t),s()&&(this.ib=t,this.Ad())},150,{leading:!0}),this.Ad=eo(()=>{if(!this.ib)return;this.uc=!0;let{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);let i=this.createEvent("waiting",{trigger:this.ib});this.p.set("waiting",i),this.dispatch(i),this.ib=void 0,this.uc=!1},300)}}class eX extends es{onSetup(){this.Dh(),M||((0,u.g)(this.Bm.bind(this)),(0,u.g)(this.Gh.bind(this)),(0,u.g)(this.sl.bind(this)),(0,u.g)(this.Wc.bind(this)),(0,u.g)(this.Ih.bind(this)),(0,u.g)(this.Pm.bind(this)),(0,u.g)(this.Kh.bind(this)),(0,u.g)(this.Lh.bind(this)),(0,u.g)(this.Jh.bind(this)),(0,u.g)(this.Hh.bind(this)),(0,u.g)(this.Ol.bind(this)),(0,u.g)(this.md.bind(this)),(0,u.g)(this.Fh.bind(this)),(0,u.g)(this.vc.bind(this)))}Dh(){let t={duration:"providedDuration",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(let a of Object.keys(this.$props)){var i,s;e.has(a)||null==(i=this.$state[null!=(s=t[a])?s:a])||i.set(this.$props[a]())}this.$state.muted.set(this.$props.muted()||0===this.$props.volume())}Fh(){let{viewType:t,streamType:e,title:i,poster:s}=this.$props;this.$state.providedPoster.set(s()),this.$state.providedStreamType.set(e()),this.$state.providedViewType.set(t()),this.$state.providedTitle.set(i())}Eh(){}Bm(){let{artist:t}=this.$props;this.$state.artist.set(t())}vc(){let{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}Gh(){let t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}Hh(){let t=this.$props.loop();this.$state.loop.set(t),this.dispatch("loop-change",{detail:t})}Wc(){let t=this.$props.controls();this.$state.controls.set(t)}md(){let{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}Ih(){var t;let e=null!=(t=this.$props.crossOrigin())?t:this.$props.crossorigin();this.$state.crossOrigin.set(!0===e?"":e)}Pm(){let{providedDuration:t}=this.$state;t.set(this.$props.duration())}Ol(){let t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}sl(){let{clipStartTime:t,clipEndTime:e}=this.$props;this.$state.clipStartTime.set(t()),this.$state.clipEndTime.set(e())}Kh(){this.dispatch("live-change",{detail:this.$state.live()})}Jh(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}Lh(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}let e_=class t extends es{onConnect(){(0,u.g)(this.Cm.bind(this)),(0,u.g)(this.Dm.bind(this));let e=this.Em.bind(this);for(let i of t.cm)navigator.mediaSession.setActionHandler(i,e);(0,u.v)(this.za.bind(this))}za(){for(let e of t.cm)navigator.mediaSession.setActionHandler(e,null)}Cm(){let{title:t,artist:e,poster:i}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:e(),artwork:[{src:i()}]})}Dm(){let{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"}Em(t){let e=new u.D("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":var i;this.dispatch("media-seek-request",{detail:(0,u.c)(t.seekTime)?t.seekTime:this.$state.currentTime()+(null!=(i=t.seekOffset)?i:10),trigger:e})}}constructor(){super()}};function e0(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(t.toFixed(e))}function e1(t){var e,i;return null!=(i=null==(e=String(t).split(".")[1])?void 0:e.length)?i:0}function e2(t,e,i){return Math.max(t,Math.min(i,e))}e_.cm=["play","pause","seekforward","seekbackward","seekto"];let e3=(0,u.s)(!1);M||((0,u.l)(document,"pointerdown",()=>{e3.set(!1)}),(0,u.l)(document,"keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||e3.set(!0)}));class e5 extends u.V{onConnect(t){(0,u.g)(()=>{if(!e3()){this.Lb.set(!1),e4(t,!1),this.listen("pointerenter",this.Dd.bind(this)),this.listen("pointerleave",this.Ed.bind(this));return}let e=document.activeElement===t;this.Lb.set(e),e4(t,e),this.listen("focus",this.Mb.bind(this)),this.listen("blur",this.Oh.bind(this))})}focused(){return this.Lb()}Mb(){this.Lb.set(!0),e4(this.el,!0)}Oh(){this.Lb.set(!1),e4(this.el,!1)}Dd(){e6(this.el,!0)}Ed(){e6(this.el,!1)}constructor(){super(...arguments),this.Lb=(0,u.s)(!1)}}function e4(t,e){(0,u.x)(t,"data-focus",e),(0,u.x)(t,"data-hocus",e)}function e6(t,e){(0,u.x)(t,"data-hocus",e),(0,u.x)(t,"data-hover",e)}var e9=Object.defineProperty,e7=Object.getOwnPropertyDescriptor,e8=(t,e,i,s)=>{for(var a,n=s>1?void 0:s?e7(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&e9(e,i,n),n};let it=class t extends u.Z{get i(){return this.a.$provider()}get Tm(){return this.$props}onSetup(){this.Qh(),(0,u.g)(this.Rh.bind(this)),(0,u.g)(this.Sh.bind(this)),(0,u.g)(this.Uc.bind(this)),(0,u.g)(this.Gd.bind(this)),(0,u.g)(this.kb.bind(this)),(0,u.g)(this.Ol.bind(this)),(0,u.g)(this.Th.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),t6(t,"tabindex","0"),t6(t,"role","region"),(0,u.g)(this.Fm.bind(this)),M?this.vc():(0,u.g)(this.vc.bind(this)),M?this.mf():(0,u.g)(this.mf.bind(this)),(0,u.l)(t,"find-media-player",this.Uh.bind(this))}onConnect(t){L&&(0,u.x)(t,"data-iphone","");let e=window.matchMedia("(pointer: coarse)");this.nf(e),e.onchange=this.nf.bind(this);let i=new ResizeObserver((0,u.d)(this.P.bind(this)));i.observe(t),(0,u.g)(this.P.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),(0,u.v)(()=>{i.disconnect(),e.onchange=null})}onDestroy(){this.a.player=null,this.canPlayQueue.I()}vc(){let t=this.$el,{title:e,live:i,viewType:s,providedTitle:a}=this.$state,n=i(),r=(0,u.B)(s()),l="Unknown"!==r?"".concat(n?"Live ":"").concat(r):n?"Live":"Media",h=e();(0,u.x)(this.el,"aria-label",h?"".concat(l," - ").concat(h):l+" Player"),!M&&(null==t?void 0:t.hasAttribute("title"))&&(this.xc=!0,null==t||t.removeAttribute("title"))}mf(){let t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),(0,u.x)(this.el,"data-orientation",t),this.P()}Rh(){this.$state.canPlay()&&this.i?this.canPlayQueue.Cb():this.canPlayQueue.sa()}Qh(){if(t[eF])return void this.setAttributes(t[eF]);let e={"data-load":function(){return this.$props.load()},"data-captions":function(){let t=this.$state.textTrack();return!!t&&th(t)},"data-ios-controls":function(){return this.a.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:t,canPlay:e,waiting:i}=this.$state;return t()&&(!e()||i())},"data-error":function(){let{error:t}=this.$state;return!!t()},"data-autoplay-error":function(){let{autoPlayError:t}=this.$state;return!!t()}},i={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let t of eN){var s;e["data-"+(null!=(s=i[t])?s:(0,u.q)(t))]=function(){return this.$state[t]()}}delete e.title,t[eF]=e,this.setAttributes(e)}Uh(t){t.detail(this)}P(){if(M||!this.el)return;let t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),(0,u.e)(this.el,"--player-width",t+"px"),(0,u.e)(this.el,"--player-height",e+"px")}nf(t){if(M)return;let e=t.matches?"coarse":"fine";(0,u.x)(this.el,"data-pointer",e),this.$state.pointer.set(e),this.P()}Ph(){let{playsInline:t,fullscreen:e}=this.$state;return L&&!E&&"video"===this.$state.mediaType()&&(!t()||e())}get provider(){return this.i}get controls(){return this.Z.Jb}set controls(t){this.Tm.controls.set(t)}get title(){return(0,u.p)(this.$state.providedTitle)}set title(t){if(this.xc){this.xc=!1;return}this.$state.providedTitle.set(t)}get qualities(){return this.a.qualities}get audioTracks(){return this.a.audioTracks}get textTracks(){return this.a.textTracks}get textRenderers(){return this.a.textRenderers}get duration(){return this.$state.duration()}set duration(t){this.Tm.duration.set(t)}get paused(){return(0,u.p)(this.$state.paused)}set paused(t){this.of(t)}Uc(){this.of(this.$props.paused())}of(t){t?this.canPlayQueue.k("paused",()=>this.Z.vd()):this.canPlayQueue.k("paused",()=>this.Z.tc())}get muted(){return(0,u.p)(this.$state.muted)}set muted(t){this.Tm.muted.set(t)}Sh(){this.Vh(this.$props.muted())}Vh(t){this.canPlayQueue.k("muted",()=>{this.i&&this.i.setMuted(t)})}get currentTime(){return(0,u.p)(this.$state.currentTime)}set currentTime(t){this.pf(t)}kb(){this.pf(this.$props.currentTime())}pf(t){this.canPlayQueue.k("currentTime",()=>{let{currentTime:e,clipStartTime:i,seekableStart:s,seekableEnd:a}=this.$state;t!==(0,u.p)(e)&&(0,u.p)(()=>{if(!this.i)return;let e=Math.min(Math.max(s()+.1,t+i()),a()-.1);Number.isFinite(e)&&this.i.setCurrentTime(e)})})}get volume(){return(0,u.p)(this.$state.volume)}set volume(t){this.Tm.volume.set(t)}Gd(){this.Wh(this.$props.volume())}Wh(t){let e=e2(0,t,1);this.canPlayQueue.k("volume",()=>{this.i&&this.i.setVolume(e)})}get playbackRate(){return(0,u.p)(this.$state.playbackRate)}set playbackRate(t){this.qf(t)}Th(){this.qf(this.$props.playbackRate())}qf(t){this.canPlayQueue.k("rate",()=>{var e,i;this.i&&(null==(e=(i=this.i).setPlaybackRate)||e.call(i,t))})}Ol(){this.Gm(this.$props.playsInline())}Gm(t){this.canPlayQueue.k("playsinline",()=>{var e,i;this.i&&(null==(e=(i=this.i).setPlaysInline)||e.call(i,t))})}Fm(){let t=this.$props.storage(),e=(0,u.j)(t)?new er:t;if(null==e?void 0:e.onChange){var i;let{source:s}=this.$state,a=(0,u.j)(t)?t:null==(i=this.el)?void 0:i.id,n=(0,u.M)(this.Hm.bind(this));(0,u.g)(()=>e.onChange(s(),n(),a))}this.a.storage=e,this.a.textTracks.setStorage(e),(0,u.v)(()=>{var t;null==e||null==(t=e.onDestroy)||t.call(e),this.a.storage=null,this.a.textTracks.setStorage(null)})}Hm(){let{clipStartTime:t,clipEndTime:e}=this.$props,{source:i}=this.$state,s=i();return s.src?"".concat(s.src,":").concat(t(),":").concat(e()):null}async play(t){return this.Z.tc(t)}async pause(t){return this.Z.vd(t)}async enterFullscreen(t,e){return this.Z.$e(t,e)}async exitFullscreen(t,e){return this.Z.bf(t,e)}enterPictureInPicture(t){return this.Z.yd(t)}exitPictureInPicture(t){return this.Z.xd(t)}seekToLiveEdge(t){this.Z._e(t)}startLoading(t){this.a.delegate.c("can-load",void 0,t)}startLoadingPoster(t){this.a.delegate.c("can-load-poster",void 0,t)}requestAirPlay(t){return this.Z.am(t)}requestGoogleCast(t){return this.Z.bm(t)}destroy(){this.a.remote.setPlayer(null),this.dispatch("destroy")}constructor(){super(),this.canPlayQueue=new eU,this.xc=!1,new eX;let t={player:this,qualities:new ef,audioTracks:new ep,storage:null,$provider:(0,u.s)(null),$providerSetup:(0,u.s)(!1),$props:this.$props,$state:this.$state};t.remote=new tv(void 0),t.remote.setPlayer(this),t.$iosControls=(0,u.M)(this.Ph.bind(this)),t.textTracks=new eu,t.textTracks[ts.Vk]=this.$state.crossOrigin,t.textRenderers=new eh(t),t.ariaKeys={},this.a=t,(0,u.a1)(tm,t),this.orientation=new U,new e5,new ey(t);let e=new eJ;this.ha=new eY(e,t),this.Z=new eH(this.ha,e,t),t.delegate=new ez(this.ha.Y.bind(this.ha),t),new e_,new eV("load",this.startLoading.bind(this)),new eV("posterLoad",this.startLoadingPoster.bind(this))}};it.props={artist:"",autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:{togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},storage:null},it.state=to,e8([u.a2],it.prototype,"canPlayQueue",2),e8([u.a2],it.prototype,"provider",1),e8([u.a2],it.prototype,"controls",1),e8([u.a2],it.prototype,"orientation",2),e8([u.a2],it.prototype,"title",1),e8([u.a2],it.prototype,"qualities",1),e8([u.a2],it.prototype,"audioTracks",1),e8([u.a2],it.prototype,"textTracks",1),e8([u.a2],it.prototype,"textRenderers",1),e8([u.a2],it.prototype,"duration",1),e8([u.a2],it.prototype,"paused",1),e8([u.a2],it.prototype,"muted",1),e8([u.a2],it.prototype,"currentTime",1),e8([u.a2],it.prototype,"volume",1),e8([u.a2],it.prototype,"playbackRate",1),e8([u.a3],it.prototype,"play",1),e8([u.a3],it.prototype,"pause",1),e8([u.a3],it.prototype,"enterFullscreen",1),e8([u.a3],it.prototype,"exitFullscreen",1),e8([u.a3],it.prototype,"enterPictureInPicture",1),e8([u.a3],it.prototype,"exitPictureInPicture",1),e8([u.a3],it.prototype,"seekToLiveEdge",1),e8([u.a3],it.prototype,"startLoading",1),e8([u.a3],it.prototype,"startLoadingPoster",1),e8([u.a3],it.prototype,"requestAirPlay",1),e8([u.a3],it.prototype,"requestGoogleCast",1);let ie=it,ii=new Map;class is{get c(){return this.a.delegate.c}connect(){let t=this.ia();this.Hd&&(this.rf(this.a.$state.source(),t),this.sf(t),this.Hd=!1),(0,u.g)(this.Yh.bind(this)),(0,u.g)(this.Zh.bind(this)),(0,u.g)(this._h.bind(this)),(0,u.g)(this.$h.bind(this)),(0,u.g)(this.ul.bind(this))}Yh(){this.c("sources-change",[...ia(this.a.$props.src()),...this.yc()])}Zh(){var t;let{$state:e}=this.a,i=e.sources(),s=(0,u.p)(e.source),a=this.tf(s,i);if((null==(t=i[0])?void 0:t.src)&&!a.src&&!a.type){let{crossOrigin:t}=e,s=Y(t()),a=new AbortController;return Promise.all(i.map(t=>(0,u.j)(t.src)&&"?"===t.type?fetch(t.src,{method:"HEAD",credentials:s,signal:a.signal}).then(e=>(t.type=e.headers.get("content-type")||"??",ii.set(t.src,t.type),t)).catch(()=>t):t)).then(t=>{a.signal.aborted||(this.tf((0,u.p)(e.source),t),(0,u.y)())}),()=>a.abort()}(0,u.y)()}tf(t,e){let i={src:"",type:""},s=null,a=this.Id();for(let t of e){let e=a.find(e=>e.canPlay(t));if(e){i=t,s=e;break}}return ir(t,i)||this.rf(i,s),s!==(0,u.p)(this.ia)&&this.sf(s),i}rf(t,e){this.c("source-change",t),this.c("media-type-change",(null==e?void 0:e.mediaType(t))||"unknown")}sf(t){this.a.$providerSetup.set(!1),this.c("provider-change",null),t&&(0,u.p)(()=>{var e;return null==(e=t.preconnect)?void 0:e.call(t,this.a)}),this.ia.set(t),this.c("provider-loader-change",t)}_h(){let t=this.a.$provider();if(!(!t||(0,u.p)(this.a.$providerSetup))){if(this.a.$state.canLoad()){(0,u.G)(()=>t.setup(),t.scope),this.a.$providerSetup.set(!0);return}(0,u.p)(()=>{var e;return null==(e=t.preconnect)?void 0:e.call(t)})}}$h(){if(!this.a.$providerSetup())return;let t=this.a.$provider(),e=this.a.$state.source(),i=(0,u.p)(this.a.$state.crossOrigin),s=(0,u.p)(this.a.$props.preferNativeHLS);if(!ir(null==t?void 0:t.currentSrc,e)){if(this.a.$state.canLoad()){let a=new AbortController;return eC(e)?(s||!K())&&(function t(e,i){return fetch(e,i).then(t=>t.text()).then(s=>{let a=function(t){let e=t.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split("\n")[1].trim():null}(s);if(a)return t(/^https?:/.test(a)?a:new URL(a,e).href,i);let n=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(s)?"on-demand":"live";return"live"===n&&function(t){for(let e of t.split("\n"))if(e.startsWith("#EXT-X-TARGETDURATION")){let t=parseFloat(e.split(":")[1]);if(!isNaN(t))return t}return -1}(s)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(s)||s.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":n})})(e.src,{credentials:Y(i),signal:a.signal}).then(t=>{this.c("stream-type-change",t)}).catch(u.H):this.c("stream-type-change","on-demand"),(0,u.p)(()=>{let i=(0,u.p)(this.a.$state.preload);return null==t?void 0:t.loadSource(e,i).catch(t=>{})}),()=>a.abort()}try{(0,u.j)(e.src)&&Q(new URL(e.src).origin)}catch(t){}}}ul(){let t=this.ia(),{providedPoster:e,source:i,canLoadPoster:s}=this.a.$state;if(!t||!t.loadPoster||!i()||!s()||e())return;let a=new AbortController,n=new u.D("source-change",{detail:i});return t.loadPoster(i(),this.a,a).then(t=>{this.c("poster-change",t||"",n)}).catch(()=>{this.c("poster-change","",n)}),()=>{a.abort()}}constructor(t,e,i,s=[]){this.yc=t,this.a=e,this.ia=i,this.Hd=!1;let a=new eD,n=new eL,r=new eO,l=[new eR,new eI];this.Id=(0,u.M)(()=>{let t=e.$state.remotePlaybackLoader(),i=e.$props.preferNativeHLS()?[n,r,a,...l,...s]:[a,n,r,...l,...s];return t?[t,...i]:i});let{$state:h}=e;for(let t of(h.sources.set(ia(e.$props.src())),h.sources())){let e=this.Id().find(e=>e.canPlay(t));if(!e)continue;let i=e.mediaType(t);this.a.$state.source.set(t),this.a.$state.mediaType.set(i),this.a.$state.inferredViewType.set(i),this.ia.set(e),this.Hd=!0}}}function ia(t){return((0,u.m)(t)?t:[t&&!(0,u.j)(t)&&"src"in t?t:{src:t||""}]).map(t=>{var e;let{src:i,type:s,...a}=t;return{src:i,type:null!=(e=null!=s?s:(0,u.j)(i)?ii.get(i):null)?e:!(0,u.j)(i)||i.startsWith("blob:")?"video/object":i.includes("youtube")?"video/youtube":!i.includes("vimeo")||i.includes("progressive_redirect")||i.includes(".m3u8")?"?":"video/vimeo",...a}}).sort(t=>"?"===t.type?1:-1)}function ir(t,e){return(null==t?void 0:t.src)===(null==e?void 0:e.src)&&(null==t?void 0:t.type)===(null==e?void 0:e.type)}class il{ai(){let t=this.zc();for(let e of this.uf)if(!t.some(t=>t.id===e.id)){let t=e.id&&this.a.textTracks.getById(e.id);t&&this.a.textTracks.remove(t)}for(let e of t){let t=e.id||tr.createId(e);this.a.textTracks.getById(t)||(e.id=t,this.a.textTracks.add(e))}this.uf=t}constructor(t,e){this.zc=t,this.a=e,this.uf=[],(0,u.g)(this.ai.bind(this))}}var ih=Object.defineProperty,io=Object.getOwnPropertyDescriptor;class iu extends u.Z{onSetup(){this.a=tb(),this.vf=new is(this.yc,this.a,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.vf.connect(),new il(this.zc,this.a);let e=new ResizeObserver((0,u.d)(this.P.bind(this)));e.observe(t);let i=new MutationObserver(this.wf.bind(this));i.observe(t,{attributes:!0,childList:!0}),this.P(),this.wf(),(0,u.v)(()=>{e.disconnect(),i.disconnect()})}load(t){window.cancelAnimationFrame(this.Jd),this.Jd=requestAnimationFrame(()=>this.bi(t)),(0,u.v)(()=>{window.cancelAnimationFrame(this.Jd)})}bi(t){if(!this.scope)return;let e=this.$state.loader(),{$provider:i}=this.a;!(this.ia===e&&(null==e?void 0:e.target)===t&&(0,u.p)(i))&&(this.xf(),this.ia=e,e&&(e.target=t||null),e&&t&&e.load(this.a).then(t=>{this.scope&&(0,u.p)(this.$state.loader)===e&&this.a.delegate.c("provider-change",t)}))}onDestroy(){this.ia=null,this.xf()}xf(){this.a.delegate.c("provider-change",null)}P(){if(!this.el)return;let t=this.a.player,e=this.el.offsetWidth,i=this.el.offsetHeight;t&&(t.$state.mediaWidth.set(e),t.$state.mediaHeight.set(i),t.el&&((0,u.e)(t.el,"--media-width",e+"px"),(0,u.e)(t.el,"--media-height",i+"px")))}wf(){let t=[],e=[];for(let i of this.el.children)!i.hasAttribute("data-vds")&&(i instanceof HTMLSourceElement?t.push({src:i.src,type:i.type}):i instanceof HTMLTrackElement&&e.push({id:i.id,src:i.src,kind:i.track.kind,language:i.srclang,label:i.label,default:i.default,type:i.getAttribute("data-type")}));this.yc.set(t),this.zc.set(e),(0,u.y)()}constructor(){super(...arguments),this.yc=(0,u.s)([]),this.zc=(0,u.s)([]),this.ia=null,this.Jd=-1}}iu.props={loaders:[]},iu.state=new u.X({loader:null}),((t,e,i,s)=>{for(var a,n=s>1?void 0:s?io(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&ih(e,i,n)})([u.a3],iu.prototype,"load",1);class id extends u.Z{onSetup(){this.a=tb(),(0,u.g)(this.ci.bind(this))}onAttach(t){let{pictureInPicture:e,fullscreen:i}=this.a.$state;(0,u.e)(t,"pointer-events","none"),t6(t,"role","group"),this.setAttributes({"data-visible":this.yf.bind(this),"data-fullscreen":i,"data-pip":e}),(0,u.g)(()=>{this.dispatch("change",{detail:this.yf()})}),(0,u.g)(this.di.bind(this)),(0,u.g)(()=>{let e=i();for(let i of["top","right","bottom","left"])(0,u.e)(t,"padding-".concat(i),e&&"env(safe-area-inset-".concat(i,")"))})}di(){if(!this.el)return;let{$iosControls:t}=this.a,{controls:e}=this.a.$state,i=e()||t();(0,u.x)(this.el,"aria-hidden",i?"true":null),(0,u.e)(this.el,"display",i?"none":null)}ci(){let{controls:t}=this.a.player,{hideDelay:e,hideOnMouseLeave:i}=this.$props;t.defaultDelay=2e3===e()?this.a.$props.controlsDelay():e(),t.hideOnMouseLeave=i()}yf(){let{controlsVisible:t}=this.a.$state;return t()}}id.props={hideDelay:2e3,hideOnMouseLeave:!1};class ic extends u.Z{onAttach(t){t.style.pointerEvents||(0,u.e)(t,"pointer-events","auto")}}class ip extends u.V{onDestroy(){var t;null==(t=this.Ja)||t.call(this),this.Ja=null}ei(){let t=this.j.D();if(!t)return void this.hide();let e=this.show.bind(this),i=this.hide.bind(this);this.j.Ac(t,e,i)}show(t){var e,i,s,a;this.Nm(),window.cancelAnimationFrame(this.Cc),this.Cc=-1,null==(e=this.Ja)||e.call(this),this.Ja=null,this.Bc=window.setTimeout(()=>{this.Bc=-1;let e=this.j.v();e&&e.style.removeProperty("display"),(0,u.p)(()=>this.j.C(!0,t))},null!=(a=null==(i=(s=this.j).zf)?void 0:i.call(s))?a:0)}hide(t){this.Nm(),(0,u.p)(()=>this.j.C(!1,t)),this.Cc=requestAnimationFrame(()=>{this.Nm(),this.Cc=-1;let t=this.j.v();if(t){let i=()=>{t.style.display="none",this.Ja=null};if("none"!==getComputedStyle(t).animationName){var e;null==(e=this.Ja)||e.call(this);let s=(0,u.l)(t,"animationend",i,{once:!0});this.Ja=s}else i()}})}Nm(){window.clearTimeout(this.Bc),this.Bc=-1}constructor(t){super(),this.j=t,this.Bc=-1,this.Cc=-1,this.Ja=null,(0,u.g)(this.ei.bind(this))}}let ig=(0,u.Y)(),im=0;class ib extends u.Z{onAttach(t){t.style.setProperty("display","contents")}onSetup(){(0,u.a1)(ig,{D:this.D,v:this.v,Kd:this.Kd.bind(this),Ld:this.Ld.bind(this),Md:this.Md.bind(this),Nd:this.Nd.bind(this)})}Kd(t){this.D.set(t);let e=t.getAttribute("data-media-tooltip");if(e){var i;null==(i=this.el)||i.setAttribute("data-media-".concat(e,"-tooltip"),"")}(0,u.x)(t,"data-describedby",this.da)}Ld(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.D.set(null)}Md(t){t.setAttribute("id",this.da),t.style.display="none",t6(t,"role","tooltip"),this.v.set(t)}Nd(t){t.removeAttribute("id"),t.removeAttribute("role"),this.v.set(null)}fi(t){let e=this.D(),i=this.v();for(let s of(e&&(0,u.x)(e,"aria-describedby",t?this.da:null),[this.el,e,i]))s&&(0,u.x)(s,"data-visible",t)}constructor(){super(),this.da="media-tooltip-".concat(++im),this.D=(0,u.s)(null),this.v=(0,u.s)(null),new e5;let{showDelay:t}=this.$props;new ip({D:this.D,v:this.v,zf:t,Ac(t,e,i){(0,u.l)(t,"touchstart",t=>t.preventDefault(),{passive:!1}),(0,u.g)(()=>{e3()&&(0,u.l)(t,"focus",e),(0,u.l)(t,"blur",i)}),(0,u.l)(t,"mouseenter",e),(0,u.l)(t,"mouseleave",i)},C:this.fi.bind(this)})}}ib.props={showDelay:700};class iv extends u.Z{onConnect(t){(0,u.v)(ee(()=>{if(!this.connectScope)return;this.Ka();let t=(0,u.J)(ig);(0,u.v)(()=>{let e=this.Dc();e&&t.Ld(e)})}))}Ka(){let t=this.Dc(),e=(0,u.J)(ig);t&&e.Kd(t)}Dc(){let t=this.el.firstElementChild;return(null==t?void 0:t.localName)==="button"||(null==t?void 0:t.getAttribute("role"))==="button"?t:this.el}constructor(){super(),new e5}}class iy extends u.Z{onAttach(t){this.Ka(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.Ka(t);let e=(0,u.J)(ig);(0,u.v)(()=>e.Nd(t)),(0,u.v)(ee(()=>{this.connectScope&&(0,u.g)(this.Od.bind(this))}))}Ka(t){(0,u.J)(ig).Md(t)}Od(){let{placement:t,offset:e,alignOffset:i}=this.$props;return ei(this.el,this.gi(),t(),{offsetVarName:"media-tooltip",xOffset:i(),yOffset:e()})}gi(){return(0,u.J)(ig).D()}constructor(){super(),new e5;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}}iy.props={placement:"top center",offset:0,alignOffset:0};class iw extends u.V{onSetup(){let{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.j.n,"aria-pressed":this.hi.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){t6(t,"tabindex","0"),t6(t,"role","button"),t6(t,"type","button")}onConnect(t){for(let e of(t8(t,this.ii.bind(this)),["click","touchstart"]))this.listen(e,this.ji.bind(this))}hi(){return(0,u.a4)(this.j.n())}ki(t){(0,u.a5)(this.j.n)&&this.j.n.set(t=>!t)}ii(t){var e;if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(null!=(e=this.j.z)?e:this.ki).call(this,t)}ji(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}constructor(t){super(),this.j=t,new e5,t.lb&&new e$(t.lb)}}iw.props={disabled:!1};var i$=Object.defineProperty,ik=Object.getOwnPropertyDescriptor;class ix extends u.Z{get pressed(){return this.Af()}constructor(){super(),this.Af=(0,u.s)(!1),new iw({n:this.Af})}}function iT(t){return()=>t()?"true":"false"}ix.props={disabled:!1,defaultPressed:!1},((t,e,i,s)=>{for(var a,n=s>1?void 0:s?ik(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&i$(e,i,n)})([u.a2],ix.prototype,"pressed",1);class iP extends u.Z{onSetup(){this.a=tb();let{canAirPlay:t,isAirPlayConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.li.bind(this),"aria-hidden":iT(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),t9(t,this.Bl.bind(this))}z(t){this.a.remote.requestAirPlay(t)}n(){let{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"airplay"===t()&&"disconnected"!==e()}li(){let{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"airplay"===t()&&e()}Bl(){let{remotePlaybackState:t}=this.a.$state;return"AirPlay ".concat(t())}constructor(){super(),new iw({n:this.n.bind(this),z:this.z.bind(this)})}}iP.props=iw.props;class iS extends u.Z{onSetup(){this.a=tb();let{canGoogleCast:t,isGoogleCastConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.li.bind(this),"aria-hidden":iT(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","google-cast"),t9(t,this.Bl.bind(this))}z(t){this.a.remote.requestGoogleCast(t)}n(){let{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"google-cast"===t()&&"disconnected"!==e()}li(){let{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return"google-cast"===t()&&e()}Bl(){let{remotePlaybackState:t}=this.a.$state;return"Google Cast ".concat(t())}constructor(){super(),new iw({n:this.n.bind(this),z:this.z.bind(this)})}}iS.props=iw.props;class iE extends u.Z{onSetup(){this.a=tb();let{paused:t,ended:e}=this.a.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),t9(t,"Play")}z(t){let e=this.a.remote;this.n()?e.pause(t):e.play(t)}n(){let{paused:t}=this.a.$state;return!t()}constructor(){super(),new iw({n:this.n.bind(this),lb:"togglePaused",z:this.z.bind(this)})}}iE.props=iw.props;class ij extends u.Z{onSetup(){this.a=tb(),this.setAttributes({"data-active":this.n.bind(this),"data-supported":()=>!this.mb(),"aria-hidden":iT(this.mb.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),t9(t,"Captions")}z(t){this.a.remote.toggleCaptions(t)}n(){let{textTrack:t}=this.a.$state,e=t();return!!e&&th(e)}mb(){let{hasCaptions:t}=this.a.$state;return!t()}constructor(){super(),new iw({n:this.n.bind(this),lb:"toggleCaptions",z:this.z.bind(this)})}}ij.props=iw.props;class iA extends u.Z{onSetup(){this.a=tb();let{fullscreen:t}=this.a.$state,e=this.Ob.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":iT(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),t9(t,"Fullscreen")}z(t){let e=this.a.remote,i=this.$props.target();this.n()?e.exitFullscreen(i,t):e.enterFullscreen(i,t)}n(){let{fullscreen:t}=this.a.$state;return t()}Ob(){let{canFullscreen:t}=this.a.$state;return t()}constructor(){super(),new iw({n:this.n.bind(this),lb:"toggleFullscreen",z:this.z.bind(this)})}}iA.props={...iw.props,target:"prefer-media"};class iC extends u.Z{onSetup(){this.a=tb(),this.setAttributes({"data-muted":this.n.bind(this),"data-state":this.li.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),t9(t,"Mute")}z(t){let e=this.a.remote;this.n()?e.unmute(t):e.mute(t)}n(){let{muted:t,volume:e}=this.a.$state;return t()||0===e()}li(){let{muted:t,volume:e}=this.a.$state,i=e();return t()||0===i?"muted":i>=.5?"high":i<.5?"low":void 0}constructor(){super(),new iw({n:this.n.bind(this),lb:"toggleMuted",z:this.z.bind(this)})}}iC.props=iw.props;class iM extends u.Z{onSetup(){this.a=tb();let{pictureInPicture:t}=this.a.$state,e=this.Ob.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":iT(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),t9(t,"PiP")}z(t){let e=this.a.remote;this.n()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}n(){let{pictureInPicture:t}=this.a.$state;return t()}Ob(){let{canPictureInPicture:t}=this.a.$state;return t()}constructor(){super(),new iw({n:this.n.bind(this),lb:"togglePictureInPicture",z:this.z.bind(this)})}}iM.props=iw.props;class iq extends u.Z{onSetup(){this.a=tb();let{seeking:t}=this.a.$state,{seconds:e}=this.$props,i=this.Ob.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":i,"aria-hidden":iT(()=>!i())})}onAttach(t){t6(t,"tabindex","0"),t6(t,"role","button"),t6(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),t9(t,this.Bl.bind(this))}onConnect(t){t8(t,this.z.bind(this))}Ob(){let{canSeek:t}=this.a.$state;return t()}Bl(){let{seconds:t}=this.$props;return"Seek ".concat(t()>0?"forward":"backward"," ").concat(t()," seconds")}z(t){let{seconds:e,disabled:i}=this.$props;if(i())return;let{currentTime:s}=this.a.$state,a=s()+e();this.a.remote.seek(a,t)}constructor(){super(),new e5}}iq.props={disabled:!1,seconds:30};class iO extends u.Z{onSetup(){this.a=tb();let{disabled:t}=this.$props,{live:e,liveEdge:i}=this.a.$state,s=()=>!e();this.setAttributes({"data-edge":i,"data-hidden":s,"aria-disabled":iT(()=>t()||i()),"aria-hidden":iT(s)})}onAttach(t){t6(t,"tabindex","0"),t6(t,"role","button"),t6(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){t8(t,this.z.bind(this))}z(t){let{disabled:e}=this.$props,{liveEdge:i}=this.a.$state;e()||i()||this.a.remote.seekToLiveEdge(t)}constructor(){super(),new e5}}iO.props={disabled:!1};let iL=new u.X({min:0,max:100,value:0,pointerValue:0,focused:!1,dragging:!1,pointing:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return iD(this.min,this.max,this.value)},get fillPercent(){return 100*this.fillRate},get pointerRate(){return iD(this.min,this.max,this.pointerValue)},get pointerPercent(){return 100*this.pointerRate}});function iD(t,e,i){let s=e-t;return s>0?(i-t)/s:0}let iI={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class iR extends u.V{onConnect(){(0,u.g)(this.mi.bind(this)),(0,u.g)(this.ni.bind(this)),this.j.oi&&(0,u.g)(this.Zm.bind(this))}Zm(){var t;let{pointer:e}=this.a.$state;if("coarse"!==e()||!this.j.oi()){this.i=null;return}this.i=null==(t=this.a.player.el)?void 0:t.querySelector("media-provider,[data-media-provider]"),this.i&&((0,u.l)(this.i,"touchstart",this.pi.bind(this),{passive:!0}),(0,u.l)(this.i,"touchmove",this.qi.bind(this),{passive:!1}))}pi(t){this.va=t.touches[0]}qi(t){if((0,u.W)(this.va)||et(t))return;let e=t.touches[0],i=e.clientX-this.va.clientX,s=e.clientY-this.va.clientY,a=this.$state.dragging();!a&&Math.abs(s)>5||!a&&(t.preventDefault(),Math.abs(i)>20&&(this.va=e,this.nb=this.$state.value(),this.Pd(this.nb,t)))}mi(){this.j.L()||(this.listen("focus",this.Mb.bind(this)),this.listen("pointerenter",this.Dd.bind(this)),this.listen("pointermove",this.ri.bind(this)),this.listen("pointerleave",this.Ed.bind(this)),this.listen("pointerdown",this.si.bind(this)),this.listen("keydown",this.Bb.bind(this)),this.listen("keyup",this.Ab.bind(this)))}ni(){!this.j.L()&&this.$state.dragging()&&((0,u.l)(document,"pointerup",this.ti.bind(this)),(0,u.l)(document,"pointermove",this.ui.bind(this)),(0,u.l)(document,"touchmove",this.vi.bind(this),{passive:!1}))}Mb(){this.wa(this.$state.value())}Qd(t,e){var i,s,a,n;let{value:r,min:l,max:h,dragging:o}=this.$state,u=Math.max(l(),Math.min(t,h()));r.set(u);let d=this.createEvent("value-change",{detail:u,trigger:e});if(this.dispatch(d),null==(i=(s=this.j).o)||i.call(s,d),o()){let t=this.createEvent("drag-value-change",{detail:u,trigger:e});this.dispatch(t),null==(a=(n=this.j).ob)||a.call(n,t)}}wa(t,e){let{pointerValue:i,dragging:s}=this.$state;i.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),s()&&this.Qd(t,e)}Ec(t){var e,i,s,a;let n,r=this.el.getBoundingClientRect(),{min:l,max:h}=this.$state;if("vertical"===this.$props.orientation()){let{bottom:e,height:i}=r;n=(e-t.clientY)/i}else if(this.va&&(0,u.c)(this.nb)){let{width:e}=this.i.getBoundingClientRect(),i=(t.clientX-this.va.clientX)/e,s=h()-l(),a=s*Math.abs(i);n=(i<0?this.nb-a:this.nb+a)/s}else{let{left:e,width:i}=r;n=(t.clientX-e)/i}return Math.max(l(),Math.min(h(),this.j.Pb((e=l(),i=h(),s=n,e+(a=this.j.La())*((i-e)*e2(0,s,1)/a)))))}Dd(t){this.$state.pointing.set(!0)}ri(t){let{dragging:e}=this.$state;e()||this.wa(this.Ec(t),t)}Ed(t){this.$state.pointing.set(!1)}si(t){if(0!==t.button)return;let e=this.Ec(t);this.Pd(e,t),this.wa(e,t)}Pd(t,e){var i,s;let{dragging:a}=this.$state;if(a())return;a.set(!0),this.a.remote.pauseControls(e);let n=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(n),null==(i=(s=this.j).Rd)||i.call(s,n)}Bf(t,e){var i,s;let{dragging:a}=this.$state;if(!a())return;a.set(!1),this.a.remote.resumeControls(e);let n=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(n),null==(i=(s=this.j).Fc)||i.call(s,n),this.va=null,this.nb=null}Bb(t){let e,{key:i}=t,{min:s,max:a}=this.$state;if("Home"===i||"PageUp"===i?e=s():"End"===i||"PageDown"===i?e=a():!t.metaKey&&/^[0-9]$/.test(i)&&(e=(a()-s())/10*Number(i)),!(0,u.i)(e)){this.wa(e,t),this.Qd(e,t);return}let n=this.Cf(t);if((0,u.i)(n))return;let r=i===this.Sd;!this.$state.dragging()&&r&&this.Pd(n,t),this.wa(n,t),r||this.Qd(n,t),this.Sd=i}Ab(t){var e;this.Sd="";let{dragging:i,value:s}=this.$state;if(!i())return;let a=null!=(e=this.Cf(t))?e:s();this.wa(a),this.Bf(a,t)}Cf(t){let{key:e,shiftKey:i}=t;if(!Object.keys(iI).includes(e))return;t.preventDefault(),t.stopPropagation();let{shiftKeyMultiplier:s}=this.$props,{value:a,min:n,max:r}=this.$state,l=this.j.La(),h=this.j.Qb(),o=i?h*s():h,u=Number(iI[e]),d=(a()+o*u)/l;return Math.max(n(),Math.min(r(),Number((l*d).toFixed(3))))}ti(t){if(0!==t.button)return;let e=this.Ec(t);this.wa(e,t),this.Bf(e,t)}vi(t){t.preventDefault()}constructor(t,e){super(),this.j=t,this.a=e,this.i=null,this.va=null,this.nb=null,this.ui=en(t=>{this.wa(this.Ec(t),t)},20,{leading:!0})}}let iF=(0,u.Y)(()=>({})),iN=(0,u.Y)();class iV extends u.V{onSetup(){this.a=tb();let t=new e5;t.attach(this),this.$state.focused=t.focused.bind(t),(0,u.a6)(iF)||(0,u.a1)(iF,{default:"value"}),(0,u.a1)(iN,{ua:this.$props.orientation,Gc:this.j.L,Df:(0,u.s)(null)}),(0,u.g)(this.E.bind(this)),(0,u.g)(this.Rb.bind(this)),this.wi(),new iR(this.j,this.a).attach(this)}onAttach(t){t6(t,"role","slider"),t6(t,"tabindex","0"),t6(t,"autocomplete","off"),M?this.Ef():(0,u.g)(this.Ef.bind(this))}E(){let{dragging:t,value:e,min:i,max:s}=this.$state;if(!(0,u.p)(t)){var a,n;e.set((a=i(),n=s(),e2(a,e0(e(),e1(this.j.La())),n)))}}Rb(){if(!this.j.L())return;let{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}xi(){return(0,u.a4)(this.j.L())}wi(){let{orientation:t}=this.$props,{dragging:e,active:i,pointing:s}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":s,"data-active":i,"aria-disabled":this.xi.bind(this),"aria-valuemin":this.$state.min,"aria-valuemax":this.$state.max,"aria-valuenow":this.j.ja,"aria-valuetext":this.j.ka,"aria-orientation":t})}Ef(){let{fillPercent:t,pointerPercent:e}=this.$state;this.yi(e0(t(),3),e0(e(),3))}constructor(t){super(),this.j=t,this.yi=(0,u.d)((t,e)=>{var i,s;null==(i=this.el)||i.style.setProperty("--slider-fill",t+"%"),null==(s=this.el)||s.style.setProperty("--slider-pointer",e+"%")})}}iV.props={disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};class iz extends u.Z{onSetup(){(0,u.g)(this.E.bind(this)),(0,u.g)(this.zi.bind(this))}ja(){let{value:t}=this.$state;return Math.round(t())}ka(){let{value:t,max:e}=this.$state;return e0(t()/e()*100,2)+"%"}E(){let{value:t}=this.$props;this.$state.value.set(t())}zi(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}constructor(){super(),new iV({La:this.$props.step,Qb:this.$props.keyStep,Pb:Math.round,L:this.$props.disabled,ja:this.ja.bind(this),ka:this.ka.bind(this)})}}iz.props={...iV.props,min:0,max:100,value:0},iz.state=iL;let iK=new Map,iU=new Map;class iW{static create(t,e){return new iW(t,e,tb())}Ai(){let{canLoad:t}=this.a.$state;if(!t())return;let e=this.$src(),s=new AbortController;if(e){if((0,u.j)(e)&&iK.has(e)){let t=iK.get(e);if(iK.delete(e),iK.set(e,t),iK.size>30){let t=iK.keys().next().value;iK.delete(t)}this.$images.set(iK.get(e))}else if((0,u.j)(e)){var a;let t=this.$crossOrigin(),n=e+"::"+t;if(!iU.has(n)){let a=new Promise(async(a,n)=>{try{let r=await fetch(e,{signal:s.signal,credentials:Y(t)});if("application/json"===r.headers.get("content-type")){let t=await r.json();if((0,u.m)(t))if(t[0]&&"text"in t[0])a(this.gl(t));else{for(let e=0;e<t.length;e++){let i=t[e];eB((0,u.n)(i),!1),eB("url"in i&&(0,u.j)(i.url),!1),eB("startTime"in i&&(0,u.c)(i.startTime),!1)}a(t)}else a(this.il(t));return}i.e(943).then(i.bind(i,90943)).then(async t=>{let{parseResponse:e}=t;try{let{cues:t}=await e(r);a(this.gl(t))}catch(t){n(t)}})}catch(t){n(t)}}).then(t=>(s.signal.aborted||iK.set(n,t),t)).catch(t=>{s.signal.aborted||this.V(e,t)}).finally(()=>{(0,u.j)(n)&&iU.delete(n)});iU.set(n,a)}null==(a=iU.get(n))||a.then(t=>{s.signal.aborted||this.$images.set(t||[])})}else if((0,u.m)(e))try{this.$images.set(this.vl(e))}catch(t){this.V(e,t)}else try{this.$images.set(this.il(e))}catch(t){this.V(e,t)}return()=>{s.abort(),this.$images.set([])}}}vl(t){let e=this.jl();return t.map((t,i)=>(eB(t.url&&(0,u.j)(t.url),!1),eB("startTime"in t&&(0,u.c)(t.startTime),!1),{...t,url:(0,u.j)(t.url)?this.kl(t.url,e):t.url}))}il(t){var e;eB((0,u.j)(t.url),!1),eB((0,u.m)(t.tiles)&&(null==(e=t.tiles)?void 0:e.length),!1);let i=new URL(t.url),s=[],a="tile_width"in t?t.tile_width:t.tileWidth,n="tile_height"in t?t.tile_height:t.tileHeight;for(let e of t.tiles)s.push({url:i,startTime:"start"in e?e.start:e.startTime,width:a,height:n,coords:{x:e.x,y:e.y}});return s}gl(t){for(let e=0;e<t.length;e++){let i=t[e];eB("startTime"in i&&(0,u.c)(i.startTime),!1),eB("text"in i&&(0,u.j)(i.text),!1)}let e=[],i=this.jl();for(let s of t){let[t,a]=s.text.split("#"),n=this.wl(a);e.push({url:this.kl(t,i),startTime:s.startTime,endTime:s.endTime,width:null==n?void 0:n.w,height:null==n?void 0:n.h,coords:n&&(0,u.c)(n.x)&&(0,u.c)(n.y)?{x:n.x,y:n.y}:void 0})}return e}jl(){let t=(0,u.p)(this.$src);return(0,u.j)(t)&&/^https?:/.test(t)?t:location.href}kl(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}wl(t){if(!t)return{};let[e,i]=t.split("="),s=null==i?void 0:i.split(","),a={};if(!e||!s)return null;for(let t=0;t<e.length;t++){let i=+s[t];isNaN(i)||(a[e[t]]=i)}return a}V(t,e){}constructor(t,e,i){this.$src=t,this.$crossOrigin=e,this.a=i,this.$images=(0,u.s)([]),(0,u.g)(this.Ai.bind(this))}}class iB extends u.Z{onSetup(){this.a=tb(),this.ia=iW.create(this.$props.src,this.$state.crossOrigin),this.Ih(),this.setAttributes({"data-loading":this.Sb.bind(this),"data-error":this.xa.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":iT(this.$state.hidden)})}onConnect(t){(0,u.g)(this.Vd.bind(this)),(0,u.g)(this.pb.bind(this)),(0,u.g)(this.Ih.bind(this)),(0,u.g)(this.Fa.bind(this)),(0,u.g)(this.xl.bind(this)),(0,u.g)(this.Gi.bind(this))}Vd(){let t=this.$state.img();t&&((0,u.l)(t,"load",this.rd.bind(this)),(0,u.l)(t,"error",this.V.bind(this)))}Ih(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i}=this.a.$state,s=null!==t()?t():i();e.set(!0===s?"anonymous":s)}Fa(){let{src:t,loading:e,error:i}=this.$state;return t()&&(e.set(!0),i.set(null)),()=>{this.Di(),e.set(!1),i.set(null)}}rd(){let{loading:t,error:e}=this.$state;this.Gi(),t.set(!1),e.set(null)}V(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}Sb(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}xa(){let{error:t}=this.$state;return!(0,u.W)(t())}pb(){let{hidden:t}=this.$state,{duration:e}=this.a.$state,i=this.ia.$images();t.set(this.xa()||!Number.isFinite(e())||0===i.length)}Hf(){return this.$props.time()}xl(){let t=this.ia.$images();if(!t.length)return;let e=this.Hf(),{src:i,activeThumbnail:s}=this.$state,a=-1,n=null;for(let i=t.length-1;i>=0;i--){let s=t[i];if(e>=s.startTime&&(!s.endTime||e<s.endTime)){a=i;break}}t[a]&&(n=t[a]),s.set(n),i.set((null==n?void 0:n.url.href)||"")}Gi(){var t,e;if(!this.scope||this.$state.hidden())return;let i=this.el,s=this.$state.img(),a=this.$state.activeThumbnail();if(!s||!a||!i)return;let n=null!=(t=a.width)?t:s.naturalWidth,r=null!=(e=null==a?void 0:a.height)?e:s.naturalHeight,{maxWidth:l,maxHeight:h,minWidth:o,minHeight:u,width:d,height:c}=getComputedStyle(this.el);"100%"===o&&(o=parseFloat(d)+""),"100%"===u&&(u=parseFloat(c)+"");let p=Math.max(parseInt(o)/n,parseInt(u)/r),g=Math.min(Math.max(parseInt(o),parseInt(l))/n,Math.max(parseInt(u),parseInt(h))/r),f=!isNaN(g)&&g<1?g:p>1?p:1;this.qb(i,"--thumbnail-width","".concat(n*f,"px")),this.qb(i,"--thumbnail-height","".concat(r*f,"px")),this.qb(s,"width","".concat(s.naturalWidth*f,"px")),this.qb(s,"height","".concat(s.naturalHeight*f,"px")),this.qb(s,"transform",a.coords?"translate(-".concat(a.coords.x*f,"px, -").concat(a.coords.y*f,"px)"):""),this.qb(s,"max-width","none")}qb(t,e,i){t.style.setProperty(e,i),this.Ud.push(()=>t.style.removeProperty(e))}Di(){for(let t of this.Ud)t();this.Ud=[]}constructor(){super(...arguments),this.Ud=[]}}iB.props={src:null,time:0,crossOrigin:null},iB.state=new u.X({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});class iH extends iB{onAttach(t){this.R=(0,u.a7)(iz.state)}Hf(){let{duration:t,clipStartTime:e}=this.a.$state;return e()+this.R.pointerRate()*t()}}var iZ=Object.defineProperty,iQ=Object.getOwnPropertyDescriptor;class iJ extends u.Z{get video(){return this.$state.video()}onSetup(){this.a=tb(),this.R=(0,u.a7)(iz.state),this.Ih(),this.setAttributes({"data-loading":this.Sb.bind(this),"data-hidden":this.$state.hidden,"data-error":this.xa.bind(this),"aria-hidden":iT(this.$state.hidden)})}onAttach(t){(0,u.g)(this.Hi.bind(this)),(0,u.g)(this.gd.bind(this)),(0,u.g)(this.Ih.bind(this)),(0,u.g)(this.pb.bind(this)),(0,u.g)(this.Ii.bind(this)),(0,u.g)(this.Ji.bind(this))}Hi(){let t=this.$state.video();t&&(t.readyState>=2&&this.ic(),(0,u.l)(t,"canplay",this.ic.bind(this)),(0,u.l)(t,"error",this.V.bind(this)))}gd(){let{src:t}=this.$state,{canLoad:e}=this.a.$state;t.set(e()?this.$props.src():null)}Ih(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i}=this.a.$state,s=null!==t()?t():i();e.set(!0===s?"anonymous":s)}Sb(){let{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}xa(){let{error:t}=this.$state;return!(0,u.W)(t)}pb(){let{src:t,hidden:e}=this.$state,{canLoad:i,duration:s}=this.a.$state;e.set(i()&&(!t()||this.xa()||!Number.isFinite(s())))}Ii(){let{src:t,canPlay:e,error:i}=this.$state;t(),e.set(!1),i.set(null)}ic(t){let{canPlay:e,error:i}=this.$state;e.set(!0),i.set(null),this.dispatch("can-play",{trigger:t})}V(t){let{canPlay:e,error:i}=this.$state;e.set(!1),i.set(t),this.dispatch("error",{trigger:t})}Ji(){let{video:t,canPlay:e}=this.$state,{duration:i}=this.a.$state,{pointerRate:s}=this.R,a=t();e()&&a&&Number.isFinite(i())&&Number.isFinite(s())&&(a.currentTime=s()*i())}}function iG(t,e){let i=String(t),s=i.length;if(s<e){let i="0".repeat(e-s);return"".concat(i).concat(t)}return i}function iY(t){let e=Math.trunc(t/3600),i=Math.trunc(t%3600/60);return{hours:e,minutes:i,seconds:Math.trunc(t%60),fraction:Number((t-Math.trunc(t)).toPrecision(3))}}function iX(t){let{padHrs:e=null,padMins:i=null,showHrs:s=!1,showMs:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{hours:n,minutes:r,seconds:l,fraction:h}=iY(t),o=e?iG(n,2):n,d=i||(0,u.W)(i)&&t>=3600?iG(r,2):r,c=iG(l,2),p=a&&h>0?".".concat(String(h).replace(/^0?\./,"")):"",g="".concat(d,":").concat(c).concat(p);return n>0||s?"".concat(o,":").concat(g):g}function i_(t){let e=[],{hours:i,minutes:s,seconds:a}=iY(t);return i>0&&e.push("".concat(i," hour")),s>0&&e.push("".concat(s," min")),(a>0||0===e.length)&&e.push("".concat(a," sec")),e.join(" ")}iJ.props={src:null,crossOrigin:null},iJ.state=new u.X({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1}),((t,e,i,s)=>{for(var a,n=s>1?void 0:s?iQ(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&iZ(e,i,n)})([u.a2],iJ.prototype,"video",1);var i0=Object.defineProperty,i1=Object.getOwnPropertyDescriptor;class i2 extends u.Z{onSetup(){this.R=(0,u.a7)(iz.state),this.Tb=(0,u.J)(iF),this.Ki=(0,u.M)(this.getValueText.bind(this))}getValueText(){var t,e,i,s,a,n;let{type:r,format:l,decimalPlaces:h,padHours:o,padMinutes:u,showHours:d,showMs:c}=this.$props,{value:p,pointerValue:g,min:f,max:m}=this.R,b=null!=(t=l())?t:this.Tb.default,v="current"===r()?p():g();if("percent"===b){let t=v/(m()-f())*100;return(null!=(e=this.Tb.percent)?e:e0)(t,h())+""}return"time"===b?(null!=(i=this.Tb.time)?i:iX)(v,{padHrs:o(),padMins:u(),showHrs:d(),showMs:c()}):null!=(n=null==(s=(a=this.Tb).value)?void 0:s.call(a,v))?n:v.toFixed(2)}}i2.props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2},((t,e,i,s)=>{for(var a,n=s>1?void 0:s?i1(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&i0(e,i,n)})([u.a3],i2.prototype,"getValueText",1);class i3 extends u.Z{onSetup(){this.R=(0,u.J)(iN);let{active:t}=(0,u.a7)(iz.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){let{Df:e}=this.R;e.set(t),(0,u.v)(()=>e.set(null)),(0,u.g)(this.If.bind(this));let i=new ResizeObserver(this.If.bind(this));i.observe(t),(0,u.v)(()=>i.disconnect())}constructor(){super(...arguments),this.If=(0,u.d)(()=>{let{Gc:t,ua:e}=this.R;if(t())return;let i=this.el,{offset:s,noClamp:a}=this.$props;!function(t,e){let{clamp:i,offset:s,orientation:a}=e,n=getComputedStyle(t),r=parseFloat(n.width),l=parseFloat(n.height),h={top:null,right:null,bottom:null,left:null};if(h["horizontal"===a?"bottom":"left"]="calc(100% + var(--media-slider-preview-offset, ".concat(s,"px))"),"horizontal"===a){let t=r/2;if(i){let e="max(0px, calc(var(--slider-pointer) - ".concat(t,"px))");h.left="min(".concat(e,", ").concat("calc(100% - ".concat(r,"px)"),")")}else h.left="calc(var(--slider-pointer) - ".concat(t,"px)")}else{let t=l/2;if(i){let e="max(".concat(t,"px, calc(var(--slider-pointer) - ").concat(t,"px))");h.bottom="min(".concat(e,", ").concat("calc(100% - ".concat(l,"px)"),")")}else h.bottom="calc(var(--slider-pointer) - ".concat(t,"px)")}Object.assign(t.style,h)}(i,{clamp:!a(),offset:s(),orientation:e()})})}}i3.props={offset:0,noClamp:!1};class i5 extends u.Z{onSetup(){this.a=tb(),(0,u.a1)(iF,{default:"percent"}),new iV({La:this.$props.step,Qb:this.$props.keyStep,L:this.$props.disabled,Pb:Math.round,ja:this.ja.bind(this),ka:this.ka.bind(this),ob:this.ob.bind(this),o:this.o.bind(this)}).attach(this),(0,u.g)(this.Gd.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),t6(t,"aria-label","Volume");let{canSetVolume:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":iT(()=>!e())})}ja(){let{value:t}=this.$state;return Math.round(t())}ka(){let{value:t,max:e}=this.$state;return e0(t()/e()*100,2)+"%"}Gd(){let{muted:t,volume:e}=this.a.$state,i=t()?0:100*e();this.$state.value.set(i),this.dispatch("value-change",{detail:i})}bb(t){if(!t.trigger)return;let e=e0(t.detail/100,3);this.a.remote.changeVolume(e,t)}o(t){this.Jf(t)}ob(t){this.Jf(t)}constructor(){super(...arguments),this.Jf=en(this.bb.bind(this),25)}}i5.props={...iV.props,keyStep:5,shiftKeyMultiplier:2},i5.state=iL;class i4 extends u.Z{onSetup(){this.a=tb(),(0,u.a1)(iF,{default:"time",value:this.Li.bind(this),time:this.Mi.bind(this)}),this.setAttributes({"data-chapters":this.Ni.bind(this)}),this.setStyles({"--slider-progress":this.Oi.bind(this)}),(0,u.g)(this.kb.bind(this)),(0,u.g)(this.Pi.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),t6(t,"aria-label","Seek")}onConnect(t){(0,u.g)(this.Qi.bind(this)),tn(this.a.textTracks,"chapters",this.Kf.set)}Oi(){let{bufferedEnd:t,duration:e}=this.a.$state;return e0(100*Math.min(t()/Math.max(e(),1),1),3)+"%"}Ni(){var t;let{duration:e}=this.a.$state;return(null==(t=this.Kf())?void 0:t.cues.length)&&Number.isFinite(e())&&e()>0}Pi(){this.Wd=en(this.ra.bind(this),this.$props.seekingRequestThrottle())}kb(){let{currentTime:t}=this.a.$state,{value:e,dragging:i}=this.$state,s=this.Ri(t());(0,u.p)(i)||(e.set(s),this.dispatch("value-change",{detail:s}))}Qi(){let t=this.a.player.el,{Df:e}=(0,u.J)(iN);t&&e()&&(0,u.x)(t,"data-preview",this.$state.active())}ra(t,e){this.a.remote.seeking(t,e)}Si(t,e,i){this.Wd.cancel();let{live:s}=this.a.$state;if(s()&&e>=99)return void this.a.remote.seekToLiveEdge(i);this.a.remote.seek(t,i)}Rd(t){let{pauseWhileDragging:e}=this.$props;if(e()){let{paused:e}=this.a.$state;this.Xd=!e(),this.a.remote.pause(t)}}ob(t){this.Wd(this.Ub(t.detail),t)}Fc(t){let e=t.detail;this.Si(this.Ub(e),e,t);let{pauseWhileDragging:i}=this.$props;i()&&this.Xd&&(this.a.remote.play(t),this.Xd=!1)}o(t){let{dragging:e}=this.$state;!e()&&t.trigger&&this.Fc(t)}La(){let t=this.$props.step()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Qb(){let t=this.$props.keyStep()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Pb(t){return e0(t,3)}L(){let{canSeek:t}=this.a.$state;return this.$props.disabled()||!t()}ja(){let{value:t}=this.$state;return Math.round(t())}ka(){let t=this.Ub(this.$state.value()),{duration:e}=this.a.$state;return Number.isFinite(t)?"".concat(i_(t)," out of ").concat(i_(e())):"live"}Ub(t){let{duration:e}=this.a.$state;return e0(t/100*e(),5)}Ri(t){let{liveEdge:e,duration:i}=this.a.$state,s=Math.max(0,Math.min(1,e()?1:Math.min(t,i())/i()));return Number.isNaN(s)?0:Number.isFinite(s)?100*s:100}Li(t){let e=this.Ub(t),{live:i,duration:s}=this.a.$state;return Number.isFinite(e)?(i()?e-s():e).toFixed(0):"LIVE"}Mi(t,e){let i=this.Ub(t),{live:s,duration:a}=this.a.$state,n=s()?i-a():i;return Number.isFinite(i)?"".concat(n<0?"-":"").concat(iX(Math.abs(n),e)):"LIVE"}constructor(){super(),this.Kf=(0,u.s)(null),this.Xd=!1;let{noSwipeGesture:t}=this.$props;new iV({oi:()=>!t(),La:this.La.bind(this),Qb:this.Qb.bind(this),L:this.L.bind(this),Pb:this.Pb,ja:this.ja.bind(this),ka:this.ka.bind(this),Rd:this.Rd.bind(this),ob:this.ob.bind(this),Fc:this.Fc.bind(this),o:this.o.bind(this)})}}i4.props={...iV.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100},i4.state=iL;var i6=Object.defineProperty,i9=Object.getOwnPropertyDescriptor,i7=(t,e,i,s)=>{for(var a,n=s>1?void 0:s?i9(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&i6(e,i,n),n};class i8 extends u.Z{get cues(){return this.$()}get activeCue(){return this.$()[this.Vb()]||null}get activePointerCue(){return this.$()[this.Ic()]||null}onSetup(){this.a=tb(),this.Yd=(0,u.a7)(i4.state)}onAttach(t){tn(this.a.textTracks,"chapters",this.Lf.bind(this)),(0,u.g)(this.$d.bind(this))}onConnect(){(0,u.v)(()=>this.I.bind(this))}onDestroy(){this.Lf(null)}setRefs(t){var e;if(this.S=t,null==(e=this.Zd)||e.dispose(),1===this.S.length){let t=this.S[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.S.length>0&&(0,u.G)(()=>this.Ti(),this.Zd=(0,u.h)())}Lf(t){(0,u.p)(this.Hc)!==t&&(this.I(),this.Hc.set(t))}I(){var t;this.S=[],this.$.set([]),this.Vb.set(-1),this.Ic.set(-1),this._d=0,null==(t=this.Zd)||t.dispose()}Ti(){this.S.length&&((0,u.g)(this.Ui.bind(this)),(0,u.g)(this.Vi.bind(this)),(0,u.g)(this.Wi.bind(this)),(0,u.g)(this.Xi.bind(this)))}Ui(){let t=this.$();if(!t.length)return;let e,{clipStartTime:i,clipEndTime:s}=this.a.$state,a=i(),n=(s()||t[t.length-1].endTime)-a,r=100;for(let i=0;i<t.length;i++)if(e=t[i],this.S[i]){let s=i===t.length-1?r:e0((e.endTime-Math.max(a,e.startTime))/n*100,3);this.S[i].style.width=s+"%",r-=s}}Vi(){let{liveEdge:t,clipStartTime:e,duration:i}=this.a.$state,{fillPercent:s,value:a}=this.Yd,n=this.$(),r=t(),l=(0,u.p)(this.Vb),h=n[l],o=r?this.$.length-1:this.Mf(h&&h.startTime/i()*100<=(0,u.p)(a)?l:0,s());r||!h?this.ae(0,n.length,"100%"):o>l?this.ae(l,o,"100%"):o<l&&this.ae(o+1,l+1,"0%");let d=r?"100%":this.be(n[o],s(),e(),this.bl(n))+"%";this.Nf(this.S[o],d),this.Vb.set(o)}Wi(){let{pointing:t,pointerPercent:e}=this.Yd;if(!t())return void this.Ic.set(-1);let i=this.Mf(0,e());this.Ic.set(i)}ae(t,e,i){for(let s=t;s<e;s++)this.Nf(this.S[s],i)}Nf(t,e){t&&t.style.setProperty("--chapter-fill",e)}Mf(t,e){let i=0,s=this.$();if(0===e)return 0;if(100===e)return s.length-1;let{clipStartTime:a}=this.a.$state,n=a(),r=this.bl(s);for(let a=t;a<s.length;a++)if((i=this.be(s[a],e,n,r))>=0&&i<100)return a;return 0}Xi(){this.Yi(this.Zi())}_i(){let{bufferedEnd:t,duration:e}=this.a.$state;return 100*e0(Math.min(t()/Math.max(e(),1),1),3)}bl(t){var e;let{clipEndTime:i}=this.a.$state,s=i();return s>0?s:(null==(e=t[t.length-1])?void 0:e.endTime)||0}be(t,e,i,s){if(0===this.$().length)return 0;let a=s-i,n=Math.max(0,t.startTime-i),r=Math.min(s,t.endTime)-i,l=n/a,h=100*l,o=100*Math.min(1,l+(r-n)/a);return Math.max(0,e0(e>=o?100:(e-h)/(o-h)*100,3))}$i(t){let e=[],{clipStartTime:i,clipEndTime:s,duration:a}=this.a.$state,n=i(),r=s()||1/0,l=(t=t.filter(t=>t.startTime<=r&&t.endTime>=n))[0];l&&l.startTime>n&&e.push(new window.VTTCue(n,l.startTime,""));for(let i=0;i<t.length-1;i++){let s=t[i],a=t[i+1];if(e.push(s),a){let t=a.startTime-s.endTime;t>0&&e.push(new window.VTTCue(s.endTime,s.endTime+t,""))}}let h=t[t.length-1];if(h){e.push(h);let t=a();t>=0&&t-h.endTime>1&&e.push(new window.VTTCue(h.endTime,a(),""))}return e}$d(){if(!this.scope)return;let{disabled:t}=this.$props;if(t()){this.$.set([]),this.Vb.set(0),this._d=0;return}let e=this.Hc();if(e){let t=this.aj.bind(this);t(),(0,u.v)((0,u.l)(e,"add-cue",t)),(0,u.v)((0,u.l)(e,"remove-cue",t)),(0,u.g)(this.yl.bind(this))}return this.Ma=this.bj(),this.Ma&&(0,u.g)(this.cj.bind(this)),()=>{this.Ma&&(this.Ma.textContent="",this.Ma=null)}}yl(){this.a.$state.duration(),this.aj()}cj(){let t=this.activePointerCue||this.activeCue;this.Ma&&(this.Ma.textContent=(null==t?void 0:t.text)||"")}dj(){let t=this.el;for(;t&&"slider"!==t.getAttribute("role");)t=t.parentElement;return t}bj(){let t=this.dj();return t?t.querySelector('[data-part="chapter-title"]'):null}constructor(){super(...arguments),this.Ma=null,this.S=[],this.Hc=(0,u.s)(null),this.$=(0,u.s)([]),this.Vb=(0,u.s)(-1),this.Ic=(0,u.s)(-1),this._d=0,this.Yi=(0,u.d)(t=>{let e,i=this.$(),{clipStartTime:s}=this.a.$state,a=s(),n=this.bl(i);for(let s=this._d;s<this.S.length;s++){var r;if(e=this.be(i[s],t,a,n),null==(r=this.S[s])||r.style.setProperty("--chapter-progress",e+"%"),e<100){this._d=s;break}}}),this.Zi=(0,u.M)(this._i.bind(this)),this.aj=eo(()=>{let t=(0,u.p)(this.Hc);this.scope&&t&&t.cues.length&&(this.$.set(this.$i(t.cues)),this.Vb.set(0),this._d=0)},150,!0)}}i8.props={disabled:!1},i7([u.a2],i8.prototype,"cues",1),i7([u.a2],i8.prototype,"activeCue",1),i7([u.a2],i8.prototype,"activePointerCue",1),i7([u.a3],i8.prototype,"setRefs",1);let st=(0,u.Y)(),se=["a[href]","[tabindex]","input","select","button"].map(t=>"".concat(t,":not([aria-hidden='true'])")).join(","),si=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class ss{get s(){return this.ea}Of(t){return(0,u.l)(t,"focus",this.Mb.bind(this)),this.ya=t,(0,u.v)(()=>{this.ya=null}),this}Ac(){this.ya&&(this.fa(),(0,u.l)(this.ya,"keyup",this.Ab.bind(this)),(0,u.l)(this.ya,"keydown",this.Bb.bind(this)),(0,u.v)(()=>{this.la=0,this.ea=[]}))}fa(){this.la=0,this.ea=this.ej()}Pf(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Qf(),e=this.ea[t],i=this.j.fj();e&&i&&requestAnimationFrame(()=>{i.scrollTop=e.offsetTop-i.offsetHeight/2+e.offsetHeight/2})}rb(t){var e;this.la=t,null==(e=this.ea[t])||e.focus(),this.Pf(t)}Qf(){return this.ea.findIndex(t=>"true"===t.getAttribute("aria-checked"))}Mb(){this.fa(),setTimeout(()=>{let t=this.Qf();this.rb(t>=0?t:0)},100)}Ab(t){si.has(t.key)&&(t.stopPropagation(),t.preventDefault())}Bb(t){if(si.has(t.key))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.j.gj(t);break;case"Tab":this.rb(this.ce(t.shiftKey?-1:1));break;case"ArrowUp":this.rb(this.ce(-1));break;case"ArrowDown":this.rb(this.ce(1));break;case"Home":case"PageUp":this.rb(0);break;case"End":case"PageDown":this.rb(this.ea.length-1)}}ce(t){var e;let i=this.la;do i=(i+t+this.ea.length)%this.ea.length;while((null==(e=this.ea[i])?void 0:e.offsetParent)===null);return i}ej(){if(!this.ya)return[];let t=this.ya.querySelectorAll(se),e=[],i=t=>"menu"===t.getAttribute("role");for(let s of t)s instanceof HTMLElement&&null!==s.offsetParent&&t7(this.ya,s,i)&&e.push(s);return e}constructor(t){this.j=t,this.la=0,this.ya=null,this.ea=[]}}var sa=Object.defineProperty,sn=Object.getOwnPropertyDescriptor,sr=(t,e,i,s)=>{for(var a,n=s>1?void 0:s?sn(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&sa(e,i,n),n};let sl=0;class sh extends u.Z{get triggerElement(){return this.D()}get contentElement(){return this.v()}get isSubmenu(){return!!this.fe}onSetup(){this.a=tb();let t=++sl;this.de="media-menu-".concat(t),this.ee="media-menu-button-".concat(t),this.sb=new ss({fj:this.jj.bind(this),gj:this.close.bind(this)}),(0,u.a6)(st)&&(this.fe=(0,u.J)(st)),this.setAttributes({"data-open":this.M,"data-submenu":this.isSubmenu,"data-disabled":this.L.bind(this)}),(0,u.a1)(st,{kj:this.D,M:this.M,Xb:(0,u.s)(""),Na:this.Na.bind(this),ge:this.ge.bind(this),he:this.he.bind(this),ie:this.ie.bind(this),je:this.je.bind(this),ke:this.ke.bind(this)})}onAttach(t){t.style.setProperty("display","contents"),this.sb.Of(t)}onConnect(t){if((0,u.g)(this.lj.bind(this)),this.isSubmenu){var e;null==(e=this.fe)||e.ke(this)}}onDestroy(){this.D.set(null),this.v.set(null),this.Jc=null}lj(){let t=this.mj();this.isSubmenu||this.P(),this.Sf(t),t&&((0,u.g)(()=>{let{height:t}=this.a.$state,e=this.v();e&&(0,u.e)(e,"--player-height",t()+"px")}),this.sb.Ac(),this.listen("pointerup",this.nj.bind(this)),(0,u.l)(window,"pointerup",this.oj.bind(this)))}ge(t){let e=t.el,i=this.isSubmenu,s=iT(this.L.bind(this));t6(e,"tabindex",i?"-1":"0"),t6(e,"role",i?"menuitem":"button"),(0,u.x)(e,"id",this.ee),(0,u.x)(e,"aria-haspopup","menu"),(0,u.x)(e,"aria-expanded","false"),(0,u.x)(e,"data-submenu",this.isSubmenu),this.isSubmenu||this.Tf(e);let a=()=>{(0,u.x)(e,"data-open",this.M()),(0,u.x)(e,"aria-disabled",s())};M?a():(0,u.g)(a),this.D.set(e),(0,u.v)(()=>{this.D.set(null)})}he(t){let e=t.el;e.style.setProperty("display","none"),(0,u.x)(e,"id",this.de),t6(e,"role","menu"),t6(e,"tabindex","-1"),(0,u.x)(e,"data-submenu",this.isSubmenu),this.v.set(e),(0,u.v)(()=>this.v.set(null));let i=()=>(0,u.x)(e,"data-open",this.M());if(M?i():(0,u.g)(i),this.sb.Of(e),this.Sf(!1),!this.isSubmenu){let e=this.Im.bind(this);t.listen("transitionstart",e),t.listen("transitionend",e),t.listen("animationend",this.P),t.listen("vds-menu-resize",this.P)}}ie(t){this.Jc=t}Tf(t){(0,u.l)(t,"click",t=>t.stopPropagation()),(0,u.l)(t,"pointerup",t=>t.stopPropagation())}Sf(t){let e=(0,u.p)(this.v);e&&(0,u.x)(e,"aria-hidden",(0,u.a4)(!t))}je(t){this.Rf.set(t)}ij(t,e){var i,s,a,n,r,l;if(null==e||e.stopPropagation(),this.M()===t)return;if(this.L()){t&&this.Kc.hide(e);return}null==(i=this.el)||i.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let h=this.D(),o=this.v();if(h&&((0,u.x)(h,"aria-controls",t&&this.de),(0,u.x)(h,"aria-expanded",(0,u.a4)(t))),o&&(0,u.x)(o,"aria-labelledby",t&&this.ee),this.M.set(t),this.pj(e),(0,u.y)(),(0,u.E)(e))for(let e of(t?null==o||o.focus():null==h||h.focus(),[this.el,o]))e&&e.setAttribute("data-keyboard","");else for(let t of[this.el,o])t&&t.removeAttribute("data-keyboard");this.dispatch(t?"open":"close",{trigger:e}),t?(this.isSubmenu||this.a.activeMenu===this||(null==(n=this.a.activeMenu)||n.close(e),this.a.activeMenu=this),null==(a=this.Jc)||null==(s=a.le)||s.call(a,e)):(this.isSubmenu?setTimeout(()=>{for(let t of this.Wb)t.close(e)},300):this.a.activeMenu=null,null==(l=this.Jc)||null==(r=l.Uj)||r.call(l,e)),t&&!(0,u.E)(e)&&requestAnimationFrame(()=>{this.sb.fa(),setTimeout(()=>{this.sb.Pf()},100)})}mj(){return!this.L()&&this.M()}L(){return this.Gc()||this.Rf()}Na(t){this.Gc.set(t)}nj(t){t.stopPropagation()}oj(t){var e;if(!(!(t.target instanceof Node)||(null==(e=this.v())?void 0:e.contains(t.target))))if(this.isSubmenu)return setTimeout(this.close.bind(this,t),800);else this.close(t)}hj(){var t;let e=null==(t=this.el)?void 0:t.querySelector('[data-part="close-target"]');return this.el&&e&&t7(this.el,e,t=>"menu"===t.getAttribute("role"))?e:null}jj(){if(!this.isSubmenu)return(0,u.p)(this.v)||null;{let t=this.el;for(;t&&"media-menu"!==t.tagName&&t.hasAttribute("data-submenu");)t=t.parentNode;return t}}pj(t){this.isSubmenu||(this.M()?this.a.remote.pauseControls(t):this.a.remote.resumeControls(t))}ke(t){this.Wb.add(t),(0,u.l)(t,"open",this.qj),(0,u.l)(t,"close",this.rj),(0,u.v)(this.sj)}tj(t){this.Wb.delete(t)}uj(t){if(this.isSubmenu){var e;null==(e=this.triggerElement)||e.setAttribute("aria-hidden","true")}for(let e of this.Wb)if(e!==t.target)for(let t of[e.el,e.triggerElement])null==t||t.setAttribute("aria-hidden","true")}vj(){if(this.isSubmenu){var t;null==(t=this.triggerElement)||t.setAttribute("aria-hidden","false")}for(let t of this.Wb)for(let e of[t.el,t.triggerElement])null==e||e.setAttribute("aria-hidden","false")}Im(t){let e=this.v();if(e&&"height"===t.propertyName){let i="transitionstart"===t.type;(0,u.x)(e,"data-resizing",i)}}open(t){(0,u.p)(this.M)||(this.Kc.show(t),(0,u.y)())}close(t){(0,u.p)(this.M)&&(this.Kc.hide(t),(0,u.y)())}constructor(){super(),this.M=(0,u.s)(!1),this.Gc=(0,u.s)(!1),this.D=(0,u.s)(null),this.v=(0,u.s)(null),this.Rf=(0,u.s)(!1),this.Wb=new Set,this.Jc=null,this.sj=this.tj.bind(this),this.qj=this.uj.bind(this),this.rj=this.vj.bind(this),this.P=(0,u.d)(()=>{let t=(0,u.p)(this.v);if(!t||M)return;let e=0,i=getComputedStyle(t),s=[...t.children];for(let t of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])e+=parseFloat(i[t])||0;for(let t of s)if(t instanceof HTMLElement&&"contents"===t.style.display)s.push(...t.children);else if(3===t.nodeType)e+=parseFloat(getComputedStyle(t).fontSize);else if(t instanceof HTMLElement){let i=getComputedStyle(t);if("none"===i.display)continue;e+=t.offsetHeight+(parseFloat(i.marginTop)||0)+(parseFloat(i.marginBottom)||0)}(0,u.e)(t,"--menu-height",e+"px")});let{showDelay:t}=this.$props;this.Kc=new ip({D:this.D,v:this.v,zf:t,Ac:(t,e,i)=>{t8(t,t=>{this.M()?i(t):e(t)});let s=this.hj();s&&t8(s,t=>{t.stopPropagation(),i(t)})},C:this.ij.bind(this)})}}sh.props={showDelay:0},sr([u.a2],sh.prototype,"triggerElement",1),sr([u.a2],sh.prototype,"contentElement",1),sr([u.a2],sh.prototype,"isSubmenu",1),sr([u.a3],sh.prototype,"open",1),sr([u.a3],sh.prototype,"close",1);var so=Object.defineProperty,su=Object.getOwnPropertyDescriptor;class sd extends u.Z{get expanded(){var t,e;return null!=(e=null==(t=this.l)?void 0:t.M())&&e}onSetup(){this.l=(0,u.J)(st)}onAttach(t){this.l.ge(this),(0,u.g)(this.Rb.bind(this)),t6(t,"type","button")}onConnect(t){(0,u.g)(this.$m.bind(this)),this.wf();let e=new MutationObserver(this.wf.bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),(0,u.v)(()=>e.disconnect()),t8(t,t=>{this.dispatch("select",{trigger:t})})}Rb(){this.l.je(this.$props.disabled())}$m(){let t=this._m();t&&(0,u.g)(()=>{let e=this.l.Xb();e&&(t.textContent=e)})}wf(){var t;let e=null==(t=this.el)?void 0:t.querySelector('[data-part="hint"]');this._m.set(null!=e?e:null)}constructor(){super(),this._m=(0,u.s)(null),new e5}}sd.props={disabled:!1},((t,e,i,s)=>{for(var a,n=s>1?void 0:s?su(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&so(e,i,n)})([u.a2],sd.prototype,"expanded",1);class sc extends sd{}class sp extends u.Z{onSetup(){this.a=tb(),(0,u.a1)(sg,{Ka:this.wj.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){var t;null==(t=this.B)||t.remove(),this.B=null}wj(t){this.Uf(!1),this.B=t,ee(()=>{ee(()=>{this.connectScope&&(0,u.g)(this.Rb.bind(this))})})}Rb(){let{fullscreen:t}=this.a.$state,{disabled:e}=this.$props,i=e();this.Uf("fullscreen"===i?!t():!i)}Uf(t){if(!this.B)return;let e=this.xj(this.$props.container());if(!e)return;let i=this.B.parentElement===e;if((0,u.x)(this.B,"data-portal",t),t)i||(this.B.remove(),e.append(this.B));else if(i&&this.B.parentElement===e){var s;this.B.remove(),null==(s=this.el)||s.append(this.B)}}xj(t){return t instanceof HTMLElement?t:t?document.querySelector(t):document.body}constructor(){super(...arguments),this.B=null}}sp.props={container:null,disabled:!1};let sg=(0,u.Y)();class sf extends u.Z{onAttach(t){if(this.l=(0,u.J)(st),this.l.he(this),(0,u.a6)(sg)){let e=(0,u.J)(sg);e&&((0,u.a1)(sg,null),e.Ka(t),(0,u.v)(()=>e.Ka(null)))}}onConnect(t){(0,u.g)(this.Od.bind(this))}Od(){if(!this.el)return;let t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:e,alignOffset:i}=this.$props;return ei(this.el,this.Dc(),t,{offsetVarName:"media-menu",xOffset:i(),yOffset:e()})}this.el.removeAttribute("style"),this.el.style.display="none"}Dc(){return this.l.kj()}constructor(){super(),new e5;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}}sf.props={placement:null,offset:0,alignOffset:0};let sm=(0,u.Y)();class sb extends u.V{get yj(){return Array.from(this.tb).map(t=>t.ma())}get value(){return this.ma()}set value(t){this.C(t)}onSetup(){(0,u.a1)(sm,{add:this.zj.bind(this),remove:this.Aj.bind(this)})}onAttach(t){(0,u.a6)(st)||t6(t,"role","radiogroup"),this.setAttributes({value:this.ma})}onDestroy(){this.tb.clear()}zj(t){this.tb.has(t)||(this.tb.add(t),t.Lc=this.Bj,t.Yb(t.ma()===this.ma()))}Aj(t){t.Lc=null,this.tb.delete(t)}C(t,e){var i;let s=(0,u.p)(this.ma);if(!t||t===s)return;let a=this.Vf(s),n=this.Vf(t);null==a||a.Yb(!1,e),null==n||n.Yb(!0,e),this.ma.set(t),null==(i=this.o)||i.call(this,t,e)}Vf(t){for(let e of this.tb)if(t===(0,u.p)(e.ma))return e;return null}constructor(){super(...arguments),this.tb=new Set,this.ma=(0,u.s)(""),this.d=null,this.Bj=this.C.bind(this)}}var sv=Object.defineProperty,sy=Object.getOwnPropertyDescriptor,sw=(t,e,i,s)=>{for(var a,n=s>1?void 0:s?sy(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&sv(e,i,n),n};class s$ extends u.Z{get values(){return this.d.yj}get value(){return this.d.value}set value(t){this.d.value=t}onSetup(){M?this.E():(0,u.g)(this.E.bind(this))}E(){this.d.value=this.$props.value()}o(t,e){let i=this.createEvent("change",{detail:t,trigger:e});this.dispatch(i)}constructor(){super(),this.d=new sb,this.d.o=this.o.bind(this)}}s$.props={value:""},sw([u.a2],s$.prototype,"values",1),sw([u.a2],s$.prototype,"value",1);var sk=Object.defineProperty,sx=Object.getOwnPropertyDescriptor;class sT extends u.Z{get checked(){return this.Oa()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.Oa,"aria-checked":iT(this.Oa)})}onAttach(t){let e=(0,u.a6)(st);t6(t,"tabindex",e?"-1":"0"),t6(t,"role",e?"menuitemradio":"radio"),(0,u.g)(this.E.bind(this))}onConnect(t){this.Cj(),t8(t,this.z.bind(this)),(0,u.v)(this.za.bind(this))}za(){(0,u.G)(()=>{(0,u.J)(sm).remove(this.d)},this.connectScope)}Cj(){(0,u.J)(sm).add(this.d)}E(){let{value:t}=this.$props,e=t();if((0,u.p)(this.Oa)){var i,s;null==(i=(s=this.d).Lc)||i.call(s,e)}}z(t){var e,i;(0,u.p)(this.Oa)||(this.C(!0,t),this.Dj(t),null==(e=(i=this.d).Lc)||e.call(i,(0,u.p)(this.$props.value),t))}Yb(t,e){(0,u.p)(this.Oa)!==t&&this.C(t,e)}C(t,e){this.Oa.set(t),this.dispatch("change",{detail:t,trigger:e})}Dj(t){this.dispatch("select",{trigger:t})}constructor(){super(),this.Oa=(0,u.s)(!1),this.d={ma:this.$props.value,Yb:this.Yb.bind(this),Lc:null},new e5}}sT.props={value:""},((t,e,i,s)=>{for(var a,n=s>1?void 0:s?sx(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&sk(e,i,n)})([u.a2],sT.prototype,"checked",1);var sP=Object.defineProperty,sS=Object.getOwnPropertyDescriptor,sE=(t,e,i,s)=>{for(var a,n=s>1?void 0:s?sS(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&sP(e,i,n),n};class sj extends u.Z{get value(){return this.d.value}get disabled(){var t;return!(null==(t=this.K())?void 0:t.length)}onSetup(){this.a=tb(),(0,u.a6)(st)&&(this.l=(0,u.J)(st));let{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){var e;null==(e=this.l)||e.ie({le:this.le.bind(this)})}getOptions(){let{clipStartTime:t,clipEndTime:e}=this.a.$state,i=t(),s=e()||1/0;return this.K().map((t,e)=>({cue:t,value:e.toString(),label:t.text,startTime:iX(Math.max(0,t.startTime-i)),duration:i_(Math.min(s,t.endTime)-Math.max(i,t.startTime))}))}le(){(0,u.p)(()=>this.kb())}onConnect(t){(0,u.g)(this.E.bind(this)),(0,u.g)(this.kb.bind(this)),(0,u.g)(this.na.bind(this)),(0,u.g)(this.Hk.bind(this)),tn(this.a.textTracks,"chapters",this.A.set)}Hk(){let t=this.A();if(!t)return;let e=this.aj.bind(this,t);return e(),(0,u.l)(t,"add-cue",e),(0,u.l)(t,"remove-cue",e),()=>{this.K.set([])}}aj(t){let{clipStartTime:e,clipEndTime:i}=this.a.$state,s=e(),a=i()||1/0;this.K.set([...t.cues].filter(t=>t.startTime<=a&&t.endTime>=s))}E(){this.d.value=this.oa()}kb(){var t;if(!(null==(t=this.l)?void 0:t.M()))return;if(!this.A())return void this.la.set(-1);let{realCurrentTime:e,clipStartTime:i,clipEndTime:s}=this.a.$state,a=i(),n=s()||1/0,r=e(),l=this.K().findIndex(t=>ta(t,r));if(this.la.set(l),l>=0){let t=this.K()[l],e=this.el.querySelector("[aria-checked='true']"),i=Math.max(a,t.startTime),s=Math.min(n,t.endTime)-i,h=Math.max(0,r-i)/s*100;e&&(0,u.e)(e,"--progress",e0(h,3)+"%")}}na(){var t;null==(t=this.l)||t.Na(this.disabled)}oa(){return this.la().toString()}o(t,e){if(this.disabled||!e)return;let i=+t,s=this.K(),{clipStartTime:a}=this.a.$state;(0,u.c)(i)&&(null==s?void 0:s[i])&&(this.la.set(i),this.a.remote.seek(s[i].startTime-a(),e),this.dispatch("change",{detail:s[i],trigger:e}))}constructor(){super(),this.la=(0,u.s)(0),this.A=(0,u.s)(null),this.K=(0,u.s)([]),this.d=new sb,this.d.o=this.o.bind(this)}}sj.props={thumbnails:null},sE([u.a2],sj.prototype,"value",1),sE([u.a2],sj.prototype,"disabled",1),sE([u.a3],sj.prototype,"getOptions",1);var sA=Object.defineProperty,sC=Object.getOwnPropertyDescriptor,sM=(t,e,i,s)=>{for(var a,n=s>1?void 0:s?sC(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&sA(e,i,n),n};class sq extends u.Z{get value(){return this.d.value}get disabled(){let{audioTracks:t}=this.a.$state;return t().length<=1}onSetup(){this.a=tb(),(0,u.a6)(st)&&(this.l=(0,u.J)(st))}onConnect(t){(0,u.g)(this.E.bind(this)),(0,u.g)(this.na.bind(this)),(0,u.g)(this.Pa.bind(this))}getOptions(){let{audioTracks:t}=this.a.$state;return t().map(t=>({track:t,label:t.label,value:t.label.toLowerCase()}))}E(){this.d.value=this.oa()}Pa(){var t,e;let{emptyLabel:i}=this.$props,{audioTrack:s}=this.a.$state,a=s();null==(t=this.l)||t.Xb.set(null!=(e=null==a?void 0:a.label)?e:i())}na(){var t;null==(t=this.l)||t.Na(this.disabled)}oa(){let{audioTrack:t}=this.a.$state,e=t();return e?e.label.toLowerCase():""}o(t,e){if(this.disabled)return;let i=this.a.audioTracks.toArray().findIndex(e=>e.label.toLowerCase()===t);if(i>=0){let t=this.a.audioTracks[i];this.a.remote.changeAudioTrack(i,e),this.dispatch("change",{detail:t,trigger:e})}}constructor(){super(),this.d=new sb,this.d.o=this.o.bind(this)}}sq.props={emptyLabel:"Default"},sM([u.a2],sq.prototype,"value",1),sM([u.a2],sq.prototype,"disabled",1),sM([u.a3],sq.prototype,"getOptions",1);var sO=Object.defineProperty,sL=Object.getOwnPropertyDescriptor,sD=(t,e,i,s)=>{for(var a,n=s>1?void 0:s?sL(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&sO(e,i,n),n};class sI extends u.Z{get value(){return this.d.value}get disabled(){let{hasCaptions:t}=this.a.$state;return!t()}onSetup(){this.a=tb(),(0,u.a6)(st)&&(this.l=(0,u.J)(st))}onConnect(t){var e;null==(e=super.onConnect)||e.call(this,t),(0,u.g)(this.E.bind(this)),(0,u.g)(this.na.bind(this)),(0,u.g)(this.Pa.bind(this))}getOptions(){let{offLabel:t}=this.$props,{textTracks:e}=this.a.$state;return[{value:"off",label:t},...e().filter(th).map(t=>({track:t,label:t.label,value:this.Nk(t)}))]}E(){this.d.value=this.oa()}Pa(){var t;let{offLabel:e}=this.$props,{textTrack:i}=this.a.$state,s=i();null==(t=this.l)||t.Xb.set(s&&th(s)&&"showing"===s.mode?s.label:e())}na(){var t;null==(t=this.l)||t.Na(this.disabled)}oa(){let{textTrack:t}=this.a.$state,e=t();return e&&th(e)&&"showing"===e.mode?this.Nk(e):"off"}o(t,e){if(this.disabled)return;if("off"===t){let t=this.a.textTracks.selected;if(t){let i=this.a.textTracks.toArray().indexOf(t);this.a.remote.changeTextTrackMode(i,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}let i=this.a.textTracks.toArray().findIndex(e=>this.Nk(e)===t);if(i>=0){let t=this.a.textTracks[i];this.a.remote.changeTextTrackMode(i,"showing",e),this.dispatch("change",{detail:t,trigger:e})}}Nk(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}constructor(){super(),this.d=new sb,this.d.o=this.o.bind(this)}}sI.props={offLabel:"Off"},sD([u.a2],sI.prototype,"value",1),sD([u.a2],sI.prototype,"disabled",1),sD([u.a3],sI.prototype,"getOptions",1);var sR=Object.defineProperty,sF=Object.getOwnPropertyDescriptor,sN=(t,e,i,s)=>{for(var a,n=s>1?void 0:s?sF(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&sR(e,i,n),n};class sV extends u.Z{get value(){return this.d.value}get disabled(){let{rates:t}=this.$props,{canSetPlaybackRate:e}=this.a.$state;return!e()||0===t().length}onSetup(){this.a=tb(),(0,u.a6)(st)&&(this.l=(0,u.J)(st))}onConnect(t){(0,u.g)(this.E.bind(this)),(0,u.g)(this.Pa.bind(this)),(0,u.g)(this.na.bind(this))}getOptions(){let{rates:t,normalLabel:e}=this.$props;return t().map(t=>({label:1===t?e:t+"\xd7",value:t.toString()}))}E(){this.d.value=this.oa()}Pa(){var t;let{normalLabel:e}=this.$props,{playbackRate:i}=this.a.$state,s=i();null==(t=this.l)||t.Xb.set(1===s?e():s+"\xd7")}na(){var t;null==(t=this.l)||t.Na(this.disabled)}oa(){let{playbackRate:t}=this.a.$state;return t().toString()}o(t,e){if(this.disabled)return;let i=+t;this.a.remote.changePlaybackRate(i,e),this.dispatch("change",{detail:i,trigger:e})}constructor(){super(),this.d=new sb,this.d.o=this.o.bind(this)}}sV.props={normalLabel:"Normal",rates:[.25,.5,.75,1,1.25,1.5,1.75,2]},sN([u.a2],sV.prototype,"value",1),sN([u.a2],sV.prototype,"disabled",1),sN([u.a3],sV.prototype,"getOptions",1);var sz=Object.defineProperty,sK=Object.getOwnPropertyDescriptor,sU=(t,e,i,s)=>{for(var a,n=s>1?void 0:s?sK(e,i):e,r=t.length-1;r>=0;r--)(a=t[r])&&(n=(s?a(e,i,n):a(n))||n);return s&&n&&sz(e,i,n),n};class sW extends u.Z{get value(){return this.d.value}get disabled(){let{canSetQuality:t,qualities:e}=this.a.$state;return!t()||0===e().length}onSetup(){this.a=tb(),(0,u.a6)(st)&&(this.l=(0,u.J)(st))}onConnect(t){(0,u.g)(this.E.bind(this)),(0,u.g)(this.na.bind(this)),(0,u.g)(this.Pa.bind(this))}getOptions(){let{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.Ej().map(t=>{let i=t.bitrate>=0?"".concat(e0(t.bitrate/1e6,2)," Mbps"):null;return{quality:t,label:t.height+"p",value:this.me(t),bitrate:()=>e()?null:i}})]}E(){this.d.value=this.oa()}Pa(){var t;let{autoLabel:e}=this.$props,{autoQuality:i,quality:s}=this.a.$state,a=s()?s().height+"p":"";null==(t=this.l)||t.Xb.set(i()?e()+(a?" (".concat(a,")"):""):a)}na(){var t;null==(t=this.l)||t.Na(this.disabled)}o(t,e){if(this.disabled)return;if("auto"===t){this.a.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}let{qualities:i}=this.a.$state,s=(0,u.p)(i).findIndex(e=>this.me(e)===t);if(s>=0){let t=(0,u.p)(i)[s];this.a.remote.changeQuality(s,e),this.dispatch("change",{detail:t,trigger:e})}}oa(){let{quality:t,autoQuality:e}=this.a.$state;if(e())return"auto";let i=t();return i?this.me(i):"auto"}me(t){return t.height+"_"+t.bitrate}constructor(){super(),this.Ej=(0,u.M)(()=>{let{qualities:t}=this.a.$state;return[...t()].sort((t,e)=>e.height===t.height?e.bitrate-t.bitrate:e.height-t.height)}),this.d=new sb,this.d.o=this.o.bind(this)}}sW.props={autoLabel:"Auto",hideBitrate:!1},sU([u.a2],sW.prototype,"value",1),sU([u.a2],sW.prototype,"disabled",1),sU([u.a3],sW.prototype,"getOptions",1);class sB extends u.Z{onSetup(){this.a=tb();let{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){var e;this.i=null==(e=this.a.player.el)?void 0:e.querySelector("[data-media-provider]"),(0,u.g)(this.Fj.bind(this))}Fj(){let t=this.$props.event(),e=this.$props.disabled();this.i&&t&&!e&&(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),("pointerup"===t||"pointerdown"===t)&&"coarse"===this.a.$state.pointer()&&(t="pointerup"===t?"touchend":"touchstart"),(0,u.l)(this.i,t,this.Gj.bind(this),{passive:!1}))}Gj(t){if(this.$props.disabled()||(0,u.R)(t)&&(0!==t.button||this.a.activeMenu)||(0,u._)(t)&&this.a.activeMenu||et(t)||!this.Hj(t))return;t.MEDIA_GESTURE=!0,t.preventDefault();let e=(0,u.p)(this.$props.event);if(null==e?void 0:e.startsWith("dbl")){if(1===this.Qa){queueMicrotask(()=>this.Xf(t)),clearTimeout(this.Wf),this.Qa=0;return}}else 0===this.Qa&&setTimeout(()=>{1===this.Qa&&this.Xf(t)},250);0===this.Qa&&(this.Wf=window.setTimeout(()=>{this.Qa=0},275)),this.Qa++}Xf(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.Ij()&&this.Jj((0,u.p)(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}Hj(t){if(!this.el)return!1;if((0,u.R)(t)||(0,u.a8)(t)||(0,u._)(t)){var e,i,s;let a=(0,u._)(t)?null!=(e=t.changedTouches[0])?e:t.touches[0]:void 0,n=null!=(i=null==a?void 0:a.clientX)?i:t.clientX,r=null!=(s=null==a?void 0:a.clientY)?s:t.clientY,l=this.el.getBoundingClientRect(),h=r>=l.top&&r<=l.bottom&&n>=l.left&&n<=l.right;return t.type.includes("leave")?!h:h}return!0}Ij(){return Array.from(this.a.player.el.querySelectorAll("[data-media-gesture][data-triggered]")).sort((t,e)=>getComputedStyle(e).zIndex-getComputedStyle(t).zIndex)[0]===this.el}Jj(t,e){if(!t)return;let i=new u.D("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(i),i.defaultPrevented)return;let[s,a]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.a.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.a.remote.seek((0,u.p)(this.a.$state.currentTime)+(+a||0),e):this.a.remote[(0,u.a9)(s)](e),this.dispatch("trigger",{detail:t,trigger:e})}constructor(){super(...arguments),this.i=null,this.Qa=0,this.Wf=-1}}sB.props={disabled:!1,event:void 0,action:void 0};class sH{attach(){}canRender(){return!0}detach(){this.ta.empty(),this.T.reset(),this.A=null}changeTrack(t){t&&this.A!==t&&(this.ta.empty(),t.readyState<2?(this.T.reset(),this.ta.add((0,u.l)(t,"load",()=>this.Yf(t),{once:!0}))):this.Yf(t),this.ta.add((0,u.l)(t,"add-cue",t=>{this.T.addCue(t.detail)}),(0,u.l)(t,"remove-cue",t=>{this.T.removeCue(t.detail)})),this.A=t)}Yf(t){this.T.changeTrack({cues:[...t.cues],regions:[...t.regions]})}constructor(t){this.T=t,this.priority=10,this.A=null,this.ta=(0,u.f)()}}class sZ extends u.Z{onSetup(){this.a=tb(),this.setAttributes({"aria-hidden":iT(this.mb.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){if(this.T)return void(0,u.g)(this.Zf.bind(this));i.e(943).then(i.bind(i,90943)).then(e=>{this.connectScope&&(0,u.G)(()=>{this.X=e;let{CaptionsRenderer:i}=this.X;this.T=new i(t),this.Ra=new sH(this.T),(0,u.g)(this.Zf.bind(this))},this.connectScope)})}onDestroy(){var t;this.Ra&&(this.Ra.detach(),this.a.textRenderers.remove(this.Ra)),null==(t=this.T)||t.destroy()}mb(){let{textTrack:t,remotePlaybackState:e}=this.a.$state,i=t();return this.a.$iosControls()||"connected"===e()||!i||!th(i)}Zf(){let{viewType:t}=this.a.$state;return"audio"===t()?this.Kj():this.Lj()}Kj(){return(0,u.g)(this.$d.bind(this)),()=>{this.el.textContent=""}}$d(){if(this.mb())return;let{textTrack:t}=this.a.$state;this._f(),(0,u.l)(t(),"cue-change",this._f.bind(this)),(0,u.g)(this.Mj.bind(this))}_f(){this.el.textContent="";let{realCurrentTime:t,textTrack:e}=this.a.$state,i=(0,u.p)(t),s=(0,u.p)(e).activeCues,{renderVTTCueString:a}=this.X;for(let t of s){let e=document.createElement("div");e.setAttribute("data-part","cue"),e.innerHTML=a(t,i),this.el.append(e)}}Mj(){let{realCurrentTime:t}=this.a.$state,{updateTimedVTTCueNodes:e}=this.X;e(this.el,t())}Lj(){return(0,u.g)(this.Nj.bind(this)),(0,u.g)(this.Oj.bind(this)),this.a.textRenderers.add(this.Ra),()=>{this.el.textContent="",this.Ra.detach(),this.a.textRenderers.remove(this.Ra)}}Nj(){this.T.dir=this.$props.textDir()}Oj(){if(this.mb())return;let{realCurrentTime:t}=this.a.$state;this.T.currentTime=t()}}sZ.props={textDir:"ltr"};class sQ extends u.Z{onSetup(){this.a=tb(),this.gd(),this.ll(),this.Ih(),this.pb()}onAttach(t){t.style.setProperty("pointer-events","none"),(0,u.g)(this.Vd.bind(this)),(0,u.g)(this.gd.bind(this)),(0,u.g)(this.ll.bind(this)),(0,u.g)(this.Ih.bind(this)),(0,u.g)(this.pb.bind(this));let{started:e}=this.a.$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":this.Sb.bind(this),"data-error":this.xa.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){(0,u.g)(this.zl.bind(this)),(0,u.g)(this.Fa.bind(this))}xa(){let{error:t}=this.$state;return!(0,u.W)(t())}zl(){let{canLoadPoster:t,poster:e}=this.a.$state;!t()&&e()&&Q(e(),"preconnect")}pb(){let{src:t}=this.$props,{$iosControls:e}=this.a,{poster:i}=this.a.$state;this.el&&(0,u.x)(this.el,"display",e()?"none":null),this.$state.hidden.set(this.xa()||!(t()||i())||e())}Sb(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}Vd(){let t=this.$state.img();t&&((0,u.l)(t,"load",this.mc.bind(this)),(0,u.l)(t,"error",this.V.bind(this)))}gd(){let{poster:t}=this.a.$props,{canLoadPoster:e,providedPoster:i,inferredPoster:s}=this.a.$state,a=this.$props.src()||"",n=a||t()||s();this.Xm===i()&&i.set(a),this.$state.src.set(e()&&n.length?n:null),this.Xm=a}ll(){let{src:t}=this.$props,{alt:e}=this.$state,{poster:i}=this.a.$state;e.set(t()||i()?this.$props.alt():null)}Ih(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i,poster:s}=this.a.$state,a=null!==t()?t():i();e.set(/ytimg\.com|vimeo/.test(s()||"")?null:!0===a?"anonymous":a)}Fa(){let{loading:t,error:e}=this.$state,{canLoadPoster:i,poster:s}=this.a.$state;t.set(i()&&!!s()),e.set(null)}mc(){let{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}V(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}constructor(){super(...arguments),this.Xm=""}}sQ.props={src:null,alt:null,crossOrigin:null},sQ.state=new u.X({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});class sJ extends u.Z{onSetup(){this.a=tb(),this.bg();let{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.Om.bind(this)})}onAttach(t){t.hasAttribute("role")||(0,u.g)(this.Qm.bind(this)),(0,u.g)(this.bg.bind(this))}onConnect(t){(0,u.g)(()=>{if(!this.$props.toggle())return void this.Lm.set(null);t8(t,this.Rm.bind(this))})}bg(){let{type:t,padHours:e,padMinutes:i,showHours:s}=this.$props,a=this.Pj(t()),n=this.a.$state.duration(),r=this.Om();if(!Number.isFinite(a+n))return void this.$state.timeText.set("LIVE");let l=iX(r?Math.max(0,n-a):a,{padHrs:e(),padMins:i(),showHrs:s()});this.$state.timeText.set((r?"-":"")+l)}Qm(){if(!this.el)return;let{toggle:t}=this.$props;(0,u.x)(this.el,"role",t()?"timer":null),(0,u.x)(this.el,"tabindex",t()?0:null)}Pj(t){let{bufferedEnd:e,duration:i,currentTime:s}=this.a.$state;switch(t){case"buffered":return e();case"duration":return i();default:return s()}}Om(){return this.$props.remainder()&&!1!==this.Lm()}Rm(t){if(t.preventDefault(),null===this.Lm())return void this.Lm.set(!this.$props.remainder());this.Lm.set(t=>!t)}constructor(){super(...arguments),this.Lm=(0,u.s)(null)}}sJ.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1},sJ.state=new u.X({timeText:""});let sG=(0,u.Y)();class sY extends u.Z{onSetup(){this.a=tb(),(0,u.a1)(sG,{...this.$props,previewTime:(0,u.s)(0)})}}sY.props={clickToPlay:!0,clickToFullscreen:!0,controls:["play-large","play","progress","current-time","mute+volume","captions","settings","pip","airplay","fullscreen"],customIcons:!1,displayDuration:!1,download:null,markers:null,invertTime:!0,thumbnails:null,toggleTime:!0,translations:null,seekTime:10,speed:[.5,.75,1,1.25,1.5,1.75,2,4]};class sX extends ie{}class s_ extends iu{}class s0 extends id{}class s1 extends ic{}class s2 extends ix{}class s3 extends ij{}class s5 extends iA{}class s4 extends iO{}class s6 extends iC{}class s9 extends iM{}class s7 extends iE{}class s8 extends iP{}class at extends iS{}class ae extends iq{}class ai extends ib{}class as extends iv{}class aa extends iy{}class an extends iz{}class ar extends i4{}class al extends i5{}class ah extends iH{}class ao extends i2{}class au extends iJ{}class ad extends i3{}class ac extends i8{}class ap extends sh{}class ag extends sd{}class af extends sf{}class am extends sc{}class ab extends s${}class av extends sT{}class ay extends sZ{}class aw extends sB{}class a$ extends sQ{}class ak extends iB{}class ax extends sJ{}let aT=o.forwardRef((t,e)=>{let{children:i,...s}=t,a=o.Children.toArray(i),n=a.find(aE);if(n){let t=n.props.children,i=a.map(e=>e!==n?e:o.Children.count(t)>1?o.Children.only(null):o.isValidElement(t)?t.props.children:null);return o.createElement(aP,{...s,ref:e},o.isValidElement(t)?o.cloneElement(t,void 0,i):null)}return o.createElement(aP,{...s,ref:e},i)});aT.displayName="Slot";let aP=o.forwardRef((t,e)=>{let{children:i,...s}=t;return o.isValidElement(i)?o.cloneElement(i,{...function(t,e){let i={...e};for(let s in e){let a=t[s],n=e[s];/^on[A-Z]/.test(s)?a&&n?i[s]=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n(...e),a(...e)}:a&&(i[s]=a):"style"===s?i[s]={...a,...n}:"className"===s&&(i[s]=[a,n].filter(Boolean).join(" "))}return{...t,...i}}(s,i.props),ref:e?(0,u.C)(e,i.ref):i.ref}):o.Children.count(i)>1?o.Children.only(null):null});aP.displayName="SlotClone";let aS=t=>{let{children:e}=t;return o.createElement(o.Fragment,null,e)};function aE(t){return o.isValidElement(t)&&t.type===aS}let aj=["button","div","span","img","video","audio"].reduce((t,e)=>{let i=o.forwardRef((t,i)=>{let{asChild:s,...a}=t,n=s?aT:e;return o.createElement(n,{...a,ref:i})});return i.displayName="Primitive.".concat(e),{...t,[e]:i}},{});function aA(t){return(null==t?void 0:t.$$PROVIDER_TYPE)==="REMOTION"}function aC(t){return(null==t?void 0:t.type)==="video/remotion"}let aM=sX.state.record,aq=Object.keys(aM).reduce((t,e)=>({...t,[e]:()=>aM[e]}),{});function aO(t,e){var i;let s=(0,u.u)(to);return(0,u.a)(((null==e||null==(i=e.current)?void 0:i.$state)||s||aq)[t])}}}]);